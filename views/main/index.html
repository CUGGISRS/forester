<div class="flex column h100">
        <header id="secondMenu">
            <dl>
                <dd v-for="(item,index) in menus" @click="selectMenu(index)" :key="index" :class="{'selected': selected == index}">
                    <i class="icons" :class="item.clsName"></i>{{item.name}}
                </dd>
            </dl>
        </header>
        <section id="openlayerFrame" class="flex_1 ohidden relative">
            <div id="openlayerContent" class="w100 h100"></div>
            <div id="openlayerBtns" class="absolute"></div>
            <div id="mainPanel" class="panel"></div>
            <div id="assistPanel" class="panel"></div>
        </section>
    </div>
    <script>
        var Page = {};
        (function(){
            var nav2Vue = new Vue({
                el: '#secondMenu',
                data: {
                    menus: SECONDMENUS,
                    selected: -1
                },
                watch: {
                    selected: function(val) {
                        //离开时清除原有专题
                        Page.destroyed && (Page.destroyed(), Page.destroyed = null);
                        sessionStorage.setItem('_2_nav_selected_', val || 0);
                        //清除不同面板下副面板的选中项
                        sessionStorage.removeItem('_panel_nav_selected_');
                        this.fillContext();
                    }
                },
                mounted: function () {
                    this.selectMenu(0);
                },
                methods: {
                    selectMenu: function(idx) {
                        this.selected = idx;
                    },
                    fillContext: function() {
                        if (typeof Hly != 'undefined') {
                            var item = this.menus[this.selected || 0] || {};
                            $('#mainPanel').load(item.link + '?_=' + (+new Date())).fadeIn(400);
                        } else {
                            setTimeout(this.fillContext.bind(this));
                        }
                    }
                }
            });

            //选择二级菜单
            Page.chooseNav = function(idx){
                nav2Vue.selected = idx;
            }
            Page.showInfo = function () {
                Page.actions.selected = -1;
                $('#assistPanel').load('views/main/assist/info.html').fadeIn(400);
            }
            Page.showMain = function (bol) {
                if(bol == false) {
                    $('#assistPanel').fadeOut(400);
                } else {
                    Page.actions.selected = -1;
                    $('#assistPanel').load('views/main/assist/main.html').fadeIn(400);
                }
            }
        })();
        $(document).ready(function(){
            $('#openlayerBtns').load('views/actions.html');
            $('#openlayerFrame .panel').on('click', '.close', function(){
                $(this).closest('.panel').fadeOut(400);
            });
            (function initMap(){
                if (typeof Hly != 'undefined') {
                    //地图初始化
                    GIS$.mapInit();
                    //地图数据刷新
                    GIS$.mapDataRefresh();
                    //点击事件挂接
                    GIS$.mapClickEvent();
                } else {
                    setTimeout(initMap);
                }
            })();
        });
    </script>
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/**
 * Cesium Navigation - https://github.com/alberto-acevedo/cesium-navigation
 *
 * The plugin is 100% based on open source libraries. The same license that applies to Cesiumjs and terriajs applies also to this plugin. Feel free to use it,  modify it, and improve it.
 */

/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * Knockout JavaScript library v3.4.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

/*!
 * Knockout ES5 plugin - https://github.com/SteveSanderson/knockout-es5
 * Copyright (c) Steve Sanderson
 * MIT license
 */

/*! WeakMap shim
 * (The MIT License)
 *
 * Copyright (c) 2012 Brandon Benvie <http://bbenvie.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
 * associated documentation files (the 'Software'), to deal in the Software without restriction,
 * including without limitation the rights to use, copy, modify, merge, publish, distribute,
 * sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included with all copies or
 * substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING
 * BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY  CLAIM,
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

/*! markdown-it-sanitizer 0.4.1 https://github.com/svbergerem/markdown-it-sanitizer @license MIT */

/*! markdown-it 6.0.0 https://github.com//markdown-it/markdown-it @license MIT */

/*! Hammer.JS - v2.0.6 - 2015-12-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2015 Jorik Tangelder;
 * Licensed under the  license */

/*
 Leaflet, a JavaScript library for mobile-friendly interactive maps. http://leafletjs.com
 (c) 2010-2013, Vladimir Agafonkin
 (c) 2010-2011, CloudMade
*/

// Copyright 2006 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2009 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2008 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2010 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2013 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2011 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2005 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2012 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2007 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2014 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2015 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright 2009 The Closure Library Authors.
// All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
// This file has been auto-generated by GenJsDeps, please do not edit.

/*!
 * Knockout JavaScript library v3.4.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

/**
 * @license
 * Knockout ES5 plugin - https://github.com/SteveSanderson/knockout-es5
 * Copyright (c) Steve Sanderson
 * MIT license
 */

/*=============================================================================
 Author:			Eric M. Barnard - @ericmbarnard
 License:		MIT (http://opensource.org/licenses/mit-license.php)

 Description:	Validation Library for KnockoutJS
 Version:		2.0.3
 ===============================================================================
 */

/**
 @license
 when.js - https://github.com/cujojs/when

 MIT License (c) copyright B Cavalier & J Hann

 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @version 1.7.1
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

/*! Sortable 1.3.0 - MIT | git://github.com/rubaxa/Sortable.git */

/**
 * contMap 3.1
 * @license
 * Copyright (c) 2017 大陆康腾科技有限公司所有
 */

!function(e,t){"function"==typeof define&&define.amd?define([],t):e.libGlobalName=t()}(this,function(){var goog={};this.goog=goog,goog.global=this,goog.global.CLOSURE_NO_DEPS=!0;var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function o(e,t){var o,n,i,r,s,a,l,c,u,g,h,d,p=t&&t.split("/"),f=m.map,v=f&&f["*"]||{};if(e){for(e=e.split("/"),s=e.length-1,m.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),"."===e[0].charAt(0)&&p&&(d=p.slice(0,p.length-1),e=d.concat(e)),u=0;u<e.length;u++)if(h=e[u],"."===h)e.splice(u,1),u-=1;else if(".."===h){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((p||v)&&f){for(o=e.split("/"),u=o.length;u>0;u-=1){if(n=o.slice(0,u).join("/"),p)for(g=p.length;g>0;g-=1)if(i=f[p.slice(0,g).join("/")],i&&(i=i[n])){r=i,a=u;break}if(r)break;!l&&v&&v[n]&&(l=v[n],c=u)}!r&&l&&(r=l,a=c),r&&(o.splice(0,a,r),e=o.join("/"))}return e}function n(t,o){return function(){var n=_.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),g.apply(e,n.concat([t,o]))}}function i(e){return function(t){return o(t,e)}}function r(e){return function(t){p[e]=t}}function s(o){if(t(f,o)){var n=f[o];delete f[o],v[o]=!0,u.apply(e,n)}if(!t(p,o)&&!t(v,o))throw new Error("No "+o);return p[o]}function a(e){var t,o=e?e.indexOf("!"):-1;return o>-1&&(t=e.substring(0,o),e=e.substring(o+1,e.length)),[t,e]}function l(e){return e?a(e):[]}function c(e){return function(){return m&&m.config&&m.config[e]||{}}}var u,g,h,d,p={},f={},m={},v={},y=Object.prototype.hasOwnProperty,_=[].slice,b=/\.js$/;h=function(e,t){var n,r=a(e),l=r[0],c=t[1];return e=r[1],l&&(l=o(l,c),n=s(l)),l?e=n&&n.normalize?n.normalize(e,i(c)):o(e,c):(e=o(e,c),r=a(e),l=r[0],e=r[1],l&&(n=s(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:n}},d={require:function(e){return n(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:c(e)}}},u=function(o,i,a,c){var u,g,m,y,_,b,w,S=[],C=typeof a;if(c=c||o,b=l(c),"undefined"===C||"function"===C){for(i=!i.length&&a.length?["require","exports","module"]:i,_=0;_<i.length;_+=1)if(y=h(i[_],b),g=y.f,"require"===g)S[_]=d.require(o);else if("exports"===g)S[_]=d.exports(o),w=!0;else if("module"===g)u=S[_]=d.module(o);else if(t(p,g)||t(f,g)||t(v,g))S[_]=s(g);else{if(!y.p)throw new Error(o+" missing "+g);y.p.load(y.n,n(c,!0),r(g),{}),S[_]=p[g]}m=a?a.apply(p[o],S):void 0,o&&(u&&u.exports!==e&&u.exports!==p[o]?p[o]=u.exports:m===e&&w||(p[o]=m))}else o&&(p[o]=a)},requirejs=require=g=function(t,o,n,i,r){if("string"==typeof t)return d[t]?d[t](o):s(h(t,l(o)).f);if(!t.splice){if(m=t,m.deps&&g(m.deps,m.callback),!o)return;o.splice?(t=o,o=n,n=null):t=e}return o=o||function(){},"function"==typeof n&&(n=i,i=r),i?u(e,t,o,n):setTimeout(function(){u(e,t,o,n)},4),g},g.config=function(e){return g(e)},requirejs._defined=p,define=function(e,o,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");o.splice||(n=o,o=[]),t(p,e)||t(f,e)||(f[e]=[e,o,n])},define.amd={jQuery:!0}}(),function(e,t){"use strict";"function"==typeof define&&define.amd&&define("navigation",[],t),Cesium.viewerCesiumNavigationMixin=t()}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this,function(){var e,t,o;return function(n){function i(e,t){return b.call(e,t)}function r(e,t){var o,n,i,r,s,a,l,c,u,g,h,d=t&&t.split("/"),p=y.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),s=e.length-1,y.nodeIdCompat&&S.test(e[s])&&(e[s]=e[s].replace(S,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if(h=e[u],"."===h)e.splice(u,1),u-=1;else if(".."===h){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||f)&&p){for(o=e.split("/"),u=o.length;u>0;u-=1){if(n=o.slice(0,u).join("/"),d)for(g=d.length;g>0;g-=1)if(i=p[d.slice(0,g).join("/")],i&&(i=i[n])){r=i,a=u;break}if(r)break;!l&&f&&f[n]&&(l=f[n],c=u)}!r&&l&&(r=l,a=c),r&&(o.splice(0,a,r),e=o.join("/"))}return e}function s(e,t){return function(){var o=w.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),d.apply(n,o.concat([e,t]))}}function a(e){return function(t){return r(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(i(v,e)){var t=v[e];delete v[e],_[e]=!0,h.apply(n,t)}if(!i(m,e)&&!i(_,e))throw new Error("No "+e);return m[e]}function u(e){var t,o=e?e.indexOf("!"):-1;return o>-1&&(t=e.substring(0,o),e=e.substring(o+1,e.length)),[t,e]}function g(e){return function(){return y&&y.config&&y.config[e]||{}}}var h,d,p,f,m={},v={},y={},_={},b=Object.prototype.hasOwnProperty,w=[].slice,S=/\.js$/;p=function(e,t){var o,n=u(e),i=n[0];return e=n[1],i&&(i=r(i,t),o=c(i)),i?e=o&&o.normalize?o.normalize(e,a(t)):r(e,t):(e=r(e,t),n=u(e),i=n[0],e=n[1],i&&(o=c(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:o}},f={require:function(e){return s(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:g(e)}}},h=function(e,t,o,r){var a,u,g,h,d,y,b=[],w=typeof o;if(r=r||e,"undefined"===w||"function"===w){for(t=!t.length&&o.length?["require","exports","module"]:t,d=0;d<t.length;d+=1)if(h=p(t[d],r),u=h.f,"require"===u)b[d]=f.require(e);else if("exports"===u)b[d]=f.exports(e),y=!0;else if("module"===u)a=b[d]=f.module(e);else if(i(m,u)||i(v,u)||i(_,u))b[d]=c(u);else{if(!h.p)throw new Error(e+" missing "+u);h.p.load(h.n,s(r,!0),l(u),{}),b[d]=m[u]}g=o?o.apply(m[e],b):void 0,e&&(a&&a.exports!==n&&a.exports!==m[e]?m[e]=a.exports:g===n&&y||(m[e]=g))}else e&&(m[e]=o)},e=t=d=function(e,t,o,i,r){if("string"==typeof e)return f[e]?f[e](t):c(p(e,t).f);if(!e.splice){if(y=e,y.deps&&d(y.deps,y.callback),!t)return;t.splice?(e=t,t=o,o=null):e=n}return t=t||function(){},"function"==typeof o&&(o=i,i=r),i?h(n,e,t,o):setTimeout(function(){h(n,e,t,o)},4),d},d.config=function(e){return d(e)},e._defined=m,o=function(e,t,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(o=t,t=[]),i(m,e)||i(v,e)||(v[e]=[e,t,o])},o.amd={jQuery:!0}}(),o("almond",function(){}),function(){!function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,r=t.jQuery,s=t.JSON;!function(e){"function"==typeof o&&o.amd?o("knockout",["exports","require"],e):e("object"==typeof exports&&"object"==typeof module?module.exports||exports:t.ko={})}(function(o,a){function l(e,t){return(null===e||typeof e in m)&&e===t}function c(t,o){var n;return function(){n||(n=f.a.setTimeout(function(){n=e,t()},o))}}function u(e,t){var o;return function(){clearTimeout(o),o=f.a.setTimeout(e,t)}}function g(e,t){t&&t!==v?"beforeChange"===t?this.Kb(e):this.Ha(e,t):this.Lb(e)}function h(e,t){null!==t&&t.k&&t.k()}function d(e,t){var o=this.Hc,n=o[S];n.R||(this.lb&&this.Ma[t]?(o.Pb(t,e,this.Ma[t]),this.Ma[t]=null,--this.lb):n.r[t]||o.Pb(t,e,n.s?{ia:e}:o.uc(e)))}function p(e,t,o,n){f.d[e]={init:function(e,i,r,s,a){var l,c;return f.m(function(){var r=f.a.c(i()),s=!o!=!r,u=!c;(u||t||s!==l)&&(u&&f.va.Aa()&&(c=f.a.ua(f.f.childNodes(e),!0)),s?(u||f.f.da(e,f.a.ua(c)),f.eb(n?n(a,r):a,e)):f.f.xa(e),l=s)},null,{i:e}),{controlsDescendantBindings:!0}}},f.h.ta[e]=!1,f.f.Z[e]=!0}var f="undefined"!=typeof o?o:{};f.b=function(e,t){for(var o=e.split("."),n=f,i=0;i<o.length-1;i++)n=n[o[i]];n[o[o.length-1]]=t},f.G=function(e,t,o){e[t]=o},f.version="3.4.0",f.b("version",f.version),f.options={deferUpdates:!1,useOnlyNativeEvents:!1},f.a=function(){function o(e,t){for(var o in e)e.hasOwnProperty(o)&&t(o,e[o])}function a(e,t){if(t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function l(e,t){return e.__proto__=t,e}function c(e,t,o,n){var i=e[t].match(v)||[];f.a.q(o.match(v),function(e){f.a.pa(i,e,n)}),e[t]=i.join(" ")}var u={__proto__:[]}instanceof Array,g="function"==typeof Symbol,h={},d={};h[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),o(h,function(e,t){if(t.length)for(var o=0,n=t.length;o<n;o++)d[t[o]]=e});var p={propertychange:!0},m=n&&function(){for(var t=3,o=n.createElement("div"),i=o.getElementsByTagName("i");o.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return 4<t?t:e}(),v=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(e,t){for(var o=0,n=e.length;o<n;o++)t(e[o],o)},o:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var o=0,n=e.length;o<n;o++)if(e[o]===t)return o;return-1},Sb:function(e,t,o){for(var n=0,i=e.length;n<i;n++)if(t.call(o,e[n],n))return e[n];return null},La:function(e,t){var o=f.a.o(e,t);0<o?e.splice(o,1):0===o&&e.shift()},Tb:function(e){e=e||[];for(var t=[],o=0,n=e.length;o<n;o++)0>f.a.o(t,e[o])&&t.push(e[o]);return t},fb:function(e,t){e=e||[];for(var o=[],n=0,i=e.length;n<i;n++)o.push(t(e[n],n));return o},Ka:function(e,t){e=e||[];for(var o=[],n=0,i=e.length;n<i;n++)t(e[n],n)&&o.push(e[n]);return o},ra:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var o=0,n=t.length;o<n;o++)e.push(t[o]);return e},pa:function(e,t,o){var n=f.a.o(f.a.zb(e),t);0>n?o&&e.push(t):o||e.splice(n,1)},ka:u,extend:a,Xa:l,Ya:u?l:a,D:o,Ca:function(e,t){if(!e)return e;var o,n={};for(o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o],o,e));return n},ob:function(e){for(;e.firstChild;)f.removeNode(e.firstChild)},jc:function(e){e=f.a.V(e);for(var t=(e[0]&&e[0].ownerDocument||n).createElement("div"),o=0,i=e.length;o<i;o++)t.appendChild(f.$(e[o]));return t},ua:function(e,t){for(var o=0,n=e.length,i=[];o<n;o++){var r=e[o].cloneNode(!0);i.push(t?f.$(r):r)}return i},da:function(e,t){if(f.a.ob(e),t)for(var o=0,n=t.length;o<n;o++)e.appendChild(t[o])},qc:function(e,t){var o=e.nodeType?[e]:e;if(0<o.length){for(var n=o[0],i=n.parentNode,r=0,s=t.length;r<s;r++)i.insertBefore(t[r],n);for(r=0,s=o.length;r<s;r++)f.removeNode(o[r])}},za:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var o=e[0],n=e[e.length-1];for(e.length=0;o!==n;)e.push(o),o=o.nextSibling;e.push(n)}}return e},sc:function(e,t){7>m?e.setAttribute("selected",t):e.selected=t},$a:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},Mc:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},nb:function(e){return f.a.Mc(e,e.ownerDocument.documentElement)},Qb:function(e){return!!f.a.Sb(e,f.a.nb)},A:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Wb:function(e){return f.onError?function(){try{return e.apply(this,arguments)}catch(e){throw f.onError&&f.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(f.a.Wb(e),t)},$b:function(e){setTimeout(function(){throw f.onError&&f.onError(e),e},0)},p:function(e,t,o){var n=f.a.Wb(o);if(o=m&&p[t],f.options.useOnlyNativeEvents||o||!r)if(o||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){n.call(e,t)},s="on"+t;e.attachEvent(s,i),f.a.F.oa(e,function(){e.detachEvent(s,i)})}else e.addEventListener(t,n,!1);else r(e).bind(t,n)},Da:function(e,o){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var i;if("input"===f.a.A(e)&&e.type&&"click"==o.toLowerCase()?(i=e.type,i="checkbox"==i||"radio"==i):i=!1,f.options.useOnlyNativeEvents||!r||i)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");i=n.createEvent(d[o]||"HTMLEvents"),i.initEvent(o,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else if(i&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+o)}else r(e).trigger(o)},c:function(e){return f.H(e)?e():e},zb:function(e){return f.H(e)?e.t():e},bb:function(e,t,o){var n;t&&("object"==typeof e.classList?(n=e.classList[o?"add":"remove"],f.a.q(t.match(v),function(t){n.call(e.classList,t)})):"string"==typeof e.className.baseVal?c(e.className,"baseVal",t,o):c(e,"className",t,o))},Za:function(t,o){var n=f.a.c(o);null!==n&&n!==e||(n="");var i=f.f.firstChild(t);!i||3!=i.nodeType||f.f.nextSibling(i)?f.f.da(t,[t.ownerDocument.createTextNode(n)]):i.data=n,f.a.Rc(t)},rc:function(e,t){if(e.name=t,7>=m)try{e.mergeAttributes(n.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},Rc:function(e){9<=m&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Nc:function(e){if(m){var t=e.style.width;e.style.width=0,e.style.width=t}},hd:function(e,t){e=f.a.c(e),t=f.a.c(t);for(var o=[],n=e;n<=t;n++)o.push(n);return o},V:function(e){for(var t=[],o=0,n=e.length;o<n;o++)t.push(e[o]);return t},Yb:function(e){return g?Symbol(e):e},rd:6===m,sd:7===m,C:m,ec:function(e,t){for(var o=f.a.V(e.getElementsByTagName("input")).concat(f.a.V(e.getElementsByTagName("textarea"))),n="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],r=o.length-1;0<=r;r--)n(o[r])&&i.push(o[r]);return i},ed:function(e){return"string"==typeof e&&(e=f.a.$a(e))?s&&s.parse?s.parse(e):new Function("return "+e)():null},Eb:function(e,t,o){if(!s||!s.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return s.stringify(f.a.c(e),t,o)},fd:function(e,t,i){i=i||{};var r=i.params||{},s=i.includeFields||this.cc,a=e;if("object"==typeof e&&"form"===f.a.A(e))for(var a=e.action,l=s.length-1;0<=l;l--)for(var c=f.a.ec(e,s[l]),u=c.length-1;0<=u;u--)r[c[u].name]=c[u].value;t=f.a.c(t);var g=n.createElement("form");g.style.display="none",g.action=a,g.method="post";for(var h in t)e=n.createElement("input"),e.type="hidden",e.name=h,e.value=f.a.Eb(f.a.c(t[h])),g.appendChild(e);o(r,function(e,t){var o=n.createElement("input");o.type="hidden",o.name=e,o.value=t,g.appendChild(o)}),n.body.appendChild(g),i.submitter?i.submitter(g):g.submit(),setTimeout(function(){g.parentNode.removeChild(g)},0)}}}(),f.b("utils",f.a),f.b("utils.arrayForEach",f.a.q),f.b("utils.arrayFirst",f.a.Sb),f.b("utils.arrayFilter",f.a.Ka),f.b("utils.arrayGetDistinctValues",f.a.Tb),f.b("utils.arrayIndexOf",f.a.o),f.b("utils.arrayMap",f.a.fb),f.b("utils.arrayPushAll",f.a.ra),f.b("utils.arrayRemoveItem",f.a.La),f.b("utils.extend",f.a.extend),f.b("utils.fieldsIncludedWithJsonPost",f.a.cc),f.b("utils.getFormFields",f.a.ec),f.b("utils.peekObservable",f.a.zb),f.b("utils.postJson",f.a.fd),f.b("utils.parseJson",f.a.ed),f.b("utils.registerEventHandler",f.a.p),f.b("utils.stringifyJson",f.a.Eb),f.b("utils.range",f.a.hd),f.b("utils.toggleDomNodeCssClass",f.a.bb),f.b("utils.triggerEvent",f.a.Da),f.b("utils.unwrapObservable",f.a.c),f.b("utils.objectForEach",f.a.D),f.b("utils.addOrRemoveItem",f.a.pa),f.b("utils.setTextContent",f.a.Za),f.b("unwrap",f.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var o=Array.prototype.slice.call(arguments,1);return function(){var n=o.slice(0);return n.push.apply(n,arguments),t.apply(e,n)}}),f.a.e=new function(){function t(t,r){var s=t[n];if(!s||"null"===s||!i[s]){if(!r)return e;s=t[n]="ko"+o++,i[s]={}}return i[s]}var o=0,n="__ko__"+(new Date).getTime(),i={};return{get:function(o,n){var i=t(o,!1);return i===e?e:i[n]},set:function(o,n,i){i===e&&t(o,!1)===e||(t(o,!0)[n]=i)},clear:function(e){var t=e[n];return!!t&&(delete i[t],e[n]=null,!0)},I:function(){return o++ +n}}},f.b("utils.domData",f.a.e),f.b("utils.domData.clear",f.a.e.clear),f.a.F=new function(){function t(t,o){var i=f.a.e.get(t,n);return i===e&&o&&(i=[],f.a.e.set(t,n,i)),i}function o(e){var n=t(e,!1);if(n)for(var n=n.slice(0),i=0;i<n.length;i++)n[i](e);if(f.a.e.clear(e),f.a.F.cleanExternalData(e),s[e.nodeType])for(n=e.firstChild;e=n;)n=e.nextSibling,8===e.nodeType&&o(e)}var n=f.a.e.I(),i={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{oa:function(e,o){if("function"!=typeof o)throw Error("Callback must be a function");t(e,!0).push(o)},pc:function(o,i){var r=t(o,!1);r&&(f.a.La(r,i),0==r.length&&f.a.e.set(o,n,e))},$:function(e){if(i[e.nodeType]&&(o(e),s[e.nodeType])){var t=[];f.a.ra(t,e.getElementsByTagName("*"));for(var n=0,r=t.length;n<r;n++)o(t[n])}return e},removeNode:function(e){f.$(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){r&&"function"==typeof r.cleanData&&r.cleanData([e])}}},f.$=f.a.F.$,f.removeNode=f.a.F.removeNode,f.b("cleanNode",f.$),f.b("removeNode",f.removeNode),f.b("utils.domNodeDisposal",f.a.F),f.b("utils.domNodeDisposal.addDisposeCallback",f.a.F.oa),f.b("utils.domNodeDisposal.removeDisposeCallback",f.a.F.pc),function(){var o=[0,"",""],i=[1,"<table>","</table>"],s=[3,"<table><tbody><tr>","</tr></tbody></table>"],a=[1,"<select multiple='multiple'>","</select>"],l={thead:i,tbody:i,tfoot:i,tr:[2,"<table><tbody>","</tbody></table>"],td:s,th:s,option:a,optgroup:a},c=8>=f.a.C;f.a.ma=function(e,i){var s;if(r){if(r.parseHTML)s=r.parseHTML(e,i)||[];else if((s=r.clean([e],i))&&s[0]){for(var a=s[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{(s=i)||(s=n);var u,a=s.parentWindow||s.defaultView||t,g=f.a.$a(e).toLowerCase(),h=s.createElement("div");for(u=(g=g.match(/^<([a-z]+)[ >]/))&&l[g[1]]||o,g=u[0],u="ignored<div>"+u[1]+e+u[2]+"</div>","function"==typeof a.innerShiv?h.appendChild(a.innerShiv(u)):(c&&s.appendChild(h),h.innerHTML=u,c&&h.parentNode.removeChild(h));g--;)h=h.lastChild;s=f.a.V(h.lastChild.childNodes)}return s},f.a.Cb=function(t,o){if(f.a.ob(t),o=f.a.c(o),null!==o&&o!==e)if("string"!=typeof o&&(o=o.toString()),r)r(t).html(o);else for(var n=f.a.ma(o,t.ownerDocument),i=0;i<n.length;i++)t.appendChild(n[i])}}(),f.b("utils.parseHtmlFragment",f.a.ma),f.b("utils.setHtml",f.a.Cb),f.M=function(){function t(e,o){if(e)if(8==e.nodeType){var n=f.M.lc(e.nodeValue);null!=n&&o.push({Lc:e,cd:n})}else if(1==e.nodeType)for(var n=0,i=e.childNodes,r=i.length;n<r;n++)t(i[n],o)}var o={};return{wb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return o[t]=e,"<!--[ko_memo:"+t+"]-->"},xc:function(t,n){var i=o[t];if(i===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete o[t]}},yc:function(e,o){var n=[];t(e,n);for(var i=0,r=n.length;i<r;i++){var s=n[i].Lc,a=[s];o&&f.a.ra(a,o),f.M.xc(n[i].cd,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},lc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),f.b("memoization",f.M),f.b("memoization.memoize",f.M.wb),f.b("memoization.unmemoize",f.M.xc),f.b("memoization.parseMemoText",f.M.lc),f.b("memoization.unmemoizeDomNodeAndDescendants",f.M.yc),f.Y=function(){function e(){if(r)for(var e,t=r,o=0;a<r;)if(e=i[a++]){if(a>t){if(5e3<=++o){a=r,f.a.$b(Error("'Too much recursion' after processing "+o+" task groups."));break}t=r}try{e()}catch(e){f.a.$b(e)}}}function o(){e(),a=r=i.length=0}var i=[],r=0,s=1,a=0;return{scheduler:t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(o):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},Wa:function(e){return r||f.Y.scheduler(o),i[r++]=e,s++},cancel:function(e){e-=s-r,e>=a&&e<r&&(i[e]=null)},resetForTesting:function(){var e=r-a;return a=r=i.length=0,e},md:e}}(),f.b("tasks",f.Y),f.b("tasks.schedule",f.Y.Wa),f.b("tasks.runEarly",f.Y.md),f.ya={throttle:function(e,t){e.throttleEvaluation=t;var o=null;return f.B({read:e,write:function(n){clearTimeout(o),o=f.a.setTimeout(function(){e(n)},t)}})},rateLimit:function(e,t){var o,n,i;"number"==typeof t?o=t:(o=t.timeout,n=t.method),e.cb=!1,i="notifyWhenChangesStop"==n?u:c,e.Ta(function(e){return i(e,o)})},deferred:function(t,o){if(!0!==o)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.cb||(t.cb=!0,t.Ta(function(o){var n;return function(){f.Y.cancel(n),n=f.Y.Wa(o),t.notifySubscribers(e,"dirty")}}))},notify:function(e,t){e.equalityComparer="always"==t?null:l}};var m={undefined:1,boolean:1,number:1,string:1};f.b("extenders",f.ya),f.vc=function(e,t,o){this.ia=e,this.gb=t,this.Kc=o,this.R=!1,f.G(this,"dispose",this.k)},f.vc.prototype.k=function(){this.R=!0,this.Kc()},f.J=function(){f.a.Ya(this,y),y.rb(this)};var v="change",y={rb:function(e){e.K={},e.Nb=1},X:function(e,t,o){var n=this;o=o||v;var i=new f.vc(n,t?e.bind(t):e,function(){f.a.La(n.K[o],i),n.Ia&&n.Ia(o)});return n.sa&&n.sa(o),n.K[o]||(n.K[o]=[]),n.K[o].push(i),i},notifySubscribers:function(e,t){if(t=t||v,t===v&&this.zc(),this.Pa(t))try{f.l.Ub();for(var o,n=this.K[t].slice(0),i=0;o=n[i];++i)o.R||o.gb(e)}finally{f.l.end()}},Na:function(){return this.Nb},Uc:function(e){return this.Na()!==e},zc:function(){++this.Nb},Ta:function(e){var t,o,n,i=this,r=f.H(i);i.Ha||(i.Ha=i.notifySubscribers,i.notifySubscribers=g);var s=e(function(){i.Mb=!1,r&&n===i&&(n=i()),t=!1,i.tb(o,n)&&i.Ha(o=n)});i.Lb=function(e){i.Mb=t=!0,n=e,s()},i.Kb=function(e){t||(o=e,i.Ha(e,"beforeChange"))}},Pa:function(e){return this.K[e]&&this.K[e].length},Sc:function(e){if(e)return this.K[e]&&this.K[e].length||0;var t=0;return f.a.D(this.K,function(e,o){"dirty"!==e&&(t+=o.length)}),t},tb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&f.a.D(e,function(e,o){var n=f.ya[e];"function"==typeof n&&(t=n(t,o)||t)}),t}};f.G(y,"subscribe",y.X),f.G(y,"extend",y.extend),f.G(y,"getSubscriptionsCount",y.Sc),f.a.ka&&f.a.Xa(y,Function.prototype),f.J.fn=y,f.hc=function(e){return null!=e&&"function"==typeof e.X&&"function"==typeof e.notifySubscribers},f.b("subscribable",f.J),f.b("isSubscribable",f.hc),f.va=f.l=function(){function e(e){n.push(o),o=e}function t(){o=n.pop()}var o,n=[],i=0;return{Ub:e,end:t,oc:function(e){if(o){if(!f.hc(e))throw Error("Only subscribable things can act as dependencies");o.gb.call(o.Gc,e,e.Cc||(e.Cc=++i))}},w:function(o,n,i){try{return e(),o.apply(n,i||[])}finally{t()}},Aa:function(){if(o)return o.m.Aa()},Sa:function(){if(o)return o.Sa}}}(),f.b("computedContext",f.va),f.b("computedContext.getDependenciesCount",f.va.Aa),f.b("computedContext.isInitial",f.va.Sa),f.b("ignoreDependencies",f.qd=f.l.w);var _=f.a.Yb("_latestValue");f.N=function(e){function t(){return 0<arguments.length?(t.tb(t[_],arguments[0])&&(t.ga(),t[_]=arguments[0],t.fa()),this):(f.l.oc(t),t[_])}return t[_]=e,f.a.ka||f.a.extend(t,f.J.fn),f.J.fn.rb(t),f.a.Ya(t,b),f.options.deferUpdates&&f.ya.deferred(t,!0),t};var b={equalityComparer:l,t:function(){return this[_]},fa:function(){this.notifySubscribers(this[_])},ga:function(){this.notifySubscribers(this[_],"beforeChange")}};f.a.ka&&f.a.Xa(b,f.J.fn);var w=f.N.gd="__ko_proto__";b[w]=f.N,f.Oa=function(t,o){return null!==t&&t!==e&&t[w]!==e&&(t[w]===o||f.Oa(t[w],o))},f.H=function(e){return f.Oa(e,f.N)},f.Ba=function(e){return!!("function"==typeof e&&e[w]===f.N||"function"==typeof e&&e[w]===f.B&&e.Vc)},f.b("observable",f.N),f.b("isObservable",f.H),f.b("isWriteableObservable",f.Ba),f.b("isWritableObservable",f.Ba),f.b("observable.fn",b),f.G(b,"peek",b.t),f.G(b,"valueHasMutated",b.fa),f.G(b,"valueWillMutate",b.ga),f.la=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=f.N(e),f.a.Ya(e,f.la.fn),e.extend({trackArrayChanges:!0})},f.la.fn={remove:function(e){for(var t=this.t(),o=[],n="function"!=typeof e||f.H(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var r=t[i];n(r)&&(0===o.length&&this.ga(),o.push(r),t.splice(i,1),i--)}return o.length&&this.fa(),o},removeAll:function(t){if(t===e){var o=this.t(),n=o.slice(0);return this.ga(),o.splice(0,o.length),this.fa(),n}return t?this.remove(function(e){return 0<=f.a.o(t,e)}):[]},destroy:function(e){var t=this.t(),o="function"!=typeof e||f.H(e)?function(t){return t===e}:e;this.ga();for(var n=t.length-1;0<=n;n--)o(t[n])&&(t[n]._destroy=!0);this.fa()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=f.a.o(t,e)}):[]},indexOf:function(e){var t=this();return f.a.o(t,e)},replace:function(e,t){var o=this.indexOf(e);0<=o&&(this.ga(),this.t()[o]=t,this.fa())}},f.a.ka&&f.a.Xa(f.la.fn,f.N.fn),f.a.q("pop push reverse shift sort splice unshift".split(" "),function(e){f.la.fn[e]=function(){var t=this.t();this.ga(),this.Vb(t,e,arguments);var o=t[e].apply(t,arguments);return this.fa(),o===t?this:o}}),f.a.q(["slice"],function(e){f.la.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),f.b("observableArray",f.la),f.ya.trackArrayChanges=function(e,t){function o(){if(!i){i=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,o){return o&&o!==v||++s,t.apply(this,arguments)};var o=[].concat(e.t()||[]);r=null,n=e.X(function(t){if(t=[].concat(t||[]),e.Pa("arrayChange")){var n;(!r||1<s)&&(r=f.a.ib(o,t,e.hb)),n=r}o=t,r=null,s=0,n&&n.length&&e.notifySubscribers(n,"arrayChange")})}}if(e.hb={},t&&"object"==typeof t&&f.a.extend(e.hb,t),e.hb.sparse=!0,!e.Vb){var n,i=!1,r=null,s=0,a=e.sa,l=e.Ia;e.sa=function(t){a&&a.call(e,t),"arrayChange"===t&&o()},e.Ia=function(t){l&&l.call(e,t),"arrayChange"!==t||e.Pa("arrayChange")||(n.k(),i=!1)},e.Vb=function(e,t,o){function n(e,t,o){return a[a.length]={status:e,value:t,index:o}}if(i&&!s){var a=[],l=e.length,c=o.length,u=0;switch(t){case"push":u=l;case"unshift":for(t=0;t<c;t++)n("added",o[t],u+t);break;case"pop":u=l-1;case"shift":l&&n("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>o[0]?l+o[0]:o[0]),l);for(var l=1===c?l:Math.min(t+(o[1]||0),l),c=t+c-2,u=Math.max(l,c),g=[],h=[],d=2;t<u;++t,++d)t<l&&h.push(n("deleted",e[t],t)),t<c&&g.push(n("added",o[d],t));f.a.dc(h,g);break;default:return}r=a}}}};var S=f.a.Yb("_state");f.m=f.B=function(t,o,n){function i(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(s.pb,arguments),this}return f.l.oc(i),(s.S||s.s&&i.Qa())&&i.aa(),s.T}if("object"==typeof t?n=t:(n=n||{},t&&(n.read=t)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var r=n.write,s={T:e,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:n.read,pb:o||n.owner,i:n.disposeWhenNodeIsRemoved||n.i||null,wa:n.disposeWhen||n.wa,mb:null,r:{},L:0,bc:null};return i[S]=s,i.Vc="function"==typeof r,f.a.ka||f.a.extend(i,f.J.fn),f.J.fn.rb(i),f.a.Ya(i,C),n.pure?(s.Va=!0,s.s=!0,f.a.extend(i,E)):n.deferEvaluation&&f.a.extend(i,T),f.options.deferUpdates&&f.ya.deferred(i,!0),s.i&&(s.Fb=!0,s.i.nodeType||(s.i=null)),s.s||n.deferEvaluation||i.aa(),s.i&&i.ba()&&f.a.F.oa(s.i,s.mb=function(){i.k()}),i};var C={equalityComparer:l,Aa:function(){return this[S].L},Pb:function(e,t,o){if(this[S].Va&&t===this)throw Error("A 'pure' computed must not be called recursively");this[S].r[e]=o,o.Ga=this[S].L++,o.na=t.Na()},Qa:function(){var e,t,o=this[S].r;for(e in o)if(o.hasOwnProperty(e)&&(t=o[e],t.ia.Uc(t.na)))return!0},bd:function(){this.Fa&&!this[S].Ra&&this.Fa()},ba:function(){return this[S].S||0<this[S].L},ld:function(){this.Mb||this.ac()},uc:function(e){if(e.cb&&!this[S].i){var t=e.X(this.bd,this,"dirty"),o=e.X(this.ld,this);return{ia:e,k:function(){t.k(),o.k()}}}return e.X(this.ac,this)},ac:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[S].bc),this[S].bc=f.a.setTimeout(function(){e.aa(!0)},t)):e.Fa?e.Fa():e.aa(!0)},aa:function(e){var t=this[S],o=t.wa;if(!t.Ra&&!t.R){if(t.i&&!f.a.nb(t.i)||o&&o()){if(!t.Fb)return void this.k()}else t.Fb=!1;t.Ra=!0;try{this.Qc(e)}finally{t.Ra=!1}t.L||this.k()}},Qc:function(t){var o=this[S],n=o.Va?e:!o.L,i={Hc:this,Ma:o.r,lb:o.L};f.l.Ub({Gc:i,gb:d,m:this,Sa:n}),o.r={},o.L=0,i=this.Pc(o,i),this.tb(o.T,i)&&(o.s||this.notifySubscribers(o.T,"beforeChange"),o.T=i,o.s?this.zc():t&&this.notifySubscribers(o.T)),n&&this.notifySubscribers(o.T,"awake")},Pc:function(e,t){try{var o=e.jd;return e.pb?o.call(e.pb):o()}finally{f.l.end(),t.lb&&!e.s&&f.a.D(t.Ma,h),e.S=!1}},t:function(){var e=this[S];return(e.S&&!e.L||e.s&&this.Qa())&&this.aa(),e.T},Ta:function(e){f.J.fn.Ta.call(this,e),this.Fa=function(){this.Kb(this[S].T),this[S].S=!0,this.Lb(this)}},k:function(){var e=this[S];!e.s&&e.r&&f.a.D(e.r,function(e,t){t.k&&t.k()}),e.i&&e.mb&&f.a.F.pc(e.i,e.mb),e.r=null,e.L=0,e.R=!0,e.S=!1,e.s=!1,e.i=null}},E={sa:function(e){var t=this,o=t[S];if(!o.R&&o.s&&"change"==e){if(o.s=!1,o.S||t.Qa())o.r=null,o.L=0,o.S=!0,t.aa();else{var n=[];f.a.D(o.r,function(e,t){n[t.Ga]=e}),f.a.q(n,function(e,n){var i=o.r[e],r=t.uc(i.ia);r.Ga=n,r.na=i.na,o.r[e]=r})}o.R||t.notifySubscribers(o.T,"awake")}},Ia:function(t){var o=this[S];o.R||"change"!=t||this.Pa("change")||(f.a.D(o.r,function(e,t){t.k&&(o.r[e]={ia:t.ia,Ga:t.Ga,na:t.na},t.k())}),o.s=!0,this.notifySubscribers(e,"asleep"))},Na:function(){var e=this[S];return e.s&&(e.S||this.Qa())&&this.aa(),f.J.fn.Na.call(this)}},T={sa:function(e){"change"!=e&&"beforeChange"!=e||this.t()}};f.a.ka&&f.a.Xa(C,f.J.fn);var P=f.N.gd;f.m[P]=f.N,C[P]=f.m,f.Xc=function(e){return f.Oa(e,f.m)},f.Yc=function(e){return f.Oa(e,f.m)&&e[S]&&e[S].Va},f.b("computed",f.m),f.b("dependentObservable",f.m),f.b("isComputed",f.Xc),f.b("isPureComputed",f.Yc),f.b("computed.fn",C),f.G(C,"peek",C.t),f.G(C,"dispose",C.k),f.G(C,"isActive",C.ba),f.G(C,"getDependenciesCount",C.Aa),f.nc=function(e,t){return"function"==typeof e?f.m(e,t,{pure:!0}):(e=f.a.extend({},e),e.pure=!0,f.m(e,t))},f.b("pureComputed",f.nc),function(){function t(i,r,s){if(s=s||new n,i=r(i),"object"!=typeof i||null===i||i===e||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var a=i instanceof Array?[]:{};return s.save(i,a),o(i,function(o){var n=r(i[o]);switch(typeof n){case"boolean":case"number":case"string":case"function":a[o]=n;break;case"object":case"undefined":var l=s.get(n);a[o]=l!==e?l:t(n,r,s)}}),a}function o(e,t){if(e instanceof Array){for(var o=0;o<e.length;o++)t(o);"function"==typeof e.toJSON&&t("toJSON")}else for(o in e)t(o)}function n(){this.keys=[],this.Ib=[]}f.wc=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;f.H(e)&&10>t;t++)e=e();return e})},f.toJSON=function(e,t,o){return e=f.wc(e),f.a.Eb(e,t,o)},n.prototype={save:function(e,t){var o=f.a.o(this.keys,e);0<=o?this.Ib[o]=t:(this.keys.push(e),this.Ib.push(t))},get:function(t){return t=f.a.o(this.keys,t),0<=t?this.Ib[t]:e}}}(),f.b("toJS",f.wc),f.b("toJSON",f.toJSON),function(){f.j={u:function(t){switch(f.a.A(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?f.a.e.get(t,f.d.options.xb):7>=f.a.C?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?f.j.u(t.options[t.selectedIndex]):e;default:return t.value}},ha:function(t,o,n){switch(f.a.A(t)){case"option":switch(typeof o){case"string":f.a.e.set(t,f.d.options.xb,e),
"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=o;break;default:f.a.e.set(t,f.d.options.xb,o),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof o?o:""}break;case"select":""!==o&&null!==o||(o=e);for(var i,r=-1,s=0,a=t.options.length;s<a;++s)if(i=f.j.u(t.options[s]),i==o||""==i&&o===e){r=s;break}(n||0<=r||o===e&&1<t.size)&&(t.selectedIndex=r);break;default:null!==o&&o!==e||(o=""),t.value=o}}}}(),f.b("selectExtensions",f.j),f.b("selectExtensions.readValue",f.j.u),f.b("selectExtensions.writeValue",f.j.ha),f.h=function(){function e(e){e=f.a.$a(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t,o=[],s=e.match(n),a=[],l=0;if(s){s.push(",");for(var c,u=0;c=s[u];++u){var g=c.charCodeAt(0);if(44===g){if(0>=l){o.push(t&&a.length?{key:t,value:a.join("")}:{unknown:t||a.join("")}),t=l=0,a=[];continue}}else if(58===g){if(!l&&!t&&1===a.length){t=a.pop();continue}}else 47===g&&u&&1<c.length?(g=s[u-1].match(i))&&!r[g[0]]&&(e=e.substr(e.indexOf(c)+1),s=e.match(n),s.push(","),u=-1,c="/"):40===g||123===g||91===g?++l:41===g||125===g||93===g?--l:t||a.length||34!==g&&39!==g||(c=c.slice(1,-1));a.push(c)}}return o}var t=["true","false","null","undefined"],o=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},s={};return{ta:[],ea:s,yb:e,Ua:function(n,i){function r(e,n){var i;if(!u){var g=f.getBindingHandler(e);if(g&&g.preprocess&&!(n=g.preprocess(n,e,r)))return;(g=s[e])&&(i=n,0<=f.a.o(t,i)?i=!1:(g=i.match(o),i=null!==g&&(g[1]?"Object("+g[1]+")"+g[2]:i)),g=i),g&&l.push("'"+e+"':function(_z){"+i+"=_z}")}c&&(n="function(){return "+n+" }"),a.push("'"+e+"':"+n)}i=i||{};var a=[],l=[],c=i.valueAccessors,u=i.bindingParams,g="string"==typeof n?e(n):n;return f.a.q(g,function(e){r(e.key||e.unknown,e.value)}),l.length&&r("_ko_property_writers","{"+l.join(",")+" }"),a.join(",")},ad:function(e,t){for(var o=0;o<e.length;o++)if(e[o].key==t)return!0;return!1},Ea:function(e,t,o,n,i){e&&f.H(e)?!f.Ba(e)||i&&e.t()===n||e(n):(e=t.get("_ko_property_writers"))&&e[o]&&e[o](n)}}}(),f.b("expressionRewriting",f.h),f.b("expressionRewriting.bindingRewriteValidators",f.h.ta),f.b("expressionRewriting.parseObjectLiteral",f.h.yb),f.b("expressionRewriting.preProcessBindings",f.h.Ua),f.b("expressionRewriting._twoWayBindings",f.h.ea),f.b("jsonExpressionRewriting",f.h),f.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",f.h.Ua),function(){function e(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function o(o,n){for(var i=o,r=1,s=[];i=i.nextSibling;){if(t(i)&&(r--,0===r))return s;s.push(i),e(i)&&r++}if(!n)throw Error("Cannot find closing comment tag to match: "+o.nodeValue);return null}function i(e,t){var n=o(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var r=n&&"<!--test-->"===n.createComment("test").text,s=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};f.f={Z:{},childNodes:function(t){return e(t)?o(t):t.childNodes},xa:function(t){if(e(t)){t=f.f.childNodes(t);for(var o=0,n=t.length;o<n;o++)f.removeNode(t[o])}else f.a.ob(t)},da:function(t,o){if(e(t)){f.f.xa(t);for(var n=t.nextSibling,i=0,r=o.length;i<r;i++)n.parentNode.insertBefore(o[i],n)}else f.a.da(t,o)},mc:function(t,o){e(t)?t.parentNode.insertBefore(o,t.nextSibling):t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o)},gc:function(t,o,n){n?e(t)?t.parentNode.insertBefore(o,n.nextSibling):n.nextSibling?t.insertBefore(o,n.nextSibling):t.appendChild(o):f.f.mc(t,o)},firstChild:function(o){return e(o)?!o.nextSibling||t(o.nextSibling)?null:o.nextSibling:o.firstChild},nextSibling:function(o){return e(o)&&(o=i(o)),o.nextSibling&&t(o.nextSibling)?null:o.nextSibling},Tc:e,pd:function(e){return(e=(r?e.text:e.nodeValue).match(s))?e[1]:null},kc:function(o){if(l[f.a.A(o)]){var n=o.firstChild;if(n)do if(1===n.nodeType){var r;r=n.firstChild;var s=null;if(r)do if(s)s.push(r);else if(e(r)){var a=i(r,!0);a?r=a:s=[r]}else t(r)&&(s=[r]);while(r=r.nextSibling);if(r=s)for(s=n.nextSibling,a=0;a<r.length;a++)s?o.insertBefore(r[a],s):o.appendChild(r[a])}while(n=n.nextSibling)}}}}(),f.b("virtualElements",f.f),f.b("virtualElements.allowedBindings",f.f.Z),f.b("virtualElements.emptyNode",f.f.xa),f.b("virtualElements.insertAfter",f.f.gc),f.b("virtualElements.prepend",f.f.mc),f.b("virtualElements.setDomNodeChildren",f.f.da),function(){f.Q=function(){this.Fc={}},f.a.extend(f.Q.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||f.g.getComponentNameForNode(e);case 8:return f.f.Tc(e);default:return!1}},getBindings:function(e,t){var o=this.getBindingsString(e,t),o=o?this.parseBindingsString(o,t,e):null;return f.g.Ob(o,e,t,!1)},getBindingAccessors:function(e,t){var o=this.getBindingsString(e,t),o=o?this.parseBindingsString(o,t,e,{valueAccessors:!0}):null;return f.g.Ob(o,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return f.f.pd(e);default:return null}},parseBindingsString:function(e,t,o,n){try{var i,r=this.Fc,s=e+(n&&n.valueAccessors||"");if(!(i=r[s])){var a,l="with($context){with($data||{}){return{"+f.h.Ua(e,n)+"}}}";a=new Function("$context","$element",l),i=r[s]=a}return i(t,o)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),f.Q.instance=new f.Q}(),f.b("bindingProvider",f.Q),function(){function o(e){return function(){return e}}function n(e){return e()}function i(e){return f.a.Ca(f.l.w(e),function(t,o){return function(){return e()[o]}})}function s(e,t,n){return"function"==typeof e?i(e.bind(null,t,n)):f.a.Ca(e,o)}function a(e,t){return i(this.getBindings.bind(this,e,t))}function l(e,t,o){var n,i=f.f.firstChild(t),r=f.Q.instance,s=r.preprocessNode;if(s){for(;n=i;)i=f.f.nextSibling(n),s.call(r,n);i=f.f.firstChild(t)}for(;n=i;)i=f.f.nextSibling(n),c(e,n,o)}function c(e,t,o){var n=!0,i=1===t.nodeType;i&&f.f.kc(t),(i&&o||f.Q.instance.nodeHasBindings(t))&&(n=g(t,null,e,o).shouldBindDescendants),n&&!d[f.a.A(t)]&&l(e,t,!i)}function u(e){var t=[],o={},n=[];return f.a.D(e,function i(r){if(!o[r]){var s=f.getBindingHandler(r);s&&(s.after&&(n.push(r),f.a.q(s.after,function(t){if(e[t]){if(-1!==f.a.o(n,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+n.join(", "));i(t)}}),n.length--),t.push({key:r,fc:s})),o[r]=!0}}),t}function g(t,o,i,r){var s=f.a.e.get(t,p);if(!o){if(s)throw Error("You cannot apply bindings multiple times to the same element.");f.a.e.set(t,p,!0)}!s&&r&&f.tc(t,i);var l;if(o&&"function"!=typeof o)l=o;else{var c=f.Q.instance,g=c.getBindingAccessors||a,h=f.B(function(){return(l=o?o(i,t):g.call(c,t,i))&&i.P&&i.P(),l},null,{i:t});l&&h.ba()||(h=null)}var d;if(l){var m=h?function(e){return function(){return n(h()[e])}}:function(e){return l[e]},v=function(){return f.a.Ca(h?h():l,n)};v.get=function(e){return l[e]&&n(m(e))},v.has=function(e){return e in l},r=u(l),f.a.q(r,function(o){var n=o.fc.init,r=o.fc.update,s=o.key;if(8===t.nodeType&&!f.f.Z[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof n&&f.l.w(function(){var o=n(t,m(s),v,i.$data,i);if(o&&o.controlsDescendantBindings){if(d!==e)throw Error("Multiple bindings ("+d+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");d=s}}),"function"==typeof r&&f.B(function(){r(t,m(s),v,i.$data,i)},null,{i:t})}catch(e){throw e.message='Unable to process binding "'+s+": "+l[s]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:d===e}}function h(e){return e&&e instanceof f.U?e:new f.U(e)}f.d={};var d={script:!0,textarea:!0,template:!0};f.getBindingHandler=function(e){return f.d[e]},f.U=function(t,o,n,i){var r,s=this,a="function"==typeof t&&!f.H(t),l=f.B(function(){var e=a?t():t,r=f.a.c(e);return o?(o.P&&o.P(),f.a.extend(s,o),l&&(s.P=l)):(s.$parents=[],s.$root=r,s.ko=f),s.$rawData=e,s.$data=r,n&&(s[n]=r),i&&i(s,o,r),s.$data},null,{wa:function(){return r&&!f.a.Qb(r)},i:!0});l.ba()&&(s.P=l,l.equalityComparer=null,r=[],l.Ac=function(t){r.push(t),f.a.F.oa(t,function(t){f.a.La(r,t),r.length||(l.k(),s.P=l=e)})})},f.U.prototype.createChildContext=function(e,t,o){return new f.U(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),o&&o(e)})},f.U.prototype.extend=function(e){return new f.U(this.P||this.$data,this,null,function(t,o){t.$rawData=o.$rawData,f.a.extend(t,"function"==typeof e?e():e)})};var p=f.a.e.I(),m=f.a.e.I();f.tc=function(e,t){return 2!=arguments.length?f.a.e.get(e,m):(f.a.e.set(e,m,t),void(t.P&&t.P.Ac(e)))},f.Ja=function(e,t,o){return 1===e.nodeType&&f.f.kc(e),g(e,t,h(o),!0)},f.Dc=function(e,t,o){return o=h(o),f.Ja(e,s(t,o,e),o)},f.eb=function(e,t){1!==t.nodeType&&8!==t.nodeType||l(h(e),t,!0)},f.Rb=function(e,o){if(!r&&t.jQuery&&(r=t.jQuery),o&&1!==o.nodeType&&8!==o.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");o=o||t.document.body,c(h(e),o,!0)},f.kb=function(t){switch(t.nodeType){case 1:case 8:var o=f.tc(t);if(o)return o;if(t.parentNode)return f.kb(t.parentNode)}return e},f.Jc=function(t){return(t=f.kb(t))?t.$data:e},f.b("bindingHandlers",f.d),f.b("applyBindings",f.Rb),f.b("applyBindingsToDescendants",f.eb),f.b("applyBindingAccessorsToNode",f.Ja),f.b("applyBindingsToNode",f.Dc),f.b("contextFor",f.kb),f.b("dataFor",f.Jc)}(),function(e){function t(t,n){var s,a=i.hasOwnProperty(t)?i[t]:e;a?a.X(n):(a=i[t]=new f.J,a.X(n),o(t,function(e,o){var n=!(!o||!o.synchronous);r[t]={definition:e,Zc:n},delete i[t],s||n?a.notifySubscribers(e):f.Y.Wa(function(){a.notifySubscribers(e)})}),s=!0)}function o(e,t){n("getConfig",[e],function(o){o?n("loadComponent",[e,o],function(e){t(e,o)}):t(null,null)})}function n(t,o,i,r){r||(r=f.g.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var l=!1;if(a.apply(s,o.concat(function(e){l?i(null):null!==e?i(e):n(t,o,i,r)}))!==e&&(l=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else n(t,o,i,r)}else i(null)}var i={},r={};f.g={get:function(o,n){var i=r.hasOwnProperty(o)?r[o]:e;i?i.Zc?f.l.w(function(){n(i.definition)}):f.Y.Wa(function(){n(i.definition)}):t(o,n)},Xb:function(e){delete r[e]},Jb:n},f.g.loaders=[],f.b("components",f.g),f.b("components.get",f.g.get),f.b("components.clearCachedDefinition",f.g.Xb)}(),function(){function e(e,t,o,n){function i(){0===--a&&n(r)}var r={},a=2,l=o.template;o=o.viewModel,l?s(t,l,function(t){f.g.Jb("loadTemplate",[e,t],function(e){r.template=e,i()})}):i(),o?s(t,o,function(t){f.g.Jb("loadViewModel",[e,t],function(e){r[u]=e,i()})}):i()}function o(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[u])n(t[u]);else if("instance"in t){var i=t.instance;n(function(){return i})}else"viewModel"in t?o(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function i(e){switch(f.a.A(e)){case"script":return f.a.ma(e.text);case"textarea":return f.a.ma(e.value);case"template":if(r(e.content))return f.a.ua(e.content.childNodes)}return f.a.ua(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function s(e,o,n){"string"==typeof o.require?a||t.require?(a||t.require)([o.require],n):e("Uses require, but no AMD loader is present"):n(o)}function l(e){return function(t){throw Error("Component '"+e+"': "+t)}}var c={};f.g.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(f.g.ub(e))throw Error("Component "+e+" is already registered");c[e]=t},f.g.ub=function(e){return c.hasOwnProperty(e)},f.g.od=function(e){delete c[e],f.g.Xb(e)},f.g.Zb={getConfig:function(e,t){t(c.hasOwnProperty(e)?c[e]:null)},loadComponent:function(t,o,n){var i=l(t);s(i,o,function(o){e(t,i,o,n)})},loadTemplate:function(e,o,s){if(e=l(e),"string"==typeof o)s(f.a.ma(o));else if(o instanceof Array)s(o);else if(r(o))s(f.a.V(o.childNodes));else if(o.element)if(o=o.element,t.HTMLElement?o instanceof HTMLElement:o&&o.tagName&&1===o.nodeType)s(i(o));else if("string"==typeof o){var a=n.getElementById(o);a?s(i(a)):e("Cannot find element with ID "+o)}else e("Unknown element type: "+o);else e("Unknown template value: "+o)},loadViewModel:function(e,t,n){o(l(e),t,n)}};var u="createViewModel";f.b("components.register",f.g.register),f.b("components.isRegistered",f.g.ub),f.b("components.unregister",f.g.od),f.b("components.defaultLoader",f.g.Zb),f.g.loaders.push(f.g.Zb),f.g.Bc=c}(),function(){function e(e,o){var n=e.getAttribute("params");if(n){var n=t.parseBindingsString(n,o,e,{valueAccessors:!0,bindingParams:!0}),n=f.a.Ca(n,function(t){return f.m(t,null,{i:e})}),i=f.a.Ca(n,function(t){var o=t.t();return t.ba()?f.m({read:function(){return f.a.c(t())},write:f.Ba(o)&&function(e){t()(e)},i:e}):o});return i.hasOwnProperty("$raw")||(i.$raw=n),i}return{$raw:{}}}f.g.getComponentNameForNode=function(e){var t=f.a.A(e);if(f.g.ub(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=f.a.C&&e.tagName===t))return t},f.g.Ob=function(t,o,n,i){if(1===o.nodeType){var r=f.g.getComponentNameForNode(o);if(r){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(o,n)};t.component=i?function(){return s}:s}}return t};var t=new f.Q;9>f.a.C&&(f.g.register=function(e){return function(t){return n.createElement(t),e.apply(this,arguments)}}(f.g.register),n.createDocumentFragment=function(e){return function(){var t,o=e(),n=f.g.Bc;for(t in n)n.hasOwnProperty(t)&&o.createElement(t);return o}}(n.createDocumentFragment))}(),function(e){function t(e,t,o){if(t=t.template,!t)throw Error("Component '"+e+"' has no template");e=f.a.ua(t),f.f.da(o,e)}function o(e,t,o,n){var i=e.createViewModel;return i?i.call(e,n,{element:t,templateNodes:o}):n}var n=0;f.d.component={init:function(i,r,s,a,l){function c(){var e=u&&u.dispose;"function"==typeof e&&e.call(u),g=u=null}var u,g,h=f.a.V(f.f.childNodes(i));return f.a.F.oa(i,c),f.m(function(){var s,a,d=f.a.c(r());if("string"==typeof d?s=d:(s=f.a.c(d.name),a=f.a.c(d.params)),!s)throw Error("No component name specified");var p=g=++n;f.g.get(s,function(n){if(g===p){if(c(),!n)throw Error("Unknown component '"+s+"'");t(s,n,i);var r=o(n,i,h,a);n=l.createChildContext(r,e,function(e){e.$component=r,e.$componentTemplateNodes=h}),u=r,f.eb(n,i)}})},null,{i:i}),{controlsDescendantBindings:!0}}},f.f.Z.component=!0}();var A={class:"className",for:"htmlFor"};f.d.attr={update:function(t,o){var n=f.a.c(o())||{};f.a.D(n,function(o,n){n=f.a.c(n);var i=!1===n||null===n||n===e;i&&t.removeAttribute(o),8>=f.a.C&&o in A?(o=A[o],i?t.removeAttribute(o):t[o]=n):i||t.setAttribute(o,n.toString()),"name"===o&&f.a.rc(t,i?"":n.toString())})}},function(){f.d.checked={after:["value","attr"],init:function(t,o,n){function i(){var e=t.checked,i=d?s():e;if(!f.va.Sa()&&(!l||e)){var r=f.l.w(o);if(u){var a=g?r.t():r;h!==i?(e&&(f.a.pa(a,i,!0),f.a.pa(a,h,!1)),h=i):f.a.pa(a,i,e),g&&f.Ba(r)&&r(a)}else f.h.Ea(r,n,"checked",i,!0)}}function r(){var e=f.a.c(o());t.checked=u?0<=f.a.o(e,s()):a?e:s()===e}var s=f.nc(function(){return n.has("checkedValue")?f.a.c(n.get("checkedValue")):n.has("value")?f.a.c(n.get("value")):t.value}),a="checkbox"==t.type,l="radio"==t.type;if(a||l){var c=o(),u=a&&f.a.c(c)instanceof Array,g=!(u&&c.push&&c.splice),h=u?s():e,d=l||u;l&&!t.name&&f.d.uniqueName.init(t,function(){return!0}),f.m(i,null,{i:t}),f.a.p(t,"click",i),f.m(r,null,{i:t}),c=e}}},f.h.ea.checked=!0,f.d.checkedValue={update:function(e,t){e.value=f.a.c(t())}}}(),f.d.css={update:function(e,t){var o=f.a.c(t());null!==o&&"object"==typeof o?f.a.D(o,function(t,o){o=f.a.c(o),f.a.bb(e,t,o)}):(o=f.a.$a(String(o||"")),f.a.bb(e,e.__ko__cssValue,!1),e.__ko__cssValue=o,f.a.bb(e,o,!0))}},f.d.enable={update:function(e,t){var o=f.a.c(t());o&&e.disabled?e.removeAttribute("disabled"):o||e.disabled||(e.disabled=!0)}},f.d.disable={update:function(e,t){f.d.enable.update(e,function(){return!f.a.c(t())})}},f.d.event={init:function(e,t,o,n,i){var r=t()||{};f.a.D(r,function(r){"string"==typeof r&&f.a.p(e,r,function(e){var s,a=t()[r];if(a){try{var l=f.a.V(arguments);n=i.$data,l.unshift(n),s=a.apply(n,l)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===o.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},f.d.foreach={ic:function(e){return function(){var t=e(),o=f.a.zb(t);return o&&"number"!=typeof o.length?(f.a.c(t),{foreach:o.data,as:o.as,includeDestroyed:o.includeDestroyed,afterAdd:o.afterAdd,beforeRemove:o.beforeRemove,afterRender:o.afterRender,beforeMove:o.beforeMove,afterMove:o.afterMove,templateEngine:f.W.sb}):{foreach:t,templateEngine:f.W.sb}}},init:function(e,t){return f.d.template.init(e,f.d.foreach.ic(t))},update:function(e,t,o,n,i){return f.d.template.update(e,f.d.foreach.ic(t),o,n,i)}},f.h.ta.foreach=!1,f.f.Z.foreach=!0,f.d.hasfocus={init:function(e,t,o){function n(n){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var r;try{r=i.activeElement}catch(e){r=i.body}n=r===e}i=t(),f.h.Ea(i,o,"hasfocus",n,!0),e.__ko_hasfocusLastValue=n,e.__ko_hasfocusUpdating=!1}var i=n.bind(null,!0),r=n.bind(null,!1);f.a.p(e,"focus",i),f.a.p(e,"focusin",i),f.a.p(e,"blur",r),f.a.p(e,"focusout",r)},update:function(e,t){var o=!!f.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===o||(o?e.focus():e.blur(),!o&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),f.l.w(f.a.Da,null,[e,o?"focusin":"focusout"]))}},f.h.ea.hasfocus=!0,f.d.hasFocus=f.d.hasfocus,f.h.ea.hasFocus=!0,f.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.a.Cb(e,t())}},p("if"),p("ifnot",!1,!0),p("with",!0,!1,function(e,t){return e.createChildContext(t)});var x={};f.d.options={init:function(e){if("select"!==f.a.A(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,o,n){function i(){return f.a.Ka(t.options,function(e){return e.selected})}function r(e,t,o){var n=typeof t;return"function"==n?t(e):"string"==n?e[t]:o}function s(e,o){if(p&&u)f.j.ha(t,f.a.c(n.get("value")),!0);else if(d.length){var i=0<=f.a.o(d,f.j.u(o[0]));f.a.sc(o[0],i),p&&!i&&f.l.w(f.a.Da,null,[t,"change"])}}var a=t.multiple,l=0!=t.length&&a?t.scrollTop:null,c=f.a.c(o()),u=n.get("valueAllowUnset")&&n.has("value"),g=n.get("optionsIncludeDestroyed");o={};var h,d=[];u||(a?d=f.a.fb(i(),f.j.u):0<=t.selectedIndex&&d.push(f.j.u(t.options[t.selectedIndex]))),c&&("undefined"==typeof c.length&&(c=[c]),h=f.a.Ka(c,function(t){return g||t===e||null===t||!f.a.c(t._destroy)}),n.has("optionsCaption")&&(c=f.a.c(n.get("optionsCaption")),null!==c&&c!==e&&h.unshift(x)));var p=!1;o.beforeRemove=function(e){t.removeChild(e)},c=s,n.has("optionsAfterRender")&&"function"==typeof n.get("optionsAfterRender")&&(c=function(t,o){s(0,o),f.l.w(n.get("optionsAfterRender"),null,[o[0],t!==x?t:e])}),f.a.Bb(t,h,function(o,i,s){return s.length&&(d=!u&&s[0].selected?[f.j.u(s[0])]:[],p=!0),i=t.ownerDocument.createElement("option"),o===x?(f.a.Za(i,n.get("optionsCaption")),f.j.ha(i,e)):(s=r(o,n.get("optionsValue"),o),f.j.ha(i,f.a.c(s)),o=r(o,n.get("optionsText"),s),f.a.Za(i,o)),[i]},o,c),f.l.w(function(){u?f.j.ha(t,f.a.c(n.get("value")),!0):(a?d.length&&i().length<d.length:d.length&&0<=t.selectedIndex?f.j.u(t.options[t.selectedIndex])!==d[0]:d.length||0<=t.selectedIndex)&&f.a.Da(t,"change")}),f.a.Nc(t),l&&20<Math.abs(l-t.scrollTop)&&(t.scrollTop=l)}},f.d.options.xb=f.a.e.I(),f.d.selectedOptions={after:["options","foreach"],init:function(e,t,o){f.a.p(e,"change",function(){var n=t(),i=[];f.a.q(e.getElementsByTagName("option"),function(e){e.selected&&i.push(f.j.u(e))}),f.h.Ea(n,o,"selectedOptions",i)})},update:function(e,t){if("select"!=f.a.A(e))throw Error("values binding applies only to SELECT elements");var o=f.a.c(t()),n=e.scrollTop;o&&"number"==typeof o.length&&f.a.q(e.getElementsByTagName("option"),function(e){var t=0<=f.a.o(o,f.j.u(e));e.selected!=t&&f.a.sc(e,t)}),e.scrollTop=n}},f.h.ea.selectedOptions=!0,f.d.style={update:function(t,o){var n=f.a.c(o()||{});f.a.D(n,function(o,n){n=f.a.c(n),null!==n&&n!==e&&!1!==n||(n=""),t.style[o]=n})}},f.d.submit={init:function(e,t,o,n,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");f.a.p(e,"submit",function(o){var n,r=t();try{n=r.call(i.$data,e)}finally{!0!==n&&(o.preventDefault?o.preventDefault():o.returnValue=!1)}})}},f.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.a.Za(e,t())}},f.f.Z.text=!0,function(){if(t&&t.navigator)var o=function(e){if(e)return parseFloat(e[1])},n=t.opera&&t.opera.version&&parseInt(t.opera.version()),i=t.navigator.userAgent,r=o(i.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),s=o(i.match(/Firefox\/([^ ]*)/));if(10>f.a.C)var a=f.a.e.I(),l=f.a.e.I(),c=function(e){var t=this.activeElement;(t=t&&f.a.e.get(t,l))&&t(e)},u=function(e,t){var o=e.ownerDocument;f.a.e.get(o,a)||(f.a.e.set(o,a,!0),f.a.p(o,"selectionchange",c)),f.a.e.set(e,l,t)};f.d.textInput={init:function(t,o,i){function a(e,o){f.a.p(t,e,o)}function l(){var n=f.a.c(o());null!==n&&n!==e||(n=""),d!==e&&n===d?f.a.setTimeout(l,4):t.value!==n&&(p=n,t.value=n)}function c(){h||(d=t.value,h=f.a.setTimeout(g,4))}function g(){clearTimeout(h),d=h=e;var n=t.value;p!==n&&(p=n,f.h.Ea(o(),i,"textInput",n))}var h,d,p=t.value,m=9==f.a.C?c:g;10>f.a.C?(a("propertychange",function(e){"value"===e.propertyName&&m(e)}),8==f.a.C&&(a("keyup",g),a("keydown",g)),8<=f.a.C&&(u(t,m),a("dragend",c))):(a("input",g),5>r&&"textarea"===f.a.A(t)?(a("keydown",c),a("paste",c),a("cut",c)):11>n?a("keydown",c):4>s&&(a("DOMAutoComplete",g),a("dragdrop",g),a("drop",g))),a("change",g),f.m(l,null,{i:t})}},f.h.ea.textInput=!0,f.d.textinput={preprocess:function(e,t,o){o("textInput",e)}}}(),f.d.uniqueName={init:function(e,t){if(t()){var o="ko_unique_"+ ++f.d.uniqueName.Ic;f.a.rc(e,o)}}},f.d.uniqueName.Ic=0,f.d.value={after:["options","foreach"],init:function(e,t,o){if("input"!=e.tagName.toLowerCase()||"checkbox"!=e.type&&"radio"!=e.type){var n=["change"],i=o.get("valueUpdate"),r=!1,s=null;i&&("string"==typeof i&&(i=[i]),f.a.ra(n,i),n=f.a.Tb(n));var a=function(){s=null,r=!1;var n=t(),i=f.j.u(e);f.h.Ea(n,o,"value",i)};!f.a.C||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=f.a.o(n,"propertychange")||(f.a.p(e,"propertychange",function(){r=!0}),f.a.p(e,"focus",function(){r=!1}),f.a.p(e,"blur",function(){r&&a()})),f.a.q(n,function(t){var o=a;f.a.nd(t,"after")&&(o=function(){s=f.j.u(e),f.a.setTimeout(a,0)},t=t.substring(5)),f.a.p(e,t,o)});var l=function(){var n=f.a.c(t()),i=f.j.u(e);if(null!==s&&n===s)f.a.setTimeout(l,0);else if(n!==i)if("select"===f.a.A(e)){var r=o.get("valueAllowUnset"),i=function(){f.j.ha(e,n,r)};i(),r||n===f.j.u(e)?f.a.setTimeout(i,0):f.l.w(f.a.Da,null,[e,"change"])}else f.j.ha(e,n)};f.m(l,null,{i:e})}else f.Ja(e,{checkedValue:t})},update:function(){}},f.h.ea.value=!0,f.d.visible={update:function(e,t){var o=f.a.c(t()),n="none"!=e.style.display;o&&!n?e.style.display="":!o&&n&&(e.style.display="none")}},function(e){f.d[e]={init:function(t,o,n,i,r){return f.d.event.init.call(this,t,function(){var t={};return t[e]=o(),t},n,i,r)}}}("click"),f.O=function(){},f.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},f.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},f.O.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||n;var o=t.getElementById(e);if(!o)throw Error("Cannot find template with ID "+e);return new f.v.n(o)}if(1==e.nodeType||8==e.nodeType)return new f.v.qa(e);throw Error("Unknown template type: "+e)},f.O.prototype.renderTemplate=function(e,t,o,n){return e=this.makeTemplateSource(e,n),this.renderTemplateSource(e,t,o,n)},f.O.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},f.O.prototype.rewriteTemplate=function(e,t,o){e=this.makeTemplateSource(e,o),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},f.b("templateEngine",f.O),f.Gb=function(){function e(e,t,o,n){e=f.h.yb(e);for(var i=f.h.ta,r=0;r<e.length;r++){var s=e[r].key;if(i.hasOwnProperty(s)){var a=i[s];if("function"==typeof a){if(s=a(e[r].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return o="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f.h.Ua(e,{valueAccessors:!0})+" } })()},'"+o.toLowerCase()+"')",n.createJavaScriptEvaluatorBlock(o)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,o=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(e,t,o){t.isTemplateRewritten(e,o)||t.rewriteTemplate(e,function(e){return f.Gb.dd(e,t)},o)},dd:function(n,i){return n.replace(t,function(t,o,n,r,s){return e(s,o,n,i)}).replace(o,function(t,o){return e(o,"<!-- ko -->","#comment",i)})},Ec:function(e,t){return f.M.wb(function(o,n){var i=o.nextSibling;i&&i.nodeName.toLowerCase()===t&&f.Ja(i,e,n)})}}}(),f.b("__tr_ambtns",f.Gb.Ec),function(){f.v={},f.v.n=function(e){if(this.n=e){var t=f.a.A(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},f.v.n.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.n[e];var t=arguments[0];"innerHTML"===e?f.a.Cb(this.n,t):this.n[e]=t};var t=f.a.e.I()+"_";f.v.n.prototype.data=function(e){return 1===arguments.length?f.a.e.get(this.n,t+e):void f.a.e.set(this.n,t+e,arguments[1])};var o=f.a.e.I();f.v.n.prototype.nodes=function(){var t=this.n;return 0==arguments.length?(f.a.e.get(t,o)||{}).jb||(3===this.ab?t.content:4===this.ab?t:e):void f.a.e.set(t,o,{jb:arguments[0]})},f.v.qa=function(e){this.n=e},f.v.qa.prototype=new f.v.n,f.v.qa.prototype.text=function(){if(0==arguments.length){var t=f.a.e.get(this.n,o)||{};return t.Hb===e&&t.jb&&(t.Hb=t.jb.innerHTML),t.Hb}f.a.e.set(this.n,o,{Hb:arguments[0]})},f.b("templateSources",f.v),f.b("templateSources.domElement",f.v.n),f.b("templateSources.anonymousTemplate",f.v.qa)}(),function(){function t(e,t,o){var n;for(t=f.f.nextSibling(t);e&&(n=e)!==t;)e=f.f.nextSibling(n),o(n,e)}function o(e,o){if(e.length){var n=e[0],i=e[e.length-1],r=n.parentNode,s=f.Q.instance,a=s.preprocessNode;if(a){if(t(n,i,function(e,t){var o=e.previousSibling,r=a.call(s,e);r&&(e===n&&(n=r[0]||t),e===i&&(i=r[r.length-1]||o))}),e.length=0,!n)return;n===i?e.push(n):(e.push(n,i),f.a.za(e,r))}t(n,i,function(e){1!==e.nodeType&&8!==e.nodeType||f.Rb(o,e)}),t(n,i,function(e){1!==e.nodeType&&8!==e.nodeType||f.M.yc(e,[o])}),f.a.za(e,r)}}function n(e){return e.nodeType?e:0<e.length?e[0]:null}function i(e,t,i,r,a){a=a||{};var l=(e&&n(e)||i||{}).ownerDocument,c=a.templateEngine||s;if(f.Gb.Oc(i,c,l),i=c.renderTemplate(i,r,a,l),"number"!=typeof i.length||0<i.length&&"number"!=typeof i[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,t){case"replaceChildren":f.f.da(e,i),l=!0;break;case"replaceNode":f.a.qc(e,i),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return l&&(o(i,r),a.afterRender&&f.l.w(a.afterRender,null,[i,r.$data])),i}function r(e,t,o){return f.H(e)?e():"function"==typeof e?e(t,o):e}var s;f.Db=function(t){if(t!=e&&!(t instanceof f.O))throw Error("templateEngine must inherit from ko.templateEngine");s=t},f.Ab=function(t,o,a,l,c){if(a=a||{},(a.templateEngine||s)==e)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",l){var u=n(l);return f.B(function(){var e=o&&o instanceof f.U?o:new f.U(f.a.c(o)),s=r(t,e.$data,e),e=i(l,c,s,e,a);"replaceNode"==c&&(l=e,u=n(l))},null,{wa:function(){return!u||!f.a.nb(u)},i:u&&"replaceNode"==c?u.parentNode:u})}return f.M.wb(function(e){f.Ab(t,o,a,e,"replaceNode")})},f.kd=function(t,n,s,a,l){function c(e,t){o(t,g),s.afterRender&&s.afterRender(t,e),g=null}function u(e,o){g=l.createChildContext(e,s.as,function(e){e.$index=o});var n=r(t,e,g);return i(null,"ignoreTargetNode",n,g,s)}var g;return f.B(function(){var t=f.a.c(n)||[];"undefined"==typeof t.length&&(t=[t]),t=f.a.Ka(t,function(t){return s.includeDestroyed||t===e||null===t||!f.a.c(t._destroy)}),f.l.w(f.a.Bb,null,[a,t,u,s,c])},null,{i:a})};var a=f.a.e.I();f.d.template={init:function(e,t){var o=f.a.c(t());if("string"==typeof o||o.name)f.f.xa(e);else{if("nodes"in o){if(o=o.nodes||[],f.H(o))throw Error('The "nodes" option must be a plain, non-observable array.')}else o=f.f.childNodes(e);o=f.a.jc(o),new f.v.qa(e).nodes(o)}return{controlsDescendantBindings:!0}},update:function(t,o,n,i,r){var s,l=o();o=f.a.c(l),n=!0,i=null,"string"==typeof o?o={}:(l=o.name,"if"in o&&(n=f.a.c(o.if)),n&&"ifnot"in o&&(n=!f.a.c(o.ifnot)),s=f.a.c(o.data)),"foreach"in o?i=f.kd(l||t,n&&o.foreach||[],o,t,r):n?(r="data"in o?r.createChildContext(s,o.as):r,i=f.Ab(l||t,r,o,t)):f.f.xa(t),r=i,(s=f.a.e.get(t,a))&&"function"==typeof s.k&&s.k(),f.a.e.set(t,a,r&&r.ba()?r:e)}},f.h.ta.template=function(e){return e=f.h.yb(e),1==e.length&&e[0].unknown||f.h.ad(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},f.f.Z.template=!0}(),f.b("setTemplateEngine",f.Db),f.b("renderTemplate",f.Ab),f.a.dc=function(e,t,o){if(e.length&&t.length){var n,i,r,s,a;for(n=i=0;(!o||n<o)&&(s=e[i]);++i){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),n=r=0;break}n+=r}}},f.a.ib=function(){function e(e,t,o,n,i){var r,s,a,l,c,u=Math.min,g=Math.max,h=[],d=e.length,p=t.length,m=p-d||1,v=d+p+1;for(r=0;r<=d;r++)for(l=a,h.push(a=[]),c=u(p,r+m),s=g(0,r-1);s<=c;s++)a[s]=s?r?e[r-1]===t[s-1]?l[s-1]:u(l[s]||v,a[s-1]||v)+1:s+1:r+1;for(u=[],g=[],m=[],r=d,s=p;r||s;)p=h[r][s]-1,s&&p===h[r][s-1]?g.push(u[u.length]={status:o,value:t[--s],index:s}):r&&p===h[r-1][s]?m.push(u[u.length]={status:n,value:e[--r],index:r}):(--s,--r,i.sparse||u.push({status:"retained",value:t[s]}));return f.a.dc(m,g,!i.dontLimitMoves&&10*d),u.reverse()}return function(t,o,n){return n="boolean"==typeof n?{dontLimitMoves:n}:n||{},t=t||[],o=o||[],t.length<o.length?e(t,o,"added","deleted",n):e(o,t,"deleted","added",n)}}(),f.b("utils.compareArrays",f.a.ib),function(){function t(t,o,n,i,r){var s=[],a=f.B(function(){var e=o(n,r,f.a.za(s,t))||[];0<s.length&&(f.a.qc(s,e),i&&f.l.w(i,null,[n,e,r])),s.length=0,f.a.ra(s,e)},null,{i:t,wa:function(){return!f.a.Qb(s)}});return{ca:s,B:a.ba()?a:e}}var o=f.a.e.I(),n=f.a.e.I();f.a.Bb=function(i,r,s,a,l){function c(e,t){w=h[t],y!==t&&(E[e]=w),w.qb(y++),f.a.za(w.ca,i),m.push(w),b.push(w)}function u(e,t){if(e)for(var o=0,n=t.length;o<n;o++)t[o]&&f.a.q(t[o].ca,function(n){e(n,o,t[o].ja)})}r=r||[],a=a||{};var g=f.a.e.get(i,o)===e,h=f.a.e.get(i,o)||[],d=f.a.fb(h,function(e){return e.ja}),p=f.a.ib(d,r,a.dontLimitMoves),m=[],v=0,y=0,_=[],b=[];r=[];for(var w,S,C,E=[],d=[],T=0;S=p[T];T++)switch(C=S.moved,S.status){case"deleted":C===e&&(w=h[v],w.B&&(w.B.k(),w.B=e),f.a.za(w.ca,i).length&&(a.beforeRemove&&(m.push(w),b.push(w),w.ja===n?w=null:r[T]=w),w&&_.push.apply(_,w.ca))),v++;break;case"retained":c(T,v++);break;case"added":C!==e?c(T,C):(w={ja:S.value,qb:f.N(y++)},m.push(w),b.push(w),g||(d[T]=w))}f.a.e.set(i,o,m),u(a.beforeMove,E),f.a.q(_,a.beforeRemove?f.$:f.removeNode);for(var P,T=0,g=f.f.firstChild(i);w=b[T];T++){for(w.ca||f.a.extend(w,t(i,s,w.ja,l,w.qb)),v=0;p=w.ca[v];g=p.nextSibling,P=p,v++)p!==g&&f.f.gc(i,p,P);!w.Wc&&l&&(l(w.ja,w.ca,w.qb),w.Wc=!0);
}for(u(a.beforeRemove,r),T=0;T<r.length;++T)r[T]&&(r[T].ja=n);u(a.afterMove,E),u(a.afterAdd,d)}}(),f.b("utils.setDomNodeChildrenFromArrayMapping",f.a.Bb),f.W=function(){this.allowTemplateRewriting=!1},f.W.prototype=new f.O,f.W.prototype.renderTemplateSource=function(e,t,o,n){return(t=(9>f.a.C?0:e.nodes)?e.nodes():null)?f.a.V(t.cloneNode(!0).childNodes):(e=e.text(),f.a.ma(e,n))},f.W.sb=new f.W,f.Db(f.W.sb),f.b("nativeTemplateEngine",f.W),function(){f.vb=function(){var e=this.$c=function(){if(!r||!r.tmpl)return 0;try{if(0<=r.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,o,i,s){if(s=s||n,i=i||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var a=t.data("precompiled");return a||(a=t.text()||"",a=r.template(null,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),t.data("precompiled",a)),t=[o.$data],o=r.extend({koBindingContext:o},i.templateOptions),o=r.tmpl(a,t,o),o.appendTo(s.createElement("div")),r.fragments={},o},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(r.tmpl.tag.ko_code={open:"__.push($1 || '');"},r.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},f.vb.prototype=new f.O;var e=new f.vb;0<e.$c&&f.Db(e),f.b("jqueryTmplTemplateEngine",f.vb)}()})}()}(),!function(e,n){"use strict";function i(e,t){if(!e||"object"!=typeof e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var o;return u(t)?(t.deep=t.deep||!1,t.fields=t.fields||Object.getOwnPropertyNames(e),t.lazy=t.lazy||!1,c(e,t.fields,t)):(o=t||Object.getOwnPropertyNames(e),c(e,o,{})),e}function r(e){return e.name?e.name:(e.toString().trim().match(x)||[])[1]}function s(e){return e&&"object"==typeof e&&"Object"===r(e.constructor)}function a(e,t,o){var i=E.isObservable(e),r=!i&&Array.isArray(e),s=i?e:r?E.observableArray(e):E.observable(e);return o[t]=function(){return s},(r||i&&"push"in s)&&p(E,s),{configurable:!0,enumerable:!0,get:s,set:E.isWriteableObservable(s)?s:n}}function l(e,t,o){function n(e,t){return i?t?i(e):i:Array.isArray(e)?(i=E.observableArray(e),p(E,i),i):i=E.observable(e)}if(E.isObservable(e))return a(e,t,o);var i;return o[t]=function(){return n(e)},{configurable:!0,enumerable:!0,get:function(){return n(e)()},set:function(e){n(e,!0)}}}function c(e,t,o){if(t.length){var n=g(e,!0),i={};t.forEach(function(t){if(!(t in n)&&Object.getOwnPropertyDescriptor(e,t).configurable!==!1){var r=e[t];i[t]=(o.lazy?l:a)(r,t,n),o.deep&&s(r)&&c(r,Object.keys(r),o)}}),Object.defineProperties(e,i)}}function u(e){return!!e&&"object"==typeof e&&e.constructor===Object}function g(e,t){T||(T=A());var o=T.get(e);return!o&&t&&(o={},T.set(e,o)),o}function h(e,t){if(T)if(1===arguments.length)T.delete(e);else{var o=g(e,!1);o&&t.forEach(function(e){delete o[e]})}}function d(e,t,o){var n=this,r={owner:e,deferEvaluation:!0};if("function"==typeof o)r.read=o;else{if("value"in o)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof o.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');r.read=o.get,r.write=o.set}return e[t]=n.computed(r),i.call(n,e,[t]),e}function p(e,t){var o=null;e.computed(function(){o&&(o.dispose(),o=null);var n=t();n instanceof Array&&(o=f(e,t,n))})}function f(e,t,o){var n=m(e,o);return n.subscribe(t)}function m(e,t){P||(P=A());var o=P.get(t);if(!o){o=new e.subscribable,P.set(t,o);var n={};v(t,o,n),y(e,t,o,n)}return o}function v(e,t,o){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(n){var i=e[n];e[n]=function(){var e=i.apply(this,arguments);return o.pause!==!0&&t.notifySubscribers(this),e}})}function y(e,t,o,n){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(i){Object.defineProperty(t,i,{enumerable:!1,value:function(){var r;n.pause=!0;try{r=e.observableArray.fn[i].apply(e.observableArray(t),arguments)}finally{n.pause=!1}return o.notifySubscribers(t),r}})})}function _(e,t){if(!e||"object"!=typeof e)return null;var o=g(e,!1);return o&&t in o?o[t]():null}function b(e,t){if(!e||"object"!=typeof e)return!1;var o=g(e,!1);return!!o&&t in o}function w(e,t){var o=_(e,t);o&&o.valueHasMutated()}function S(e){e.track=i,e.untrack=h,e.getObservable=_,e.valueHasMutated=w,e.defineProperty=d,e.es5={getAllObservablesForObject:g,notifyWhenPresentOrFutureArrayValuesMutate:p,isTracked:b}}function C(){if("object"==typeof exports&&"object"==typeof module){E=t("knockout");var n=t("../lib/weakmap");S(E),A=function(){return new n},module.exports=E}else"function"==typeof o&&o.amd?o("KnockoutES5",["knockout"],function(t){return E=t,S(t),A=function(){return new e.WeakMap},t}):"ko"in e&&(E=e.ko,S(e.ko),A=function(){return new e.WeakMap})}var E,T,P,A,x=/^function\s*([^\s(]+)/;C()}(this),void function(e,t,o){function n(e,t,o){return"function"==typeof t&&(o=t,t=i(o).replace(/_$/,"")),c(e,t,{configurable:!0,writable:!0,value:o})}function i(e){return"function"!=typeof e?"":"_name"in e?e._name:"name"in e?e.name:u.call(e).match(d)[1]}function r(e,t){return t._name=e,t}function s(e){function t(t,i){return i||2===arguments.length?n.set(t,i):(i=n.get(t),i===o&&(i=e(t),n.set(t,i))),i}var n=new f;return e||(e=m),t}var a=Object.getOwnPropertyNames,l="object"==typeof window?Object.getOwnPropertyNames(window):[],c=Object.defineProperty,u=Function.prototype.toString,g=Object.create,h=Object.prototype.hasOwnProperty,d=/^\n?function\s?(\w*)?_?\(/,p=function(){function e(){var e=s(),o={};this.unlock=function(n){var i=d(n);if(h.call(i,e))return i[e](o);var r=g(null,t);return c(i,e,{value:function(e){return e===o?r:void 0}}),r}}var t={value:{writable:!0,value:o}},i=g(null),s=function(){var e=Math.random().toString(36).slice(2);return e in i?s():i[e]=e},u=s(),d=function(e){if(h.call(e,u))return e[u];if(!Object.isExtensible(e))throw new TypeError("Object must be extensible");var t=g(null);return c(e,u,{value:t}),t};return n(Object,r("getOwnPropertyNames",function(e){var t,o=Object(e);if("[object Window]"===o.toString())try{t=a(e)}catch(e){t=l}else t=a(e);return h.call(e,u)&&t.splice(t.indexOf(u),1),t})),n(e.prototype,r("get",function(e){return this.unlock(e).value})),n(e.prototype,r("set",function(e,t){this.unlock(e).value=t})),e}(),f=function(s){function a(t){return this===e||null==this||this===a.prototype?new a(t):(f(this,new p),void v(this,t))}function l(e){d(e);var n=m(this).get(e);return n===t?o:n}function c(e,n){d(e),m(this).set(e,n===o?t:n)}function u(e){return d(e),m(this).get(e)!==o}function g(e){d(e);var t=m(this),n=t.get(e)!==o;return t.set(e,o),n}function h(){return m(this),"[object WeakMap]"}var d=function(e){if(null==e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid WeakMap key")},f=function(e,t){var o=s.unlock(e);if(o.value)throw new TypeError("Object is already a WeakMap");o.value=t},m=function(e){var t=s.unlock(e).value;if(!t)throw new TypeError("WeakMap is not generic");return t},v=function(e,t){null!==t&&"object"==typeof t&&"function"==typeof t.forEach&&t.forEach(function(o,n){o instanceof Array&&2===o.length&&c.call(e,t[n][0],t[n][1])})};l._name="get",c._name="set",u._name="has",h._name="toString";var y=(""+Object).split("Object"),_=r("toString",function(){return y[0]+i(this)+y[1]});n(_,_);var b={__proto__:[]}instanceof Array?function(e){e.__proto__=_}:function(e){n(e,_)};return b(a),[h,l,c,u,g].forEach(function(e){n(a.prototype,e),b(e)}),a}(new p),m=Object.create?function(){return Object.create(null)}:function(){return{}};"undefined"!=typeof module?module.exports=f:"undefined"!=typeof exports?exports.WeakMap=f:"WeakMap"in e||(e.WeakMap=f),f.createStorage=s,e.WeakMap&&(e.WeakMap.createStorage=s)}(function(){return this}()),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof o&&o.amd)o("markdown-it-sanitizer",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.markdownitSanitizer=e()}}(function(){return function e(o,n,i){function r(a,l){if(!n[a]){if(!o[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var g=n[a]={exports:{}};o[a][0].call(g.exports,function(e){var t=o[a][1][e];return r(t?t:e)},g,g.exports,e,o,n,i)}return n[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,o){"use strict";t.exports=function(e,t){function o(e){var t=s.match(e);return t&&1===t.length&&0===t[0].index&&t[0].lastIndex===e.length?t[0].url:null}function n(e){var t='<a\\shref="([^"<>]*)"(?:\\stitle="([^"<>]*)")?>',n=RegExp(t,"i"),i='<img\\s([^<>]*src="[^"<>]*"[^<>]*)\\s?\\/?>',r=RegExp(i,"i");return e=e.replace(/<[^<>]*>?/gi,function(e){var t,i,s,l,u;if(/(^<->|^<-\s|^<3\s)/.test(e))return e;if(t=e.match(r)){var m=t[1];if(i=o(m.match(/src="([^"<>]*)"/i)[1]),s=m.match(/alt="([^"<>]*)"/i),s=s&&"undefined"!=typeof s[1]?s[1]:"",l=m.match(/title="([^"<>]*)"/i),l=l&&"undefined"!=typeof l[1]?l[1]:"",i&&/^https?:\/\//i.test(i))return""!==g?'<img src="'+i+'" alt="'+s+'" title="'+l+'" class="'+g+'">':'<img src="'+i+'" alt="'+s+'" title="'+l+'">'}return u=d.indexOf("a"),t=e.match(n),t&&(l="undefined"!=typeof t[2]?t[2]:"",i=o(t[1]),i&&/^(?:https?:\/\/|ftp:\/\/|mailto:|xmpp:)/i.test(i))?(h=!0,p[u]+=1,'<a href="'+i+'" title="'+l+'" target="_blank">'):(t=/<\/a>/i.test(e))?(h=!0,p[u]-=1,p[u]<0&&(f[u]=!0),"</a>"):(t=e.match(/<(br|hr)\s?\/?>/i))?"<"+t[1].toLowerCase()+">":(t=e.match(/<(\/?)(b|blockquote|code|em|h[1-6]|li|ol(?: start="\d+")?|p|pre|s|sub|sup|strong|ul)>/i),t&&!/<\/ol start="\d+"/i.test(e)?(h=!0,u=d.indexOf(t[2].toLowerCase().split(" ")[0]),"/"===t[1]?p[u]-=1:p[u]+=1,p[u]<0&&(f[u]=!0),"<"+t[1]+t[2].toLowerCase()+">"):c===!0?"":a(e))})}function i(e){var t,o,i;for(l=0;l<d.length;l++)p[l]=0;for(l=0;l<d.length;l++)f[l]=!1;for(h=!1,o=0;o<e.tokens.length;o++)if("html_block"===e.tokens[o].type&&(e.tokens[o].content=n(e.tokens[o].content)),"inline"===e.tokens[o].type)for(i=e.tokens[o].children,t=0;t<i.length;t++)"html_inline"===i[t].type&&(i[t].content=n(i[t].content))}function r(e){function t(e,t){var o,n;return o="a"===t?RegExp('<a href="[^"<>]*" title="[^"<>]*" target="_blank">',"g"):"ol"===t?/<ol(?: start="\d+")?>/g:RegExp("<"+t+">","g"),n=RegExp("</"+t+">","g"),u===!0?(e=e.replace(o,""),e=e.replace(n,"")):(e=e.replace(o,function(e){return a(e)}),e=e.replace(n,function(e){return a(e)})),e}function o(e){var o;for(o=0;o<d.length;o++)f[o]===!0&&(e=t(e,d[o]));return e}if(h!==!1){var n,i;for(l=0;l<d.length;l++)0!==p[l]&&(f[l]=!0);for(n=0;n<e.tokens.length;n++)if("html_block"!==e.tokens[n].type){if("inline"===e.tokens[n].type)for(i=e.tokens[n].children,l=0;l<i.length;l++)"html_inline"===i[l].type&&(i[l].content=o(i[l].content))}else e.tokens[n].content=o(e.tokens[n].content)}}var s=e.linkify,a=e.utils.escapeHtml;t=t?t:{};var l,c="undefined"!=typeof t.removeUnknown&&t.removeUnknown,u="undefined"!=typeof t.removeUnbalanced&&t.removeUnbalanced,g="undefined"!=typeof t.imageClass?t.imageClass:"",h=!1,d=["a","b","blockquote","code","em","h1","h2","h3","h4","h5","h6","li","ol","p","pre","s","sub","sup","strong","ul"],p=new Array(d.length),f=new Array(d.length);for(l=0;l<d.length;l++)p[l]=0;for(l=0;l<d.length;l++)f[l]=!1;e.core.ruler.after("linkify","sanitize_inline",i),e.core.ruler.after("sanitize_inline","sanitize_balance",r)}},{}]},{},[1])(1)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof o&&o.amd)o("markdown-it",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.markdownit=e()}}(function(){var e;return function e(o,n,i){function r(a,l){if(!n[a]){if(!o[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var g=n[a]={exports:{}};o[a][0].call(g.exports,function(e){var t=o[a][1][e];return r(t?t:e)},g,g.exports,e,o,n,i)}return n[a].exports}for(var s="function"==typeof t&&t,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,o){"use strict";t.exports=e("entities/maps/entities.json")},{"entities/maps/entities.json":53}],2:[function(e,t,o){"use strict";t.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},{}],3:[function(e,t,o){"use strict";var n="[a-zA-Z_:][a-zA-Z0-9:._-]*",i="[^\"'=<>`\\x00-\\x20]+",r="'[^']*'",s='"[^"]*"',a="(?:"+i+"|"+r+"|"+s+")",l="(?:\\s+"+n+"(?:\\s*=\\s*"+a+")?)",c="<[A-Za-z][A-Za-z0-9\\-]*"+l+"*\\s*\\/?>",u="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",g="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",h="<[?].*?[?]>",d="<![A-Z]+\\s+[^>]*>",p="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",f=new RegExp("^(?:"+c+"|"+u+"|"+g+"|"+h+"|"+d+"|"+p+")"),m=new RegExp("^(?:"+c+"|"+u+")");t.exports.HTML_TAG_RE=f,t.exports.HTML_OPEN_CLOSE_TAG_RE=m},{}],4:[function(e,t,o){"use strict";function n(e){return Object.prototype.toString.call(e)}function i(e){return"[object String]"===n(e)}function r(e,t){return w.call(e,t)}function s(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach(function(o){e[o]=t[o]})}}),e}function a(e,t,o){return[].concat(e.slice(0,t),o,e.slice(t+1))}function l(e){return!(e>=55296&&57343>=e)&&(!(e>=64976&&65007>=e)&&(65535!==(65535&e)&&65534!==(65535&e)&&(!(e>=0&&8>=e)&&(11!==e&&(!(e>=14&&31>=e)&&(!(e>=127&&159>=e)&&!(e>1114111)))))))}function c(e){if(e>65535){e-=65536;var t=55296+(e>>10),o=56320+(1023&e);return String.fromCharCode(t,o)}return String.fromCharCode(e)}function u(e,t){var o=0;return r(P,t)?P[t]:35===t.charCodeAt(0)&&T.test(t)&&(o="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10),l(o))?c(o):e}function g(e){return e.indexOf("\\")<0?e:e.replace(S,"$1")}function h(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(E,function(e,t,o){return t?t:u(e,o)})}function d(e){return M[e]}function p(e){return A.test(e)?e.replace(x,d):e}function f(e){return e.replace(L,"\\$&")}function m(e){switch(e){case 9:case 32:return!0}return!1}function v(e){if(e>=8192&&8202>=e)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function y(e){return D.test(e)}function _(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function b(e){return e.trim().replace(/\s+/g," ").toUpperCase()}var w=Object.prototype.hasOwnProperty,S=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,C=/&([a-z#][a-z0-9]{1,31});/gi,E=new RegExp(S.source+"|"+C.source,"gi"),T=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,P=e("./entities"),A=/[&<>"]/,x=/[&<>"]/g,M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},L=/[.?*+^$[\]\\(){}|-]/g,D=e("uc.micro/categories/P/regex");o.lib={},o.lib.mdurl=e("mdurl"),o.lib.ucmicro=e("uc.micro"),o.assign=s,o.isString=i,o.has=r,o.unescapeMd=g,o.unescapeAll=h,o.isValidEntityCode=l,o.fromCodePoint=c,o.escapeHtml=p,o.arrayReplaceAt=a,o.isSpace=m,o.isWhiteSpace=v,o.isMdAsciiPunct=_,o.isPunctChar=y,o.escapeRE=f,o.normalizeReference=b},{"./entities":1,mdurl:59,"uc.micro":65,"uc.micro/categories/P/regex":63}],5:[function(e,t,o){"use strict";o.parseLinkLabel=e("./parse_link_label"),o.parseLinkDestination=e("./parse_link_destination"),o.parseLinkTitle=e("./parse_link_title")},{"./parse_link_destination":6,"./parse_link_label":7,"./parse_link_title":8}],6:[function(e,t,o){"use strict";var n=e("../common/utils").isSpace,i=e("../common/utils").unescapeAll;t.exports=function(e,t,o){var r,s,a=0,l=t,c={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;o>t;){if(r=e.charCodeAt(t),10===r||n(r))return c;if(62===r)return c.pos=t+1,c.str=i(e.slice(l+1,t)),c.ok=!0,c;92===r&&o>t+1?t+=2:t++}return c}for(s=0;o>t&&(r=e.charCodeAt(t),32!==r)&&!(32>r||127===r);)if(92===r&&o>t+1)t+=2;else{if(40===r&&(s++,s>1))break;if(41===r&&(s--,0>s))break;t++}return l===t?c:(c.str=i(e.slice(l,t)),c.lines=a,c.pos=t,c.ok=!0,c)}},{"../common/utils":4}],7:[function(e,t,o){"use strict";t.exports=function(e,t,o){var n,i,r,s,a=-1,l=e.posMax,c=e.pos;for(e.pos=t+1,n=1;e.pos<l;){if(r=e.src.charCodeAt(e.pos),93===r&&(n--,0===n)){i=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===r)if(s===e.pos-1)n++;else if(o)return e.pos=c,-1}return i&&(a=e.pos),e.pos=c,a}},{}],8:[function(e,t,o){"use strict";var n=e("../common/utils").unescapeAll;t.exports=function(e,t,o){var i,r,s=0,a=t,l={ok:!1,pos:0,lines:0,str:""};if(t>=o)return l;if(r=e.charCodeAt(t),34!==r&&39!==r&&40!==r)return l;for(t++,40===r&&(r=41);o>t;){if(i=e.charCodeAt(t),i===r)return l.pos=t+1,l.lines=s,l.str=n(e.slice(a+1,t)),l.ok=!0,l;10===i?s++:92===i&&o>t+1&&(t++,10===e.charCodeAt(t)&&s++),t++}return l}},{"../common/utils":4}],9:[function(e,t,o){"use strict";function n(e){var t=e.trim().toLowerCase();return!v.test(t)||!!y.test(t)}function i(e){var t=p.parse(e,!0);if(t.hostname&&(!t.protocol||_.indexOf(t.protocol)>=0))try{t.hostname=f.toASCII(t.hostname)}catch(e){}return p.encode(p.format(t))}function r(e){var t=p.parse(e,!0);if(t.hostname&&(!t.protocol||_.indexOf(t.protocol)>=0))try{t.hostname=f.toUnicode(t.hostname)}catch(e){}return p.decode(p.format(t))}function s(e,t){return this instanceof s?(t||a.isString(e)||(t=e||{},e="default"),this.inline=new h,this.block=new g,this.core=new u,this.renderer=new c,this.linkify=new d,this.validateLink=n,this.normalizeLink=i,this.normalizeLinkText=r,this.utils=a,this.helpers=l,this.options={},this.configure(e),void(t&&this.set(t))):new s(e,t)}var a=e("./common/utils"),l=e("./helpers"),c=e("./renderer"),u=e("./parser_core"),g=e("./parser_block"),h=e("./parser_inline"),d=e("linkify-it"),p=e("mdurl"),f=e("punycode"),m={default:e("./presets/default"),zero:e("./presets/zero"),commonmark:e("./presets/commonmark")},v=/^(vbscript|javascript|file|data):/,y=/^data:image\/(gif|png|jpeg|webp);/,_=["http:","https:","mailto:"];s.prototype.set=function(e){return a.assign(this.options,e),this},s.prototype.configure=function(e){var t,o=this;if(a.isString(e)&&(t=e,e=m[t],!e))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&o.set(e.options),e.components&&Object.keys(e.components).forEach(function(t){e.components[t].rules&&o[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&o[t].ruler2.enableOnly(e.components[t].rules2)}),this},s.prototype.enable=function(e,t){var o=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){o=o.concat(this[t].ruler.enable(e,!0))},this),o=o.concat(this.inline.ruler2.enable(e,!0));var n=e.filter(function(e){return o.indexOf(e)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},s.prototype.disable=function(e,t){var o=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){o=o.concat(this[t].ruler.disable(e,!0))},this),o=o.concat(this.inline.ruler2.disable(e,!0));var n=e.filter(function(e){return o.indexOf(e)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},s.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},s.prototype.parse=function(e,t){var o=new this.core.State(e,this,t);return this.core.process(o),o.tokens},s.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},s.prototype.parseInline=function(e,t){var o=new this.core.State(e,this,t);return o.inlineMode=!0,this.core.process(o),o.tokens},s.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},t.exports=s},{"./common/utils":4,"./helpers":5,"./parser_block":10,"./parser_core":11,"./parser_inline":12,"./presets/commonmark":13,"./presets/default":14,"./presets/zero":15,"./renderer":16,"linkify-it":54,mdurl:59,punycode:52}],10:[function(e,t,o){"use strict";function n(){this.ruler=new i;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1],{alt:(r[e][2]||[]).slice()})}var i=e("./ruler"),r=[["table",e("./rules_block/table"),["paragraph","reference"]],["code",e("./rules_block/code")],["fence",e("./rules_block/fence"),["paragraph","reference","blockquote","list"]],["blockquote",e("./rules_block/blockquote"),["paragraph","reference","list"]],["hr",e("./rules_block/hr"),["paragraph","reference","blockquote","list"]],["list",e("./rules_block/list"),["paragraph","reference","blockquote"]],["reference",e("./rules_block/reference")],["heading",e("./rules_block/heading"),["paragraph","reference","blockquote"]],["lheading",e("./rules_block/lheading")],["html_block",e("./rules_block/html_block"),["paragraph","reference","blockquote"]],["paragraph",e("./rules_block/paragraph")]];n.prototype.tokenize=function(e,t,o){for(var n,i,r=this.ruler.getRules(""),s=r.length,a=t,l=!1,c=e.md.options.maxNesting;o>a&&(e.line=a=e.skipEmptyLines(a),!(a>=o))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=c){e.line=o;break}for(i=0;s>i&&!(n=r[i](e,a,o,!1));i++);if(e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),a=e.line,o>a&&e.isEmpty(a)){if(l=!0,a++,o>a&&"list"===e.parentType&&e.isEmpty(a))break;e.line=a}}},n.prototype.parse=function(e,t,o,n){var i;return e?(i=new this.State(e,t,o,n),void this.tokenize(i,i.line,i.lineMax)):[]},n.prototype.State=e("./rules_block/state_block"),t.exports=n},{"./ruler":17,"./rules_block/blockquote":18,"./rules_block/code":19,"./rules_block/fence":20,"./rules_block/heading":21,"./rules_block/hr":22,"./rules_block/html_block":23,"./rules_block/lheading":24,"./rules_block/list":25,"./rules_block/paragraph":26,"./rules_block/reference":27,"./rules_block/state_block":28,"./rules_block/table":29}],11:[function(e,t,o){"use strict";function n(){this.ruler=new i;for(var e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1])}var i=e("./ruler"),r=[["normalize",e("./rules_core/normalize")],["block",e("./rules_core/block")],["inline",e("./rules_core/inline")],["linkify",e("./rules_core/linkify")],["replacements",e("./rules_core/replacements")],["smartquotes",e("./rules_core/smartquotes")]];n.prototype.process=function(e){var t,o,n;for(n=this.ruler.getRules(""),t=0,o=n.length;o>t;t++)n[t](e)},n.prototype.State=e("./rules_core/state_core"),t.exports=n},{"./ruler":17,"./rules_core/block":30,"./rules_core/inline":31,"./rules_core/linkify":32,"./rules_core/normalize":33,"./rules_core/replacements":34,"./rules_core/smartquotes":35,"./rules_core/state_core":36}],12:[function(e,t,o){"use strict";function n(){var e;for(this.ruler=new i,e=0;e<r.length;e++)this.ruler.push(r[e][0],r[e][1]);for(this.ruler2=new i,e=0;e<s.length;e++)this.ruler2.push(s[e][0],s[e][1])}var i=e("./ruler"),r=[["text",e("./rules_inline/text")],["newline",e("./rules_inline/newline")],["escape",e("./rules_inline/escape")],["backticks",e("./rules_inline/backticks")],["strikethrough",e("./rules_inline/strikethrough").tokenize],["emphasis",e("./rules_inline/emphasis").tokenize],["link",e("./rules_inline/link")],["image",e("./rules_inline/image")],["autolink",e("./rules_inline/autolink")],["html_inline",e("./rules_inline/html_inline")],["entity",e("./rules_inline/entity")]],s=[["balance_pairs",e("./rules_inline/balance_pairs")],["strikethrough",e("./rules_inline/strikethrough").postProcess],["emphasis",e("./rules_inline/emphasis").postProcess],["text_collapse",e("./rules_inline/text_collapse")]];n.prototype.skipToken=function(e){var t,o,n=e.pos,i=this.ruler.getRules(""),r=i.length,s=e.md.options.maxNesting,a=e.cache;if("undefined"!=typeof a[n])return void(e.pos=a[n]);if(e.level<s)for(o=0;r>o&&(e.level++,t=i[o](e,!0),e.level--,!t);o++);else e.pos=e.posMax;t||e.pos++,a[n]=e.pos},n.prototype.tokenize=function(e){for(var t,o,n=this.ruler.getRules(""),i=n.length,r=e.posMax,s=e.md.options.maxNesting;e.pos<r;){if(e.level<s)for(o=0;i>o&&!(t=n[o](e,!1));o++);if(t){if(e.pos>=r)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},n.prototype.parse=function(e,t,o,n){var i,r,s,a=new this.State(e,t,o,n);for(this.tokenize(a),r=this.ruler2.getRules(""),s=r.length,i=0;s>i;i++)r[i](a)},n.prototype.State=e("./rules_inline/state_inline"),t.exports=n},{"./ruler":17,"./rules_inline/autolink":37,"./rules_inline/backticks":38,"./rules_inline/balance_pairs":39,"./rules_inline/emphasis":40,"./rules_inline/entity":41,"./rules_inline/escape":42,"./rules_inline/html_inline":43,"./rules_inline/image":44,"./rules_inline/link":45,"./rules_inline/newline":46,"./rules_inline/state_inline":47,"./rules_inline/strikethrough":48,"./rules_inline/text":49,"./rules_inline/text_collapse":50}],13:[function(e,t,o){"use strict";t.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},{}],14:[function(e,t,o){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},{}],15:[function(e,t,o){"use strict";t.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},{}],16:[function(e,t,o){"use strict";function n(){this.rules=i({},a)}var i=e("./common/utils").assign,r=e("./common/utils").unescapeAll,s=e("./common/utils").escapeHtml,a={};a.code_inline=function(e,t){return"<code>"+s(e[t].content)+"</code>"},a.code_block=function(e,t){return"<pre><code>"+s(e[t].content)+"</code></pre>\n"},a.fence=function(e,t,o,n,i){var a,l=e[t],c=l.info?r(l.info).trim():"",u="";return c&&(u=c.split(/\s+/g)[0],l.attrJoin("class",o.langPrefix+u)),a=o.highlight?o.highlight(l.content,u)||s(l.content):s(l.content),0===a.indexOf("<pre")?a+"\n":"<pre><code"+i.renderAttrs(l)+">"+a+"</code></pre>\n"},a.image=function(e,t,o,n,i){var r=e[t];return r.attrs[r.attrIndex("alt")][1]=i.renderInlineAsText(r.children,o,n),i.renderToken(e,t,o)},a.hardbreak=function(e,t,o){return o.xhtmlOut?"<br />\n":"<br>\n"},a.softbreak=function(e,t,o){return o.breaks?o.xhtmlOut?"<br />\n":"<br>\n":"\n"},a.text=function(e,t){return s(e[t].content)},a.html_block=function(e,t){return e[t].content},a.html_inline=function(e,t){return e[t].content},n.prototype.renderAttrs=function(e){var t,o,n;if(!e.attrs)return"";for(n="",t=0,o=e.attrs.length;o>t;t++)n+=" "+s(e.attrs[t][0])+'="'+s(e.attrs[t][1])+'"';return n},n.prototype.renderToken=function(e,t,o){var n,i="",r=!1,s=e[t];return s.hidden?"":(s.block&&-1!==s.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===s.nesting?"</":"<")+s.tag,i+=this.renderAttrs(s),0===s.nesting&&o.xhtmlOut&&(i+=" /"),s.block&&(r=!0,1===s.nesting&&t+1<e.length&&(n=e[t+1],"inline"===n.type||n.hidden?r=!1:-1===n.nesting&&n.tag===s.tag&&(r=!1))),i+=r?">\n":">")},n.prototype.renderInline=function(e,t,o){for(var n,i="",r=this.rules,s=0,a=e.length;a>s;s++)n=e[s].type,i+="undefined"!=typeof r[n]?r[n](e,s,t,o,this):this.renderToken(e,s,t);return i},n.prototype.renderInlineAsText=function(e,t,o){for(var n="",i=this.rules,r=0,s=e.length;s>r;r++)"text"===e[r].type?n+=i.text(e,r,t,o,this):"image"===e[r].type&&(n+=this.renderInlineAsText(e[r].children,t,o));return n},n.prototype.render=function(e,t,o){var n,i,r,s="",a=this.rules;for(n=0,i=e.length;i>n;n++)r=e[n].type,s+="inline"===r?this.renderInline(e[n].children,t,o):"undefined"!=typeof a[r]?a[e[n].type](e,n,t,o,this):this.renderToken(e,n,t,o);return s},t.exports=n},{"./common/utils":4}],17:[function(e,t,o){"use strict";function n(){this.__rules__=[],this.__cache__=null}n.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},n.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(o){o.enabled&&(t&&o.alt.indexOf(t)<0||e.__cache__[t].push(o.fn))})})},n.prototype.at=function(e,t,o){var n=this.__find__(e),i=o||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=i.alt||[],this.__cache__=null},n.prototype.before=function(e,t,o,n){var i=this.__find__(e),r=n||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:o,alt:r.alt||[]}),this.__cache__=null},n.prototype.after=function(e,t,o,n){var i=this.__find__(e),r=n||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:o,alt:r.alt||[]}),this.__cache__=null},n.prototype.push=function(e,t,o){var n=o||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},n.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var o=[];return e.forEach(function(e){var n=this.__find__(e);if(0>n){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,o.push(e)},this),this.__cache__=null,o},n.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},n.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var o=[];return e.forEach(function(e){var n=this.__find__(e);if(0>n){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,o.push(e)},this),this.__cache__=null,o},n.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},t.exports=n},{}],18:[function(e,t,o){"use strict";var n=e("../common/utils").isSpace;t.exports=function(e,t,o,i){var r,s,a,l,c,u,g,h,d,p,f,m,v,y,_,b,w=e.bMarks[t]+e.tShift[t],S=e.eMarks[t];if(62!==e.src.charCodeAt(w++))return!1;if(i)return!0;for(32===e.src.charCodeAt(w)&&w++,u=e.blkIndent,e.blkIndent=0,d=p=e.sCount[t]+w-(e.bMarks[t]+e.tShift[t]),c=[e.bMarks[t]],e.bMarks[t]=w;S>w&&(f=e.src.charCodeAt(w),n(f));)9===f?p+=4-p%4:p++,w++;for(s=w>=S,l=[e.sCount[t]],e.sCount[t]=p-d,a=[e.tShift[t]],e.tShift[t]=w-e.bMarks[t],m=e.md.block.ruler.getRules("blockquote"),r=t+1;o>r&&!(e.sCount[r]<u)&&(w=e.bMarks[r]+e.tShift[r],S=e.eMarks[r],!(w>=S));r++)if(62!==e.src.charCodeAt(w++)){if(s)break;for(b=!1,y=0,_=m.length;_>y;y++)if(m[y](e,r,o,!0)){b=!0;break}if(b)break;c.push(e.bMarks[r]),a.push(e.tShift[r]),l.push(e.sCount[r]),e.sCount[r]=-1}else{for(32===e.src.charCodeAt(w)&&w++,d=p=e.sCount[r]+w-(e.bMarks[r]+e.tShift[r]),c.push(e.bMarks[r]),e.bMarks[r]=w;S>w&&(f=e.src.charCodeAt(w),n(f));)9===f?p+=4-p%4:p++,w++;s=w>=S,l.push(e.sCount[r]),e.sCount[r]=p-d,a.push(e.tShift[r]),
e.tShift[r]=w-e.bMarks[r]}for(g=e.parentType,e.parentType="blockquote",v=e.push("blockquote_open","blockquote",1),v.markup=">",v.map=h=[t,0],e.md.block.tokenize(e,t,r),v=e.push("blockquote_close","blockquote",-1),v.markup=">",e.parentType=g,h[1]=e.line,y=0;y<a.length;y++)e.bMarks[y+t]=c[y],e.tShift[y+t]=a[y],e.sCount[y+t]=l[y];return e.blkIndent=u,!0}},{"../common/utils":4}],19:[function(e,t,o){"use strict";t.exports=function(e,t,o){var n,i,r,s=0;if(e.sCount[t]-e.blkIndent<4)return!1;for(i=n=t+1;o>n;)if(e.isEmpty(n)){if(s++,s>=2&&"list"===e.parentType)break;n++}else{if(s=0,!(e.sCount[n]-e.blkIndent>=4))break;n++,i=n}return e.line=i,r=e.push("code_block","code",0),r.content=e.getLines(t,i,4+e.blkIndent,!0),r.map=[t,e.line],!0}},{}],20:[function(e,t,o){"use strict";t.exports=function(e,t,o,n){var i,r,s,a,l,c,u,g=!1,h=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(h+3>d)return!1;if(i=e.src.charCodeAt(h),126!==i&&96!==i)return!1;if(l=h,h=e.skipChars(h,i),r=h-l,3>r)return!1;if(u=e.src.slice(l,h),s=e.src.slice(h,d),s.indexOf("`")>=0)return!1;if(n)return!0;for(a=t;a++,!(a>=o||(h=l=e.bMarks[a]+e.tShift[a],d=e.eMarks[a],d>h&&e.sCount[a]<e.blkIndent));)if(e.src.charCodeAt(h)===i&&!(e.sCount[a]-e.blkIndent>=4||(h=e.skipChars(h,i),r>h-l||(h=e.skipSpaces(h),d>h)))){g=!0;break}return r=e.sCount[t],e.line=a+(g?1:0),c=e.push("fence","code",0),c.info=s,c.content=e.getLines(t+1,a,r,!0),c.markup=u,c.map=[t,e.line],!0}},{}],21:[function(e,t,o){"use strict";var n=e("../common/utils").isSpace;t.exports=function(e,t,o,i){var r,s,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(r=e.src.charCodeAt(c),35!==r||c>=u)return!1;for(s=1,r=e.src.charCodeAt(++c);35===r&&u>c&&6>=s;)s++,r=e.src.charCodeAt(++c);return!(s>6||u>c&&32!==r)&&(!!i||(u=e.skipSpacesBack(u,c),a=e.skipCharsBack(u,35,c),a>c&&n(e.src.charCodeAt(a-1))&&(u=a),e.line=t+1,l=e.push("heading_open","h"+String(s),1),l.markup="########".slice(0,s),l.map=[t,e.line],l=e.push("inline","",0),l.content=e.src.slice(c,u).trim(),l.map=[t,e.line],l.children=[],l=e.push("heading_close","h"+String(s),-1),l.markup="########".slice(0,s),!0))}},{"../common/utils":4}],22:[function(e,t,o){"use strict";var n=e("../common/utils").isSpace;t.exports=function(e,t,o,i){var r,s,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(r=e.src.charCodeAt(c++),42!==r&&45!==r&&95!==r)return!1;for(s=1;u>c;){if(a=e.src.charCodeAt(c++),a!==r&&!n(a))return!1;a===r&&s++}return!(3>s)&&(!!i||(e.line=t+1,l=e.push("hr","hr",0),l.map=[t,e.line],l.markup=Array(s+1).join(String.fromCharCode(r)),!0))}},{"../common/utils":4}],23:[function(e,t,o){"use strict";var n=e("../common/html_blocks"),i=e("../common/html_re").HTML_OPEN_CLOSE_TAG_RE,r=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+n.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(i.source+"\\s*$"),/^$/,!1]];t.exports=function(e,t,o,n){var i,s,a,l,c=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(l=e.src.slice(c,u),i=0;i<r.length&&!r[i][0].test(l);i++);if(i===r.length)return!1;if(n)return r[i][2];if(s=t+1,!r[i][1].test(l))for(;o>s&&!(e.sCount[s]<e.blkIndent);s++)if(c=e.bMarks[s]+e.tShift[s],u=e.eMarks[s],l=e.src.slice(c,u),r[i][1].test(l)){0!==l.length&&s++;break}return e.line=s,a=e.push("html_block","",0),a.map=[t,s],a.content=e.getLines(t,s,e.blkIndent,!0),!0}},{"../common/html_blocks":2,"../common/html_re":3}],24:[function(e,t,o){"use strict";t.exports=function(e,t,o){for(var n,i,r,s,a,l,c,u,g,h=t+1,d=e.md.block.ruler.getRules("paragraph");o>h&&!e.isEmpty(h);h++)if(!(e.sCount[h]-e.blkIndent>3)){if(e.sCount[h]>=e.blkIndent&&(l=e.bMarks[h]+e.tShift[h],c=e.eMarks[h],c>l&&(g=e.src.charCodeAt(l),(45===g||61===g)&&(l=e.skipChars(l,g),l=e.skipSpaces(l),l>=c)))){u=61===g?1:2;break}if(!(e.sCount[h]<0)){for(i=!1,r=0,s=d.length;s>r;r++)if(d[r](e,h,o,!0)){i=!0;break}if(i)break}}return!!u&&(n=e.getLines(t,h,e.blkIndent,!1).trim(),e.line=h+1,a=e.push("heading_open","h"+String(u),1),a.markup=String.fromCharCode(g),a.map=[t,e.line],a=e.push("inline","",0),a.content=n,a.map=[t,e.line-1],a.children=[],a=e.push("heading_close","h"+String(u),-1),a.markup=String.fromCharCode(g),!0)}},{}],25:[function(e,t,o){"use strict";function n(e,t){var o,n,i,r;return n=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=e.src.charCodeAt(n++),42!==o&&45!==o&&43!==o?-1:i>n&&(r=e.src.charCodeAt(n),!s(r))?-1:n}function i(e,t){var o,n=e.bMarks[t]+e.tShift[t],i=n,r=e.eMarks[t];if(i+1>=r)return-1;if(o=e.src.charCodeAt(i++),48>o||o>57)return-1;for(;;){if(i>=r)return-1;if(o=e.src.charCodeAt(i++),!(o>=48&&57>=o)){if(41===o||46===o)break;return-1}if(i-n>=10)return-1}return r>i&&(o=e.src.charCodeAt(i),!s(o))?-1:i}function r(e,t){var o,n,i=e.level+2;for(o=t+2,n=e.tokens.length-2;n>o;o++)e.tokens[o].level===i&&"paragraph_open"===e.tokens[o].type&&(e.tokens[o+2].hidden=!0,e.tokens[o].hidden=!0,o+=2)}var s=e("../common/utils").isSpace;t.exports=function(e,t,o,a){var l,c,u,g,h,d,p,f,m,v,y,_,b,w,S,C,E,T,P,A,x,M,L,D,k,O,R,I,N=!0;if((y=i(e,t))>=0)T=!0;else{if(!((y=n(e,t))>=0))return!1;T=!1}if(E=e.src.charCodeAt(y-1),a)return!0;for(A=e.tokens.length,T?(v=e.bMarks[t]+e.tShift[t],C=Number(e.src.substr(v,y-v-1)),k=e.push("ordered_list_open","ol",1),1!==C&&(k.attrs=[["start",C]])):k=e.push("bullet_list_open","ul",1),k.map=M=[t,0],k.markup=String.fromCharCode(E),l=t,x=!1,D=e.md.block.ruler.getRules("list");o>l;){for(b=y,w=e.eMarks[l],c=u=e.sCount[l]+y-(e.bMarks[t]+e.tShift[t]);w>b&&(_=e.src.charCodeAt(b),s(_));)9===_?u+=4-u%4:u++,b++;if(P=b,S=P>=w?1:u-c,S>4&&(S=1),g=c+S,k=e.push("list_item_open","li",1),k.markup=String.fromCharCode(E),k.map=L=[t,0],d=e.blkIndent,f=e.tight,h=e.tShift[t],p=e.sCount[t],m=e.parentType,e.blkIndent=g,e.tight=!0,e.parentType="list",e.tShift[t]=P-e.bMarks[t],e.sCount[t]=u,P>=w&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,o):e.md.block.tokenize(e,t,o,!0),(!e.tight||x)&&(N=!1),x=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=d,e.tShift[t]=h,e.sCount[t]=p,e.tight=f,e.parentType=m,k=e.push("list_item_close","li",-1),k.markup=String.fromCharCode(E),l=t=e.line,L[1]=l,P=e.bMarks[t],l>=o)break;if(e.isEmpty(l))break;if(e.sCount[l]<e.blkIndent)break;for(I=!1,O=0,R=D.length;R>O;O++)if(D[O](e,l,o,!0)){I=!0;break}if(I)break;if(T){if(y=i(e,l),0>y)break}else if(y=n(e,l),0>y)break;if(E!==e.src.charCodeAt(y-1))break}return k=T?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1),k.markup=String.fromCharCode(E),M[1]=l,e.line=l,N&&r(e,A),!0}},{"../common/utils":4}],26:[function(e,t,o){"use strict";t.exports=function(e,t){for(var o,n,i,r,s,a=t+1,l=e.md.block.ruler.getRules("paragraph"),c=e.lineMax;c>a&&!e.isEmpty(a);a++)if(!(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)){for(n=!1,i=0,r=l.length;r>i;i++)if(l[i](e,a,c,!0)){n=!0;break}if(n)break}return o=e.getLines(t,a,e.blkIndent,!1).trim(),e.line=a,s=e.push("paragraph_open","p",1),s.map=[t,e.line],s=e.push("inline","",0),s.content=o,s.map=[t,e.line],s.children=[],s=e.push("paragraph_close","p",-1),!0}},{}],27:[function(e,t,o){"use strict";var n=e("../helpers/parse_link_destination"),i=e("../helpers/parse_link_title"),r=e("../common/utils").normalizeReference,s=e("../common/utils").isSpace;t.exports=function(e,t,o,a){var l,c,u,g,h,d,p,f,m,v,y,_,b,w,S,C=0,E=e.bMarks[t]+e.tShift[t],T=e.eMarks[t],P=t+1;if(91!==e.src.charCodeAt(E))return!1;for(;++E<T;)if(93===e.src.charCodeAt(E)&&92!==e.src.charCodeAt(E-1)){if(E+1===T)return!1;if(58!==e.src.charCodeAt(E+1))return!1;break}for(g=e.lineMax,w=e.md.block.ruler.getRules("reference");g>P&&!e.isEmpty(P);P++)if(!(e.sCount[P]-e.blkIndent>3||e.sCount[P]<0)){for(b=!1,d=0,p=w.length;p>d;d++)if(w[d](e,P,g,!0)){b=!0;break}if(b)break}for(_=e.getLines(t,P,e.blkIndent,!1).trim(),T=_.length,E=1;T>E;E++){if(l=_.charCodeAt(E),91===l)return!1;if(93===l){m=E;break}10===l?C++:92===l&&(E++,T>E&&10===_.charCodeAt(E)&&C++)}if(0>m||58!==_.charCodeAt(m+1))return!1;for(E=m+2;T>E;E++)if(l=_.charCodeAt(E),10===l)C++;else if(!s(l))break;if(v=n(_,E,T),!v.ok)return!1;if(h=e.md.normalizeLink(v.str),!e.md.validateLink(h))return!1;for(E=v.pos,C+=v.lines,c=E,u=C,y=E;T>E;E++)if(l=_.charCodeAt(E),10===l)C++;else if(!s(l))break;for(v=i(_,E,T),T>E&&y!==E&&v.ok?(S=v.str,E=v.pos,C+=v.lines):(S="",E=c,C=u);T>E&&(l=_.charCodeAt(E),s(l));)E++;if(T>E&&10!==_.charCodeAt(E)&&S)for(S="",E=c,C=u;T>E&&(l=_.charCodeAt(E),s(l));)E++;return!(T>E&&10!==_.charCodeAt(E))&&(!!(f=r(_.slice(1,m)))&&(!!a||("undefined"==typeof e.env.references&&(e.env.references={}),"undefined"==typeof e.env.references[f]&&(e.env.references[f]={title:S,href:h}),e.line=t+C+1,!0)))}},{"../common/utils":4,"../helpers/parse_link_destination":6,"../helpers/parse_link_title":8}],28:[function(e,t,o){"use strict";function n(e,t,o,n){var i,s,a,l,c,u,g,h;for(this.src=e,this.md=t,this.env=o,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",s=this.src,h=!1,a=l=u=g=0,c=s.length;c>l;l++){if(i=s.charCodeAt(l),!h){if(r(i)){u++,9===i?g+=4-g%4:g++;continue}h=!0}(10===i||l===c-1)&&(10!==i&&l++,this.bMarks.push(a),this.eMarks.push(l),this.tShift.push(u),this.sCount.push(g),h=!1,u=0,g=0,a=l+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.lineMax=this.bMarks.length-1}var i=e("../token"),r=e("../common/utils").isSpace;n.prototype.push=function(e,t,o){var n=new i(e,t,o);return n.block=!0,0>o&&this.level--,n.level=this.level,o>0&&this.level++,this.tokens.push(n),n},n.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},n.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;t>e&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},n.prototype.skipSpaces=function(e){for(var t,o=this.src.length;o>e&&(t=this.src.charCodeAt(e),r(t));e++);return e},n.prototype.skipSpacesBack=function(e,t){if(t>=e)return e;for(;e>t;)if(!r(this.src.charCodeAt(--e)))return e+1;return e},n.prototype.skipChars=function(e,t){for(var o=this.src.length;o>e&&this.src.charCodeAt(e)===t;e++);return e},n.prototype.skipCharsBack=function(e,t,o){if(o>=e)return e;for(;e>o;)if(t!==this.src.charCodeAt(--e))return e+1;return e},n.prototype.getLines=function(e,t,o,n){var i,s,a,l,c,u,g,h=e;if(e>=t)return"";for(u=new Array(t-e),i=0;t>h;h++,i++){for(s=0,g=l=this.bMarks[h],c=t>h+1||n?this.eMarks[h]+1:this.eMarks[h];c>l&&o>s;){if(a=this.src.charCodeAt(l),r(a))9===a?s+=4-s%4:s++;else{if(!(l-g<this.tShift[h]))break;s++}l++}u[i]=this.src.slice(l,c)}return u.join("")},n.prototype.Token=i,t.exports=n},{"../common/utils":4,"../token":51}],29:[function(e,t,o){"use strict";function n(e,t){var o=e.bMarks[t]+e.blkIndent,n=e.eMarks[t];return e.src.substr(o,n-o)}function i(e){var t,o=[],n=0,i=e.length,r=0,s=0,a=!1,l=0;for(t=e.charCodeAt(n);i>n;)96===t&&r%2===0?(a=!a,l=n):124!==t||r%2!==0||a?92===t?r++:r=0:(o.push(e.substring(s,n)),s=n+1),n++,n===i&&a&&(a=!1,n=l+1),t=e.charCodeAt(n);return o.push(e.substring(s)),o}t.exports=function(e,t,o,r){var s,a,l,c,u,g,h,d,p,f,m,v;if(t+2>o)return!1;if(u=t+1,e.sCount[u]<e.blkIndent)return!1;if(l=e.bMarks[u]+e.tShift[u],l>=e.eMarks[u])return!1;if(s=e.src.charCodeAt(l),124!==s&&45!==s&&58!==s)return!1;if(a=n(e,t+1),!/^[-:| ]+$/.test(a))return!1;for(g=a.split("|"),p=[],c=0;c<g.length;c++){if(f=g[c].trim(),!f){if(0===c||c===g.length-1)continue;return!1}if(!/^:?-+:?$/.test(f))return!1;58===f.charCodeAt(f.length-1)?p.push(58===f.charCodeAt(0)?"center":"right"):58===f.charCodeAt(0)?p.push("left"):p.push("")}if(a=n(e,t).trim(),-1===a.indexOf("|"))return!1;if(g=i(a.replace(/^\||\|$/g,"")),h=g.length,h>p.length)return!1;if(r)return!0;for(d=e.push("table_open","table",1),d.map=m=[t,0],d=e.push("thead_open","thead",1),d.map=[t,t+1],d=e.push("tr_open","tr",1),d.map=[t,t+1],c=0;c<g.length;c++)d=e.push("th_open","th",1),d.map=[t,t+1],p[c]&&(d.attrs=[["style","text-align:"+p[c]]]),d=e.push("inline","",0),d.content=g[c].trim(),d.map=[t,t+1],d.children=[],d=e.push("th_close","th",-1);for(d=e.push("tr_close","tr",-1),d=e.push("thead_close","thead",-1),d=e.push("tbody_open","tbody",1),d.map=v=[t+2,0],u=t+2;o>u&&!(e.sCount[u]<e.blkIndent)&&(a=n(e,u).trim(),-1!==a.indexOf("|"));u++){for(g=i(a.replace(/^\||\|$/g,"")),d=e.push("tr_open","tr",1),c=0;h>c;c++)d=e.push("td_open","td",1),p[c]&&(d.attrs=[["style","text-align:"+p[c]]]),d=e.push("inline","",0),d.content=g[c]?g[c].trim():"",d.children=[],d=e.push("td_close","td",-1);d=e.push("tr_close","tr",-1)}return d=e.push("tbody_close","tbody",-1),d=e.push("table_close","table",-1),m[1]=v[1]=u,e.line=u,!0}},{}],30:[function(e,t,o){"use strict";t.exports=function(e){var t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},{}],31:[function(e,t,o){"use strict";t.exports=function(e){var t,o,n,i=e.tokens;for(o=0,n=i.length;n>o;o++)t=i[o],"inline"===t.type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},{}],32:[function(e,t,o){"use strict";function n(e){return/^<a[>\s]/i.test(e)}function i(e){return/^<\/a\s*>/i.test(e)}var r=e("../common/utils").arrayReplaceAt;t.exports=function(e){var t,o,s,a,l,c,u,g,h,d,p,f,m,v,y,_,b,w=e.tokens;if(e.md.options.linkify)for(o=0,s=w.length;s>o;o++)if("inline"===w[o].type&&e.md.linkify.pretest(w[o].content))for(a=w[o].children,m=0,t=a.length-1;t>=0;t--)if(c=a[t],"link_close"!==c.type){if("html_inline"===c.type&&(n(c.content)&&m>0&&m--,i(c.content)&&m++),!(m>0)&&"text"===c.type&&e.md.linkify.test(c.content)){for(h=c.content,b=e.md.linkify.match(h),u=[],f=c.level,p=0,g=0;g<b.length;g++)v=b[g].url,y=e.md.normalizeLink(v),e.md.validateLink(y)&&(_=b[g].text,_=b[g].schema?"mailto:"!==b[g].schema||/^mailto:/i.test(_)?e.md.normalizeLinkText(_):e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,""),d=b[g].index,d>p&&(l=new e.Token("text","",0),l.content=h.slice(p,d),l.level=f,u.push(l)),l=new e.Token("link_open","a",1),l.attrs=[["href",y]],l.level=f++,l.markup="linkify",l.info="auto",u.push(l),l=new e.Token("text","",0),l.content=_,l.level=f,u.push(l),l=new e.Token("link_close","a",-1),l.level=--f,l.markup="linkify",l.info="auto",u.push(l),p=b[g].lastIndex);p<h.length&&(l=new e.Token("text","",0),l.content=h.slice(p),l.level=f,u.push(l)),w[o].children=a=r(a,t,u)}}else for(t--;a[t].level!==c.level&&"link_open"!==a[t].type;)t--}},{"../common/utils":4}],33:[function(e,t,o){"use strict";var n=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,i=/\u0000/g;t.exports=function(e){var t;t=e.src.replace(n,"\n"),t=t.replace(i,"�"),e.src=t}},{}],34:[function(e,t,o){"use strict";function n(e,t){return c[t.toLowerCase()]}function i(e){var t,o;for(t=e.length-1;t>=0;t--)o=e[t],"text"===o.type&&(o.content=o.content.replace(l,n))}function r(e){var t,o;for(t=e.length-1;t>=0;t--)o=e[t],"text"===o.type&&s.test(o.content)&&(o.content=o.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2"))}var s=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,a=/\((c|tm|r|p)\)/i,l=/\((c|tm|r|p)\)/gi,c={c:"©",r:"®",p:"§",tm:"™"};t.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(a.test(e.tokens[t].content)&&i(e.tokens[t].children),s.test(e.tokens[t].content)&&r(e.tokens[t].children))}},{}],35:[function(e,t,o){"use strict";function n(e,t,o){return e.substr(0,t)+o+e.substr(t+1)}function i(e,t){var o,i,l,g,h,d,p,f,m,v,y,_,b,w,S,C,E,T,P,A,x;for(P=[],o=0;o<e.length;o++){for(i=e[o],p=e[o].level,E=P.length-1;E>=0&&!(P[E].level<=p);E--);if(P.length=E+1,"text"===i.type){l=i.content,h=0,d=l.length;e:for(;d>h&&(c.lastIndex=h,g=c.exec(l));){if(S=C=!0,h=g.index+1,T="'"===g[0],m=32,g.index-1>=0)m=l.charCodeAt(g.index-1);else for(E=o-1;E>=0;E--)if("text"===e[E].type){m=e[E].content.charCodeAt(e[E].content.length-1);break}if(v=32,d>h)v=l.charCodeAt(h);else for(E=o+1;E<e.length;E++)if("text"===e[E].type){v=e[E].content.charCodeAt(0);break}if(y=a(m)||s(String.fromCharCode(m)),_=a(v)||s(String.fromCharCode(v)),b=r(m),w=r(v),w?S=!1:_&&(b||y||(S=!1)),b?C=!1:y&&(w||_||(C=!1)),34===v&&'"'===g[0]&&m>=48&&57>=m&&(C=S=!1),S&&C&&(S=!1,C=_),S||C){if(C)for(E=P.length-1;E>=0&&(f=P[E],!(P[E].level<p));E--)if(f.single===T&&P[E].level===p){f=P[E],T?(A=t.md.options.quotes[2],x=t.md.options.quotes[3]):(A=t.md.options.quotes[0],x=t.md.options.quotes[1]),i.content=n(i.content,g.index,x),e[f.token].content=n(e[f.token].content,f.pos,A),h+=x.length-1,f.token===o&&(h+=A.length-1),l=i.content,d=l.length,P.length=E;continue e}S?P.push({token:o,pos:g.index,single:T,level:p}):C&&T&&(i.content=n(i.content,g.index,u))}else T&&(i.content=n(i.content,g.index,u))}}}}var r=e("../common/utils").isWhiteSpace,s=e("../common/utils").isPunctChar,a=e("../common/utils").isMdAsciiPunct,l=/['"]/,c=/['"]/g,u="’";t.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&l.test(e.tokens[t].content)&&i(e.tokens[t].children,e)}},{"../common/utils":4}],36:[function(e,t,o){"use strict";function n(e,t,o){this.src=e,this.env=o,this.tokens=[],this.inlineMode=!1,this.md=t}var i=e("../token");n.prototype.Token=i,t.exports=n},{"../token":51}],37:[function(e,t,o){"use strict";var n=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,i=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;t.exports=function(e,t){var o,r,s,a,l,c,u=e.pos;return 60===e.src.charCodeAt(u)&&(o=e.src.slice(u),!(o.indexOf(">")<0)&&(i.test(o)?(r=o.match(i),a=r[0].slice(1,-1),l=e.md.normalizeLink(a),!!e.md.validateLink(l)&&(t||(c=e.push("link_open","a",1),c.attrs=[["href",l]],c.markup="autolink",c.info="auto",c=e.push("text","",0),c.content=e.md.normalizeLinkText(a),c=e.push("link_close","a",-1),c.markup="autolink",c.info="auto"),e.pos+=r[0].length,!0)):!!n.test(o)&&(s=o.match(n),a=s[0].slice(1,-1),l=e.md.normalizeLink("mailto:"+a),!!e.md.validateLink(l)&&(t||(c=e.push("link_open","a",1),c.attrs=[["href",l]],c.markup="autolink",c.info="auto",c=e.push("text","",0),c.content=e.md.normalizeLinkText(a),c=e.push("link_close","a",-1),c.markup="autolink",c.info="auto"),e.pos+=s[0].length,!0))))}},{}],38:[function(e,t,o){"use strict";t.exports=function(e,t){var o,n,i,r,s,a,l=e.pos,c=e.src.charCodeAt(l);if(96!==c)return!1;for(o=l,l++,n=e.posMax;n>l&&96===e.src.charCodeAt(l);)l++;for(i=e.src.slice(o,l),r=s=l;-1!==(r=e.src.indexOf("`",s));){for(s=r+1;n>s&&96===e.src.charCodeAt(s);)s++;if(s-r===i.length)return t||(a=e.push("code_inline","code",0),a.markup=i,a.content=e.src.slice(l,r).replace(/[ \n]+/g," ").trim()),e.pos=s,!0}return t||(e.pending+=i),e.pos+=i.length,!0}},{}],39:[function(e,t,o){"use strict";t.exports=function(e){var t,o,n,i,r=e.delimiters,s=e.delimiters.length;for(t=0;s>t;t++)if(n=r[t],n.close)for(o=t-n.jump-1;o>=0;){if(i=r[o],i.open&&i.marker===n.marker&&i.end<0&&i.level===n.level){n.jump=t-o,n.open=!1,i.end=t,i.jump=0;break}o-=i.jump+1}}},{}],40:[function(e,t,o){"use strict";t.exports.tokenize=function(e,t){var o,n,i,r=e.pos,s=e.src.charCodeAt(r);if(t)return!1;if(95!==s&&42!==s)return!1;for(n=e.scanDelims(e.pos,42===s),o=0;o<n.length;o++)i=e.push("text","",0),i.content=String.fromCharCode(s),e.delimiters.push({marker:s,jump:o,token:e.tokens.length-1,level:e.level,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},t.exports.postProcess=function(e){var t,o,n,i,r,s,a=e.delimiters,l=e.delimiters.length;for(t=0;l>t;t++)o=a[t],(95===o.marker||42===o.marker)&&-1!==o.end&&(n=a[o.end],s=l>t+1&&a[t+1].end===o.end-1&&a[t+1].token===o.token+1&&a[o.end-1].token===n.token-1&&a[t+1].marker===o.marker,r=String.fromCharCode(o.marker),i=e.tokens[o.token],i.type=s?"strong_open":"em_open",i.tag=s?"strong":"em",i.nesting=1,i.markup=s?r+r:r,i.content="",i=e.tokens[n.token],i.type=s?"strong_close":"em_close",i.tag=s?"strong":"em",i.nesting=-1,i.markup=s?r+r:r,i.content="",s&&(e.tokens[a[t+1].token].content="",e.tokens[a[o.end-1].token].content="",t++))}},{}],41:[function(e,t,o){"use strict";var n=e("../common/entities"),i=e("../common/utils").has,r=e("../common/utils").isValidEntityCode,s=e("../common/utils").fromCodePoint,a=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;t.exports=function(e,t){var o,c,u,g=e.pos,h=e.posMax;if(38!==e.src.charCodeAt(g))return!1;if(h>g+1)if(o=e.src.charCodeAt(g+1),35===o){if(u=e.src.slice(g).match(a))return t||(c="x"===u[1][0].toLowerCase()?parseInt(u[1].slice(1),16):parseInt(u[1],10),e.pending+=s(r(c)?c:65533)),e.pos+=u[0].length,!0}else if(u=e.src.slice(g).match(l),u&&i(n,u[1]))return t||(e.pending+=n[u[1]]),e.pos+=u[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}},{"../common/entities":1,"../common/utils":4}],42:[function(e,t,o){"use strict";for(var n=e("../common/utils").isSpace,i=[],r=0;256>r;r++)i.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){i[e.charCodeAt(0)]=1}),t.exports=function(e,t){var o,r=e.pos,s=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(r++,s>r){if(o=e.src.charCodeAt(r),256>o&&0!==i[o])return t||(e.pending+=e.src[r]),e.pos+=2,!0;if(10===o){for(t||e.push("hardbreak","br",0),r++;s>r&&(o=e.src.charCodeAt(r),n(o));)r++;return e.pos=r,!0}}return t||(e.pending+="\\"),e.pos++,!0}},{"../common/utils":4}],43:[function(e,t,o){"use strict";function n(e){var t=32|e;return t>=97&&122>=t}var i=e("../common/html_re").HTML_TAG_RE;t.exports=function(e,t){var o,r,s,a,l=e.pos;return!!e.md.options.html&&(s=e.posMax,!(60!==e.src.charCodeAt(l)||l+2>=s)&&(o=e.src.charCodeAt(l+1),!(33!==o&&63!==o&&47!==o&&!n(o)||!(r=e.src.slice(l).match(i)))&&(t||(a=e.push("html_inline","",0),a.content=e.src.slice(l,l+r[0].length)),e.pos+=r[0].length,!0)))}},{"../common/html_re":3}],44:[function(e,t,o){"use strict";var n=e("../helpers/parse_link_label"),i=e("../helpers/parse_link_destination"),r=e("../helpers/parse_link_title"),s=e("../common/utils").normalizeReference,a=e("../common/utils").isSpace;t.exports=function(e,t){var o,l,c,u,g,h,d,p,f,m,v,y,_,b="",w=e.pos,S=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(h=e.pos+2,g=n(e,e.pos+1,!1),0>g)return!1;if(d=g+1,S>d&&40===e.src.charCodeAt(d)){for(d++;S>d&&(l=e.src.charCodeAt(d),a(l)||10===l);d++);if(d>=S)return!1;for(_=d,f=i(e.src,d,e.posMax),f.ok&&(b=e.md.normalizeLink(f.str),e.md.validateLink(b)?d=f.pos:b=""),_=d;S>d&&(l=e.src.charCodeAt(d),a(l)||10===l);d++);if(f=r(e.src,d,e.posMax),S>d&&_!==d&&f.ok)for(m=f.str,d=f.pos;S>d&&(l=e.src.charCodeAt(d),a(l)||10===l);d++);else m="";if(d>=S||41!==e.src.charCodeAt(d))return e.pos=w,!1;d++}else{if("undefined"==typeof e.env.references)return!1;if(S>d&&91===e.src.charCodeAt(d)?(_=d+1,d=n(e,d),d>=0?u=e.src.slice(_,d++):d=g+1):d=g+1,u||(u=e.src.slice(h,g)),p=e.env.references[s(u)],!p)return e.pos=w,!1;b=p.href,m=p.title}return t||(c=e.src.slice(h,g),e.md.inline.parse(c,e.md,e.env,y=[]),v=e.push("image","img",0),v.attrs=o=[["src",b],["alt",""]],v.children=y,v.content=c,m&&o.push(["title",m])),e.pos=d,e.posMax=S,!0}},{"../common/utils":4,"../helpers/parse_link_destination":6,"../helpers/parse_link_label":7,"../helpers/parse_link_title":8}],45:[function(e,t,o){"use strict";var n=e("../helpers/parse_link_label"),i=e("../helpers/parse_link_destination"),r=e("../helpers/parse_link_title"),s=e("../common/utils").normalizeReference,a=e("../common/utils").isSpace;t.exports=function(e,t){var o,l,c,u,g,h,d,p,f,m,v="",y=e.pos,_=e.posMax,b=e.pos;if(91!==e.src.charCodeAt(e.pos))return!1;if(g=e.pos+1,u=n(e,e.pos,!0),0>u)return!1;if(h=u+1,_>h&&40===e.src.charCodeAt(h)){for(h++;_>h&&(l=e.src.charCodeAt(h),a(l)||10===l);h++);if(h>=_)return!1;for(b=h,d=i(e.src,h,e.posMax),d.ok&&(v=e.md.normalizeLink(d.str),e.md.validateLink(v)?h=d.pos:v=""),b=h;_>h&&(l=e.src.charCodeAt(h),a(l)||10===l);h++);if(d=r(e.src,h,e.posMax),_>h&&b!==h&&d.ok)for(f=d.str,h=d.pos;_>h&&(l=e.src.charCodeAt(h),a(l)||10===l);h++);else f="";if(h>=_||41!==e.src.charCodeAt(h))return e.pos=y,!1;h++}else{if("undefined"==typeof e.env.references)return!1;if(_>h&&91===e.src.charCodeAt(h)?(b=h+1,h=n(e,h),h>=0?c=e.src.slice(b,h++):h=u+1):h=u+1,c||(c=e.src.slice(g,u)),p=e.env.references[s(c)],!p)return e.pos=y,!1;v=p.href,f=p.title}return t||(e.pos=g,e.posMax=u,m=e.push("link_open","a",1),m.attrs=o=[["href",v]],f&&o.push(["title",f]),e.md.inline.tokenize(e),m=e.push("link_close","a",-1)),e.pos=h,e.posMax=_,!0}},{"../common/utils":4,"../helpers/parse_link_destination":6,"../helpers/parse_link_label":7,"../helpers/parse_link_title":8}],46:[function(e,t,o){"use strict";t.exports=function(e,t){var o,n,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;for(o=e.pending.length-1,n=e.posMax,t||(o>=0&&32===e.pending.charCodeAt(o)?o>=1&&32===e.pending.charCodeAt(o-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),i++;n>i&&32===e.src.charCodeAt(i);)i++;return e.pos=i,!0}},{}],47:[function(e,t,o){"use strict";function n(e,t,o,n){this.src=e,this.env=o,this.md=t,this.tokens=n,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}var i=e("../token"),r=e("../common/utils").isWhiteSpace,s=e("../common/utils").isPunctChar,a=e("../common/utils").isMdAsciiPunct;n.prototype.pushPending=function(){var e=new i("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},n.prototype.push=function(e,t,o){this.pending&&this.pushPending();var n=new i(e,t,o);return 0>o&&this.level--,n.level=this.level,o>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(n),n},n.prototype.scanDelims=function(e,t){var o,n,i,l,c,u,g,h,d,p=e,f=!0,m=!0,v=this.posMax,y=this.src.charCodeAt(e);for(o=e>0?this.src.charCodeAt(e-1):32;v>p&&this.src.charCodeAt(p)===y;)p++;return i=p-e,n=v>p?this.src.charCodeAt(p):32,g=a(o)||s(String.fromCharCode(o)),d=a(n)||s(String.fromCharCode(n)),u=r(o),h=r(n),h?f=!1:d&&(u||g||(f=!1)),u?m=!1:g&&(h||d||(m=!1)),t?(l=f,c=m):(l=f&&(!m||g),c=m&&(!f||d)),{can_open:l,can_close:c,length:i}},n.prototype.Token=i,t.exports=n},{"../common/utils":4,"../token":51}],48:[function(e,t,o){"use strict";t.exports.tokenize=function(e,t){var o,n,i,r,s,a=e.pos,l=e.src.charCodeAt(a);if(t)return!1;if(126!==l)return!1;if(n=e.scanDelims(e.pos,!0),r=n.length,s=String.fromCharCode(l),2>r)return!1;for(r%2&&(i=e.push("text","",0),i.content=s,r--),o=0;r>o;o+=2)i=e.push("text","",0),i.content=s+s,e.delimiters.push({marker:l,jump:o,token:e.tokens.length-1,level:e.level,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},t.exports.postProcess=function(e){var t,o,n,i,r,s=[],a=e.delimiters,l=e.delimiters.length;for(t=0;l>t;t++)n=a[t],126===n.marker&&-1!==n.end&&(i=a[n.end],r=e.tokens[n.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=e.tokens[i.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="","text"===e.tokens[i.token-1].type&&"~"===e.tokens[i.token-1].content&&s.push(i.token-1));for(;s.length;){for(t=s.pop(),o=t+1;o<e.tokens.length&&"s_close"===e.tokens[o].type;)o++;o--,t!==o&&(r=e.tokens[o],e.tokens[o]=e.tokens[t],e.tokens[t]=r)}}},{}],49:[function(e,t,o){"use strict";function n(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}t.exports=function(e,t){for(var o=e.pos;o<e.posMax&&!n(e.src.charCodeAt(o));)o++;return o!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,o)),e.pos=o,!0)}},{}],50:[function(e,t,o){"use strict";t.exports=function(e){var t,o,n=0,i=e.tokens,r=e.tokens.length;for(t=o=0;r>t;t++)n+=i[t].nesting,i[t].level=n,"text"===i[t].type&&r>t+1&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==o&&(i[o]=i[t]),o++);t!==o&&(i.length=o)}},{}],51:[function(e,t,o){"use strict";function n(e,t,o){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=o,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}n.prototype.attrIndex=function(e){var t,o,n;if(!this.attrs)return-1;for(t=this.attrs,o=0,n=t.length;n>o;o++)if(t[o][0]===e)return o;return-1},n.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},n.prototype.attrSet=function(e,t){var o=this.attrIndex(e),n=[e,t];0>o?this.attrPush(n):this.attrs[o]=n},n.prototype.attrJoin=function(e,t){var o=this.attrIndex(e);0>o?this.attrPush([e,t]):this.attrs[o][1]=this.attrs[o][1]+" "+t},t.exports=n},{}],52:[function(t,o,n){(function(t){!function(i){function r(e){throw new RangeError(R[e])}function s(e,t){for(var o=e.length,n=[];o--;)n[o]=t(e[o]);return n}function a(e,t){var o=e.split("@"),n="";o.length>1&&(n=o[0]+"@",e=o[1]),e=e.replace(O,".");var i=e.split("."),r=s(i,t).join(".");return n+r}function l(e){for(var t,o,n=[],i=0,r=e.length;r>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&r>i?(o=e.charCodeAt(i++),56320==(64512&o)?n.push(((1023&t)<<10)+(1023&o)+65536):(n.push(t),i--)):n.push(t);return n}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=F(e>>>10&1023|55296),e=56320|1023&e),t+=F(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:C}function g(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,o){var n=0;for(e=o?N(e/A):e>>1,e+=N(e/t);e>I*T>>1;n+=C)e=N(e/I);return N(n+(I+1)*e/(e+P))}function d(e){var t,o,n,i,s,a,l,g,d,p,f=[],m=e.length,v=0,y=M,_=x;for(o=e.lastIndexOf(L),0>o&&(o=0),n=0;o>n;++n)e.charCodeAt(n)>=128&&r("not-basic"),f.push(e.charCodeAt(n));for(i=o>0?o+1:0;m>i;){for(s=v,a=1,l=C;i>=m&&r("invalid-input"),g=u(e.charCodeAt(i++)),(g>=C||g>N((S-v)/a))&&r("overflow"),v+=g*a,d=_>=l?E:l>=_+T?T:l-_,!(d>g);l+=C)p=C-d,a>N(S/p)&&r("overflow"),a*=p;t=f.length+1,_=h(v-s,t,0==s),N(v/t)>S-y&&r("overflow"),y+=N(v/t),v%=t,f.splice(v++,0,y)}return c(f)}function p(e){var t,o,n,i,s,a,c,u,d,p,f,m,v,y,_,b=[];for(e=l(e),m=e.length,t=M,o=0,s=x,a=0;m>a;++a)f=e[a],128>f&&b.push(F(f));for(n=i=b.length,i&&b.push(L);m>n;){for(c=S,a=0;m>a;++a)f=e[a],f>=t&&c>f&&(c=f);for(v=n+1,c-t>N((S-o)/v)&&r("overflow"),o+=(c-t)*v,t=c,a=0;m>a;++a)if(f=e[a],t>f&&++o>S&&r("overflow"),f==t){for(u=o,d=C;p=s>=d?E:d>=s+T?T:d-s,!(p>u);d+=C)_=u-p,y=C-p,b.push(F(g(p+_%y,0))),u=N(_/y);b.push(F(g(u,0))),s=h(o,v,n==i),o=0,++n}++o,++t}return b.join("")}function f(e){return a(e,function(e){return D.test(e)?d(e.slice(4).toLowerCase()):e})}function m(e){return a(e,function(e){return k.test(e)?"xn--"+p(e):e})}var v="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof o&&o&&!o.nodeType&&o,_="object"==typeof t&&t;(_.global===_||_.window===_||_.self===_)&&(i=_);var b,w,S=2147483647,C=36,E=1,T=26,P=38,A=700,x=72,M=128,L="-",D=/^xn--/,k=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=C-E,N=Math.floor,F=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:l,encode:c},decode:d,encode:p,toASCII:m,toUnicode:f},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return b});else if(v&&y)if(o.exports==v)y.exports=b;else for(w in b)b.hasOwnProperty(w)&&(v[w]=b[w]);else i.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],53:[function(e,t,o){t.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",
amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},{}],54:[function(e,t,o){"use strict";function n(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){t&&Object.keys(t).forEach(function(o){e[o]=t[o]})}),e}function i(e){return Object.prototype.toString.call(e)}function r(e){return"[object String]"===i(e)}function s(e){return"[object Object]"===i(e)}function a(e){return"[object RegExp]"===i(e)}function l(e){return"[object Function]"===i(e)}function c(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(e){return Object.keys(e||{}).reduce(function(e,t){return e||y.hasOwnProperty(t)},!1)}function g(e){e.__index__=-1,e.__text_cache__=""}function h(e){return function(t,o){var n=t.slice(o);return e.test(n)?n.match(e)[0].length:0}}function d(){return function(e,t){t.normalize(e)}}function p(t){function o(e){return e.replace("%TLDS%",u.src_tlds)}function i(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}var u=t.re=n({},e("./lib/re")),p=t.__tlds__.slice();t.__tlds_replaced__||p.push(b),p.push(u.src_xn),u.src_tlds=p.join("|"),u.email_fuzzy=RegExp(o(u.tpl_email_fuzzy),"i"),u.link_fuzzy=RegExp(o(u.tpl_link_fuzzy),"i"),u.link_no_ip_fuzzy=RegExp(o(u.tpl_link_no_ip_fuzzy),"i"),u.host_fuzzy_test=RegExp(o(u.tpl_host_fuzzy_test),"i");var f=[];t.__compiled__={},Object.keys(t.__schemas__).forEach(function(e){var o=t.__schemas__[e];if(null!==o){var n={validate:null,link:null};return t.__compiled__[e]=n,s(o)?(a(o.validate)?n.validate=h(o.validate):l(o.validate)?n.validate=o.validate:i(e,o),void(l(o.normalize)?n.normalize=o.normalize:o.normalize?i(e,o):n.normalize=d())):r(o)?void f.push(e):void i(e,o)}}),f.forEach(function(e){t.__compiled__[t.__schemas__[e]]&&(t.__compiled__[e].validate=t.__compiled__[t.__schemas__[e]].validate,t.__compiled__[e].normalize=t.__compiled__[t.__schemas__[e]].normalize)}),t.__compiled__[""]={validate:null,normalize:d()};var m=Object.keys(t.__compiled__).filter(function(e){return e.length>0&&t.__compiled__[e]}).map(c).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:>|"+u.src_ZPCc+"))("+m+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:>|"+u.src_ZPCc+"))("+m+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),g(t)}function f(e,t){var o=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(o,n);this.schema=e.__schema__.toLowerCase(),this.index=o+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function m(e,t){var o=new f(e,t);return e.__compiled__[o.schema].normalize(o,e),o}function v(e,t){return this instanceof v?(t||u(e)&&(t=e,e={}),this.__opts__=n({},y,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n({},_,e),this.__compiled__={},this.__tlds__=w,this.__tlds_replaced__=!1,this.re={},void p(this)):new v(e,t)}var y={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},_={"http:":{validate:function(e,t,o){var n=e.slice(t);return o.re.http||(o.re.http=new RegExp("^\\/\\/"+o.re.src_auth+o.re.src_host_port_strict+o.re.src_path,"i")),o.re.http.test(n)?n.match(o.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,o){var n=e.slice(t);return o.re.no_http||(o.re.no_http=new RegExp("^"+o.re.src_auth+o.re.src_host_port_strict+o.re.src_path,"i")),o.re.no_http.test(n)?t>=3&&":"===e[t-3]?0:n.match(o.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,o){var n=e.slice(t);return o.re.mailto||(o.re.mailto=new RegExp("^"+o.re.src_email_name+"@"+o.re.src_host_strict,"i")),o.re.mailto.test(n)?n.match(o.re.mailto)[0].length:0}}},b="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",w="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");v.prototype.add=function(e,t){return this.__schemas__[e]=t,p(this),this},v.prototype.set=function(e){return this.__opts__=n(this.__opts__,e),this},v.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,o,n,i,r,s,a,l,c;if(this.re.schema_test.test(e))for(a=this.re.schema_search,a.lastIndex=0;null!==(t=a.exec(e));)if(i=this.testSchemaAt(e,t[2],a.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&null!==(o=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(r=o.index+o[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=o.index+o[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=e.indexOf("@"),c>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(r=n.index+n[1].length,s=n.index+n[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=s))),this.__index__>=0},v.prototype.pretest=function(e){return this.re.pretest.test(e)},v.prototype.testSchemaAt=function(e,t,o){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,o,this):0},v.prototype.match=function(e){var t=0,o=[];this.__index__>=0&&this.__text_cache__===e&&(o.push(m(this,t)),t=this.__last_index__);for(var n=t?e.slice(t):e;this.test(n);)o.push(m(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return o.length?o:null},v.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,o){return e!==o[t-1]}).reverse(),p(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,p(this),this)},v.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},t.exports=v},{"./lib/re":55}],55:[function(e,t,o){"use strict";var n=o.src_Any=e("uc.micro/properties/Any/regex").source,i=o.src_Cc=e("uc.micro/categories/Cc/regex").source,r=o.src_Z=e("uc.micro/categories/Z/regex").source,s=o.src_P=e("uc.micro/categories/P/regex").source,a=o.src_ZPCc=[r,s,i].join("|"),l=o.src_ZCc=[r,i].join("|"),c="(?:(?!"+a+")"+n+")",u="(?:(?![0-9]|"+a+")"+n+")",g=o.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";o.src_auth="(?:(?:(?!"+l+").)+@)?";var h=o.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",d=o.src_host_terminator="(?=$|"+a+")(?!-|_|:\\d|\\.-|\\.(?!$|"+a+"))",p=o.src_path="(?:[/?#](?:(?!"+l+"|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+l+"|\\]).)*\\]|\\((?:(?!"+l+"|[)]).)*\\)|\\{(?:(?!"+l+'|[}]).)*\\}|\\"(?:(?!'+l+'|["]).)+\\"|\\\'(?:(?!'+l+"|[']).)+\\'|\\'(?="+c+").|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+l+"|[.]).|\\-(?!--(?:[^-]|$))(?:-*)|\\,(?!"+l+").|\\!(?!"+l+"|[!]).|\\?(?!"+l+"|[?]).)+|\\/)?",f=o.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',m=o.src_xn="xn--[a-z0-9\\-]{1,59}",v=o.src_domain_root="(?:"+m+"|"+u+"{1,63})",y=o.src_domain="(?:"+m+"|(?:"+c+")|(?:"+c+"(?:-(?!-)|"+c+"){0,61}"+c+"))",_=o.src_host="(?:"+g+"|(?:(?:(?:"+y+")\\.)*"+v+"))",b=o.tpl_host_fuzzy="(?:"+g+"|(?:(?:(?:"+y+")\\.)+(?:%TLDS%)))",w=o.tpl_host_no_ip_fuzzy="(?:(?:(?:"+y+")\\.)+(?:%TLDS%))";
o.src_host_strict=_+d;var S=o.tpl_host_fuzzy_strict=b+d;o.src_host_port_strict=_+h+d;var C=o.tpl_host_port_fuzzy_strict=b+h+d,E=o.tpl_host_port_no_ip_fuzzy_strict=w+h+d;o.tpl_host_fuzzy_test="172.16.13.248|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+a+"|$))",o.tpl_email_fuzzy="(^|>|"+l+")("+f+"@"+S+")",o.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+a+"))((?![$+<=>^`|])"+C+p+")",o.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+a+"))((?![$+<=>^`|])"+E+p+")"},{"uc.micro/categories/Cc/regex":61,"uc.micro/categories/P/regex":63,"uc.micro/categories/Z/regex":64,"uc.micro/properties/Any/regex":66}],56:[function(e,t,o){"use strict";function n(e){var t,o,n=r[e];if(n)return n;for(n=r[e]=[],t=0;128>t;t++)o=String.fromCharCode(t),n.push(o);for(t=0;t<e.length;t++)o=e.charCodeAt(t),n[o]="%"+("0"+o.toString(16).toUpperCase()).slice(-2);return n}function i(e,t){var o;return"string"!=typeof t&&(t=i.defaultChars),o=n(t),e.replace(/(%[a-f0-9]{2})+/gi,function(e){var t,n,i,r,s,a,l,c="";for(t=0,n=e.length;n>t;t+=3)i=parseInt(e.slice(t+1,t+3),16),128>i?c+=o[i]:192===(224&i)&&n>t+3&&(r=parseInt(e.slice(t+4,t+6),16),128===(192&r))?(l=i<<6&1984|63&r,c+=128>l?"��":String.fromCharCode(l),t+=3):224===(240&i)&&n>t+6&&(r=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),128===(192&r)&&128===(192&s))?(l=i<<12&61440|r<<6&4032|63&s,c+=2048>l||l>=55296&&57343>=l?"���":String.fromCharCode(l),t+=6):240===(248&i)&&n>t+9&&(r=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),a=parseInt(e.slice(t+10,t+12),16),128===(192&r)&&128===(192&s)&&128===(192&a))?(l=i<<18&1835008|r<<12&258048|s<<6&4032|63&a,65536>l||l>1114111?c+="����":(l-=65536,c+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):c+="�";return c})}var r={};i.defaultChars=";/?:@&=+$,#",i.componentChars="",t.exports=i},{}],57:[function(e,t,o){"use strict";function n(e){var t,o,n=r[e];if(n)return n;for(n=r[e]=[],t=0;128>t;t++)o=String.fromCharCode(t),/^[0-9a-z]$/i.test(o)?n.push(o):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)n[e.charCodeAt(t)]=e[t];return n}function i(e,t,o){var r,s,a,l,c,u="";for("string"!=typeof t&&(o=t,t=i.defaultChars),"undefined"==typeof o&&(o=!0),c=n(t),r=0,s=e.length;s>r;r++)if(a=e.charCodeAt(r),o&&37===a&&s>r+2&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3)))u+=e.slice(r,r+3),r+=2;else if(128>a)u+=c[a];else if(a>=55296&&57343>=a){if(a>=55296&&56319>=a&&s>r+1&&(l=e.charCodeAt(r+1),l>=56320&&57343>=l)){u+=encodeURIComponent(e[r]+e[r+1]),r++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[r]);return u}var r={};i.defaultChars=";/?:@&=+$,-_.!~*'()#",i.componentChars="-_.!~*'()",t.exports=i},{}],58:[function(e,t,o){"use strict";t.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",t+=e.hostname&&-1!==e.hostname.indexOf(":")?"["+e.hostname+"]":e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},{}],59:[function(e,t,o){"use strict";t.exports.encode=e("./encode"),t.exports.decode=e("./decode"),t.exports.format=e("./format"),t.exports.parse=e("./parse")},{"./decode":56,"./encode":57,"./format":58,"./parse":60}],60:[function(e,t,o){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}function i(e,t){if(e&&e instanceof n)return e;var o=new n;return o.parse(e,t),o}var r=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],c=["{","}","|","\\","^","`"].concat(l),u=["'"].concat(c),g=["%","/","?",";","#"].concat(u),h=["/","?","#"],d=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};n.prototype.parse=function(e,t){var o,n,i,s,l,c=e;if(c=c.trim(),!t&&1===e.split("#").length){var u=a.exec(c);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}var y=r.exec(c);if(y&&(y=y[0],i=y.toLowerCase(),this.protocol=y,c=c.substr(y.length)),(t||y||c.match(/^\/\/[^@\/]+@[^@\/]+/))&&(l="//"===c.substr(0,2),!l||y&&m[y]||(c=c.substr(2),this.slashes=!0)),!m[y]&&(l||y&&!v[y])){var _=-1;for(o=0;o<h.length;o++)s=c.indexOf(h[o]),-1!==s&&(-1===_||_>s)&&(_=s);var b,w;for(w=-1===_?c.lastIndexOf("@"):c.lastIndexOf("@",_),-1!==w&&(b=c.slice(0,w),c=c.slice(w+1),this.auth=b),_=-1,o=0;o<g.length;o++)s=c.indexOf(g[o]),-1!==s&&(-1===_||_>s)&&(_=s);-1===_&&(_=c.length),":"===c[_-1]&&_--;var S=c.slice(0,_);c=c.slice(_),this.parseHost(S),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C){var E=this.hostname.split(/\./);for(o=0,n=E.length;n>o;o++){var T=E[o];if(T&&!T.match(p)){for(var P="",A=0,x=T.length;x>A;A++)P+=T.charCodeAt(A)>127?"x":T[A];if(!P.match(p)){var M=E.slice(0,o),L=E.slice(o+1),D=T.match(f);D&&(M.push(D[1]),L.unshift(D[2])),L.length&&(c=L.join(".")+c),this.hostname=M.join(".");break}}}}this.hostname.length>d&&(this.hostname=""),C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var k=c.indexOf("#");-1!==k&&(this.hash=c.substr(k),c=c.slice(0,k));var O=c.indexOf("?");return-1!==O&&(this.search=c.substr(O),c=c.slice(0,O)),c&&(this.pathname=c),v[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this},n.prototype.parseHost=function(e){var t=s.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.exports=i},{}],61:[function(e,t,o){t.exports=/[\0-\x1F\x7F-\x9F]/},{}],62:[function(e,t,o){t.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},{}],63:[function(e,t,o){t.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDE38-\uDE3D]|\uD805[\uDCC6\uDDC1-\uDDC9\uDE41-\uDE43]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F/},{}],64:[function(e,t,o){t.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},{}],65:[function(e,t,o){t.exports.Any=e("./properties/Any/regex"),t.exports.Cc=e("./categories/Cc/regex"),t.exports.Cf=e("./categories/Cf/regex"),t.exports.P=e("./categories/P/regex"),t.exports.Z=e("./categories/Z/regex")},{"./categories/Cc/regex":61,"./categories/Cf/regex":62,"./categories/P/regex":63,"./categories/Z/regex":64,"./properties/Any/regex":66}],66:[function(e,t,o){t.exports=/[\0-\uD7FF\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF]/},{}],67:[function(e,t,o){"use strict";t.exports=e("./lib/")},{"./lib/":9}]},{},[67])(67)}),o("Core/KnockoutMarkdownBinding",["markdown-it-sanitizer","markdown-it"],function(e,t){"use strict";function o(e){if(e instanceof HTMLAnchorElement&&(e.target="_blank"),e.childNodes&&e.childNodes.length>0)for(var t=0;t<e.childNodes.length;++t)o(e.childNodes[t])}var n=/<html(.|\s)*>(.|\s)*<\/html>/im,i=new t({html:!0,linkify:!0});i.use(e,{imageClass:"",removeUnbalanced:!1,removeUnknown:!1});var r={register:function(e){e.bindingHandlers.markdown={init:function(){return{controlsDescendantBindings:!0}},update:function(t,r){for(;t.firstChild;)e.removeNode(t.firstChild);var s,a=e.unwrap(r());s=n.test(a)?a:i.render(a);var l=e.utils.parseHtmlFragment(s,t);t.className=t.className+" markdown";for(var c=0;c<l.length;++c){var u=l[c];o(u),t.appendChild(u)}}}}};return r}),!function(e,t,n,i){"use strict";function r(e,t,o){return setTimeout(u(e,o),t)}function s(e,t,o){return!!Array.isArray(e)&&(a(e,o[t],o),!0)}function a(e,t,o){var n;if(e)if(e.forEach)e.forEach(t,o);else if(e.length!==i)for(n=0;n<e.length;)t.call(o,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(o,e[n],n,e)}function l(t,o,n){var i="DEPRECATED METHOD: "+o+"\n"+n+" AT \n";return function(){var o=new Error("get-stack-trace"),n=o&&o.stack?o.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,i,n),t.apply(this,arguments)}}function c(e,t,o){var n,i=t.prototype;n=e.prototype=Object.create(i),n.constructor=e,n._super=i,o&&le(n,o)}function u(e,t){return function(){return e.apply(t,arguments)}}function g(e,t){return typeof e==ge?e.apply(t?t[0]||i:i,t):e}function h(e,t){return e===i?t:e}function d(e,t,o){a(v(t),function(t){e.addEventListener(t,o,!1)})}function p(e,t,o){a(v(t),function(t){e.removeEventListener(t,o,!1)})}function f(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return e.indexOf(t)>-1}function v(e){return e.trim().split(/\s+/g)}function y(e,t,o){if(e.indexOf&&!o)return e.indexOf(t);for(var n=0;n<e.length;){if(o&&e[n][o]==t||!o&&e[n]===t)return n;n++}return-1}function _(e){return Array.prototype.slice.call(e,0)}function b(e,t,o){for(var n=[],i=[],r=0;r<e.length;){var s=t?e[r][t]:e[r];y(i,s)<0&&n.push(e[r]),i[r]=s,r++}return o&&(n=t?n.sort(function(e,o){return e[t]>o[t]}):n.sort()),n}function w(e,t){for(var o,n,r=t[0].toUpperCase()+t.slice(1),s=0;s<ce.length;){if(o=ce[s],n=o?o+r:t,n in e)return n;s++}return i}function S(){return ve++}function C(t){var o=t.ownerDocument||t;return o.defaultView||o.parentWindow||e}function E(e,t){var o=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){g(e.options.enable,[e])&&o.handler(t)},this.init()}function T(e){var t,o=e.options.inputClass;return new(t=o?o:be?B:we?j:_e?G:U)(e,P)}function P(e,t,o){var n=o.pointers.length,i=o.changedPointers.length,r=t&Ae&&n-i===0,s=t&(Me|Le)&&n-i===0;o.isFirst=!!r,o.isFinal=!!s,r&&(e.session={}),o.eventType=t,A(e,o),e.emit("hammer.input",o),e.recognize(o),e.session.prevInput=o}function A(e,t){var o=e.session,n=t.pointers,i=n.length;o.firstInput||(o.firstInput=L(t)),i>1&&!o.firstMultiple?o.firstMultiple=L(t):1===i&&(o.firstMultiple=!1);var r=o.firstInput,s=o.firstMultiple,a=s?s.center:r.center,l=t.center=D(n);t.timeStamp=pe(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=I(a,l),t.distance=R(a,l),x(o,t),t.offsetDirection=O(t.deltaX,t.deltaY);var c=k(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=de(c.x)>de(c.y)?c.x:c.y,t.scale=s?F(s.pointers,n):1,t.rotation=s?N(s.pointers,n):0,t.maxPointers=o.prevInput?t.pointers.length>o.prevInput.maxPointers?t.pointers.length:o.prevInput.maxPointers:t.pointers.length,M(o,t);var u=e.element;f(t.srcEvent.target,u)&&(u=t.srcEvent.target),t.target=u}function x(e,t){var o=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},r=e.prevInput||{};(t.eventType===Ae||r.eventType===Me)&&(i=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=e.offsetDelta={x:o.x,y:o.y}),t.deltaX=i.x+(o.x-n.x),t.deltaY=i.y+(o.y-n.y)}function M(e,t){var o,n,r,s,a=e.lastInterval||t,l=t.timeStamp-a.timeStamp;if(t.eventType!=Le&&(l>Pe||a.velocity===i)){var c=t.deltaX-a.deltaX,u=t.deltaY-a.deltaY,g=k(l,c,u);n=g.x,r=g.y,o=de(g.x)>de(g.y)?g.x:g.y,s=O(c,u),e.lastInterval=t}else o=a.velocity,n=a.velocityX,r=a.velocityY,s=a.direction;t.velocity=o,t.velocityX=n,t.velocityY=r,t.direction=s}function L(e){for(var t=[],o=0;o<e.pointers.length;)t[o]={clientX:he(e.pointers[o].clientX),clientY:he(e.pointers[o].clientY)},o++;return{timeStamp:pe(),pointers:t,center:D(t),deltaX:e.deltaX,deltaY:e.deltaY}}function D(e){var t=e.length;if(1===t)return{x:he(e[0].clientX),y:he(e[0].clientY)};for(var o=0,n=0,i=0;t>i;)o+=e[i].clientX,n+=e[i].clientY,i++;return{x:he(o/t),y:he(n/t)}}function k(e,t,o){return{x:t/e||0,y:o/e||0}}function O(e,t){return e===t?De:de(e)>=de(t)?0>e?ke:Oe:0>t?Re:Ie}function R(e,t,o){o||(o=Be);var n=t[o[0]]-e[o[0]],i=t[o[1]]-e[o[1]];return Math.sqrt(n*n+i*i)}function I(e,t,o){o||(o=Be);var n=t[o[0]]-e[o[0]],i=t[o[1]]-e[o[1]];return 180*Math.atan2(i,n)/Math.PI}function N(e,t){return I(t[1],t[0],He)+I(e[1],e[0],He)}function F(e,t){return R(t[0],t[1],He)/R(e[0],e[1],He)}function U(){this.evEl=je,this.evWin=ze,this.allow=!0,this.pressed=!1,E.apply(this,arguments)}function B(){this.evEl=qe,this.evWin=Ye,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=$e,this.evWin=Ke,this.started=!1,E.apply(this,arguments)}function V(e,t){var o=_(e.touches),n=_(e.changedTouches);return t&(Me|Le)&&(o=b(o.concat(n),"identifier",!0)),[o,n]}function j(){this.evTarget=Je,this.targetIds={},E.apply(this,arguments)}function z(e,t){var o=_(e.touches),n=this.targetIds;if(t&(Ae|xe)&&1===o.length)return n[o[0].identifier]=!0,[o,o];var i,r,s=_(e.changedTouches),a=[],l=this.target;if(r=o.filter(function(e){return f(e.target,l)}),t===Ae)for(i=0;i<r.length;)n[r[i].identifier]=!0,i++;for(i=0;i<s.length;)n[s[i].identifier]&&a.push(s[i]),t&(Me|Le)&&delete n[s[i].identifier],i++;return a.length?[b(r.concat(a),"identifier",!0),a]:void 0}function G(){E.apply(this,arguments);var e=u(this.handler,this);this.touch=new j(this.manager,e),this.mouse=new U(this.manager,e)}function W(e,t){this.manager=e,this.set(t)}function q(e){if(m(e,it))return it;var t=m(e,rt),o=m(e,st);return t&&o?it:t||o?t?rt:st:m(e,nt)?nt:ot}function Y(e){this.options=le({},this.defaults,e||{}),this.id=S(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=at,this.simultaneous={},this.requireFail=[]}function Z(e){return e&ht?"cancel":e&ut?"end":e&ct?"move":e&lt?"start":""}function $(e){return e==Ie?"down":e==Re?"up":e==ke?"left":e==Oe?"right":""}function K(e,t){var o=t.manager;return o?o.get(e):e}function X(){Y.apply(this,arguments)}function J(){X.apply(this,arguments),this.pX=null,this.pY=null}function Q(){X.apply(this,arguments)}function ee(){Y.apply(this,arguments),this._timer=null,this._input=null}function te(){X.apply(this,arguments)}function oe(){X.apply(this,arguments)}function ne(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ie(e,t){return t=t||{},t.recognizers=h(t.recognizers,ie.defaults.preset),new re(e,t)}function re(e,t){this.options=le({},ie.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=T(this),this.touchAction=new W(this,this.options.touchAction),se(this,!0),a(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function se(e,t){var o=e.element;o.style&&a(e.options.cssProps,function(e,n){o.style[w(o.style,n)]=t?e:""})}function ae(e,o){var n=t.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=o,o.target.dispatchEvent(n)}var le,ce=["","webkit","Moz","MS","ms","o"],ue=t.createElement("div"),ge="function",he=Math.round,de=Math.abs,pe=Date.now;le="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),o=1;o<arguments.length;o++){var n=arguments[o];if(n!==i&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}:Object.assign;var fe=l(function(e,t,o){for(var n=Object.keys(t),r=0;r<n.length;)(!o||o&&e[n[r]]===i)&&(e[n[r]]=t[n[r]]),r++;return e},"extend","Use `assign`."),me=l(function(e,t){return fe(e,t,!0)},"merge","Use `assign`."),ve=1,ye=/mobile|tablet|ip(ad|hone|od)|android/i,_e="ontouchstart"in e,be=w(e,"PointerEvent")!==i,we=_e&&ye.test(navigator.userAgent),Se="touch",Ce="pen",Ee="mouse",Te="kinect",Pe=25,Ae=1,xe=2,Me=4,Le=8,De=1,ke=2,Oe=4,Re=8,Ie=16,Ne=ke|Oe,Fe=Re|Ie,Ue=Ne|Fe,Be=["x","y"],He=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(C(this.element),this.evWin,this.domHandler)}};var Ve={mousedown:Ae,mousemove:xe,mouseup:Me},je="mousedown",ze="mousemove mouseup";c(U,E,{handler:function(e){var t=Ve[e.type];t&Ae&&0===e.button&&(this.pressed=!0),t&xe&&1!==e.which&&(t=Me),this.pressed&&this.allow&&(t&Me&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Ee,srcEvent:e}))}});var Ge={pointerdown:Ae,pointermove:xe,pointerup:Me,pointercancel:Le,pointerout:Le},We={2:Se,3:Ce,4:Ee,5:Te},qe="pointerdown",Ye="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(qe="MSPointerDown",Ye="MSPointerMove MSPointerUp MSPointerCancel"),c(B,E,{handler:function(e){var t=this.store,o=!1,n=e.type.toLowerCase().replace("ms",""),i=Ge[n],r=We[e.pointerType]||e.pointerType,s=r==Se,a=y(t,e.pointerId,"pointerId");i&Ae&&(0===e.button||s)?0>a&&(t.push(e),a=t.length-1):i&(Me|Le)&&(o=!0),0>a||(t[a]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),o&&t.splice(a,1))}});var Ze={touchstart:Ae,touchmove:xe,touchend:Me,touchcancel:Le},$e="touchstart",Ke="touchstart touchmove touchend touchcancel";c(H,E,{handler:function(e){var t=Ze[e.type];if(t===Ae&&(this.started=!0),this.started){var o=V.call(this,e,t);t&(Me|Le)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:o[0],changedPointers:o[1],pointerType:Se,srcEvent:e})}}});var Xe={touchstart:Ae,touchmove:xe,touchend:Me,touchcancel:Le},Je="touchstart touchmove touchend touchcancel";c(j,E,{handler:function(e){var t=Xe[e.type],o=z.call(this,e,t);o&&this.callback(this.manager,t,{pointers:o[0],changedPointers:o[1],pointerType:Se,srcEvent:e})}}),c(G,E,{handler:function(e,t,o){var n=o.pointerType==Se,i=o.pointerType==Ee;if(n)this.mouse.allow=!1;else if(i&&!this.mouse.allow)return;t&(Me|Le)&&(this.mouse.allow=!0),this.callback(e,t,o)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Qe=w(ue.style,"touchAction"),et=Qe!==i,tt="compute",ot="auto",nt="manipulation",it="none",rt="pan-x",st="pan-y";W.prototype={set:function(e){e==tt&&(e=this.compute()),et&&this.manager.element.style&&(this.manager.element.style[Qe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){g(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),q(e.join(" "))},preventDefaults:function(e){if(!et){var t=e.srcEvent,o=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var n=this.actions,i=m(n,it),r=m(n,st),s=m(n,rt);if(i){var a=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(a&&l&&c)return}if(!s||!r)return i||r&&o&Ne||s&&o&Fe?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var at=1,lt=2,ct=4,ut=8,gt=ut,ht=16,dt=32;Y.prototype={defaults:{},set:function(e){return le(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(s(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=K(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return s(e,"dropRecognizeWith",this)?this:(e=K(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(s(e,"requireFailure",this))return this;var t=this.requireFail;return e=K(e,this),-1===y(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(s(e,"dropRequireFailure",this))return this;e=K(e,this);var t=y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){o.manager.emit(t,e)}var o=this,n=this.state;ut>n&&t(o.options.event+Z(n)),t(o.options.event),e.additionalEvent&&t(e.additionalEvent),n>=ut&&t(o.options.event+Z(n))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=dt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(dt|at)))return!1;e++}return!0},recognize:function(e){var t=le({},e);return g(this.options.enable,[this,t])?(this.state&(gt|ht|dt)&&(this.state=at),this.state=this.process(t),void(this.state&(lt|ct|ut|ht)&&this.tryEmit(t))):(this.reset(),void(this.state=dt))},process:function(){},getTouchAction:function(){},reset:function(){}},c(X,Y,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,o=e.eventType,n=t&(lt|ct),i=this.attrTest(e);return n&&(o&Le||!i)?t|ht:n||i?o&Me?t|ut:t&lt?t|ct:lt:dt}}),c(J,X,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ue},getTouchAction:function(){var e=this.options.direction,t=[];return e&Ne&&t.push(st),e&Fe&&t.push(rt),t},directionTest:function(e){var t=this.options,o=!0,n=e.distance,i=e.direction,r=e.deltaX,s=e.deltaY;return i&t.direction||(t.direction&Ne?(i=0===r?De:0>r?ke:Oe,o=r!=this.pX,n=Math.abs(e.deltaX)):(i=0===s?De:0>s?Re:Ie,o=s!=this.pY,n=Math.abs(e.deltaY))),e.direction=i,o&&n>t.threshold&&i&t.direction},attrTest:function(e){return X.prototype.attrTest.call(this,e)&&(this.state&lt||!(this.state&lt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=$(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),c(Q,X,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[it]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&lt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),c(ee,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ot]},process:function(e){var t=this.options,o=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!n||!o||e.eventType&(Me|Le)&&!i)this.reset();else if(e.eventType&Ae)this.reset(),this._timer=r(function(){this.state=gt,this.tryEmit()},t.time,this);else if(e.eventType&Me)return gt;return dt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===gt&&(e&&e.eventType&Me?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=pe(),this.manager.emit(this.options.event,this._input)))}}),c(te,X,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[it]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&lt)}}),c(oe,X,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ne|Fe,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(e){var t,o=this.options.direction;return o&(Ne|Fe)?t=e.overallVelocity:o&Ne?t=e.overallVelocityX:o&Fe&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&o&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&de(t)>this.options.velocity&&e.eventType&Me},emit:function(e){var t=$(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),c(ne,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[nt]},process:function(e){var t=this.options,o=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&Ae&&0===this.count)return this.failTimeout();if(n&&i&&o){if(e.eventType!=Me)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||R(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,a&&s?this.count+=1:this.count=1,this._input=e;var l=this.count%t.taps;if(0===l)return this.hasRequireFailures()?(this._timer=r(function(){this.state=gt,this.tryEmit()},t.interval,this),lt):gt}return dt},failTimeout:function(){return this._timer=r(function(){this.state=dt},this.options.interval,this),dt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==gt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ie.VERSION="2.0.6",ie.defaults={domEvents:!1,touchAction:tt,enable:!0,inputTarget:null,inputClass:null,preset:[[te,{enable:!1}],[Q,{enable:!1},["rotate"]],[oe,{direction:Ne}],[J,{direction:Ne},["swipe"]],[ne],[ne,{event:"doubletap",taps:2},["tap"]],[ee]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pt=1,ft=2;re.prototype={set:function(e){return le(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?ft:pt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var o,n=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&gt)&&(i=t.curRecognizer=null);for(var r=0;r<n.length;)o=n[r],t.stopped===ft||i&&o!=i&&!o.canRecognizeWith(i)?o.reset():o.recognize(e),!i&&o.state&(lt|ct|ut)&&(i=t.curRecognizer=o),r++}},get:function(e){if(e instanceof Y)return e;for(var t=this.recognizers,o=0;o<t.length;o++)if(t[o].options.event==e)return t[o];return null},add:function(e){if(s(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(s(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,o=y(t,e);-1!==o&&(t.splice(o,1),this.touchAction.update())}return this},on:function(e,t){var o=this.handlers;return a(v(e),function(e){o[e]=o[e]||[],o[e].push(t)}),this},off:function(e,t){var o=this.handlers;return a(v(e),function(e){t?o[e]&&o[e].splice(y(o[e],t),1):delete o[e]}),this},emit:function(e,t){this.options.domEvents&&ae(e,t);var o=this.handlers[e]&&this.handlers[e].slice();if(o&&o.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<o.length;)o[n](t),n++}},destroy:function(){this.element&&se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},le(ie,{INPUT_START:Ae,INPUT_MOVE:xe,INPUT_END:Me,INPUT_CANCEL:Le,STATE_POSSIBLE:at,STATE_BEGAN:lt,STATE_CHANGED:ct,STATE_ENDED:ut,STATE_RECOGNIZED:gt,STATE_CANCELLED:ht,STATE_FAILED:dt,DIRECTION_NONE:De,DIRECTION_LEFT:ke,DIRECTION_RIGHT:Oe,DIRECTION_UP:Re,DIRECTION_DOWN:Ie,DIRECTION_HORIZONTAL:Ne,DIRECTION_VERTICAL:Fe,DIRECTION_ALL:Ue,Manager:re,Input:E,TouchAction:W,TouchInput:j,MouseInput:U,PointerEventInput:B,TouchMouseInput:G,SingleTouchInput:H,Recognizer:Y,AttrRecognizer:X,Tap:ne,Pan:J,Swipe:oe,Pinch:Q,Rotate:te,Press:ee,on:d,off:p,each:a,merge:me,extend:fe,assign:le,inherit:c,bindFn:u,prefixed:w});var mt="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};mt.Hammer=ie,"function"==typeof o&&o.amd?o("Hammer",[],function(){return ie}):"undefined"!=typeof module&&module.exports?module.exports=ie:e[n]=ie}(window,document,"Hammer"),o("Core/KnockoutHammerBinding",["KnockoutES5","Hammer"],function(e,t){"use strict";var o={register:function(e){e.bindingHandlers.swipeLeft={init:function(o,n,i,r,s){var a=e.unwrap(n());new t(o).on("swipeleft",function(e){var t=s.$data;a.apply(t,arguments)})}},e.bindingHandlers.swipeRight={init:function(o,n,i,r,s){var a=e.unwrap(n());new t(o).on("swiperight",function(e){var t=s.$data;a.apply(t,arguments)})}}}};return o}),o("Core/registerKnockoutBindings",["Cesium/Widgets/SvgPathBindingHandler","KnockoutES5","Core/KnockoutMarkdownBinding","Core/KnockoutHammerBinding"],function(e,t,o,n){"use strict";var i=function(){e.register(t),o.register(t),n.register(t),t.bindingHandlers.embeddedComponent={init:function(e,o,n,i,r){var s=t.unwrap(o());return s.show(e),{controlsDescendantBindings:!0}},update:function(e,t,o,n,i){}}};return i}),o("Core/createFragmentFromTemplate",[],function(){"use strict";var e=function(e){var t=document.createElement("div");t.innerHTML=e;for(var o=document.createDocumentFragment();t.firstChild;)o.appendChild(t.firstChild);return o};return e}),o("Core/loadView",["Cesium/Widgets/getElement","KnockoutES5","Core/createFragmentFromTemplate"],function(e,t,o){"use strict";var n=function(n,i,r){i=e(i);var s,a=o(n),l=[];for(s=0;s<a.childNodes.length;++s)l.push(a.childNodes[s]);for(i.appendChild(a),s=0;s<l.length;++s){var c=l[s];1!==c.nodeType&&8!==c.nodeType||t.applyBindings(r,c)}return l};return n}),!function(e,t,n){var i=e.L,r={};r.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=r:"function"==typeof o&&o.amd&&o("leaflet",r),r.noConflict=function(){return e.L=i,this},e.L=r,r.Util={extend:function(e){var t,o,n,i,r=Array.prototype.slice.call(arguments,1);for(o=0,n=r.length;n>o;o++){i=r[o]||{};for(t in i)i.hasOwnProperty(t)&&(e[t]=i[t])}return e},bind:function(e,t){var o=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,o||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(o){return o[t]=o[t]||++e,o[t]}}(),invokeEach:function(e,t,o){var n,i;if("object"==typeof e){i=Array.prototype.slice.call(arguments,3);for(n in e)t.apply(o,[n,e[n]].concat(i));return!0}return!1},limitExecByInterval:function(e,t,o){var n,i;return function r(){var s=arguments;return n?void(i=!0):(n=!0,setTimeout(function(){n=!1,i&&(r.apply(o,s),i=!1)},t),void e.apply(o,s))}},falseFn:function(){return!1},formatNum:function(e,t){var o=Math.pow(10,t||5);return Math.round(e*o)/o},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return r.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=r.extend({},e.options,t),e.options},getParamString:function(e,t,o){var n=[];for(var i in e)n.push(encodeURIComponent(o?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,o){var i=t[o];if(i===n)throw new Error("No value provided for variable "+e);return"function"==typeof i&&(i=i(t)),i})},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var o,n,i=["webkit","moz","o","ms"];for(o=0;o<i.length&&!n;o++)n=e[i[o]+t];return n}function o(t){var o=+new Date,i=Math.max(0,16-(o-n));return n=o+i,e.setTimeout(t,i)}var n=0,i=e.requestAnimationFrame||t("RequestAnimationFrame")||o,s=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){
e.clearTimeout(t)};r.Util.requestAnimFrame=function(t,n,s,a){return t=r.bind(t,n),s&&i===o?void t():i.call(e,t,a)},r.Util.cancelAnimFrame=function(t){t&&s.call(e,t)}}(),r.extend=r.Util.extend,r.bind=r.Util.bind,r.stamp=r.Util.stamp,r.setOptions=r.Util.setOptions,r.Class=function(){},r.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},o=function(){};o.prototype=this.prototype;var n=new o;n.constructor=t,t.prototype=n;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(t[i]=this[i]);e.statics&&(r.extend(t,e.statics),delete e.statics),e.includes&&(r.Util.extend.apply(null,[n].concat(e.includes)),delete e.includes),e.options&&n.options&&(e.options=r.extend({},n.options,e.options)),r.extend(n,e),n._initHooks=[];var s=this;return t.__super__=s.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){s.prototype.callInitHooks&&s.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=n._initHooks.length;t>e;e++)n._initHooks[e].call(this)}},t},r.Class.include=function(e){r.extend(this.prototype,e)},r.Class.mergeOptions=function(e){r.extend(this.prototype.options,e)},r.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),o="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o)};var s="_leaflet_events";r.Mixin={},r.Mixin.Events={addEventListener:function(e,t,o){if(r.Util.invokeEach(e,this.addEventListener,this,t,o))return this;var n,i,a,l,c,u,g,h=this[s]=this[s]||{},d=o&&o!==this&&r.stamp(o);for(e=r.Util.splitWords(e),n=0,i=e.length;i>n;n++)a={action:t,context:o||this},l=e[n],d?(c=l+"_idx",u=c+"_len",g=h[c]=h[c]||{},g[d]||(g[d]=[],h[u]=(h[u]||0)+1),g[d].push(a)):(h[l]=h[l]||[],h[l].push(a));return this},hasEventListeners:function(e){var t=this[s];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,o){if(!this[s])return this;if(!e)return this.clearAllEventListeners();if(r.Util.invokeEach(e,this.removeEventListener,this,t,o))return this;var n,i,a,l,c,u,g,h,d,p=this[s],f=o&&o!==this&&r.stamp(o);for(e=r.Util.splitWords(e),n=0,i=e.length;i>n;n++)if(a=e[n],u=a+"_idx",g=u+"_len",h=p[u],t){if(l=f&&h?h[f]:p[a]){for(c=l.length-1;c>=0;c--)l[c].action!==t||o&&l[c].context!==o||(d=l.splice(c,1),d[0].action=r.Util.falseFn);o&&h&&0===l.length&&(delete h[f],p[g]--)}}else delete p[a],delete p[u],delete p[g];return this},clearAllEventListeners:function(){return delete this[s],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var o,n,i,a,l,c=r.Util.extend({},t,{type:e,target:this}),u=this[s];if(u[e])for(o=u[e].slice(),n=0,i=o.length;i>n;n++)o[n].action.call(o[n].context,c);a=u[e+"_idx"];for(l in a)if(o=a[l].slice())for(n=0,i=o.length;i>n;n++)o[n].action.call(o[n].context,c);return this},addOneTimeEventListener:function(e,t,o){if(r.Util.invokeEach(e,this.addOneTimeEventListener,this,t,o))return this;var n=r.bind(function(){this.removeEventListener(e,t,o).removeEventListener(e,n,o)},this);return this.addEventListener(e,t,o).addEventListener(e,n,o)}},r.Mixin.Events.on=r.Mixin.Events.addEventListener,r.Mixin.Events.off=r.Mixin.Events.removeEventListener,r.Mixin.Events.once=r.Mixin.Events.addOneTimeEventListener,r.Mixin.Events.fire=r.Mixin.Events.fireEvent,function(){var o="ActiveXObject"in e,i=o&&!t.addEventListener,s=navigator.userAgent.toLowerCase(),a=-1!==s.indexOf("webkit"),l=-1!==s.indexOf("chrome"),c=-1!==s.indexOf("phantom"),u=-1!==s.indexOf("android"),g=-1!==s.search("android [23]"),h=-1!==s.indexOf("gecko"),d=typeof orientation!=n+"",p=!e.PointerEvent&&e.MSPointerEvent,f=e.PointerEvent&&e.navigator.pointerEnabled||p,m="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,v=t.documentElement,y=o&&"transition"in v.style,_="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!g,b="MozPerspective"in v.style,w="OTransition"in v.style,S=!e.L_DISABLE_3D&&(y||_||b||w)&&!c,C=!e.L_NO_TOUCH&&!c&&(f||"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch);r.Browser={ie:o,ielt9:i,webkit:a,gecko:h&&!a&&!e.opera&&!o,android:u,android23:g,chrome:l,ie3d:y,webkit3d:_,gecko3d:b,opera3d:w,any3d:S,mobile:d,mobileWebkit:d&&a,mobileWebkit3d:d&&_,mobileOpera:d&&e.opera,touch:C,msPointer:p,pointer:f,retina:m}}(),r.Point=function(e,t,o){this.x=o?Math.round(e):e,this.y=o?Math.round(t):t},r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},add:function(e){return this.clone()._add(r.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(r.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=r.point(e);var t=e.x-this.x,o=e.y-this.y;return Math.sqrt(t*t+o*o)},equals:function(e){return e=r.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=r.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+r.Util.formatNum(this.x)+", "+r.Util.formatNum(this.y)+")"}},r.point=function(e,t,o){return e instanceof r.Point?e:r.Util.isArray(e)?new r.Point(e[0],e[1]):e===n||null===e?e:new r.Point(e,t,o)},r.Bounds=function(e,t){if(e)for(var o=t?[e,t]:e,n=0,i=o.length;i>n;n++)this.extend(o[n])},r.Bounds.prototype={extend:function(e){return e=r.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new r.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new r.Point(this.min.x,this.max.y)},getTopRight:function(){return new r.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,o;return e="number"==typeof e[0]||e instanceof r.Point?r.point(e):r.bounds(e),e instanceof r.Bounds?(t=e.min,o=e.max):t=o=e,t.x>=this.min.x&&o.x<=this.max.x&&t.y>=this.min.y&&o.y<=this.max.y},intersects:function(e){e=r.bounds(e);var t=this.min,o=this.max,n=e.min,i=e.max,s=i.x>=t.x&&n.x<=o.x,a=i.y>=t.y&&n.y<=o.y;return s&&a},isValid:function(){return!(!this.min||!this.max)}},r.bounds=function(e,t){return!e||e instanceof r.Bounds?e:new r.Bounds(e,t)},r.Transformation=function(e,t,o,n){this._a=e,this._b=t,this._c=o,this._d=n},r.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new r.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},r.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,o){var n=e.style[o];if(!n&&e.currentStyle&&(n=e.currentStyle[o]),(!n||"auto"===n)&&t.defaultView){var i=t.defaultView.getComputedStyle(e,null);n=i?i[o]:null}return"auto"===n?null:n},getViewportOffset:function(e){var o,n=0,i=0,s=e,a=t.body,l=t.documentElement;do{if(n+=s.offsetTop||0,i+=s.offsetLeft||0,n+=parseInt(r.DomUtil.getStyle(s,"borderTopWidth"),10)||0,i+=parseInt(r.DomUtil.getStyle(s,"borderLeftWidth"),10)||0,o=r.DomUtil.getStyle(s,"position"),s.offsetParent===a&&"absolute"===o)break;if("fixed"===o){n+=a.scrollTop||l.scrollTop||0,i+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===o&&!s.offsetLeft){var c=r.DomUtil.getStyle(s,"width"),u=r.DomUtil.getStyle(s,"max-width"),g=s.getBoundingClientRect();("none"!==c||"none"!==u)&&(i+=g.left+s.clientLeft),n+=g.top+(a.scrollTop||l.scrollTop||0);break}s=s.offsetParent}while(s);s=e;do{if(s===a)break;n-=s.scrollTop||0,i-=s.scrollLeft||0,s=s.parentNode}while(s);return new r.Point(i,n)},documentIsLtr:function(){return r.DomUtil._docIsLtrCached||(r.DomUtil._docIsLtrCached=!0,r.DomUtil._docIsLtr="ltr"===r.DomUtil.getStyle(t.body,"direction")),r.DomUtil._docIsLtr},create:function(e,o,n){var i=t.createElement(e);return i.className=o,n&&n.appendChild(i),i},hasClass:function(e,t){if(e.classList!==n)return e.classList.contains(t);var o=r.DomUtil._getClass(e);return o.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(o)},addClass:function(e,t){if(e.classList!==n)for(var o=r.Util.splitWords(t),i=0,s=o.length;s>i;i++)e.classList.add(o[i]);else if(!r.DomUtil.hasClass(e,t)){var a=r.DomUtil._getClass(e);r.DomUtil._setClass(e,(a?a+" ":"")+t)}},removeClass:function(e,t){e.classList!==n?e.classList.remove(t):r.DomUtil._setClass(e,r.Util.trim((" "+r.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){e.className.baseVal===n?e.className=t:e.className.baseVal=t},_getClass:function(e){return e.className.baseVal===n?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var o=!1,n="DXImageTransform.Microsoft.Alpha";try{o=e.filters.item(n)}catch(e){if(1===t)return}t=Math.round(100*t),o?(o.Enabled=100!==t,o.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}},testProp:function(e){for(var o=t.documentElement.style,n=0;n<e.length;n++)if(e[n]in o)return e[n];return!1},getTranslateString:function(e){var t=r.Browser.webkit3d,o="translate"+(t?"3d":"")+"(",n=(t?",0":"")+")";return o+e.x+"px,"+e.y+"px"+n},getScaleString:function(e,t){var o=r.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),n=" scale("+e+") ";return o+n},setPosition:function(e,t,o){e._leaflet_pos=t,!o&&r.Browser.any3d?e.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},r.DomUtil.TRANSFORM=r.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),r.DomUtil.TRANSITION=r.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),r.DomUtil.TRANSITION_END="webkitTransition"===r.DomUtil.TRANSITION||"OTransition"===r.DomUtil.TRANSITION?r.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in t)r.extend(r.DomUtil,{disableTextSelection:function(){r.DomEvent.on(e,"selectstart",r.DomEvent.preventDefault)},enableTextSelection:function(){r.DomEvent.off(e,"selectstart",r.DomEvent.preventDefault)}});else{var o=r.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);r.extend(r.DomUtil,{disableTextSelection:function(){if(o){var e=t.documentElement.style;this._userSelect=e[o],e[o]="none"}},enableTextSelection:function(){o&&(t.documentElement.style[o]=this._userSelect,delete this._userSelect)}})}r.extend(r.DomUtil,{disableImageDrag:function(){r.DomEvent.on(e,"dragstart",r.DomEvent.preventDefault)},enableImageDrag:function(){r.DomEvent.off(e,"dragstart",r.DomEvent.preventDefault)}})}(),r.LatLng=function(e,t,o){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,o!==n&&(this.alt=parseFloat(o))},r.extend(r.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),r.LatLng.prototype={equals:function(e){if(!e)return!1;e=r.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=r.LatLng.MAX_MARGIN},toString:function(e){return"LatLng("+r.Util.formatNum(this.lat,e)+", "+r.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=r.latLng(e);var t=6378137,o=r.LatLng.DEG_TO_RAD,n=(e.lat-this.lat)*o,i=(e.lng-this.lng)*o,s=this.lat*o,a=e.lat*o,l=Math.sin(n/2),c=Math.sin(i/2),u=l*l+c*c*Math.cos(s)*Math.cos(a);return 2*t*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(e,t){var o=this.lng;return e=e||-180,t=t||180,o=(o+t)%(t-e)+(e>o||o===t?t:e),new r.LatLng(this.lat,o)}},r.latLng=function(e,t){return e instanceof r.LatLng?e:r.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new r.LatLng(e[0],e[1],e[2]):null:e===n||null===e?e:"object"==typeof e&&"lat"in e?new r.LatLng(e.lat,"lng"in e?e.lng:e.lon):t===n?null:new r.LatLng(e,t)},r.LatLngBounds=function(e,t){if(e)for(var o=t?[e,t]:e,n=0,i=o.length;i>n;n++)this.extend(o[n])},r.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=r.latLng(e);return e=null!==t?t:r.latLngBounds(e),e instanceof r.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new r.LatLng(e.lat,e.lng),this._northEast=new r.LatLng(e.lat,e.lng)):e instanceof r.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,o=this._northEast,n=Math.abs(t.lat-o.lat)*e,i=Math.abs(t.lng-o.lng)*e;return new r.LatLngBounds(new r.LatLng(t.lat-n,t.lng-i),new r.LatLng(o.lat+n,o.lng+i))},getCenter:function(){return new r.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new r.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new r.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof r.LatLng?r.latLng(e):r.latLngBounds(e);var t,o,n=this._southWest,i=this._northEast;return e instanceof r.LatLngBounds?(t=e.getSouthWest(),o=e.getNorthEast()):t=o=e,t.lat>=n.lat&&o.lat<=i.lat&&t.lng>=n.lng&&o.lng<=i.lng},intersects:function(e){e=r.latLngBounds(e);var t=this._southWest,o=this._northEast,n=e.getSouthWest(),i=e.getNorthEast(),s=i.lat>=t.lat&&n.lat<=o.lat,a=i.lng>=t.lng&&n.lng<=o.lng;return s&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return!!e&&(e=r.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},r.latLngBounds=function(e,t){return!e||e instanceof r.LatLngBounds?e:new r.LatLngBounds(e,t)},r.Projection={},r.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=r.LatLng.DEG_TO_RAD,o=this.MAX_LATITUDE,n=Math.max(Math.min(o,e.lat),-o),i=e.lng*t,s=n*t;return s=Math.log(Math.tan(Math.PI/4+s/2)),new r.Point(i,s)},unproject:function(e){var t=r.LatLng.RAD_TO_DEG,o=e.x*t,n=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new r.LatLng(n,o)}},r.Projection.LonLat={project:function(e){return new r.Point(e.lng,e.lat)},unproject:function(e){return new r.LatLng(e.y,e.x)}},r.CRS={latLngToPoint:function(e,t){var o=this.projection.project(e),n=this.scale(t);return this.transformation._transform(o,n)},pointToLatLng:function(e,t){var o=this.scale(t),n=this.transformation.untransform(e,o);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return r.point(t,t)}},r.CRS.Simple=r.extend({},r.CRS,{projection:r.Projection.LonLat,transformation:new r.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),r.CRS.EPSG3857=r.extend({},r.CRS,{code:"EPSG:3857",projection:r.Projection.SphericalMercator,transformation:new r.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),o=6378137;return t.multiplyBy(o)}}),r.CRS.EPSG900913=r.extend({},r.CRS.EPSG3857,{code:"EPSG:900913"}),r.CRS.EPSG4326=r.extend({},r.CRS,{code:"EPSG:4326",projection:r.Projection.LonLat,transformation:new r.Transformation(1/360,.5,-1/360,.5)}),r.Map=r.Class.extend({includes:r.Mixin.Events,options:{crs:r.CRS.EPSG3857,fadeAnimation:r.DomUtil.TRANSITION&&!r.Browser.android23,trackResize:!0,markerZoomAnimation:r.DomUtil.TRANSITION&&r.Browser.any3d},initialize:function(e,t){t=r.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=r.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==n&&this.setView(r.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=t===n?this.getZoom():t,this._resetView(r.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,o){var n=this.getZoomScale(t),i=this.getSize().divideBy(2),s=e instanceof r.Point?e:this.latLngToContainerPoint(e),a=s.subtract(i).multiplyBy(1-1/n),l=this.containerPointToLatLng(i.add(a));return this.setView(l,t,{zoom:o})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():r.latLngBounds(e);var o=r.point(t.paddingTopLeft||t.padding||[0,0]),n=r.point(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,o.add(n));i=t.maxZoom?Math.min(t.maxZoom,i):i;var s=n.subtract(o).divideBy(2),a=this.project(e.getSouthWest(),i),l=this.project(e.getNorthEast(),i),c=this.unproject(a.add(l).divideBy(2).add(s),i);return this.setView(c,i,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(r.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=r.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var o=this.getCenter(),n=this._limitCenter(o,this._zoom,e);return o.equals(n)?this:this.panTo(n,t)},addLayer:function(e){var t=r.stamp(e);return this._layers[t]?this:(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&e instanceof r.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e),this)},removeLayer:function(e){var t=r.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&e instanceof r.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return!!e&&r.stamp(e)in this._layers},eachLayer:function(e,t){for(var o in this._layers)e.call(t,this._layers[o]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=r.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var o=this.getSize(),n=t.divideBy(2).round(),i=o.divideBy(2).round(),s=n.subtract(i);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:o})):this},addHandler:function(e,t){if(!t)return this;var o=this[e]=new t(this);return this._handlers.push(o),this.options[e]&&o.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=n}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),o=this.unproject(e.getTopRight());return new r.LatLngBounds(t,o)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom===n?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,o){e=r.latLngBounds(e);var n,i=this.getMinZoom()-(t?1:0),s=this.getMaxZoom(),a=this.getSize(),l=e.getNorthWest(),c=e.getSouthEast(),u=!0;o=r.point(o||[0,0]);do i++,n=this.project(c,i).subtract(this.project(l,i)).add(o),u=t?n.x<a.x||n.y<a.y:a.contains(n);while(u&&s>=i);return u&&t?null:t?i:i-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new r.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new r.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===n?this._zoom:t,this.options.crs.latLngToPoint(r.latLng(e),t)},unproject:function(e,t){return t=t===n?this._zoom:t,this.options.crs.pointToLatLng(r.point(e),t)},layerPointToLatLng:function(e){var t=r.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(r.latLng(e))._round();return t._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return r.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return r.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(r.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(e)))},mouseEventToContainerPoint:function(e){return r.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=r.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;r.DomUtil.addClass(e,"leaflet-container"+(r.Browser.touch?" leaflet-touch":"")+(r.Browser.retina?" leaflet-retina":"")+(r.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=r.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(r.DomUtil.addClass(e.markerPane,t),r.DomUtil.addClass(e.shadowPane,t),r.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return r.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){e=e?r.Util.isArray(e)?e:[e]:[];for(var t=0,o=e.length;o>t;t++)this.addLayer(e[t])},_resetView:function(e,t,o,n){var i=this._zoom!==t;n||(this.fire("movestart"),i&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),o?this._initialTopLeftPoint._add(this._getMapPanePos()):r.DomUtil.setPosition(this._mapPane,new r.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var s=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!o}),s&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(i||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!o})},_rawPanBy:function(e){r.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,o=-(1/0),i=this._getZoomSpan();for(e in this._zoomBoundLayers){var r=this._zoomBoundLayers[e];isNaN(r.options.minZoom)||(t=Math.min(t,r.options.minZoom)),isNaN(r.options.maxZoom)||(o=Math.max(o,r.options.maxZoom))}e===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=o,this._layersMinZoom=t),i!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(r.DomEvent){t=t||"on",r.DomEvent[t](this._container,"click",this._onMouseClick,this);var o,n,i=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(o=0,n=i.length;n>o;o++)r.DomEvent[t](this._container,i[o],this._fireMouseEvent,this);this.options.trackResize&&r.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){r.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=r.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||r.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!r.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&r.DomEvent.preventDefault(e);var o=this.mouseEventToContainerPoint(e),n=this.containerPointToLayerPoint(o),i=this.layerPointToLatLng(n);this.fire(t,{latlng:i,layerPoint:n,containerPoint:o,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return r.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var o=this.getSize()._divideBy(2);return this.project(e,t)._subtract(o)._round()},_latLngToNewLayerPoint:function(e,t,o){var n=this._getNewTopLeftPoint(o,t).add(this._getMapPanePos());return this.project(e,t)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,o){if(!o)return e;var n=this.project(e,t),i=this.getSize().divideBy(2),s=new r.Bounds(n.subtract(i),n.add(i)),a=this._getBoundsOffset(s,o,t);return this.unproject(n.add(a),t)},_limitOffset:function(e,t){if(!t)return e;var o=this.getPixelBounds(),n=new r.Bounds(o.min.add(e),o.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,o){var n=this.project(t.getNorthWest(),o).subtract(e.min),i=this.project(t.getSouthEast(),o).subtract(e.max),s=this._rebound(n.x,-i.x),a=this._rebound(n.y,-i.y);return new r.Point(s,a)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),o=this.getMaxZoom();return Math.max(t,Math.min(o,e))}}),r.map=function(e,t){return new r.Map(e,t)},r.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=r.LatLng.DEG_TO_RAD,o=this.MAX_LATITUDE,n=Math.max(Math.min(o,e.lat),-o),i=this.R_MAJOR,s=this.R_MINOR,a=e.lng*t*i,l=n*t,c=s/i,u=Math.sqrt(1-c*c),g=u*Math.sin(l);g=Math.pow((1-g)/(1+g),.5*u);var h=Math.tan(.5*(.5*Math.PI-l))/g;return l=-i*Math.log(h),new r.Point(a,l)},unproject:function(e){for(var t,o=r.LatLng.RAD_TO_DEG,n=this.R_MAJOR,i=this.R_MINOR,s=e.x*o/n,a=i/n,l=Math.sqrt(1-a*a),c=Math.exp(-e.y/n),u=Math.PI/2-2*Math.atan(c),g=15,h=1e-7,d=g,p=.1;Math.abs(p)>h&&--d>0;)t=l*Math.sin(u),p=Math.PI/2-2*Math.atan(c*Math.pow((1-t)/(1+t),.5*l))-u,u+=p;return new r.LatLng(u*o,s)}},r.CRS.EPSG3395=r.extend({},r.CRS,{code:"EPSG:3395",projection:r.Projection.Mercator,transformation:function(){var e=r.Projection.Mercator,t=e.R_MAJOR,o=.5/(Math.PI*t);return new r.Transformation(o,.5,-o,.5)}()}),r.TileLayer=r.Class.extend({includes:r.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:r.Browser.mobile,updateWhenIdle:r.Browser.mobile},initialize:function(e,t){t=r.setOptions(this,t),t.detectRetina&&r.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=r.latLngBounds(t.bounds)),this._url=e;var o=this.options.subdomains;"string"==typeof o&&(this.options.subdomains=o.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=r.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({
hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var o,n,i,r=e.children,s=-t(1/0,-(1/0));for(n=0,i=r.length;i>n;n++)r[n]!==this._container&&(o=parseInt(r[n].style.zIndex,10),isNaN(o)||(s=t(s,o)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(r.Browser.ielt9)for(e in t)r.DomUtil.setOpacity(t[e],this.options.opacity);else r.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=r.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var t="leaflet-tile-container";this._bgBuffer=r.DomUtil.create("div",t,this._container),this._tileContainer=r.DomUtil.create("div",t,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,o=this.options.maxNativeZoom,n=this.options.tileSize;return o&&t>o&&(n=Math.round(e.getZoomScale(t)/e.getZoomScale(o)*n)),n},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),o=e.getZoom(),n=this._getTileSize();if(!(o>this.options.maxZoom||o<this.options.minZoom)){var i=r.bounds(t.min.divideBy(n)._floor(),t.max.divideBy(n)._floor());this._addTilesFromCenterOut(i),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(i)}}},_addTilesFromCenterOut:function(e){var o,n,i,s=[],a=e.getCenter();for(o=e.min.y;o<=e.max.y;o++)for(n=e.min.x;n<=e.max.x;n++)i=new r.Point(n,o),this._tileShouldBeLoaded(i)&&s.push(i);var l=s.length;if(0!==l){s.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)});var c=t.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,n=0;l>n;n++)this._addTile(s[n],c);this._tileContainer.appendChild(c)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var o=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=o.x)||e.y<0||e.y>=o.y)return!1}if(t.bounds){var n=this._getTileSize(),i=e.multiplyBy(n),r=i.add([n,n]),s=this._map.unproject(i),a=this._map.unproject(r);if(t.continuousWorld||t.noWrap||(s=s.wrap(),a=a.wrap()),!t.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(e){var t,o,n,i;for(i in this._tiles)t=i.split(":"),o=parseInt(t[0],10),n=parseInt(t[1],10),(o<e.min.x||o>e.max.x||n<e.min.y||n>e.max.y)&&this._removeTile(i)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(r.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),r.Browser.android||(t.onload=null,t.src=r.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var o=this._getTilePos(e),n=this._getTile();r.DomUtil.setPosition(n,o,r.Browser.chrome),this._tiles[e.x+":"+e.y]=n,this._loadTile(n,e),n.parentNode!==this._tileContainer&&t.appendChild(n)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),o=this._getTileSize();return e.multiplyBy(o).subtract(t)},getTileUrl:function(e){return r.Util.template(this._url,r.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){var e=this._map.options.crs,t=e.getSize(this._map.getZoom());return t.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=r.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=r.Util.falseFn,r.Browser.ielt9&&this.options.opacity!==n&&r.DomUtil.setOpacity(e,this.options.opacity),r.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&r.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(r.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==r.Util.emptyImageUrl&&(r.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),r.tileLayer=function(e,t){return new r.TileLayer(e,t)},r.TileLayer.WMS=r.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var o=r.extend({},this.defaultWmsParams),n=t.tileSize||this.options.tileSize;t.detectRetina&&r.Browser.retina?o.width=o.height=2*n:o.width=o.height=n;for(var i in t)this.options.hasOwnProperty(i)||"crs"===i||(o[i]=t[i]);this.wmsParams=o,r.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,r.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,o=this.options.tileSize,n=e.multiplyBy(o),i=n.add([o,o]),s=this._crs.project(t.unproject(n,e.z)),a=this._crs.project(t.unproject(i,e.z)),l=this._wmsVersion>=1.3&&this._crs===r.CRS.EPSG4326?[a.y,s.x,s.y,a.x].join(","):[s.x,a.y,a.x,s.y].join(","),c=r.Util.template(this._url,{s:this._getSubdomain(e)});return c+r.Util.getParamString(this.wmsParams,c,!0)+"&BBOX="+l},setParams:function(e,t){return r.extend(this.wmsParams,e),t||this.redraw(),this}}),r.tileLayer.wms=function(e,t){return new r.TileLayer.WMS(e,t)},r.TileLayer.Canvas=r.TileLayer.extend({options:{async:!1},initialize:function(e){r.setOptions(this,e)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var e in this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=r.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=r.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),r.tileLayer.canvas=function(e){return new r.TileLayer.Canvas(e)},r.ImageOverlay=r.Class.extend({includes:r.Mixin.Events,options:{opacity:1},initialize:function(e,t,o){this._url=e,this._bounds=r.latLngBounds(t),r.setOptions(this,o)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&r.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=r.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&r.Browser.any3d?r.DomUtil.addClass(this._image,"leaflet-zoom-animated"):r.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),r.extend(this._image,{galleryimg:"no",onselectstart:r.Util.falseFn,onmousemove:r.Util.falseFn,onload:r.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,o=this._image,n=t.getZoomScale(e.zoom),i=this._bounds.getNorthWest(),s=this._bounds.getSouthEast(),a=t._latLngToNewLayerPoint(i,e.zoom,e.center),l=t._latLngToNewLayerPoint(s,e.zoom,e.center)._subtract(a),c=a._add(l._multiplyBy(.5*(1-1/n)));o.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(c)+" scale("+n+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),o=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);r.DomUtil.setPosition(e,t),e.style.width=o.x+"px",e.style.height=o.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){r.DomUtil.setOpacity(this._image,this.options.opacity)}}),r.imageOverlay=function(e,t,o){return new r.ImageOverlay(e,t,o)},r.Icon=r.Class.extend({options:{className:""},initialize:function(e){r.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var o=this._getIconUrl(e);if(!o){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=t&&"IMG"===t.tagName?this._createImg(o,t):this._createImg(o),this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var o,n=this.options,i=r.point(n[t+"Size"]);o="shadow"===t?r.point(n.shadowAnchor||n.iconAnchor):r.point(n.iconAnchor),!o&&i&&(o=i.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+n.className,o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,o){return o=o||t.createElement("img"),o.src=e,o},_getIconUrl:function(e){return r.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),r.icon=function(e){return new r.Icon(e)},r.Icon.Default=r.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];r.Browser.retina&&"icon"===e&&(e+="-2x");var o=r.Icon.Default.imagePath;if(!o)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return o+"/marker-"+e+".png"}}),r.Icon.Default.imagePath=function(){var e,o,n,i,r,s=t.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,o=s.length;o>e;e++)if(n=s[e].src,i=n.match(a))return r=n.split(a)[0],(r?r+"/":"")+"images"}(),r.Marker=r.Class.extend({includes:r.Mixin.Events,options:{icon:new r.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){r.setOptions(this,t),this._latlng=r.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=r.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var e=this.options,t=this._map,o=t.options.zoomAnimation&&t.options.markerZoomAnimation,n=o?"leaflet-zoom-animated":"leaflet-zoom-hide",i=e.icon.createIcon(this._icon),s=!1;i!==this._icon&&(this._icon&&this._removeIcon(),s=!0,e.title&&(i.title=e.title),e.alt&&(i.alt=e.alt)),r.DomUtil.addClass(i,n),e.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),e.riseOnHover&&r.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var a=e.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0),a&&r.DomUtil.addClass(a,n),this._shadow=a,e.opacity<1&&this._updateOpacity();var c=this._map._panes;s&&c.markerPane.appendChild(this._icon),a&&l&&c.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&r.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){r.DomUtil.setPosition(this._icon,e),this._shadow&&r.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];r.DomUtil.addClass(e,"leaflet-clickable"),r.DomEvent.on(e,"click",this._onMouseClick,this),r.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var o=0;o<t.length;o++)r.DomEvent.on(e,t[o],this._fireMouseEvent,this);r.Handler.MarkerDrag&&(this.dragging=new r.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&r.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&r.DomEvent.preventDefault(e),"mousedown"!==e.type?r.DomEvent.stopPropagation(e):r.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){r.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&r.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),r.marker=function(e,t){return new r.Marker(e,t)},r.DivIcon=r.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var o=e&&"DIV"===e.tagName?e:t.createElement("div"),n=this.options;return n.html!==!1?o.innerHTML=n.html:o.innerHTML="",n.bgPos&&(o.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(o,"icon"),o},createShadow:function(){return null}}),r.divIcon=function(e){return new r.DivIcon(e)},r.Map.mergeOptions({closePopupOnClick:!0}),r.Popup=r.Class.extend({includes:r.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){r.setOptions(this,e),this._source=t,this._animated=r.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&r.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&r.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),r.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&r.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=r.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",o=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=r.DomUtil.create("div",o);this.options.closeButton&&(e=this._closeButton=r.DomUtil.create("a",t+"-close-button",n),e.href="#close",e.innerHTML="&#215;",r.DomEvent.disableClickPropagation(e),r.DomEvent.on(e,"click",this._onCloseButtonClick,this));var i=this._wrapper=r.DomUtil.create("div",t+"-content-wrapper",n);r.DomEvent.disableClickPropagation(i),this._contentNode=r.DomUtil.create("div",t+"-content",i),r.DomEvent.disableScrollPropagation(this._contentNode),r.DomEvent.on(i,"contextmenu",r.DomEvent.stopPropagation),this._tipContainer=r.DomUtil.create("div",t+"-tip-container",n),this._tip=r.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var o=e.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),t.width=o+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,i=this.options.maxHeight,s="leaflet-popup-scrolled";i&&n>i?(t.height=i+"px",r.DomUtil.addClass(e,s)):r.DomUtil.removeClass(e,s),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,o=r.point(this.options.offset);t&&r.DomUtil.setPosition(this._container,e),this._containerBottom=-o.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+o.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);r.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,o=this._containerWidth,n=new r.Point(this._containerLeft,-t-this._containerBottom);this._animated&&n._add(r.DomUtil.getPosition(this._container));var i=e.layerPointToContainerPoint(n),s=r.point(this.options.autoPanPadding),a=r.point(this.options.autoPanPaddingTopLeft||s),l=r.point(this.options.autoPanPaddingBottomRight||s),c=e.getSize(),u=0,g=0;i.x+o+l.x>c.x&&(u=i.x+o-c.x+l.x),i.x-u-a.x<0&&(u=i.x-a.x),i.y+t+l.y>c.y&&(g=i.y+t-c.y+l.y),i.y-g-a.y<0&&(g=i.y-a.y),(u||g)&&e.fire("autopanstart").panBy([u,g])}},_onCloseButtonClick:function(e){this._close(),r.DomEvent.stop(e)}}),r.popup=function(e,t){return new r.Popup(e,t)},r.Map.include({openPopup:function(e,t,o){if(this.closePopup(),!(e instanceof r.Popup)){var n=e;e=new r.Popup(o).setLatLng(t).setContent(n)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),r.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var o=r.point(this.options.icon.options.popupAnchor||[0,0]);return o=o.add(r.Popup.prototype.options.offset),t&&t.offset&&(o=o.add(t.offset)),t=r.extend({offset:o},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof r.Popup?(r.setOptions(e,t),this._popup=e,e._source=this):this._popup=new r.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),r.LayerGroup=r.Class.extend({initialize:function(e){this._layers={};var t,o;if(e)for(t=0,o=e.length;o>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,o,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)o=this._layers[t],o[e]&&o[e].apply(o,n);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var o in this._layers)e.call(t,this._layers[o]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return r.stamp(e)}}),r.layerGroup=function(e){return new r.LayerGroup(e)},r.FeatureGroup=r.LayerGroup.extend({includes:r.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),"off"in e&&e.off(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new r.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof r.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(e){e=r.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),r.featureGroup=function(e){return new r.FeatureGroup(e)},r.Path=r.Class.extend({includes:[r.Mixin.Events],statics:{CLIP_PADDING:function(){var t=r.Browser.mobile?1280:2e3,o=(t/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,o))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){r.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,r.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return r.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),r.Map.include({_updatePathViewport:function(){var e=r.Path.CLIP_PADDING,t=this.getSize(),o=r.DomUtil.getPosition(this._mapPane),n=o.multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),i=n.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new r.Bounds(n,i)}}),r.Path.SVG_NS="http://www.w3.org/2000/svg",r.Browser.svg=!(!t.createElementNS||!t.createElementNS(r.Path.SVG_NS,"svg").createSVGRect),r.Path=r.Path.extend({statics:{SVG:r.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,o=e.firstChild;return t&&o!==t&&e.insertBefore(t,o),this},getPathString:function(){},_createElement:function(e){return t.createElementNS(r.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&r.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(r.Browser.svg||!r.Browser.vml)&&r.DomUtil.addClass(this._path,"leaflet-clickable"),r.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)r.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this._map&&this.hasEventListeners(e.type)){var t=this._map,o=t.mouseEventToContainerPoint(e),n=t.containerPointToLayerPoint(o),i=t.layerPointToLatLng(n);this.fire(e.type,{latlng:i,layerPoint:n,containerPoint:o,originalEvent:e}),"contextmenu"===e.type&&r.DomEvent.preventDefault(e),"mousemove"!==e.type&&r.DomEvent.stopPropagation(e)}}}),r.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=r.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&r.Browser.any3d?(r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),o=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(o)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,o=e.max,n=o.x-t.x,i=o.y-t.y,s=this._pathRoot,a=this._panes.overlayPane;r.Browser.mobileWebkit&&a.removeChild(s),r.DomUtil.setPosition(s,t),s.setAttribute("width",n),s.setAttribute("height",i),s.setAttribute("viewBox",[t.x,t.y,n,i].join(" ")),r.Browser.mobileWebkit&&a.appendChild(s)}}}),r.Path.include({bindPopup:function(e,t){return e instanceof r.Popup?this._popup=e:((!this._popup||t)&&(this._popup=new r.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),r.Browser.vml=!r.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var o=e.firstChild;return o.style.behavior="url(#default#VML)",o&&"object"==typeof o.adj}catch(e){return!1}}(),r.Path=r.Browser.svg||!r.Browser.vml?r.Path:r.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){
return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");r.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&r.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,o=this.options,n=this._container;n.stroked=o.stroke,n.filled=o.fill,o.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",n.appendChild(e)),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=r.Util.isArray(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",o.lineCap&&(e.endcap=o.lineCap.replace("butt","flat")),o.lineJoin&&(e.joinstyle=o.lineJoin)):e&&(n.removeChild(e),this._stroke=null),o.fill?(t||(t=this._fill=this._createElement("fill"),n.appendChild(t)),t.color=o.fillColor||o.color,t.opacity=o.fillOpacity):t&&(n.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),r.Map.include(r.Browser.svg||!r.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=t.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),r.Browser.canvas=function(){return!!t.createElement("canvas").getContext}(),r.Path=r.Path.SVG&&!e.L_PREFER_CANVAS||!r.Browser.canvas?r.Path:r.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return r.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!r.Path._updateRequest&&(r.Path._updateRequest=r.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){r.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color),e.lineCap&&(this._ctx.lineCap=e.lineCap),e.lineJoin&&(this._ctx.lineJoin=e.lineJoin)},_drawPath:function(){var e,t,o,n,i,s;for(this._ctx.beginPath(),e=0,o=this._parts.length;o>e;e++){for(t=0,n=this._parts[e].length;n>t;t++)i=this._parts[e][t],s=(0===t?"move":"line")+"To",this._ctx[s](i.x,i.y);this instanceof r.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill(t.fillRule||"evenodd")),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(e){this._containsPoint(e.layerPoint)&&this.fire(e.type,e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),r.Map.include(r.Path.SVG&&!e.L_PREFER_CANVAS||!r.Browser.canvas?{}:{_initPathRoot:function(){var e,o=this._pathRoot;o||(o=this._pathRoot=t.createElement("canvas"),o.style.position="absolute",e=this._canvasCtx=o.getContext("2d"),e.lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(o),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,o=e.max.subtract(t),n=this._pathRoot;r.DomUtil.setPosition(n,t),n.width=o.x,n.height=o.y,n.getContext("2d").translate(-t.x,-t.y)}}}),r.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var o=t*t;return e=this._reducePoints(e,o),e=this._simplifyDP(e,o)},pointToSegmentDistance:function(e,t,o){return Math.sqrt(this._sqClosestPointOnSegment(e,t,o,!0))},closestPointOnSegment:function(e,t,o){return this._sqClosestPointOnSegment(e,t,o)},_simplifyDP:function(e,t){var o=e.length,i=typeof Uint8Array!=n+""?Uint8Array:Array,r=new i(o);r[0]=r[o-1]=1,this._simplifyDPStep(e,r,t,0,o-1);var s,a=[];for(s=0;o>s;s++)r[s]&&a.push(e[s]);return a},_simplifyDPStep:function(e,t,o,n,i){var r,s,a,l=0;for(s=n+1;i-1>=s;s++)a=this._sqClosestPointOnSegment(e[s],e[n],e[i],!0),a>l&&(r=s,l=a);l>o&&(t[r]=1,this._simplifyDPStep(e,t,o,n,r),this._simplifyDPStep(e,t,o,r,i))},_reducePoints:function(e,t){for(var o=[e[0]],n=1,i=0,r=e.length;r>n;n++)this._sqDist(e[n],e[i])>t&&(o.push(e[n]),i=n);return r-1>i&&o.push(e[r-1]),o},clipSegment:function(e,t,o,n){var i,r,s,a=n?this._lastCode:this._getBitCode(e,o),l=this._getBitCode(t,o);for(this._lastCode=l;;){if(!(a|l))return[e,t];if(a&l)return!1;i=a||l,r=this._getEdgeIntersection(e,t,i,o),s=this._getBitCode(r,o),i===a?(e=r,a=s):(t=r,l=s)}},_getEdgeIntersection:function(e,t,o,n){var i=t.x-e.x,s=t.y-e.y,a=n.min,l=n.max;return 8&o?new r.Point(e.x+i*(l.y-e.y)/s,l.y):4&o?new r.Point(e.x+i*(a.y-e.y)/s,a.y):2&o?new r.Point(l.x,e.y+s*(l.x-e.x)/i):1&o?new r.Point(a.x,e.y+s*(a.x-e.x)/i):void 0},_getBitCode:function(e,t){var o=0;return e.x<t.min.x?o|=1:e.x>t.max.x&&(o|=2),e.y<t.min.y?o|=4:e.y>t.max.y&&(o|=8),o},_sqDist:function(e,t){var o=t.x-e.x,n=t.y-e.y;return o*o+n*n},_sqClosestPointOnSegment:function(e,t,o,n){var i,s=t.x,a=t.y,l=o.x-s,c=o.y-a,u=l*l+c*c;return u>0&&(i=((e.x-s)*l+(e.y-a)*c)/u,i>1?(s=o.x,a=o.y):i>0&&(s+=l*i,a+=c*i)),l=e.x-s,c=e.y-a,n?l*l+c*c:new r.Point(s,a)}},r.Polyline=r.Path.extend({initialize:function(e,t){r.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;t>e;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,o="";t>e;e++)o+=this._getPathPartStr(this._parts[e]);return o},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(r.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,o,n=1/0,i=this._parts,s=null,a=0,l=i.length;l>a;a++)for(var c=i[a],u=1,g=c.length;g>u;u++){t=c[u-1],o=c[u];var h=r.LineUtil._sqClosestPointOnSegment(e,t,o,!0);n>h&&(n=h,s=r.LineUtil._sqClosestPointOnSegment(e,t,o))}return s&&(s.distance=Math.sqrt(n)),s},getBounds:function(){return new r.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var o,n,i=t?e:[];for(o=0,n=e.length;n>o;o++){if(r.Util.isArray(e[o])&&"number"!=typeof e[o][0])return;i[o]=r.latLng(e[o])}return i},_initEvents:function(){r.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,o=r.Path.VML,n=0,i=e.length,s="";i>n;n++)t=e[n],o&&t._round(),s+=(n?"L":"M")+t.x+" "+t.y;return s},_clipPoints:function(){var e,t,o,n=this._originalPoints,i=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var s=this._parts,a=this._map._pathViewport,l=r.LineUtil;for(e=0,t=0;i-1>e;e++)o=l.clipSegment(n[e],n[e+1],a,e),o&&(s[t]=s[t]||[],s[t].push(o[0]),(o[1]!==n[e+1]||e===i-2)&&(s[t].push(o[1]),t++))},_simplifyPoints:function(){for(var e=this._parts,t=r.LineUtil,o=0,n=e.length;n>o;o++)e[o]=t.simplify(e[o],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),r.Path.prototype._updatePath.call(this))}}),r.polyline=function(e,t){return new r.Polyline(e,t)},r.PolyUtil={},r.PolyUtil.clipPolygon=function(e,t){var o,n,i,s,a,l,c,u,g,h=[1,4,2,8],d=r.LineUtil;for(n=0,c=e.length;c>n;n++)e[n]._code=d._getBitCode(e[n],t);for(s=0;4>s;s++){for(u=h[s],o=[],n=0,c=e.length,i=c-1;c>n;i=n++)a=e[n],l=e[i],a._code&u?l._code&u||(g=d._getEdgeIntersection(l,a,u,t),g._code=d._getBitCode(g,t),o.push(g)):(l._code&u&&(g=d._getEdgeIntersection(l,a,u,t),g._code=d._getBitCode(g,t),o.push(g)),o.push(a));e=o}return e},r.Polygon=r.Polyline.extend({options:{fill:!0},initialize:function(e,t){r.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,o,n;if(e&&r.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,o=this._holes.length;o>t;t++)n=this._holes[t]=this._convertLatLngs(this._holes[t]),n[0].equals(n[n.length-1])&&n.pop();e=this._latlngs,e.length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){if(r.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var e,t,o,n;for(e=0,o=this._holes.length;o>e;e++)for(this._holePoints[e]=[],t=0,n=this._holes[e].length;n>t;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])}},setLatLngs:function(e){return e&&r.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):r.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var o=0,n=this._parts.length;n>o;o++){var i=r.PolyUtil.clipPolygon(this._parts[o],this._map._pathViewport);i.length&&t.push(i)}this._parts=t}},_getPathPartStr:function(e){var t=r.Polyline.prototype._getPathPartStr.call(this,e);return t+(r.Browser.svg?"z":"x")}}),r.polygon=function(e,t){return new r.Polygon(e,t)},function(){function e(e){return r.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var o=0,n=t.length;for(this.eachLayer(function(e){n>o?e.setLatLngs(t[o++]):this.removeLayer(e)},this);n>o;)this.addLayer(new e(t[o++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}r.MultiPolyline=e(r.Polyline),r.MultiPolygon=e(r.Polygon),r.multiPolyline=function(e,t){return new r.MultiPolyline(e,t)},r.multiPolygon=function(e,t){return new r.MultiPolygon(e,t)}}(),r.Rectangle=r.Polygon.extend({initialize:function(e,t){r.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=r.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),r.rectangle=function(e,t){return new r.Rectangle(e,t)},r.Circle=r.Path.extend({initialize:function(e,t,o){r.Path.prototype.initialize.call(this,o),this._latlng=r.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=r.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,o=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-o.x,1)},getBounds:function(){var e=this._getLngRadius(),t=this._mRadius/40075017*360,o=this._latlng;return new r.LatLngBounds([o.lat-t,o.lng-e],[o.lat+t,o.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":r.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(r.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,o=this._point;return o.x-t>e.max.x||o.y-t>e.max.y||o.x+t<e.min.x||o.y+t<e.min.y}}),r.circle=function(e,t,o){return new r.Circle(e,t,o)},r.CircleMarker=r.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){r.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){r.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return r.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),r.circleMarker=function(e,t){return new r.CircleMarker(e,t)},r.Polyline.include(r.Path.CANVAS?{_containsPoint:function(e,t){var o,n,i,s,a,l,c,u=this.options.weight/2;for(r.Browser.touch&&(u+=10),o=0,s=this._parts.length;s>o;o++)for(c=this._parts[o],n=0,a=c.length,i=a-1;a>n;i=n++)if((t||0!==n)&&(l=r.LineUtil.pointToSegmentDistance(e,c[i],c[n]),u>=l))return!0;return!1}}:{}),r.Polygon.include(r.Path.CANVAS?{_containsPoint:function(e){var t,o,n,i,s,a,l,c,u=!1;if(r.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(i=0,l=this._parts.length;l>i;i++)for(t=this._parts[i],s=0,c=t.length,a=c-1;c>s;a=s++)o=t[s],n=t[a],o.y>e.y!=n.y>e.y&&e.x<(n.x-o.x)*(e.y-o.y)/(n.y-o.y)+o.x&&(u=!u);return u}}:{}),r.Circle.include(r.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,o=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+o}}:{}),r.CircleMarker.include(r.Path.CANVAS?{_updateStyle:function(){r.Path.prototype._updateStyle.call(this)}}:{}),r.GeoJSON=r.FeatureGroup.extend({initialize:function(e,t){r.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,o,n,i=r.Util.isArray(e)?e:e.features;if(i){for(t=0,o=i.length;o>t;t++)n=i[t],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(i[t]);return this}var s=this.options;if(!s.filter||s.filter(e)){var a=r.GeoJSON.geometryToLayer(e,s.pointToLayer,s.coordsToLatLng,s);return a.feature=r.GeoJSON.asFeature(e),a.defaultOptions=a.options,this.resetStyle(a),s.onEachFeature&&s.onEachFeature(e,a),this.addLayer(a)}},resetStyle:function(e){var t=this.options.style;t&&(r.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),r.extend(r.GeoJSON,{geometryToLayer:function(e,t,o,n){var i,s,a,l,c="Feature"===e.type?e.geometry:e,u=c.coordinates,g=[];switch(o=o||this.coordsToLatLng,c.type){case"Point":return i=o(u),t?t(e,i):new r.Marker(i);case"MultiPoint":for(a=0,l=u.length;l>a;a++)i=o(u[a]),g.push(t?t(e,i):new r.Marker(i));return new r.FeatureGroup(g);case"LineString":return s=this.coordsToLatLngs(u,0,o),new r.Polyline(s,n);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return s=this.coordsToLatLngs(u,1,o),new r.Polygon(s,n);case"MultiLineString":return s=this.coordsToLatLngs(u,1,o),new r.MultiPolyline(s,n);case"MultiPolygon":return s=this.coordsToLatLngs(u,2,o),new r.MultiPolygon(s,n);case"GeometryCollection":for(a=0,l=c.geometries.length;l>a;a++)g.push(this.geometryToLayer({geometry:c.geometries[a],type:"Feature",properties:e.properties},t,o,n));return new r.FeatureGroup(g);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new r.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,o){var n,i,r,s=[];for(i=0,r=e.length;r>i;i++)n=t?this.coordsToLatLngs(e[i],t-1,o):(o||this.coordsToLatLng)(e[i]),s.push(n);return s},latLngToCoords:function(e){var t=[e.lng,e.lat];return e.alt!==n&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],o=0,n=e.length;n>o;o++)t.push(r.GeoJSON.latLngToCoords(e[o]));return t},getFeature:function(e,t){return e.feature?r.extend({},e.feature,{geometry:t}):r.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var a={toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"Point",coordinates:r.GeoJSON.latLngToCoords(this.getLatLng())})}};r.Marker.include(a),r.Circle.include(a),r.CircleMarker.include(a),r.Polyline.include({toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"LineString",coordinates:r.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),r.Polygon.include({toGeoJSON:function(){var e,t,o,n=[r.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(e=0,t=this._holes.length;t>e;e++)o=r.GeoJSON.latLngsToCoords(this._holes[e]),o.push(o[0]),n.push(o);return r.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function e(e){return function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),r.GeoJSON.getFeature(this,{type:e,coordinates:t})}}r.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),r.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),r.LayerGroup.include({toGeoJSON:function(){var t,o=this.feature&&this.feature.geometry,n=[];if(o&&"MultiPoint"===o.type)return e("MultiPoint").call(this);var i=o&&"GeometryCollection"===o.type;return this.eachLayer(function(e){e.toGeoJSON&&(t=e.toGeoJSON(),n.push(i?t.geometry:r.GeoJSON.asFeature(t)))}),i?r.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),r.geoJson=function(e,t){return new r.GeoJSON(e,t)},r.DomEvent={addListener:function(e,t,o,n){var i,s,a,l=r.stamp(o),c="_leaflet_"+t+l;return e[c]?this:(i=function(t){return o.call(n||e,t||r.DomEvent._getEvent())},r.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,i,l):(r.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,i,l),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",i,!1),e.addEventListener(t,i,!1)):"mouseenter"===t||"mouseleave"===t?(s=i,a="mouseenter"===t?"mouseover":"mouseout",i=function(t){return r.DomEvent._checkMouse(e,t)?s(t):void 0},e.addEventListener(a,i,!1)):"click"===t&&r.Browser.android?(s=i,i=function(e){return r.DomEvent._filterClick(e,s)},e.addEventListener(t,i,!1)):e.addEventListener(t,i,!1):"attachEvent"in e&&e.attachEvent("on"+t,i),e[c]=i,this))},removeListener:function(e,t,o){var n=r.stamp(o),i="_leaflet_"+t+n,s=e[i];return s?(r.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,n):r.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,n):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",s,!1),e.removeEventListener(t,s,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",s,!1):e.removeEventListener(t,s,!1):"detachEvent"in e&&e.detachEvent("on"+t,s),e[i]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,r.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=r.DomEvent.stopPropagation;return r.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=r.DomEvent.stopPropagation,o=r.Draggable.START.length-1;o>=0;o--)r.DomEvent.on(e,r.Draggable.START[o],t);return r.DomEvent.on(e,"click",r.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return r.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new r.Point(e.clientX,e.clientY);var o=t.getBoundingClientRect();return new r.Point(e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){r.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var o=t.relatedTarget;if(!o)return!0;try{for(;o&&o!==e;)o=o.parentNode}catch(e){return!1}return o!==e},_getEvent:function(){var t=e.event;if(!t)for(var o=arguments.callee.caller;o&&(t=o.arguments[0],!t||e.Event!==t.constructor);)o=o.caller;return t},_filterClick:function(e,t){var o=e.timeStamp||e.originalEvent.timeStamp,n=r.DomEvent._lastClick&&o-r.DomEvent._lastClick;return n&&n>100&&500>n||e.target._simulatedClick&&!e._simulated?void r.DomEvent.stop(e):(r.DomEvent._lastClick=o,t(e))}},r.DomEvent.on=r.DomEvent.addListener,r.DomEvent.off=r.DomEvent.removeListener,r.Draggable=r.Class.extend({includes:r.Mixin.Events,statics:{START:r.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=r.Draggable.START.length-1;e>=0;e--)r.DomEvent.on(this._dragStartTarget,r.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=r.Draggable.START.length-1;e>=0;e--)r.DomEvent.off(this._dragStartTarget,r.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!e.shiftKey&&(1===e.which||1===e.button||e.touches)&&(r.DomEvent.stopPropagation(e),!r.Draggable._disabled&&(r.DomUtil.disableImageDrag(),r.DomUtil.disableTextSelection(),!this._moving))){var o=e.touches?e.touches[0]:e;this._startPoint=new r.Point(o.clientX,o.clientY),this._startPos=this._newPos=r.DomUtil.getPosition(this._element),r.DomEvent.on(t,r.Draggable.MOVE[e.type],this._onMove,this).on(t,r.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var o=e.touches&&1===e.touches.length?e.touches[0]:e,n=new r.Point(o.clientX,o.clientY),i=n.subtract(this._startPoint);(i.x||i.y)&&(r.Browser.touch&&Math.abs(i.x)+Math.abs(i.y)<3||(r.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=r.DomUtil.getPosition(this._element).subtract(i),r.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,r.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),r.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){r.DomUtil.removeClass(t.body,"leaflet-dragging"),this._lastTarget&&(r.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in r.Draggable.MOVE)r.DomEvent.off(t,r.Draggable.MOVE[e],this._onMove).off(t,r.Draggable.END[e],this._onUp);r.DomUtil.enableImageDrag(),r.DomUtil.enableTextSelection(),this._moved&&this._moving&&(r.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),r.Handler=r.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),r.Map.mergeOptions({dragging:!0,inertia:!r.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:r.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),r.Map.Drag=r.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new r.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),o=this._initialWorldOffset,n=this._draggable._newPos.x,i=(n-t+o)%e+t-o,r=(n+t+o)%e-t-o,s=Math.abs(i+o)<Math.abs(r+o)?i:r;this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,o=t.options,n=+new Date-this._lastTime,i=!o.inertia||n>o.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),i)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+n-this._times[0])/1e3,l=o.easeLinearity,c=s.multiplyBy(l/a),u=c.distanceTo([0,0]),g=Math.min(o.inertiaMaxSpeed,u),h=c.multiplyBy(g/u),d=g/(o.inertiaDeceleration*l),p=h.multiplyBy(-d/2).round();p.x&&p.y?(p=t._limitOffset(p,t.options.maxBounds),r.Util.requestAnimFrame(function(){t.panBy(p,{duration:d,easeLinearity:l,noMoveStart:!0})})):t.fire("moveend")}}}),r.Map.addInitHook("addHandler","dragging",r.Map.Drag),r.Map.mergeOptions({doubleClickZoom:!0}),r.Map.DoubleClickZoom=r.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,o=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(o):t.setZoomAround(e.containerPoint,o)}}),r.Map.addInitHook("addHandler","doubleClickZoom",r.Map.DoubleClickZoom),r.Map.mergeOptions({scrollWheelZoom:!0}),r.Map.ScrollWheelZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),r.DomEvent.on(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault),this._delta=0},removeHooks:function(){r.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),r.DomEvent.off(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=r.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var o=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r.bind(this._performZoom,this),o),r.DomEvent.preventDefault(e),r.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,o=e.getZoom();t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(o+t)-o,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(o+t):e.setZoomAround(this._lastMousePos,o+t))}}),r.Map.addInitHook("addHandler","scrollWheelZoom",r.Map.ScrollWheelZoom),r.extend(r.DomEvent,{_touchstart:r.Browser.msPointer?"MSPointerDown":r.Browser.pointer?"pointerdown":"touchstart",_touchend:r.Browser.msPointer?"MSPointerUp":r.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,o,n){function i(e){var t;if(r.Browser.pointer?(p.push(e.pointerId),t=p.length):t=e.touches.length,!(t>1)){var o=Date.now(),n=o-(a||o);l=e.touches?e.touches[0]:e,c=n>0&&u>=n,a=o}}function s(e){if(r.Browser.pointer){var t=p.indexOf(e.pointerId);if(-1===t)return;p.splice(t,1)}if(c){if(r.Browser.pointer){var n,i={};for(var s in l)n=l[s],"function"==typeof n?i[s]=n.bind(l):i[s]=n;l=i}l.type="dblclick",o(l),a=null}}var a,l,c=!1,u=250,g="_leaflet_",h=this._touchstart,d=this._touchend,p=[];e[g+h+n]=i,e[g+d+n]=s;var f=r.Browser.pointer?t.documentElement:e;return e.addEventListener(h,i,!1),f.addEventListener(d,s,!1),r.Browser.pointer&&f.addEventListener(r.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(e,o){var n="_leaflet_";return e.removeEventListener(this._touchstart,e[n+this._touchstart+o],!1),(r.Browser.pointer?t.documentElement:e).removeEventListener(this._touchend,e[n+this._touchend+o],!1),r.Browser.pointer&&t.documentElement.removeEventListener(r.DomEvent.POINTER_CANCEL,e[n+this._touchend+o],!1),this}}),r.extend(r.DomEvent,{POINTER_DOWN:r.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:r.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:r.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:r.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,o,n){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,o,n);case"touchend":return this.addPointerListenerEnd(e,t,o,n);case"touchmove":return this.addPointerListenerMove(e,t,o,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,o,n,i){var s="_leaflet_",a=this._pointers,l=function(e){"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&r.DomEvent.preventDefault(e);for(var t=!1,o=0;o<a.length;o++)if(a[o].pointerId===e.pointerId){t=!0;break}t||a.push(e),e.touches=a.slice(),e.changedTouches=[e],n(e)};if(e[s+"touchstart"+i]=l,e.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var c=function(e){for(var t=0;t<a.length;t++)if(a[t].pointerId===e.pointerId){a.splice(t,1);break}};t.documentElement.addEventListener(this.POINTER_UP,c,!1),t.documentElement.addEventListener(this.POINTER_CANCEL,c,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,o,n){function i(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<s.length;t++)if(s[t].pointerId===e.pointerId){s[t]=e;break}e.touches=s.slice(),e.changedTouches=[e],o(e)}}var r="_leaflet_",s=this._pointers;return e[r+"touchmove"+n]=i,e.addEventListener(this.POINTER_MOVE,i,!1),this},addPointerListenerEnd:function(e,t,o,n){var i="_leaflet_",r=this._pointers,s=function(e){for(var t=0;t<r.length;t++)if(r[t].pointerId===e.pointerId){r.splice(t,1);break}e.touches=r.slice(),e.changedTouches=[e],o(e)};return e[i+"touchend"+n]=s,e.addEventListener(this.POINTER_UP,s,!1),e.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(e,t,o){var n="_leaflet_",i=e[n+t+o];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,i,!1),e.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}}),r.Map.mergeOptions({touchZoom:r.Browser.touch&&!r.Browser.android23,bounceAtZoomLimits:!0}),r.Map.TouchZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){
r.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var o=this._map;if(e.touches&&2===e.touches.length&&!o._animatingZoom&&!this._zooming){var n=o.mouseEventToLayerPoint(e.touches[0]),i=o.mouseEventToLayerPoint(e.touches[1]),s=o._getCenterLayerPoint();this._startCenter=n.add(i)._divideBy(2),this._startDist=n.distanceTo(i),this._moved=!1,this._zooming=!0,this._centerOffset=s.subtract(this._startCenter),o._panAnim&&o._panAnim.stop(),r.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),r.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var o=t.mouseEventToLayerPoint(e.touches[0]),n=t.mouseEventToLayerPoint(e.touches[1]);this._scale=o.distanceTo(n)/this._startDist,this._delta=o._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(t.options.bounceAtZoomLimits||!(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1))&&(this._moved||(r.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),r.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),o=e.layerPointToLatLng(t),n=e.getScaleZoom(this._scale);e._animateZoom(o,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var e=this._map;this._zooming=!1,r.DomUtil.removeClass(e._mapPane,"leaflet-touching"),r.Util.cancelAnimFrame(this._animRequest),r.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var o=this._getScaleOrigin(),n=e.layerPointToLatLng(o),i=e.getZoom(),s=e.getScaleZoom(this._scale)-i,a=s>0?Math.ceil(s):Math.floor(s),l=e._limitZoom(i+a),c=e.getZoomScale(l)/this._scale;e._animateZoom(n,l,o,c)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),r.Map.addInitHook("addHandler","touchZoom",r.Map.TouchZoom),r.Map.mergeOptions({tap:!0,tapTolerance:15}),r.Map.Tap=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(r.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var o=e.touches[0],n=o.target;this._startPos=this._newPos=new r.Point(o.clientX,o.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&r.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(r.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",o))},this),1e3),r.DomEvent.on(t,"touchmove",this._onMove,this).on(t,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),r.DomEvent.off(t,"touchmove",this._onMove,this).off(t,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var o=e.changedTouches[0],n=o.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&r.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",o)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new r.Point(t.clientX,t.clientY)},_simulateEvent:function(o,n){var i=t.createEvent("MouseEvents");i._simulated=!0,n.target._simulatedClick=!0,i.initMouseEvent(o,!0,!0,e,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(i)}}),r.Browser.touch&&!r.Browser.pointer&&r.Map.addInitHook("addHandler","tap",r.Map.Tap),r.Map.mergeOptions({boxZoom:!0}),r.Map.BoxZoom=r.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){r.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){r.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!(!e.shiftKey||1!==e.which&&1!==e.button)&&(r.DomUtil.disableTextSelection(),r.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void r.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).on(t,"keydown",this._onKeyDown,this))},_onMouseMove:function(e){this._moved||(this._box=r.DomUtil.create("div","leaflet-zoom-box",this._pane),r.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,o=this._box,n=this._map.mouseEventToLayerPoint(e),i=n.subtract(t),s=new r.Point(Math.min(n.x,t.x),Math.min(n.y,t.y));r.DomUtil.setPosition(o,s),this._moved=!0,o.style.width=Math.max(0,Math.abs(i.x)-4)+"px",o.style.height=Math.max(0,Math.abs(i.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),r.DomUtil.enableTextSelection(),r.DomUtil.enableImageDrag(),r.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp).off(t,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,o=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(o)){var n=new r.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(o));t.fitBounds(n),t.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),r.Map.addInitHook("addHandler","boxZoom",r.Map.BoxZoom),r.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),r.Map.Keyboard=r.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),r.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;r.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var o=t.body,n=t.documentElement,i=o.scrollTop||n.scrollTop,r=o.scrollLeft||n.scrollLeft;this._map._container.focus(),e.scrollTo(r,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,o,n=this._panKeys={},i=this.keyCodes;for(t=0,o=i.left.length;o>t;t++)n[i.left[t]]=[-1*e,0];for(t=0,o=i.right.length;o>t;t++)n[i.right[t]]=[e,0];for(t=0,o=i.down.length;o>t;t++)n[i.down[t]]=[0,e];for(t=0,o=i.up.length;o>t;t++)n[i.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,o,n=this._zoomKeys={},i=this.keyCodes;for(t=0,o=i.zoomIn.length;o>t;t++)n[i.zoomIn[t]]=e;for(t=0,o=i.zoomOut.length;o>t;t++)n[i.zoomOut[t]]=-e},_addHooks:function(){r.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){r.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,o=this._map;if(t in this._panKeys){if(o._panAnim&&o._panAnim._inProgress)return;o.panBy(this._panKeys[t]),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds)}else{if(!(t in this._zoomKeys))return;o.setZoom(o.getZoom()+this._zoomKeys[t])}r.DomEvent.stop(e)}}),r.Map.addInitHook("addHandler","keyboard",r.Map.Keyboard),r.Handler.MarkerDrag=r.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new r.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),r.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),r.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,o=r.DomUtil.getPosition(e._icon),n=e._map.layerPointToLatLng(o);t&&r.DomUtil.setPosition(t,o),e._latlng=n,e.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),r.Control=r.Class.extend({options:{position:"topright"},initialize:function(e){r.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),o=this.getPosition(),n=e._controlCorners[o];return r.DomUtil.addClass(t,"leaflet-control"),-1!==o.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),o=e._controlCorners[t];return o.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),r.control=function(e){return new r.Control(e)},r.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,i){var s=o+e+" "+o+i;t[e+i]=r.DomUtil.create("div",s,n)}var t=this._controlCorners={},o="leaflet-",n=this._controlContainer=r.DomUtil.create("div",o+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),r.Control.Zoom=r.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",o=r.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",o,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",o,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,o,n,i,s){var a=r.DomUtil.create("a",o,n);a.innerHTML=e,a.href="#",a.title=t;var l=r.DomEvent.stopPropagation;return r.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",r.DomEvent.preventDefault).on(a,"click",i,s).on(a,"click",this._refocusOnMap,s),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";r.DomUtil.removeClass(this._zoomInButton,t),r.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&r.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&r.DomUtil.addClass(this._zoomInButton,t)}}),r.Map.mergeOptions({zoomControl:!0}),r.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new r.Control.Zoom,this.addControl(this.zoomControl))}),r.control.zoom=function(e){return new r.Control.Zoom(e)},r.Control.Attribution=r.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){r.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=r.DomUtil.create("div","leaflet-control-attribution"),r.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):void 0},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):void 0},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var o=[];this.options.prefix&&o.push(this.options.prefix),e.length&&o.push(e.join(", ")),this._container.innerHTML=o.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),r.Map.mergeOptions({attributionControl:!0}),r.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new r.Control.Attribution).addTo(this))}),r.control.attribution=function(e){return new r.Control.Attribution(e)},r.Control.Scale=r.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",o=r.DomUtil.create("div",t),n=this.options;return this._addScales(n,t,o),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),o},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,o){e.metric&&(this._mScale=r.DomUtil.create("div",t+"-line",o)),e.imperial&&(this._iScale=r.DomUtil.create("div",t+"-line",o))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,o=6378137*Math.PI*Math.cos(t*Math.PI/180),n=o*(e.getNorthEast().lng-e.getSouthWest().lng)/180,i=this._map.getSize(),r=this.options,s=0;i.x>0&&(s=n*(r.maxWidth/i.x)),this._updateScales(r,s)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=1e3>t?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,o,n,i=3.2808399*e,r=this._iScale;i>5280?(t=i/5280,o=this._getRoundNum(t),r.style.width=this._getScaleWidth(o/t)+"px",r.innerHTML=o+" mi"):(n=this._getRoundNum(i),r.style.width=this._getScaleWidth(n/i)+"px",r.innerHTML=n+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),o=e/t;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,t*o}}),r.control.scale=function(e){return new r.Control.Scale(e)},r.Control.Layers=r.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,o){r.setOptions(this,o),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=r.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=r.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),r.Browser.touch?r.DomEvent.on(t,"click",r.DomEvent.stopPropagation):r.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var o=this._form=r.DomUtil.create("form",e+"-list");if(this.options.collapsed){r.Browser.android||r.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var n=this._layersLink=r.DomUtil.create("a",e+"-toggle",t);n.href="#",n.title="Layers",r.Browser.touch?r.DomEvent.on(n,"click",r.DomEvent.stop).on(n,"click",this._expand,this):r.DomEvent.on(n,"focus",this._expand,this),r.DomEvent.on(o,"click",function(){setTimeout(r.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=r.DomUtil.create("div",e+"-base",o),this._separator=r.DomUtil.create("div",e+"-separator",o),this._overlaysList=r.DomUtil.create("div",e+"-overlays",o),t.appendChild(o)},_addLayer:function(e,t,o){var n=r.stamp(e);this._layers[n]={layer:e,name:t,overlay:o},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,o=!1,n=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),n=n||t.overlay,o=o||!t.overlay;this._separator.style.display=n&&o?"":"none"}},_onLayerChange:function(e){var t=this._layers[r.stamp(e.layer)];if(t){this._handlingClick||this._update();var o=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;o&&this._map.fire(o,t)}},_createRadioElement:function(e,o){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';o&&(n+=' checked="checked"'),n+="/>";var i=t.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var o,n=t.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?(o=t.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=i):o=this._createRadioElement("leaflet-base-layers",i),o.layerId=r.stamp(e.layer),r.DomEvent.on(o,"click",this._onInputClick,this);var s=t.createElement("span");s.innerHTML=" "+e.name,n.appendChild(o),n.appendChild(s);var a=e.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),n},_onInputClick:function(){var e,t,o,n=this._form.getElementsByTagName("input"),i=n.length;for(this._handlingClick=!0,e=0;i>e;e++)t=n[e],o=this._layers[t.layerId],t.checked&&!this._map.hasLayer(o.layer)?this._map.addLayer(o.layer):!t.checked&&this._map.hasLayer(o.layer)&&this._map.removeLayer(o.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),r.control.layers=function(e,t,o){return new r.Control.Layers(e,t,o)},r.PosAnimation=r.Class.extend({includes:r.Mixin.Events,run:function(e,t,o,n){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[r.DomUtil.TRANSITION]="all "+(o||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",r.DomEvent.on(e,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),r.DomUtil.setPosition(e,t),r.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(r.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(r.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),r.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();return e?(this._el._leaflet_pos=e,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,o,n,i=this._el,s=e.getComputedStyle(i);if(r.Browser.any3d){if(n=s[r.DomUtil.TRANSFORM].match(this._transformRe),!n)return;t=parseFloat(n[1]),o=parseFloat(n[2])}else t=parseFloat(s.left),o=parseFloat(s.top);return new r.Point(t,o,!0)},_onTransitionEnd:function(){r.DomEvent.off(this._el,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[r.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),r.Map.include({setView:function(e,t,o){if(t=t===n?this._zoom:this._limitZoom(t),e=this._limitCenter(r.latLng(e),t,this.options.maxBounds),o=o||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==n&&(o.zoom=r.extend({animate:o.animate},o.zoom),o.pan=r.extend({animate:o.animate},o.pan));var i=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,o.zoom):this._tryAnimatedPan(e,o.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=r.point(e).round(),t=t||{},!e.x&&!e.y)return this;if(this._panAnim||(this._panAnim=new r.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){r.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,o,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){r.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var o=this._getCenterOffset(e)._floor();return!((t&&t.animate)!==!0&&!this.getSize().contains(o))&&(this.panBy(o,t),!0)}}),r.PosAnimation=r.DomUtil.TRANSITION?r.PosAnimation:r.PosAnimation.extend({run:function(e,t,o,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=r.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=r.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;t>e?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));r.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){r.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),r.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),r.DomUtil.TRANSITION&&r.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&r.DomUtil.TRANSITION&&r.Browser.any3d&&!r.Browser.android23&&!r.Browser.mobileOpera,this._zoomAnimated&&r.DomEvent.on(this._mapPane,r.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),r.Map.include(r.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/n),r=this._getCenterLayerPoint()._add(i);return!(o.animate!==!0&&!this.getSize().contains(i))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,r,n,null,!0),!0)},_animateZoom:function(e,t,o,n,i,s,a){a||(this._animatingZoom=!0),r.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,r.Draggable&&(r.Draggable._disabled=!0),r.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:e,zoom:t,origin:o,scale:n,delta:i,backwards:s}),setTimeout(r.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,r.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),r.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),r.Draggable&&(r.Draggable._disabled=!1)},this))}}:{}),r.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,o=r.DomUtil.TRANSFORM,n=e.delta?r.DomUtil.getTranslateString(e.delta):t.style[o],i=r.DomUtil.getScaleString(e.scale,e.origin);t.style[o]=e.backwards?i+" "+n:n+" "+i},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),r.Util.falseFn(t.offsetWidth);var o=this._map.getZoom();(o>this.options.maxZoom||o<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[r.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,o=this._getLoadedTilesPercentage(t),n=this._getLoadedTilesPercentage(e);return t&&o>.5&&.5>n?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[r.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,o,n=e.getElementsByTagName("img"),i=0;for(t=0,o=n.length;o>t;t++)n[t].complete&&i++;return i/o},_stopLoadingImages:function(e){var t,o,n,i=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,o=i.length;o>t;t++)n=i[t],n.complete||(n.onload=r.Util.falseFn,n.onerror=r.Util.falseFn,n.src=r.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),r.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=r.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r.bind(this._handleGeolocationResponse,this),o=r.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,o,e):navigator.geolocation.getCurrentPosition(t,o,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,o=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+o+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,o=e.coords.longitude,n=new r.LatLng(t,o),i=180*e.coords.accuracy/40075017,s=i/Math.cos(r.LatLng.DEG_TO_RAD*t),a=r.latLngBounds([t-i,o-s],[t+i,o+s]),l=this._locateOptions;if(l.setView){var c=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(n,c)}var u={latlng:n,bounds:a,timestamp:e.timestamp};for(var g in e.coords)"number"==typeof e.coords[g]&&(u[g]=e.coords[g]);this.fire("locationfound",u)}})}(window,document),o("ViewModels/DistanceLegendViewModel",["Cesium/Core/defined","Cesium/Core/DeveloperError","Cesium/Core/EllipsoidGeodesic","Cesium/Core/Cartesian2","Cesium/Core/getTimestamp","Cesium/Core/EventHelper","KnockoutES5","Core/loadView","leaflet"],function(e,t,o,n,i,r,s,a,l){"use strict";function c(t,o){var r=i();if(!(r<t._lastLegendUpdate+250)){t._lastLegendUpdate=r;var s=o.canvas.clientWidth,a=o.canvas.clientHeight,l=o.camera.getPickRay(new n(s/2|0,a-1)),c=o.camera.getPickRay(new n(1+s/2|0,a-1)),u=o.globe,g=u.pick(l,o),p=u.pick(c,o);if(!e(g)||!e(p))return t.barWidth=void 0,void(t.distanceLabel=void 0);var f=u.ellipsoid.cartesianToCartographic(g),m=u.ellipsoid.cartesianToCartographic(p);h.setEndPoints(f,m);for(var v,y=h.surfaceDistance,_=100,b=d.length-1;!e(v)&&b>=0;--b)d[b]/y<_&&(v=d[b]);if(e(v)){var w;w=v>=1e3?(v/1e3).toString()+" km":v.toString()+" m",t.barWidth=v/y|0,t.distanceLabel=w}else t.barWidth=void 0,t.distanceLabel=void 0}}function u(e,t){var o=t.getSize().y/2,n=100,i=t.containerPointToLatLng([0,o]).distanceTo(t.containerPointToLatLng([n,o])),r=l.control.scale()._getRoundNum(i),s=r<1e3?r+" m":r/1e3+" km";e.barWidth=r/i*n,e.distanceLabel=s}var g=function(o){function n(){if(e(i.terria)){var t=i.terria.scene;i._removeSubscription=t.postRender.addEventListener(function(){c(this,t)},i)}else if(e(i.terria.leaflet)){var o=i.terria.leaflet.map,n=function(){u(i,o)};i._removeSubscription=function(){o.off("zoomend",n),o.off("moveend",n)},o.oncontainerPointToLatLng("zoomend",n),o.on("moveend",n),u(i,o)}}if(!e(o)||!e(o.terria))throw new t("options.terria is required.");this.terria=o.terria,this._removeSubscription=void 0,this._lastLegendUpdate=void 0,this.eventHelper=new r,this.distanceLabel=void 0,this.barWidth=void 0,s.track(this,["distanceLabel","barWidth"]),this.eventHelper.add(this.terria.afterWidgetChanged,function(){e(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0)},this);var i=this;n(),this.eventHelper.add(this.terria.afterWidgetChanged,function(){n()},this)};g.prototype.destroy=function(){this.eventHelper.removeAll()},g.prototype.show=function(e){var t='<div class="distance-legend" data-bind="visible: distanceLabel && barWidth"><div class="distance-legend-label" data-bind="text: distanceLabel"></div><div class="distance-legend-scale-bar" data-bind="style: { width: barWidth + \'px\', left: (5 + (125 - barWidth) / 2) + \'px\' }"></div></div>';a(t,e,this)},g.create=function(e){var t=new g(e);return t.show(e.container),t};var h=new o,d=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7];return g}),o("ViewModels/UserInterfaceControl",["Cesium/Core/defined","Cesium/Core/defineProperties","Cesium/Core/DeveloperError","KnockoutES5"],function(e,t,o,n){"use strict";var i=function(t){if(!e(t))throw new o("terria is required");this._terria=t,this.name="Unnamed Control",this.text=void 0,this.svgIcon=void 0,this.svgHeight=void 0,this.svgWidth=void 0,this.cssClass=void 0,this.isActive=!1,n.track(this,["name","svgIcon","svgHeight","svgWidth","cssClass","isActive"])};return t(i.prototype,{terria:{get:function(){return this._terria}},hasText:{get:function(){return e(this.text)&&"string"==typeof this.text}}}),i.prototype.activate=function(){throw new o("activate must be implemented in the derived class.")},i}),o("ViewModels/NavigationControl",["Cesium/Core/defined","Cesium/Core/Ray","Cesium/Core/IntersectionTests","Cesium/Core/Ellipsoid","ViewModels/UserInterfaceControl"],function(e,t,o,n,i){"use strict";var r=function(e){i.apply(this,arguments)};return r.prototype=Object.create(i.prototype),r.prototype.getCameraFocus=function(n){var i=new t(n.camera.positionWC,n.camera.directionWC),r=o.rayEllipsoid(i,n.globe.ellipsoid);return e(r)?t.getPoint(i,r.start):o.grazingAltitudeLocation(i,n.globe.ellipsoid)},r}),o("SvgPaths/svgReset",[],function(){"use strict";return"M 7.5,0 C 3.375,0 0,3.375 0,7.5 0,11.625 3.375,15 7.5,15 c 3.46875,0 6.375,-2.4375 7.21875,-5.625 l -1.96875,0 C 12,11.53125 9.9375,13.125 7.5,13.125 4.40625,13.125 1.875,10.59375 1.875,7.5 1.875,4.40625 4.40625,1.875 7.5,1.875 c 1.59375,0 2.90625,0.65625 3.9375,1.6875 l -3,3 6.5625,0 L 15,0 12.75,2.25 C 11.4375,0.84375 9.5625,0 7.5,0 z"}),o("ViewModels/ResetViewNavigationControl",["Cesium/Core/defined","Cesium/Scene/Camera","ViewModels/NavigationControl","SvgPaths/svgReset"],function(e,t,o,n){"use strict";var i=function(e){o.apply(this,arguments),this.name="重置视点",this.svgIcon=n,this.svgHeight=15,this.svgWidth=15,this.cssClass="navigation-control-icon-reset"};return i.prototype=Object.create(o.prototype),i.prototype.resetView=function(){
this.isActive=!0,e(this.terria.leaflet)&&this.terria.leaflet.map.show&&this.terria.leaflet.map.fit(t.DEFAULT_VIEW_RECTANGLE);var o=this.terria.scene.camera;"function"==typeof o.flyHome?o.flyHome(1):o.flyTo({destination:t.DEFAULT_VIEW_RECTANGLE,duration:1}),this.isActive=!1},i.prototype.activate=function(){this.resetView()},i}),o("ViewModels/ZoomInNavigationControl",["Cesium/Core/defined","Cesium/Core/Cartesian3","ViewModels/NavigationControl"],function(e,t,o){"use strict";var n=function(e){o.apply(this,arguments),this.name="放大",this.text="+",this.cssClass="navigation-control-icon-zoom-in"};n.prototype=Object.create(o.prototype);var i=new t;return n.prototype.zoomIn=function(){if(this.isActive=!0,e(this.terria.leaflet)&&this.terria.leaflet.map.show&&this.terria.leaflet.map.zoomIn(1),e(this.terria)){var o=this.terria.scene,n=o.camera,r=this.getCameraFocus(o),s=t.subtract(r,n.position,i),a=t.multiplyByScalar(s,2/3,i),l=t.add(n.position,a,i);this.terria.camera.flyTo({destination:l,duration:1})}this.isActive=!1},n.prototype.activate=function(){this.zoomIn()},n}),o("ViewModels/ZoomOutNavigationControl",["Cesium/Core/defined","Cesium/Core/Cartesian3","ViewModels/NavigationControl"],function(e,t,o){"use strict";var n=function(e){o.apply(this,arguments),this.name="缩小",this.text="-",this.cssClass="navigation-control-icon-zoom-out"};n.prototype=Object.create(o.prototype);var i=new t;return n.prototype.zoomOut=function(){if(this.isActive=!0,e(this.terria.leaflet)&&this.terria.leaflet.map.show&&this.terria.leaflet.map.zoomOut(1),e(this.terria)){var o=this.terria.scene,n=o.camera,r=this.getCameraFocus(o),s=t.subtract(r,n.position,i),a=t.multiplyByScalar(s,-2,i),l=t.add(n.position,a,i);this.terria.camera.flyTo({destination:l,duration:1})}this.isActive=!1},n.prototype.activate=function(){this.zoomOut()},n}),o("SvgPaths/svgCompassOuterRing",[],function(){"use strict";return"m 66.5625,0 0,15.15625 3.71875,0 0,-10.40625 5.5,10.40625 4.375,0 0,-15.15625 -3.71875,0 0,10.40625 L 70.9375,0 66.5625,0 z M 72.5,20.21875 c -28.867432,0 -52.28125,23.407738 -52.28125,52.28125 0,28.87351 23.413818,52.3125 52.28125,52.3125 28.86743,0 52.28125,-23.43899 52.28125,-52.3125 0,-28.873512 -23.41382,-52.28125 -52.28125,-52.28125 z m 0,1.75 c 13.842515,0 26.368948,5.558092 35.5,14.5625 l -11.03125,11 0.625,0.625 11.03125,-11 c 8.9199,9.108762 14.4375,21.579143 14.4375,35.34375 0,13.764606 -5.5176,26.22729 -14.4375,35.34375 l -11.03125,-11 -0.625,0.625 11.03125,11 c -9.130866,9.01087 -21.658601,14.59375 -35.5,14.59375 -13.801622,0 -26.321058,-5.53481 -35.4375,-14.5 l 11.125,-11.09375 c 6.277989,6.12179 14.857796,9.90625 24.3125,9.90625 19.241896,0 34.875,-15.629154 34.875,-34.875 0,-19.245847 -15.633104,-34.84375 -34.875,-34.84375 -9.454704,0 -18.034511,3.760884 -24.3125,9.875 L 37.0625,36.4375 C 46.179178,27.478444 58.696991,21.96875 72.5,21.96875 z m -0.875,0.84375 0,13.9375 1.75,0 0,-13.9375 -1.75,0 z M 36.46875,37.0625 47.5625,48.15625 C 41.429794,54.436565 37.65625,63.027539 37.65625,72.5 c 0,9.472461 3.773544,18.055746 9.90625,24.34375 L 36.46875,107.9375 c -8.96721,-9.1247 -14.5,-21.624886 -14.5,-35.4375 0,-13.812615 5.53279,-26.320526 14.5,-35.4375 z M 72.5,39.40625 c 18.297686,0 33.125,14.791695 33.125,33.09375 0,18.302054 -14.827314,33.125 -33.125,33.125 -18.297687,0 -33.09375,-14.822946 -33.09375,-33.125 0,-18.302056 14.796063,-33.09375 33.09375,-33.09375 z M 22.84375,71.625 l 0,1.75 13.96875,0 0,-1.75 -13.96875,0 z m 85.5625,0 0,1.75 14,0 0,-1.75 -14,0 z M 71.75,108.25 l 0,13.9375 1.71875,0 0,-13.9375 -1.71875,0 z"}),o("SvgPaths/svgCompassGyro",[],function(){"use strict";return"m 72.71875,54.375 c -0.476702,0 -0.908208,0.245402 -1.21875,0.5625 -0.310542,0.317098 -0.551189,0.701933 -0.78125,1.1875 -0.172018,0.363062 -0.319101,0.791709 -0.46875,1.25 -6.91615,1.075544 -12.313231,6.656514 -13,13.625 -0.327516,0.117495 -0.661877,0.244642 -0.9375,0.375 -0.485434,0.22959 -0.901634,0.471239 -1.21875,0.78125 -0.317116,0.310011 -0.5625,0.742111 -0.5625,1.21875 l 0.03125,0 c 0,0.476639 0.245384,0.877489 0.5625,1.1875 0.317116,0.310011 0.702066,0.58291 1.1875,0.8125 0.35554,0.168155 0.771616,0.32165 1.21875,0.46875 1.370803,6.10004 6.420817,10.834127 12.71875,11.8125 0.146999,0.447079 0.30025,0.863113 0.46875,1.21875 0.230061,0.485567 0.470708,0.870402 0.78125,1.1875 0.310542,0.317098 0.742048,0.5625 1.21875,0.5625 0.476702,0 0.876958,-0.245402 1.1875,-0.5625 0.310542,-0.317098 0.582439,-0.701933 0.8125,-1.1875 0.172018,-0.363062 0.319101,-0.791709 0.46875,-1.25 6.249045,-1.017063 11.256351,-5.7184 12.625,-11.78125 0.447134,-0.1471 0.86321,-0.300595 1.21875,-0.46875 0.485434,-0.22959 0.901633,-0.502489 1.21875,-0.8125 0.317117,-0.310011 0.5625,-0.710861 0.5625,-1.1875 l -0.03125,0 c 0,-0.476639 -0.245383,-0.908739 -0.5625,-1.21875 C 89.901633,71.846239 89.516684,71.60459 89.03125,71.375 88.755626,71.244642 88.456123,71.117495 88.125,71 87.439949,64.078341 82.072807,58.503735 75.21875,57.375 c -0.15044,-0.461669 -0.326927,-0.884711 -0.5,-1.25 -0.230061,-0.485567 -0.501958,-0.870402 -0.8125,-1.1875 -0.310542,-0.317098 -0.710798,-0.5625 -1.1875,-0.5625 z m -0.0625,1.40625 c 0.03595,-0.01283 0.05968,0 0.0625,0 0.0056,0 0.04321,-0.02233 0.1875,0.125 0.144288,0.147334 0.34336,0.447188 0.53125,0.84375 0.06385,0.134761 0.123901,0.309578 0.1875,0.46875 -0.320353,-0.01957 -0.643524,-0.0625 -0.96875,-0.0625 -0.289073,0 -0.558569,0.04702 -0.84375,0.0625 C 71.8761,57.059578 71.936151,56.884761 72,56.75 c 0.18789,-0.396562 0.355712,-0.696416 0.5,-0.84375 0.07214,-0.07367 0.120304,-0.112167 0.15625,-0.125 z m 0,2.40625 c 0.448007,0 0.906196,0.05436 1.34375,0.09375 0.177011,0.592256 0.347655,1.271044 0.5,2.03125 0.475097,2.370753 0.807525,5.463852 0.9375,8.9375 -0.906869,-0.02852 -1.834463,-0.0625 -2.78125,-0.0625 -0.92298,0 -1.802327,0.03537 -2.6875,0.0625 0.138529,-3.473648 0.493653,-6.566747 0.96875,-8.9375 0.154684,-0.771878 0.320019,-1.463985 0.5,-2.0625 0.405568,-0.03377 0.804291,-0.0625 1.21875,-0.0625 z m -2.71875,0.28125 c -0.129732,0.498888 -0.259782,0.987558 -0.375,1.5625 -0.498513,2.487595 -0.838088,5.693299 -0.96875,9.25 -3.21363,0.15162 -6.119596,0.480068 -8.40625,0.9375 -0.682394,0.136509 -1.275579,0.279657 -1.84375,0.4375 0.799068,-6.135482 5.504716,-11.036454 11.59375,-12.1875 z M 75.5,58.5 c 6.043169,1.18408 10.705093,6.052712 11.5,12.15625 -0.569435,-0.155806 -1.200273,-0.302525 -1.875,-0.4375 -2.262525,-0.452605 -5.108535,-0.783809 -8.28125,-0.9375 -0.130662,-3.556701 -0.470237,-6.762405 -0.96875,-9.25 C 75.761959,59.467174 75.626981,58.990925 75.5,58.5 z m -2.84375,12.09375 c 0.959338,0 1.895843,0.03282 2.8125,0.0625 C 75.48165,71.267751 75.5,71.871028 75.5,72.5 c 0,1.228616 -0.01449,2.438313 -0.0625,3.59375 -0.897358,0.0284 -1.811972,0.0625 -2.75,0.0625 -0.927373,0 -1.831062,-0.03473 -2.71875,-0.0625 -0.05109,-1.155437 -0.0625,-2.365134 -0.0625,-3.59375 0,-0.628972 0.01741,-1.232249 0.03125,-1.84375 0.895269,-0.02827 1.783025,-0.0625 2.71875,-0.0625 z M 68.5625,70.6875 c -0.01243,0.60601 -0.03125,1.189946 -0.03125,1.8125 0,1.22431 0.01541,2.407837 0.0625,3.5625 -3.125243,-0.150329 -5.92077,-0.471558 -8.09375,-0.90625 -0.784983,-0.157031 -1.511491,-0.316471 -2.125,-0.5 -0.107878,-0.704096 -0.1875,-1.422089 -0.1875,-2.15625 0,-0.115714 0.02849,-0.228688 0.03125,-0.34375 0.643106,-0.20284 1.389577,-0.390377 2.25,-0.5625 2.166953,-0.433487 4.97905,-0.75541 8.09375,-0.90625 z m 8.3125,0.03125 c 3.075121,0.15271 5.824455,0.446046 7.96875,0.875 0.857478,0.171534 1.630962,0.360416 2.28125,0.5625 0.0027,0.114659 0,0.228443 0,0.34375 0,0.735827 -0.07914,1.450633 -0.1875,2.15625 -0.598568,0.180148 -1.29077,0.34562 -2.0625,0.5 -2.158064,0.431708 -4.932088,0.754666 -8.03125,0.90625 0.04709,-1.154663 0.0625,-2.33819 0.0625,-3.5625 0,-0.611824 -0.01924,-1.185379 -0.03125,-1.78125 z M 57.15625,72.5625 c 0.0023,0.572772 0.06082,1.131112 0.125,1.6875 -0.125327,-0.05123 -0.266577,-0.10497 -0.375,-0.15625 -0.396499,-0.187528 -0.665288,-0.387337 -0.8125,-0.53125 -0.147212,-0.143913 -0.15625,-0.182756 -0.15625,-0.1875 0,-0.0047 -0.02221,-0.07484 0.125,-0.21875 0.147212,-0.143913 0.447251,-0.312472 0.84375,-0.5 0.07123,-0.03369 0.171867,-0.06006 0.25,-0.09375 z m 31.03125,0 c 0.08201,0.03503 0.175941,0.05872 0.25,0.09375 0.396499,0.187528 0.665288,0.356087 0.8125,0.5 0.14725,0.14391 0.15625,0.21405 0.15625,0.21875 0,0.0047 -0.009,0.04359 -0.15625,0.1875 -0.147212,0.143913 -0.416001,0.343722 -0.8125,0.53125 -0.09755,0.04613 -0.233314,0.07889 -0.34375,0.125 0.06214,-0.546289 0.09144,-1.094215 0.09375,-1.65625 z m -29.5,3.625 c 0.479308,0.123125 0.983064,0.234089 1.53125,0.34375 2.301781,0.460458 5.229421,0.787224 8.46875,0.9375 0.167006,2.84339 0.46081,5.433176 0.875,7.5 0.115218,0.574942 0.245268,1.063612 0.375,1.5625 -5.463677,-1.028179 -9.833074,-5.091831 -11.25,-10.34375 z m 27.96875,0 C 85.247546,81.408945 80.919274,85.442932 75.5,86.5 c 0.126981,-0.490925 0.261959,-0.967174 0.375,-1.53125 0.41419,-2.066824 0.707994,-4.65661 0.875,-7.5 3.204493,-0.15162 6.088346,-0.480068 8.375,-0.9375 0.548186,-0.109661 1.051942,-0.220625 1.53125,-0.34375 z M 70.0625,77.53125 c 0.865391,0.02589 1.723666,0.03125 2.625,0.03125 0.912062,0 1.782843,-0.0048 2.65625,-0.03125 -0.165173,2.736408 -0.453252,5.207651 -0.84375,7.15625 -0.152345,0.760206 -0.322989,1.438994 -0.5,2.03125 -0.437447,0.03919 -0.895856,0.0625 -1.34375,0.0625 -0.414943,0 -0.812719,-0.02881 -1.21875,-0.0625 -0.177011,-0.592256 -0.347655,-1.271044 -0.5,-2.03125 -0.390498,-1.948599 -0.700644,-4.419842 -0.875,-7.15625 z m 1.75,10.28125 c 0.284911,0.01545 0.554954,0.03125 0.84375,0.03125 0.325029,0 0.648588,-0.01171 0.96875,-0.03125 -0.05999,0.148763 -0.127309,0.31046 -0.1875,0.4375 -0.18789,0.396562 -0.386962,0.696416 -0.53125,0.84375 -0.144288,0.147334 -0.181857,0.125 -0.1875,0.125 -0.0056,0 -0.07446,0.02233 -0.21875,-0.125 C 72.355712,88.946416 72.18789,88.646562 72,88.25 71.939809,88.12296 71.872486,87.961263 71.8125,87.8125 z"}),o("SvgPaths/svgCompassRotationMarker",[],function(){"use strict";return"M 72.46875,22.03125 C 59.505873,22.050338 46.521615,27.004287 36.6875,36.875 L 47.84375,47.96875 C 61.521556,34.240041 83.442603,34.227389 97.125,47.90625 l 11.125,-11.125 C 98.401629,26.935424 85.431627,22.012162 72.46875,22.03125 z"}),o("ViewModels/NavigationViewModel",["Cesium/Core/defined","Cesium/Core/Math","Cesium/Core/getTimestamp","Cesium/Core/EventHelper","Cesium/Core/Transforms","Cesium/Scene/SceneMode","Cesium/Core/Cartesian2","Cesium/Core/Cartesian3","Cesium/Core/Matrix4","KnockoutES5","Core/loadView","ViewModels/ResetViewNavigationControl","ViewModels/ZoomInNavigationControl","ViewModels/ZoomOutNavigationControl","SvgPaths/svgCompassOuterRing","SvgPaths/svgCompassGyro","SvgPaths/svgCompassRotationMarker"],function(e,t,o,n,i,r,s,a,l,c,u,g,h,d,p,f,m){"use strict";function v(n,c,u){function g(e,o){var i=Math.atan2(-e.y,e.x);n.orbitCursorAngle=t.zeroToTwoPi(i-t.PI_OVER_TWO);var r=s.magnitude(e),a=o/2,l=Math.min(r/a,1),c=.5*l*l+.5;n.orbitCursorOpacity=c}document.removeEventListener("mousemove",n.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",n.orbitMouseUpFunction,!1),e(n.orbitTickFunction)&&n.terria.clock.onTick.removeEventListener(n.orbitTickFunction),n.orbitMouseMoveFunction=void 0,n.orbitMouseUpFunction=void 0,n.orbitTickFunction=void 0,n.isOrbiting=!0,n.orbitLastTimestamp=o();var h=n.terria.scene,d=h.camera,p=E;p.x=h.canvas.clientWidth/2,p.y=h.canvas.clientHeight/2;var f=d.pickEllipsoid(p,h.globe.ellipsoid,C);e(f)?(n.orbitFrame=i.eastNorthUpToFixedFrame(f,h.globe.ellipsoid,S),n.orbitIsLook=!1):(n.orbitFrame=i.eastNorthUpToFixedFrame(d.positionWC,h.globe.ellipsoid,S),n.orbitIsLook=!0),n.orbitTickFunction=function(e){var i=o(),s=i-n.orbitLastTimestamp,c=2.5*(n.orbitCursorOpacity-.5)/1e3,u=s*c,g=n.orbitCursorAngle+t.PI_OVER_TWO,h=Math.cos(g)*u,d=Math.sin(g)*u,p=n.terria.scene,f=p.camera,m=l.clone(f.transform,w);f.lookAtTransform(n.orbitFrame),n.orbitIsLook?(f.look(a.UNIT_Z,-h),p.mode!==r.SCENE2D&&f.look(f.right,-d)):(f.rotateLeft(h),p.mode!==r.SCENE2D&&f.rotateUp(d)),f.lookAtTransform(m),n.orbitLastTimestamp=i},n.orbitMouseMoveFunction=function(e){var t=c.getBoundingClientRect(),o=new s((t.right-t.left)/2,(t.bottom-t.top)/2),n=new s(e.clientX-t.left,e.clientY-t.top),i=s.subtract(n,o,b);g(i,t.width)},n.orbitMouseUpFunction=function(t){n.isOrbiting=!1,document.removeEventListener("mousemove",n.orbitMouseMoveFunction,!1),document.removeEventListener("mouseup",n.orbitMouseUpFunction,!1),e(n.orbitTickFunction)&&n.terria.clock.onTick.removeEventListener(n.orbitTickFunction),n.orbitMouseMoveFunction=void 0,n.orbitMouseUpFunction=void 0,n.orbitTickFunction=void 0},document.addEventListener("mousemove",n.orbitMouseMoveFunction,!1),document.addEventListener("mouseup",n.orbitMouseUpFunction,!1),n.terria.clock.onTick.addEventListener(n.orbitTickFunction),g(u,c.getBoundingClientRect().width)}function y(o,n,r){document.removeEventListener("mousemove",o.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",o.rotateMouseUpFunction,!1),o.rotateMouseMoveFunction=void 0,o.rotateMouseUpFunction=void 0,o.isRotating=!0,o.rotateInitialCursorAngle=Math.atan2(-r.y,r.x);var c=o.terria.scene,u=c.camera,g=E;g.x=c.canvas.clientWidth/2,g.y=c.canvas.clientHeight/2;var h=u.pickEllipsoid(g,c.globe.ellipsoid,C);e(h)?(o.rotateFrame=i.eastNorthUpToFixedFrame(h,c.globe.ellipsoid,S),o.rotateIsLook=!1):(o.rotateFrame=i.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,S),o.rotateIsLook=!0);var d=l.clone(u.transform,w);u.lookAtTransform(o.rotateFrame),o.rotateInitialCameraAngle=-u.heading,o.rotateInitialCameraDistance=a.magnitude(new a(u.position.x,u.position.y,0)),u.lookAtTransform(d),o.rotateMouseMoveFunction=function(e){var i=n.getBoundingClientRect(),r=new s((i.right-i.left)/2,(i.bottom-i.top)/2),a=new s(e.clientX-i.left,e.clientY-i.top),c=s.subtract(a,r,b),u=Math.atan2(-c.y,c.x),g=u-o.rotateInitialCursorAngle,h=t.zeroToTwoPi(o.rotateInitialCameraAngle-g),d=o.terria.scene.camera,p=l.clone(d.transform,w);d.lookAtTransform(o.rotateFrame);var f=-d.heading;d.rotateRight(h-f),d.lookAtTransform(p)},o.rotateMouseUpFunction=function(e){o.isRotating=!1,document.removeEventListener("mousemove",o.rotateMouseMoveFunction,!1),document.removeEventListener("mouseup",o.rotateMouseUpFunction,!1),o.rotateMouseMoveFunction=void 0,o.rotateMouseUpFunction=void 0},document.addEventListener("mousemove",o.rotateMouseMoveFunction,!1),document.addEventListener("mouseup",o.rotateMouseUpFunction,!1)}var _=function(t){function o(){e(i.terria)?(i._unsubcribeFromPostRender&&(i._unsubcribeFromPostRender(),i._unsubcribeFromPostRender=void 0),i.showCompass=!0,i._unsubcribeFromPostRender=i.terria.scene.postRender.addEventListener(function(){i.heading=i.terria.scene.camera.heading})):(i._unsubcribeFromPostRender&&(i._unsubcribeFromPostRender(),i._unsubcribeFromPostRender=void 0),i.showCompass=!1)}this.terria=t.terria,this.eventHelper=new n,this.controls=t.controls,e(this.controls)||(this.controls=[new h(this.terria),new g(this.terria),new d(this.terria)]),this.svgCompassOuterRing=p,this.svgCompassGyro=f,this.svgCompassRotationMarker=m,this.showCompass=e(this.terria),this.heading=this.showCompass?this.terria.scene.camera.heading:0,this.isOrbiting=!1,this.orbitCursorAngle=0,this.orbitCursorOpacity=0,this.orbitLastTimestamp=0,this.orbitFrame=void 0,this.orbitIsLook=!1,this.orbitMouseMoveFunction=void 0,this.orbitMouseUpFunction=void 0,this.isRotating=!1,this.rotateInitialCursorAngle=void 0,this.rotateFrame=void 0,this.rotateIsLook=!1,this.rotateMouseMoveFunction=void 0,this.rotateMouseUpFunction=void 0,this._unsubcribeFromPostRender=void 0,c.track(this,["controls","showCompass","heading","isOrbiting","orbitCursorAngle","isRotating"]);var i=this;this.eventHelper.add(this.terria.afterWidgetChanged,o,this),o()};_.prototype.destroy=function(){this.eventHelper.removeAll()},_.prototype.show=function(e){var t='<div class="compass" title="拖拽外环: 旋转三维视图方位. 拖拽内部陀螺仪: 自由环视旋转.双击:重置视图." data-bind="visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }"><div class="compass-outer-ring-background"></div>'+" <div class=\"compass-rotation-marker\" data-bind=\"visible: isOrbiting, style: { transform: 'rotate(-' + orbitCursorAngle + 'rad)', '-webkit-transform': 'rotate(-' + orbitCursorAngle + 'rad)', opacity: orbitCursorOpacity }, cesiumSvgPath: { path: svgCompassRotationMarker, width: 145, height: 145 }\"></div> <div class=\"compass-outer-ring\" title=\"点击拖拽旋转三维视图方位\" data-bind=\"style: { transform: 'rotate(-' + heading + 'rad)', '-webkit-transform': 'rotate(-' + heading + 'rad)' }, cesiumSvgPath: { path: svgCompassOuterRing, width: 145, height: 145 }\"></div> <div class=\"compass-gyro-background\"></div> <div class=\"compass-gyro\" data-bind=\"cesiumSvgPath: { path: svgCompassGyro, width: 145, height: 145 }, css: { 'compass-gyro-active': isOrbiting }\"></div></div><div class=\"navigation-controls\"><!-- ko foreach: controls --><div data-bind=\"click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? 'navigation-control-last' : 'navigation-control' \">   <!-- ko if: $data.hasText -->   <div data-bind=\"text: $data.text, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass\"></div>   <!-- /ko -->  <!-- ko ifnot: $data.hasText -->  <div data-bind=\"cesiumSvgPath: { path: $data.svgIcon, width: $data.svgWidth, height: $data.svgHeight }, css: $data.isActive ?  'navigation-control-icon-active ' + $data.cssClass : $data.cssClass\"></div>  <!-- /ko --> </div> <!-- /ko --></div>";u(t,e,this)},_.prototype.add=function(e){this.controls.push(e)},_.prototype.remove=function(e){this.controls.remove(e)},_.prototype.isLastControl=function(e){return e===this.controls[this.controls.length-1]};var b=new s;_.prototype.handleMouseDown=function(e,t){var o=t.currentTarget,n=t.currentTarget.getBoundingClientRect(),i=n.width/2,r=new s((n.right-n.left)/2,(n.bottom-n.top)/2),a=new s(t.clientX-n.left,t.clientY-n.top),l=s.subtract(a,r,b),c=s.magnitude(l),u=c/i,g=145,h=50;if(u<h/g)v(this,o,l);else{if(!(u<1))return!0;y(this,o,l)}};var w=new l,S=new l,C=new a,E=new s;return _.prototype.handleDoubleClick=function(t,o){var n=this.terria.scene,r=n.camera,s=E;s.x=n.canvas.clientWidth/2,s.y=n.canvas.clientHeight/2;var c=r.pickEllipsoid(s,n.globe.ellipsoid,C);if(!e(c))return void this.controls[1].resetView();var u=i.eastNorthUpToFixedFrame(c,n.globe.ellipsoid),g=n.globe.ellipsoid.cartographicToCartesian(r.positionCartographic,new a),h=a.subtract(c,g,new a),d=l.multiplyByPoint(u,new a(0,0,a.magnitude(h)),new a);r.flyTo({destination:d,duration:1.5})},_.create=function(e){var t=new _(e);return t.show(e.container),t},_}),o("CesiumNavigation",["Cesium/Core/defined","Cesium/Core/defineProperties","Cesium/Core/Event","KnockoutES5","Core/registerKnockoutBindings","ViewModels/DistanceLegendViewModel","ViewModels/NavigationViewModel"],function(e,t,o,n,i,r,s){"use strict";function a(t,n){if(!e(t))throw new DeveloperError("cesiumWidget is required.");var a=document.createElement("div");a.className="cesium-widget-cesiumNavigationContainer",t.container.appendChild(a),this.terria=t,this.terria.afterWidgetChanged=new o,this.terria.beforeWidgetChanged=new o,this.container=a,this.navigationDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","navigationDiv"),this.distanceLegendDiv=document.createElement("div"),this.navigationDiv.setAttribute("id","distanceLegendDiv"),a.appendChild(this.navigationDiv),a.appendChild(this.distanceLegendDiv),i(),this.distanceLegendViewModel=r.create({container:this.distanceLegendDiv,terria:this.terria,mapElement:a}),this.navigationViewModel=s.create({container:this.navigationDiv,terria:this.terria})}var l=function(e){a.apply(this,arguments),this._onDestroyListeners=[]};return l.prototype.distanceLegendViewModel=void 0,l.prototype.navigationViewModel=void 0,l.prototype.navigationDiv=void 0,l.prototype.distanceLegendDiv=void 0,l.prototype.terria=void 0,l.prototype.container=void 0,l.prototype._onDestroyListeners=void 0,l.prototype.destroy=function(){e(this.navigationViewModel)&&this.navigationViewModel.destroy(),e(this.distanceLegendViewModel)&&this.distanceLegendViewModel.destroy(),e(this.navigationDiv)&&this.navigationDiv.parentNode.removeChild(this.navigationDiv),delete this.navigationDiv,e(this.distanceLegendDiv)&&this.distanceLegendDiv.parentNode.removeChild(this.distanceLegendDiv),delete this.distanceLegendDiv,e(this.container)&&this.container.parentNode.removeChild(this.container),delete this.container;for(var t=0;t<this._onDestroyListeners.length;t++)this._onDestroyListeners[t]()},l.prototype.addOnDestroyListener=function(e){"function"==typeof e&&this._onDestroyListeners.push(e)},l}),o("dummy/require-less/less/dummy",[],function(){}),o("viewerCesiumNavigationMixin",["Cesium/Core/defined","Cesium/Core/defineProperties","Cesium/Core/DeveloperError","CesiumNavigation","dummy/require-less/less/dummy"],function(e,t,o,n){"use strict";function i(n,i){if(!e(n))throw new o("viewer is required.");var s=r(n.cesiumWidget,i);s.addOnDestroyListener(function(e){return function(){delete e.cesiumNavigation}}(n)),t(n,{cesiumNavigation:{configurable:!0,get:function(){return n.cesiumWidget.cesiumNavigation}}})}i.mixinWidget=function(e,t){return r.apply(void 0,arguments)};var r=function(e,o){var i=new n(e,o);return t(e,{cesiumNavigation:{configurable:!0,get:function(){return i}}}),i.addOnDestroyListener(function(e){return function(){delete e.cesiumNavigation}}(e)),i};return i}),function(e){var t=document,o="appendChild",n="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][o](i),i[n]?i[n].cssText=e:i[o](t.createTextNode(e))}(".full-window{position:absolute;top:0;left:0;right:0;bottom:0;margin:0;overflow:hidden;padding:0;-webkit-transition:left .25s ease-out;-moz-transition:left .25s ease-out;-ms-transition:left .25s ease-out;-o-transition:left .25s ease-out;transition:left .25s ease-out}.transparent-to-input{pointer-events:none}.opaque-to-input{pointer-events:auto}.clickable{cursor:pointer}a:hover{text-decoration:underline}.modal,.modal-background{top:0;left:0;bottom:0;right:0}.modal-background{pointer-events:auto;background-color:rgba(0,0,0,.5);z-index:1000;position:fixed}.modal{position:absolute;margin:auto;background-color:#2f353c;max-height:100%;max-width:100%;font-family:'Roboto',sans-serif;color:#fff}.modal-header{background-color:rgba(0,0,0,.2);border-bottom:1px solid rgba(100,100,100,.6);font-size:15px;line-height:40px;margin:0}.modal-header h1{font-size:15px;color:#fff;margin-left:15px}.modal-content{margin-left:15px;margin-right:15px;margin-bottom:15px;padding-top:15px;overflow:auto}.modal-close-button{position:absolute;right:15px;cursor:pointer;font-size:18px;color:#fff}#ui{z-index:2100}@media print{.full-window{position:initial}}.markdown img{max-width:100%}.markdown svg{max-height:100%}.markdown fieldset,.markdown input,.markdown select,.markdown textarea{font-family:inherit;font-size:1rem;box-sizing:border-box;margin-top:0;margin-bottom:0}.markdown label{vertical-align:middle}.markdown h1,.markdown h2,.markdown h3,.markdown h4,.markdown h5,.markdown h6{font-family:inherit;font-weight:700;line-height:1.25;margin-top:1em;margin-bottom:.5em}.markdown h1{font-size:2rem}.markdown h2{font-size:1.5rem}.markdown h3{font-size:1.25rem}.markdown h4{font-size:1rem}.markdown h5{font-size:.875rem}.markdown h6{font-size:.75rem}.markdown dl,.markdown ol,.markdown p,.markdown ul{margin-top:0;margin-bottom:1rem}.markdown strong{font-weight:700}.markdown em{font-style:italic}.markdown small{font-size:80%}.markdown mark{color:#000;background:#ff0}.markdown a:hover,.markdown u{text-decoration:underline}.markdown s{text-decoration:line-through}.markdown ol{list-style:decimal inside}.markdown ul{list-style:disc inside}.markdown code,.markdown pre,.markdown samp{font-family:monospace;font-size:inherit}.markdown pre{margin-top:0;margin-bottom:1rem;overflow-x:scroll}.markdown a{color:#68adfe;text-decoration:none}.markdown code,.markdown pre{background-color:transparent;border-radius:3px}.markdown hr{border:0;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:rgba(0,0,0,.125)}.markdown .left-align{text-align:left}.markdown .center{text-align:center}.markdown .right-align{text-align:right}.markdown .justify{text-align:justify}.markdown .truncate{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.markdown ol.upper-roman{list-style-type:upper-roman}.markdown ol.lower-alpha{list-style-type:lower-alpha}.markdown ul.circle{list-style-type:circle}.markdown ul.square{list-style-type:square}.markdown .list-reset{list-style:none;padding-left:0}.floating,.floating-horizontal,.floating-vertical{pointer-events:auto;position:absolute;border-radius:15px;background-color:rgba(47,53,60,.8)}.floating-horizontal{padding-left:5px;padding-right:5px}.floating-vertical{padding-top:5px;padding-bottom:5px}@media print{.floating{display:none}}.distance-legend{pointer-events:auto;position:absolute;border-radius:15px;background-color:rgba(47,53,60,.8);padding-left:5px;padding-right:5px;right:25px;bottom:30px;height:30px;width:125px;border:1px solid rgba(255,255,255,.1);box-sizing:content-box}.distance-legend-label{display:inline-block;font-family:'Roboto',sans-serif;font-size:14px;font-weight:lighter;line-height:30px;color:#fff;width:125px;text-align:center}.distance-legend-scale-bar{border-left:1px solid #fff;border-right:1px solid #fff;border-bottom:1px solid #fff;position:absolute;height:10px;top:15px}@media print{.distance-legend{display:none}}@media screen and (max-width:700px),screen and (max-height:420px){.distance-legend{display:none}}.navigation-controls{position:absolute;right:30px;top:210px;width:30px;border:1px solid rgba(255,255,255,.1);font-weight:300;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.navigation-control{cursor:pointer;border-bottom:1px solid #555}.naviagation-control:active{color:#fff}.navigation-control-last{cursor:pointer;border-bottom:0}.navigation-control-icon-zoom-in{padding-bottom:4px}.navigation-control-icon-zoom-in,.navigation-control-icon-zoom-out{position:relative;text-align:center;font-size:20px;color:#fff}.navigation-control-icon-reset{position:relative;left:10px;width:10px;height:10px;fill:rgba(255,255,255,.8);padding-top:6px;padding-bottom:6px;box-sizing:content-box}.compass,.compass-outer-ring{position:absolute;cursor: pointer;width:95px;height:95px}.compass{pointer-events:auto;right:0;overflow:hidden;top:100px}.compass-outer-ring{top:0;fill:rgba(255,255,255,.5)}.compass-outer-ring-background{position:absolute;top:14px;left:14px;width:44px;height:44px;border-radius:44px;border:12px solid rgba(47,53,60,.8);box-sizing:content-box}.compass-gyro{pointer-events:none;position:absolute;top:0;width:95px;height:95px;fill:#ccc}.compass-gyro-active,.compass-gyro-background:hover+.compass-gyro{fill:#68adfe}.compass-gyro-background{position:absolute;cursor: pointer;top:30px;left:30px;width:33px;height:33px;border-radius:33px;background-color:rgba(47,53,60,.8);border:1px solid rgba(255,255,255,.2);box-sizing:content-box}.compass-rotation-marker{position:absolute;top:0;width:95px;height:95px;fill:#68adfe}@media screen and (max-width:700px),screen and (max-height:420px){.compass,.navigation-controls{display:none}}@media print{.compass,.navigation-controls{display:none}}"),o("Cesium/Core/defined",function(){return Cesium.defined}),o("Cesium/Core/defineProperties",function(){return Cesium.defineProperties}),o("Cesium/Core/defaultValue",function(){return Cesium.defaultValue}),o("Cesium/Core/Event",function(){return Cesium.Event}),o("Cesium/Widgets/getElement",function(){return Cesium.getElement}),o("Cesium/Widgets/SvgPathBindingHandler",function(){return Cesium.SvgPathBindingHandler}),o("Cesium/Core/DeveloperError",function(){return Cesium.DeveloperError}),o("Cesium/Core/EllipsoidGeodesic",function(){return Cesium.EllipsoidGeodesic}),o("Cesium/Core/Cartesian2",function(){return Cesium.Cartesian2}),o("Cesium/Core/getTimestamp",function(){return Cesium.getTimestamp}),o("Cesium/Core/EventHelper",function(){return Cesium.EventHelper}),o("Cesium/Core/Ray",function(){return Cesium.Ray}),o("Cesium/Core/IntersectionTests",function(){return Cesium.IntersectionTests}),o("Cesium/Core/Ellipsoid",function(){return Cesium.Ellipsoid}),o("Cesium/Core/Math",function(){return Cesium.Math}),o("Cesium/Core/Transforms",function(){return Cesium.Transforms}),o("Cesium/Scene/SceneMode",function(){return Cesium.SceneMode}),o("Cesium/Core/Cartesian3",function(){return Cesium.Cartesian3}),o("Cesium/Core/Matrix4",function(){return Cesium.Matrix4}),o("Cesium/Scene/Camera",function(){return Cesium.Camera}),t("viewerCesiumNavigationMixin")});var CLOSURE_NO_DEPS=!0,COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,o){var n=e.split("."),i=o||goog.global;n[0]in i||!i.execScript||i.execScript("var "+n[0]);for(var r;n.length&&(r=n.shift());)!n.length&&goog.isDef(t)?i[r]=t:i=i[r]?i[r]:i[r]={}},goog.define=function(e,t){var o=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?o=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(o=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,o)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var o=e;(o=o.substring(0,o.lastIndexOf(".")))&&!goog.getObjectByName(o);)goog.implicitNamespaces_[o]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||e.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.forwardDeclare("Document"),goog.forwardDeclare("XMLHttpRequest"),COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var o,n=e.split("."),i=t||goog.global;o=n.shift();){if(!goog.isDefAndNotNull(i[o]))return null;
i=i[o]}return i},goog.globalize=function(e,t){var o=t||goog.global;for(var n in e)o[n]=e[n]},goog.addDependency=function(e,t,o,n){if(goog.DEPENDENCIES_ENABLED){for(var i,r,s=e.replace(/\\/g,"/"),a=goog.dependencies_,l=0;i=t[l];l++)a.nameToPath[i]=s,a.pathIsModule[s]=!!n;for(var c=0;r=o[c];c++)s in a.requires||(a.requires[s]={}),a.requires[s][r]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}var o="goog.require could not find: "+e;throw goog.logToConsole_(o),Error(o)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return"undefined"!=typeof e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("SCRIPT"),o=t.length-1;o>=0;--o){var n=t[o],i=n.src,r=i.lastIndexOf("?"),s=r==-1?i.length:r;if("base.js"==i.substr(s-7,7))return void(goog.basePath=i.substr(0,s-7))}},goog.importScript_=function(e,t){var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;o(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){var t='goog.retrieveAndExecModule_("'+e+'");';goog.importScript_("",t)&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var o=0;o<e;o++){var n=t[o];goog.maybeProcessDeferredPath_(n)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e);if(t&&goog.dependencies_.pathIsModule[t]){var o=goog.basePath+t;return o in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var o in goog.dependencies_.requires[t])if(!goog.isProvided_(o)&&!goog.isDeferredModule_(o))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0};var o;if(goog.isFunction(e))o=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");o=goog.loadModuleFromSource_.call(goog.global,e)}var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(o),goog.loadedModules_[n]=o}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,o=t.createElement("script");o.type="text/javascript",o.src=e,o.defer=!1,o.async=!1,t.head.appendChild(o)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var o=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==o.readyState){var n=/\bdeps.js$/.test(e);if(n)return!1;throw Error('Cannot write "'+e+'" after document load')}var i=goog.IS_OLD_IE_;if(void 0===t)if(i){var r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";o.write('<script type="text/javascript" src="'+e+'"'+r+"></script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else o.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){function t(e){if(!(e in i.written||e in i.visited)){if(i.visited[e]=!0,e in i.requires)for(var r in i.requires[e])if(!goog.isProvided_(r)){if(!(r in i.nameToPath))throw Error("Undefined nameToPath for "+r);t(i.nameToPath[r])}e in n||(n[e]=!0,o.push(e))}}var o=[],n={},i=goog.dependencies_;t(e);for(var r=0;r<o.length;r++){var s=o[r];goog.dependencies_.written[s]=!0}var a=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var r=0;r<o.length;r++){var s=o[r];if(!s)throw goog.moduleLoaderState_=a,Error("Undefined script input");i.pathIsModule[s]?goog.importModule_(goog.basePath+s):goog.importScript_(goog.basePath+s)}goog.moduleLoaderState_=a},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){for(var t=e.split("/"),o=0;o<t.length;)"."==t[o]?t.splice(o,1):o&&".."==t[o]&&t[o-1]&&".."!=t[o-1]?t.splice(--o,2):o++;return t.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=goog.loadFileSync_(e);if(null==n)throw new Error("load of "+e+"failed");var i=goog.wrapModule_(e,n),r=goog.IS_OLD_IE_;r?(goog.dependencies_.deferred[t]=i,goog.queuedModules_.push(t)):o(e,i)}},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var o=Object.prototype.toString.call(e);if("[object Window]"==o)return"object";if("[object Array]"==o||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==o||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var o="array"==t?[]:{};for(var n in e)o[n]=goog.cloneObject(e[n]);return o}return e},goog.bindNative_=function(e,t,o){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,o){if(!e)throw new Error;if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,n),e.apply(t,o)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,o){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var o=Array.prototype.slice.call(arguments,1);return function(){var t=o.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var o in t)e[o]=t[o]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,o=t.createElement("SCRIPT");o.type="text/javascript",o.defer=!1,o.appendChild(t.createTextNode(e)),t.body.appendChild(o),t.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var o,n=function(e){return goog.cssNameMapping_[e]||e},i=function(e){for(var t=e.split("-"),o=[],i=0;i<t.length;i++)o.push(n(t[i]));return o.join("-")};return o=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:i:function(e){return e},t?e+"-"+o(t):o(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,o){return o in t?t[o]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,o){goog.exportPath_(e,t,o)},goog.exportProperty=function(e,t,o){e[t]=o},goog.inherits=function(e,t){function o(){}o.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.base=function(e,o,n){for(var i=new Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return t.prototype[o].apply(e,i)}},goog.base=function(e,t,o){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var i=new Array(arguments.length-1),r=1;r<arguments.length;r++)i[r-1]=arguments[r];return n.superClass_.constructor.apply(e,i)}for(var s=new Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];for(var a=!1,l=e.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[t]===n)a=!0;else if(a)return l.prototype[t].apply(e,s);if(e[t]===n)return e.constructor.prototype[t].apply(e,s);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var o=t.constructor,n=t.statics;o&&o!=Object.prototype.constructor||(o=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var i=goog.defineClass.createSealingConstructor_(o,e);return e&&goog.inherits(i,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(i.prototype,t),null!=n&&(n instanceof Function?n(i):goog.defineClass.applyProperties_(i,n)),i},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var o=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===o&&Object.seal(t),t};return o}return e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(e,t){var o;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)o=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.provide("goog.debug.Error"),goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.provide("goog.dom.NodeType"),goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.string"),goog.provide("goog.string.Unicode"),goog.define("goog.string.DETECT_DOUBLE_ESCAPING",!1),goog.define("goog.string.FORCE_NON_DOM_HTML_UNESCAPING",!1),goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.endsWith=function(e,t){var o=e.length-t.length;return o>=0&&e.indexOf(t,o)==o},goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.subs=function(e,t){for(var o=e.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&o.length>1;)n+=o.shift()+i.shift();return n+o.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&e>=" "&&e<="~"||e>=""&&e<="�"},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(e,t){var o=String(e).toLowerCase(),n=String(t).toLowerCase();return o<n?-1:o==n?0:1},goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,goog.string.numerateCompare=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(goog.string.numerateCompareRegExp_),n=t.toLowerCase().match(goog.string.numerateCompareRegExp_),i=Math.min(o.length,n.length),r=0;r<i;r++){var s=o[r],a=n[r];if(s!=a){var l=parseInt(s,10);if(!isNaN(l)){var c=parseInt(a,10);if(!isNaN(c)&&l-c)return l-c}return s<a?-1:1}}return o.length!=n.length?o.length-n.length:e<t?-1:1},goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(e,t){return t?(e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):goog.string.ALL_RE_.test(e)?(e.indexOf("&")!=-1&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),e.indexOf("<")!=-1&&(e=e.replace(goog.string.LT_RE_,"&lt;")),e.indexOf(">")!=-1&&(e=e.replace(goog.string.GT_RE_,"&gt;")),e.indexOf('"')!=-1&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),e.indexOf("'")!=-1&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),e.indexOf("\0")!=-1&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&e.indexOf("e")!=-1&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):e},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var o,n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return o=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var i=n[e];if(i)return i;if("#"==t.charAt(0)){var r=Number("0"+t.substr(1));isNaN(r)||(i=String.fromCharCode(r))}return i||(o.innerHTML=e+" ",i=o.firstChild.nodeValue.slice(0,-1)),n[e]=i})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var o=Number("0"+t.substr(1));if(!isNaN(o))return String.fromCharCode(o)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var o=t.length,n=0;n<o;n++){var i=1==o?t:t.charAt(n);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,o){return o&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),o&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,o,n){if(o&&(e=goog.string.unescapeEntities(e)),n&&e.length>t){n>t&&(n=t);var i=e.length-n,r=t-n;e=e.substring(0,r)+"..."+e.substring(i)}else if(e.length>t){var s=Math.floor(t/2),a=e.length-s;s+=t%2,e=e.substring(0,s)+"..."+e.substring(a)}return o&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){if(e=String(e),e.quote)return e.quote();for(var t=['"'],o=0;o<e.length;o++){var n=e.charAt(o),i=n.charCodeAt(0);t[o+1]=goog.string.specialEscapeChars_[n]||(i>31&&i<127?n:goog.string.escapeChar(n))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],o=0;o<e.length;o++)t[o]=goog.string.escapeChar(e.charAt(o));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e,o=e.charCodeAt(0);return o>31&&o<127?t=e:(o<256?(t="\\x",(o<16||o>256)&&(t+="0")):(t="\\u",o<4096&&(t+="0")),t+=o.toString(16).toUpperCase()),goog.string.jsEscapeCache_[e]=t},goog.string.contains=function(e,t){return e.indexOf(t)!=-1},goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,o){var n=e;return t>=0&&t<e.length&&o>0&&(n=e.substr(0,t)+e.substr(t+o,e.length-t-o)),n},goog.string.remove=function(e,t){var o=new RegExp(goog.string.regExpEscape(t),"");return e.replace(o,"")},goog.string.removeAll=function(e,t){var o=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(o,"")},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=function(e,t){return new Array(t+1).join(e)},goog.string.padNumber=function(e,t,o){var n=goog.isDef(o)?e.toFixed(o):String(e),i=n.indexOf(".");return i==-1&&(i=n.length),goog.string.repeat("0",Math.max(0,t-i))+n},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^goog.now()).toString(36)},goog.string.compareVersions=function(e,t){for(var o=0,n=goog.string.trim(String(e)).split("."),i=goog.string.trim(String(t)).split("."),r=Math.max(n.length,i.length),s=0;0==o&&s<r;s++){var a=n[s]||"",l=i[s]||"",c=new RegExp("(\\d*)(\\D*)","g"),u=new RegExp("(\\d*)(\\D*)","g");do{var g=c.exec(a)||["","",""],h=u.exec(l)||["","",""];if(0==g[0].length&&0==h[0].length)break;var d=0==g[1].length?0:parseInt(g[1],10),p=0==h[1].length?0:parseInt(h[1],10);o=goog.string.compareElements_(d,p)||goog.string.compareElements_(0==g[2].length,0==h[2].length)||goog.string.compareElements_(g[2],h[2])}while(0==o)}return o},goog.string.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.HASHCODE_MAX_=4294967296,goog.string.hashCode=function(e){for(var t=0,o=0;o<e.length;++o)t=31*t+e.charCodeAt(o),t%=goog.string.HASHCODE_MAX_;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){var o=goog.isString(t)?goog.string.regExpEscape(t):"\\s";o=o?"|["+o+"]+":"";var n=new RegExp("(^"+o+")([a-z])","g");return e.replace(n,function(e,t,o){return t+o.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,o){for(var n=e.split(t),i=[];o>0&&n.length;)i.push(n.shift()),o--;return n.length&&i.push(n.join(t)),i},goog.string.editDistance=function(e,t){var o=[],n=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)o[i]=i;for(var i=0;i<e.length;i++){n[0]=i+1;for(var r=0;r<t.length;r++){var s=e[i]!=t[r];n[r+1]=Math.min(n[r]+1,o[r+1]+1,o[r]+s)}for(var r=0;r<o.length;r++)o[r]=n[r]}return n[t.length]},goog.provide("goog.asserts"),goog.provide("goog.asserts.AssertionError"),goog.require("goog.debug.Error"),goog.require("goog.dom.NodeType"),goog.require("goog.string"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,o,n){var i="Assertion failed";if(o){i+=": "+o;var r=n}else e&&(i+=": "+e,r=t);var s=new goog.asserts.AssertionError(""+i,r||[]);goog.asserts.errorHandler_(s)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,o){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,o){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,o,n){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],o,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.provide("goog.array"),goog.provide("goog.array.ArrayLike"),goog.require("goog.asserts"),goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE),goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",!1),goog.array.ArrayLike,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.ARRAY_PROTOTYPE_=Array.prototype,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(e,t,o){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.indexOf.call(e,t,o)}:function(e,t,o){var n=null==o?0:o<0?Math.max(0,e.length+o):o;if(goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,n):-1;for(var i=n;i<e.length;i++)if(i in e&&e[i]===t)return i;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(e,t,o){goog.asserts.assert(null!=e.length);var n=null==o?e.length-1:o;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(e,t,n)}:function(e,t,o){var n=null==o?e.length-1:o;if(n<0&&(n=Math.max(0,e.length+n)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(var i=n;i>=0;i--)if(i in e&&e[i]===t)return i;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(e,t,o){goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.forEach.call(e,t,o)}:function(e,t,o){for(var n=e.length,i=goog.isString(e)?e.split(""):e,r=0;r<n;r++)r in i&&t.call(o,i[r],r,e)},goog.array.forEachRight=function(e,t,o){for(var n=e.length,i=goog.isString(e)?e.split(""):e,r=n-1;r>=0;--r)r in i&&t.call(o,i[r],r,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(e,t,o){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.filter.call(e,t,o)}:function(e,t,o){for(var n=e.length,i=[],r=0,s=goog.isString(e)?e.split(""):e,a=0;a<n;a++)if(a in s){var l=s[a];t.call(o,l,a,e)&&(i[r++]=l)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(e,t,o){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.map.call(e,t,o)}:function(e,t,o){for(var n=e.length,i=new Array(n),r=goog.isString(e)?e.split(""):e,s=0;s<n;s++)s in r&&(i[s]=t.call(o,r[s],s,e));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(e,t,o,n){return goog.asserts.assert(null!=e.length),n&&(t=goog.bind(t,n)),goog.array.ARRAY_PROTOTYPE_.reduce.call(e,t,o)}:function(e,t,o,n){var i=o;return goog.array.forEach(e,function(o,r){
i=t.call(n,i,o,r,e)}),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(e,t,o,n){return goog.asserts.assert(null!=e.length),n&&(t=goog.bind(t,n)),goog.array.ARRAY_PROTOTYPE_.reduceRight.call(e,t,o)}:function(e,t,o,n){var i=o;return goog.array.forEachRight(e,function(o,r){i=t.call(n,i,o,r,e)}),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(e,t,o){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.some.call(e,t,o)}:function(e,t,o){for(var n=e.length,i=goog.isString(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(o,i[r],r,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(e,t,o){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.every.call(e,t,o)}:function(e,t,o){for(var n=e.length,i=goog.isString(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&!t.call(o,i[r],r,e))return!1;return!0},goog.array.count=function(e,t,o){var n=0;return goog.array.forEach(e,function(e,i,r){t.call(o,e,i,r)&&++n},o),n},goog.array.find=function(e,t,o){var n=goog.array.findIndex(e,t,o);return n<0?null:goog.isString(e)?e.charAt(n):e[n]},goog.array.findIndex=function(e,t,o){for(var n=e.length,i=goog.isString(e)?e.split(""):e,r=0;r<n;r++)if(r in i&&t.call(o,i[r],r,e))return r;return-1},goog.array.findRight=function(e,t,o){var n=goog.array.findIndexRight(e,t,o);return n<0?null:goog.isString(e)?e.charAt(n):e[n]},goog.array.findIndexRight=function(e,t,o){for(var n=e.length,i=goog.isString(e)?e.split(""):e,r=n-1;r>=0;r--)if(r in i&&t.call(o,i[r],r,e))return r;return-1},goog.array.contains=function(e,t){return goog.array.indexOf(e,t)>=0},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;t>=0;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,o){goog.array.splice(e,o,0,t)},goog.array.insertArrayAt=function(e,t,o){goog.partial(goog.array.splice,e,o,0).apply(null,t)},goog.array.insertBefore=function(e,t,o){var n;2==arguments.length||(n=goog.array.indexOf(e,o))<0?e.push(t):goog.array.insertAt(e,t,n)},goog.array.remove=function(e,t){var o,n=goog.array.indexOf(e,t);return(o=n>=0)&&goog.array.removeAt(e,n),o},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,o){var n=goog.array.findIndex(e,t,o);return n>=0&&(goog.array.removeAt(e,n),!0)},goog.array.removeAllIf=function(e,t,o){var n=0;return goog.array.forEachRight(e,function(i,r){t.call(o,i,r,e)&&goog.array.removeAt(e,r)&&n++}),n},goog.array.concat=function(e){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.join=function(e){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.toArray=function(e){var t=e.length;if(t>0){for(var o=new Array(t),n=0;n<t;n++)o[n]=e[n];return o}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var o=1;o<arguments.length;o++){var n=arguments[o];if(goog.isArrayLike(n)){var i=e.length||0,r=n.length||0;e.length=i+r;for(var s=0;s<r;s++)e[i+s]=n[s]}else e.push(n)}},goog.array.splice=function(e,t,o,n){return goog.asserts.assert(null!=e.length),goog.array.ARRAY_PROTOTYPE_.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,o){return goog.asserts.assert(null!=e.length),arguments.length<=2?goog.array.ARRAY_PROTOTYPE_.slice.call(e,t):goog.array.ARRAY_PROTOTYPE_.slice.call(e,t,o)},goog.array.removeDuplicates=function(e,t,o){for(var n=t||e,i=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e},r=o||i,s={},a=0,l=0;l<e.length;){var c=e[l++],u=r(c);Object.prototype.hasOwnProperty.call(s,u)||(s[u]=!0,n[a++]=c)}n.length=a},goog.array.binarySearch=function(e,t,o){return goog.array.binarySearch_(e,o||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,o){return goog.array.binarySearch_(e,t,!0,void 0,o)},goog.array.binarySearch_=function(e,t,o,n,i){for(var r,s=0,a=e.length;s<a;){var l,c=s+a>>1;l=o?t.call(i,e[c],c,e):t(n,e[c]),l>0?s=c+1:(a=c,r=!l)}return r?s:~s},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){function o(e,t){return i(e.value,t.value)||e.index-t.index}for(var n=0;n<e.length;n++)e[n]={index:n,value:e[n]};var i=t||goog.array.defaultCompare;goog.array.sort(e,o);for(var n=0;n<e.length;n++)e[n]=e[n].value},goog.array.sortByKey=function(e,t,o){var n=o||goog.array.defaultCompare;goog.array.sort(e,function(e,o){return n(t(e),t(o))})},goog.array.sortObjectsByKey=function(e,t,o){goog.array.sortByKey(e,function(e){return e[t]},o)},goog.array.isSorted=function(e,t,o){for(var n=t||goog.array.defaultCompare,i=1;i<e.length;i++){var r=n(e[i-1],e[i]);if(r>0||0==r&&o)return!1}return!0},goog.array.equals=function(e,t,o){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;for(var n=e.length,i=o||goog.array.defaultCompareEquality,r=0;r<n;r++)if(!i(e[r],t[r]))return!1;return!0},goog.array.compare3=function(e,t,o){for(var n=o||goog.array.defaultCompare,i=Math.min(e.length,t.length),r=0;r<i;r++){var s=n(e[r],t[r]);if(0!=s)return s}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,o){var n=goog.array.binarySearch(e,t,o);return n<0&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,o){var n=goog.array.binarySearch(e,t,o);return n>=0&&goog.array.removeAt(e,n)},goog.array.bucket=function(e,t,o){for(var n={},i=0;i<e.length;i++){var r=e[i],s=t.call(o,r,i,e);if(goog.isDef(s)){var a=n[s]||(n[s]=[]);a.push(r)}}return n},goog.array.toObject=function(e,t,o){var n={};return goog.array.forEach(e,function(i,r){n[t.call(o,i,r,e)]=i}),n},goog.array.range=function(e,t,o){var n=[],i=0,r=e,s=o||1;if(void 0!==t&&(i=e,r=t),s*(r-i)<0)return[];if(s>0)for(var a=i;a<r;a+=s)n.push(a);else for(var a=i;a>r;a+=s)n.push(a);return n},goog.array.repeat=function(e,t){for(var o=[],n=0;n<t;n++)o[n]=e;return o},goog.array.flatten=function(e){for(var t=8192,o=[],n=0;n<arguments.length;n++){var i=arguments[n];if(goog.isArray(i))for(var r=0;r<i.length;r+=t)for(var s=goog.array.slice(i,r,r+t),a=goog.array.flatten.apply(null,s),l=0;l<a.length;l++)o.push(a[l]);else o.push(i)}return o},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(t%=e.length,t>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(e,e.splice(-t,t)):t<0&&goog.array.ARRAY_PROTOTYPE_.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,o){goog.asserts.assert(t>=0&&t<e.length),goog.asserts.assert(o>=0&&o<e.length);var n=goog.array.ARRAY_PROTOTYPE_.splice.call(e,t,1);goog.array.ARRAY_PROTOTYPE_.splice.call(e,o,0,n[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],o=0;!0;o++){for(var n=[],i=0;i<arguments.length;i++){var r=arguments[i];if(o>=r.length)return t;n.push(r[o])}t.push(n)}},goog.array.shuffle=function(e,t){for(var o=t||Math.random,n=e.length-1;n>0;n--){var i=Math.floor(o()*(n+1)),r=e[n];e[n]=e[i],e[i]=r}},goog.array.copyByIndex=function(e,t){var o=[];return goog.array.forEach(t,function(t){o.push(e[t])}),o},goog.provide("goog.object"),goog.object.forEach=function(e,t,o){for(var n in e)t.call(o,e[n],n,e)},goog.object.filter=function(e,t,o){var n={};for(var i in e)t.call(o,e[i],i,e)&&(n[i]=e[i]);return n},goog.object.map=function(e,t,o){var n={};for(var i in e)n[i]=t.call(o,e[i],i,e);return n},goog.object.some=function(e,t,o){for(var n in e)if(t.call(o,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,o){for(var n in e)if(!t.call(o,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t=0;for(var o in e)t++;return t},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t=[],o=0;for(var n in e)t[o++]=e[n];return t},goog.object.getKeys=function(e){var t=[],o=0;for(var n in e)t[o++]=n;return t},goog.object.getValueByKeys=function(e,t){for(var o=goog.isArrayLike(t),n=o?t:arguments,i=o?0:1;i<n.length&&(e=e[n[i]],goog.isDef(e));i++);return e},goog.object.containsKey=function(e,t){return t in e},goog.object.containsValue=function(e,t){for(var o in e)if(e[o]==t)return!0;return!1},goog.object.findKey=function(e,t,o){for(var n in e)if(t.call(o,e[n],n,e))return n},goog.object.findValue=function(e,t,o){var n=goog.object.findKey(e,t,o);return n&&e[n]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var o;return(o=t in e)&&delete e[t],o},goog.object.add=function(e,t,o){if(t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,o)},goog.object.get=function(e,t,o){return t in e?e[t]:o},goog.object.set=function(e,t,o){e[t]=o},goog.object.setIfUndefined=function(e,t,o){return t in e?e[t]:e[t]=o},goog.object.setWithReturnValueIfNotSet=function(e,t,o){if(t in e)return e[t];var n=o();return e[t]=n,n},goog.object.equals=function(e,t){for(var o in e)if(!(o in t)||e[o]!==t[o])return!1;for(var o in t)if(!(o in e))return!1;return!0},goog.object.clone=function(e){var t={};for(var o in e)t[o]=e[o];return t},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();var o="array"==t?[]:{};for(var n in e)o[n]=goog.object.unsafeClone(e[n]);return o}return e},goog.object.transpose=function(e){var t={};for(var o in e)t[e[o]]=o;return t},goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.object.extend=function(e,t){for(var o,n,i=1;i<arguments.length;i++){n=arguments[i];for(o in n)e[o]=n[o];for(var r=0;r<goog.object.PROTOTYPE_FIELDS_.length;r++)o=goog.object.PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var o={},n=0;n<t;n+=2)o[arguments[n]]=arguments[n+1];return o},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var o={},n=0;n<t;n++)o[arguments[n]]=!0;return o},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.provide("olcs.AbstractSynchronizer"),goog.require("goog.array"),goog.require("goog.object"),goog.require("ol.Observable"),goog.require("ol.layer.Group"),olcs.AbstractSynchronizer=function(e,t){this.map=e,this.view=e.getView(),this.scene=t,this.olLayers=e.getLayerGroup().getLayers(),this.mapLayerGroup=e.getLayerGroup(),this.layerMap={},this.olLayerListenKeys_={},this.olGroupListenKeys_={}},olcs.AbstractSynchronizer.prototype.synchronize=function(){this.destroyAll(),this.addLayers_(this.mapLayerGroup)},olcs.AbstractSynchronizer.flattenLayers=function(e,t,o,n){if(!e.isBaseLayer)if(e instanceof ol.layer.Group){o.push(e);var i=e.getLayers();goog.isDef(i)&&i.forEach(function(e){olcs.AbstractSynchronizer.flattenLayers(e,t,o,n)})}else t.push(e),n&&(n[goog.getUid(e)]=e.getZIndex())},olcs.AbstractSynchronizer.prototype.orderLayers=function(){},olcs.AbstractSynchronizer.prototype.addLayers_=function(e){var t=[],o=[];olcs.AbstractSynchronizer.flattenLayers(e,t,o),t.forEach(function(e){if(!goog.isNull(e)){var t=goog.getUid(e),o=this.layerMap[t];goog.asserts.assert(!goog.isDef(o)),o=this.createSingleCounterpart(e),goog.isNull(o)||(o.zIndex=e.getZIndex(),this.addCesiumObject(o),this.layerMap[t]=o,this.olLayerListenKeys_[t]=e.on("change:zIndex",this.orderLayers,this))}},this),o.forEach(function(e){this.listenForGroupChanges_(e)},this),this.orderLayers()},olcs.AbstractSynchronizer.prototype.removeAndDestroySingleLayer_=function(e){var t=goog.getUid(e),o=this.layerMap[t];o&&(this.removeSingleCesiumObject(o,!1),this.destroyCesiumObject(o),ol.Observable.unByKey(this.olLayerListenKeys_[t]),delete this.olLayerListenKeys_[t]),delete this.layerMap[t]},olcs.AbstractSynchronizer.prototype.unlistenSingleGroup_=function(e){if(e!==this.mapLayerGroup){var t=goog.getUid(e),o=this.olGroupListenKeys_[t];o.forEach(function(e){ol.Observable.unByKey(e)}),delete this.olGroupListenKeys_[t]}},olcs.AbstractSynchronizer.prototype.removeLayer_=function(e){if(e){var t=[],o=[];olcs.AbstractSynchronizer.flattenLayers(e,t,o),t.forEach(function(e){this.removeAndDestroySingleLayer_(e)},this),o.forEach(function(e){this.unlistenSingleGroup_(e)},this)}},olcs.AbstractSynchronizer.prototype.listenForGroupChanges_=function(e){var t=goog.getUid(e);goog.asserts.assert(!goog.isDef(this.olGroupListenKeys_[t]));var o=[];this.olGroupListenKeys_[t]=o;var n=[],i=goog.bind(function(){var t=e.getLayers();goog.isDef(t)&&(n=[t.on("add",function(e){this.addLayers_(e.element)},this),t.on("remove",function(e){this.removeLayer_(e.element)},this)],o.push.apply(o,n))},this);i(),o.push(e.on("change:layers",function(e){goog.array.forEach(n,function(e){goog.array.remove(o,e),ol.Observable.unByKey(e)}),i()}))},olcs.AbstractSynchronizer.prototype.destroyAll=function(){this.removeAllCesiumObjects(!0),goog.object.forEach(this.olGroupListenKeys,function(e){e.forEach(ol.Observable.unByKey)}),goog.object.forEach(this.olLayerListenKeys,ol.Observable.unByKey),this.olGroupListenKeys={},this.olLayerListenKeys={},this.layerMap={}},olcs.AbstractSynchronizer.prototype.addCesiumObject=goog.abstractMethod,olcs.AbstractSynchronizer.prototype.destroyCesiumObject=goog.abstractMethod,olcs.AbstractSynchronizer.prototype.removeSingleCesiumObject=goog.abstractMethod,olcs.AbstractSynchronizer.prototype.removeAllCesiumObjects=goog.abstractMethod,olcs.AbstractSynchronizer.prototype.createSingleCounterpart=goog.abstractMethod,goog.provide("goog.debug.EntryPointMonitor"),goog.provide("goog.debug.entryPointRegistry"),goog.require("goog.asserts"),goog.debug.EntryPointMonitor=function(){},goog.debug.EntryPointMonitor.prototype.wrap,goog.debug.EntryPointMonitor.prototype.unwrap,goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(e){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e,goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,o=0;o<t.length;o++)e(goog.bind(t[o].wrap,t[o]))},goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(e.wrap,e),o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](t);goog.debug.entryPointRegistry.monitors_.push(e)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==t[t.length-1],"Only the most recent monitor can be unwrapped.");for(var o=goog.bind(e.unwrap,e),n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](o);t.length--},goog.provide("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();if(e){var t=e.userAgent;if(t)return t}return""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,o=new RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),n=[];t=o.exec(e);)n.push([t[1],t[2],t[3]||void 0]);return n},goog.provide("goog.labs.userAgent.browser"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.object"),goog.require("goog.string"),goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){var t=goog.array.find(e,i);return n[t]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);var o=goog.labs.userAgent.util.extractVersionTuples(t),n={};goog.array.forEach(o,function(e){var t=e[0],o=e[1];n[t]=o});var i=goog.partial(goog.object.containsKey,n);if(goog.labs.userAgent.browser.isOpera())return e(["Version","Opera","OPR"]);if(goog.labs.userAgent.browser.isEdge())return e(["Edge"]);if(goog.labs.userAgent.browser.isChrome())return e(["Chrome","CriOS"]);var r=o[2];return r&&r[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)>=0},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];var o="",n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1]){var i=/Trident\/(\d.\d)/.exec(e);if("7.0"==n[1])if(i&&i[1])switch(i[1]){case"4.0":o="8.0";break;case"5.0":o="9.0";break;case"6.0":o="10.0";break;case"7.0":o="11.0"}else o="7.0";else o=n[1]}return o},goog.provide("goog.labs.userAgent.engine"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){var t=goog.labs.userAgent.util.extractVersionTuples(e),o=goog.labs.userAgent.engine.getEngineTuple_(t);if(o)return"Gecko"==o[0]?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):o[1];var n,i=t[0];if(i&&(n=i[2])){var r=/Trident\/([^\s;]+)/.exec(n);if(r)return r[1]}}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var o=e[t];if("Edge"==o[0])return o}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)>=0};goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var o=goog.array.find(e,function(e){return t==e[0]});return o&&o[1]||""};goog.provide("goog.labs.userAgent.platform"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.getVersion=function(){var e,t=goog.labs.userAgent.util.getUserAgent(),o="";if(goog.labs.userAgent.platform.isWindows()){e=/Windows (?:NT|Phone) ([0-9.]+)/;var n=e.exec(t);o=n?n[1]:"0.0"}else if(goog.labs.userAgent.platform.isIos()){e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/;var n=e.exec(t);o=n&&n[1].replace(/_/g,".")}else if(goog.labs.userAgent.platform.isMacintosh()){e=/Mac OS X ([0-9_.]+)/;var n=e.exec(t);o=n?n[1].replace(/_/g,"."):"10"}else if(goog.labs.userAgent.platform.isAndroid()){e=/Android\s+([^\);]+)(\)|;)/;var n=e.exec(t);o=n&&n[1]}else if(goog.labs.userAgent.platform.isChromeOS()){e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/;var n=e.exec(t);o=n&&n[1]}return o||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)>=0},goog.provide("goog.userAgent"),goog.require("goog.labs.userAgent.browser"),goog.require("goog.labs.userAgent.engine"),goog.require("goog.labs.userAgent.platform"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.define("goog.userAgent.ASSUME_IE",!1),goog.define("goog.userAgent.ASSUME_EDGE",!1),goog.define("goog.userAgent.ASSUME_GECKO",!1),goog.define("goog.userAgent.ASSUME_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_OPERA",!1),goog.define("goog.userAgent.ASSUME_ANY_VERSION",!1),goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.define("goog.userAgent.ASSUME_MAC",!1),goog.define("goog.userAgent.ASSUME_WINDOWS",!1),goog.define("goog.userAgent.ASSUME_LINUX",!1),goog.define("goog.userAgent.ASSUME_X11",!1),goog.define("goog.userAgent.ASSUME_ANDROID",!1),goog.define("goog.userAgent.ASSUME_IPHONE",!1),goog.define("goog.userAgent.ASSUME_IPAD",!1),goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global.opera){var e=goog.global.opera.version;return goog.isFunction(e)?e():e}var t="",o=goog.userAgent.getVersionRegexResult_();if(o&&(t=o?o[1]:""),goog.userAgent.IE){var n=goog.userAgent.getDocumentMode_();if(n>parseFloat(t))return String(n)}return t},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv\:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=goog.string.compareVersions(goog.userAgent.VERSION,e)>=0)},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return goog.userAgent.DOCUMENT_MODE>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();if(e&&goog.userAgent.IE)return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.provide("goog.events.BrowserFeature"),goog.require("goog.userAgent"),goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)},goog.provide("goog.disposable.IDisposable"),goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.provide("goog.Disposable"),goog.provide("goog.dispose"),goog.provide("goog.disposeAll"),goog.require("goog.disposable.IDisposable"),goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=(new Error).stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.define("goog.Disposable.MONITORING_MODE",0),goog.define("goog.Disposable.INCLUDE_STACK_ON_CREATION",!0),goog.Disposable.instances_={},
goog.Disposable.getUndisposedObjects=function(){var e=[];for(var t in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(t)&&e.push(goog.Disposable.instances_[Number(t)]);return e},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.onDisposeCallbacks_,goog.Disposable.prototype.creationStack,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var e=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(e))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[e]}},goog.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(goog.partial(goog.dispose,e))},goog.Disposable.prototype.addOnDisposeCallback=function(e,t){return this.disposed_?void e.call(t):(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),void this.onDisposeCallbacks_.push(goog.isDef(t)?goog.bind(e,t):e))},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(e){return!(!e||"function"!=typeof e.isDisposed)&&e.isDisposed()},goog.dispose=function(e){e&&"function"==typeof e.dispose&&e.dispose()},goog.disposeAll=function(e){for(var t=0,o=arguments.length;t<o;++t){var n=arguments[t];goog.isArrayLike(n)?goog.disposeAll.apply(null,n):goog.dispose(n)}},goog.provide("goog.events.EventId"),goog.events.EventId=function(e){this.id=e},goog.events.EventId.prototype.toString=function(){return this.id},goog.provide("goog.events.Event"),goog.provide("goog.events.EventLike"),goog.require("goog.Disposable"),goog.require("goog.events.EventId"),goog.events.EventLike,goog.events.Event=function(e,t){this.type=e instanceof goog.events.EventId?String(e):e,this.target=t,this.currentTarget=this.target,this.propagationStopped_=!1,this.defaultPrevented=!1,this.returnValue_=!0},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(e){e.stopPropagation()},goog.events.Event.preventDefault=function(e){e.preventDefault()},goog.provide("goog.events.EventType"),goog.require("goog.userAgent"),goog.events.getVendorPrefixedName_=function(e){return goog.userAgent.WEBKIT?"webkit"+e:goog.userAgent.OPERA?"o"+e.toLowerCase():e.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint"},goog.provide("goog.reflect"),goog.reflect.object=function(e,t){return t},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.provide("goog.events.BrowserEvent"),goog.provide("goog.events.BrowserEvent.MouseButton"),goog.require("goog.events.BrowserFeature"),goog.require("goog.events.Event"),goog.require("goog.events.EventType"),goog.require("goog.reflect"),goog.require("goog.userAgent"),goog.events.BrowserEvent=function(e,t){goog.events.BrowserEvent.base(this,"constructor",e?e.type:""),this.target=null,this.currentTarget=null,this.relatedTarget=null,this.offsetX=0,this.offsetY=0,this.clientX=0,this.clientY=0,this.screenX=0,this.screenY=0,this.button=0,this.keyCode=0,this.charCode=0,this.ctrlKey=!1,this.altKey=!1,this.shiftKey=!1,this.metaKey=!1,this.state=null,this.platformModifierKey=!1,this.event_=null,e&&this.init(e,t)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.IEButtonMap=[1,4,2],goog.events.BrowserEvent.prototype.init=function(e,t){var o=this.type=e.type,n=e.changedTouches?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.currentTarget=t;var i=e.relatedTarget;i?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(i,"nodeName")||(i=null)):o==goog.events.EventType.MOUSEOVER?i=e.fromElement:o==goog.events.EventType.MOUSEOUT&&(i=e.toElement),this.relatedTarget=i,goog.isNull(n)?(this.offsetX=goog.userAgent.WEBKIT||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.charCode=e.charCode||("keypress"==o?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey,this.state=e.state,this.event_=e,e.defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(e){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==e:"click"==this.type?e==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[e])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var e=this.event_;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{var t=112,o=123;(e.ctrlKey||e.keyCode>=t&&e.keyCode<=o)&&(e.keyCode=-1)}catch(e){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.provide("goog.events.Listenable"),goog.provide("goog.events.ListenableKey"),goog.require("goog.events.EventId"),goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(e){e.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(e){return!(!e||!e[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.Listenable.prototype.listen,goog.events.Listenable.prototype.listenOnce,goog.events.Listenable.prototype.unlisten,goog.events.Listenable.prototype.unlistenByKey,goog.events.Listenable.prototype.dispatchEvent,goog.events.Listenable.prototype.removeAllListeners,goog.events.Listenable.prototype.getParentEventTarget,goog.events.Listenable.prototype.fireListeners,goog.events.Listenable.prototype.getListeners,goog.events.Listenable.prototype.getListener,goog.events.Listenable.prototype.hasListener,goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.ListenableKey.prototype.src,goog.events.ListenableKey.prototype.type,goog.events.ListenableKey.prototype.listener,goog.events.ListenableKey.prototype.capture,goog.events.ListenableKey.prototype.handler,goog.events.ListenableKey.prototype.key,goog.provide("goog.events.Listener"),goog.require("goog.events.ListenableKey"),goog.events.Listener=function(e,t,o,n,i,r){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=(new Error).stack),this.listener=e,this.proxy=t,this.src=o,this.type=n,this.capture=!!i,this.handler=r,this.key=goog.events.ListenableKey.reserveKey(),this.callOnce=!1,this.removed=!1},goog.define("goog.events.Listener.ENABLE_MONITORING",!1),goog.events.Listener.prototype.creationStack,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null},goog.provide("goog.events.ListenerMap"),goog.require("goog.array"),goog.require("goog.events.Listener"),goog.require("goog.object"),goog.events.ListenerMap=function(e){this.src=e,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var e=0;for(var t in this.listeners)e+=this.listeners[t].length;return e},goog.events.ListenerMap.prototype.add=function(e,t,o,n,i){var r=e.toString(),s=this.listeners[r];s||(s=this.listeners[r]=[],this.typeCount_++);var a,l=goog.events.ListenerMap.findListenerIndex_(s,t,n,i);return l>-1?(a=s[l],o||(a.callOnce=!1)):(a=new goog.events.Listener(t,null,this.src,r,!!n,i),a.callOnce=o,s.push(a)),a},goog.events.ListenerMap.prototype.remove=function(e,t,o,n){var i=e.toString();if(!(i in this.listeners))return!1;var r=this.listeners[i],s=goog.events.ListenerMap.findListenerIndex_(r,t,o,n);if(s>-1){var a=r[s];return a.markAsRemoved(),goog.array.removeAt(r,s),0==r.length&&(delete this.listeners[i],this.typeCount_--),!0}return!1},goog.events.ListenerMap.prototype.removeByKey=function(e){var t=e.type;if(!(t in this.listeners))return!1;var o=goog.array.remove(this.listeners[t],e);return o&&(e.markAsRemoved(),0==this.listeners[t].length&&(delete this.listeners[t],this.typeCount_--)),o},goog.events.ListenerMap.prototype.removeAll=function(e){var t=e&&e.toString(),o=0;for(var n in this.listeners)if(!t||n==t){for(var i=this.listeners[n],r=0;r<i.length;r++)++o,i[r].markAsRemoved();delete this.listeners[n],this.typeCount_--}return o},goog.events.ListenerMap.prototype.getListeners=function(e,t){var o=this.listeners[e.toString()],n=[];if(o)for(var i=0;i<o.length;++i){var r=o[i];r.capture==t&&n.push(r)}return n},goog.events.ListenerMap.prototype.getListener=function(e,t,o,n){var i=this.listeners[e.toString()],r=-1;return i&&(r=goog.events.ListenerMap.findListenerIndex_(i,t,o,n)),r>-1?i[r]:null},goog.events.ListenerMap.prototype.hasListener=function(e,t){var o=goog.isDef(e),n=o?e.toString():"",i=goog.isDef(t);return goog.object.some(this.listeners,function(e,r){for(var s=0;s<e.length;++s)if(!(o&&e[s].type!=n||i&&e[s].capture!=t))return!0;return!1})},goog.events.ListenerMap.findListenerIndex_=function(e,t,o,n){for(var i=0;i<e.length;++i){var r=e[i];if(!r.removed&&r.listener==t&&r.capture==!!o&&r.handler==n)return i}return-1},goog.provide("goog.events"),goog.provide("goog.events.CaptureSimulationMode"),goog.provide("goog.events.Key"),goog.provide("goog.events.ListenableType"),goog.require("goog.asserts"),goog.require("goog.debug.entryPointRegistry"),goog.require("goog.events.BrowserEvent"),goog.require("goog.events.BrowserFeature"),goog.require("goog.events.Listenable"),goog.require("goog.events.ListenerMap"),goog.forwardDeclare("goog.debug.ErrorHandler"),goog.forwardDeclare("goog.events.EventWrapper"),goog.events.Key,goog.events.ListenableType;goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0);goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.define("goog.events.CAPTURE_SIMULATION_MODE",2),goog.events.listenerCountEstimate_=0,goog.events.listen=function(e,t,o,n,i){if(goog.isArray(t)){for(var r=0;r<t.length;r++)goog.events.listen(e,t[r],o,n,i);return null}return o=goog.events.wrapListener(o),goog.events.Listenable.isImplementedBy(e)?e.listen(t,o,n,i):goog.events.listen_(e,t,o,!1,n,i)},goog.events.listen_=function(e,t,o,n,i,r){if(!t)throw Error("Invalid event type");var s=!!i;if(s&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var a=goog.events.getListenerMap_(e);a||(e[goog.events.LISTENER_MAP_PROP_]=a=new goog.events.ListenerMap(e));var l=a.add(t,o,n,i,r);if(l.proxy)return l;var c=goog.events.getProxy();if(l.proxy=c,c.src=e,c.listener=l,e.addEventListener)e.addEventListener(t.toString(),c,s);else{if(!e.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");e.attachEvent(goog.events.getOnString_(t.toString()),c)}return goog.events.listenerCountEstimate_++,l},goog.events.getProxy=function(){var e=goog.events.handleBrowserEvent_,t=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(o){return e.call(t.src,t.listener,o)}:function(o){var n=e.call(t.src,t.listener,o);if(!n)return n};return t},goog.events.listenOnce=function(e,t,o,n,i){if(goog.isArray(t)){for(var r=0;r<t.length;r++)goog.events.listenOnce(e,t[r],o,n,i);return null}return o=goog.events.wrapListener(o),goog.events.Listenable.isImplementedBy(e)?e.listenOnce(t,o,n,i):goog.events.listen_(e,t,o,!0,n,i)},goog.events.listenWithWrapper=function(e,t,o,n,i){t.listen(e,o,n,i)},goog.events.unlisten=function(e,t,o,n,i){if(goog.isArray(t)){for(var r=0;r<t.length;r++)goog.events.unlisten(e,t[r],o,n,i);return null}if(o=goog.events.wrapListener(o),goog.events.Listenable.isImplementedBy(e))return e.unlisten(t,o,n,i);if(!e)return!1;var s=!!n,a=goog.events.getListenerMap_(e);if(a){var l=a.getListener(t,o,s,i);if(l)return goog.events.unlistenByKey(l)}return!1},goog.events.unlistenByKey=function(e){if(goog.isNumber(e))return!1;var t=e;if(!t||t.removed)return!1;var o=t.src;if(goog.events.Listenable.isImplementedBy(o))return o.unlistenByKey(t);var n=t.type,i=t.proxy;o.removeEventListener?o.removeEventListener(n,i,t.capture):o.detachEvent&&o.detachEvent(goog.events.getOnString_(n),i),goog.events.listenerCountEstimate_--;var r=goog.events.getListenerMap_(o);return r?(r.removeByKey(t),0==r.getTypeCount()&&(r.src=null,o[goog.events.LISTENER_MAP_PROP_]=null)):t.markAsRemoved(),!0},goog.events.unlistenWithWrapper=function(e,t,o,n,i){t.unlisten(e,o,n,i)},goog.events.removeAll=function(e,t){if(!e)return 0;if(goog.events.Listenable.isImplementedBy(e))return e.removeAllListeners(t);var o=goog.events.getListenerMap_(e);if(!o)return 0;var n=0,i=t&&t.toString();for(var r in o.listeners)if(!i||r==i)for(var s=o.listeners[r].concat(),a=0;a<s.length;++a)goog.events.unlistenByKey(s[a])&&++n;return n},goog.events.getListeners=function(e,t,o){if(goog.events.Listenable.isImplementedBy(e))return e.getListeners(t,o);if(!e)return[];var n=goog.events.getListenerMap_(e);return n?n.getListeners(t,o):[]},goog.events.getListener=function(e,t,o,n,i){t=t,o=goog.events.wrapListener(o);var r=!!n;if(goog.events.Listenable.isImplementedBy(e))return e.getListener(t,o,r,i);if(!e)return null;var s=goog.events.getListenerMap_(e);return s?s.getListener(t,o,r,i):null},goog.events.hasListener=function(e,t,o){if(goog.events.Listenable.isImplementedBy(e))return e.hasListener(t,o);var n=goog.events.getListenerMap_(e);return!!n&&n.hasListener(t,o)},goog.events.expose=function(e){var t=[];for(var o in e)e[o]&&e[o].id?t.push(o+" = "+e[o]+" ("+e[o].id+")"):t.push(o+" = "+e[o]);return t.join("\n")},goog.events.getOnString_=function(e){return e in goog.events.onStringMap_?goog.events.onStringMap_[e]:goog.events.onStringMap_[e]=goog.events.onString_+e},goog.events.fireListeners=function(e,t,o,n){return goog.events.Listenable.isImplementedBy(e)?e.fireListeners(t,o,n):goog.events.fireListeners_(e,t,o,n)},goog.events.fireListeners_=function(e,t,o,n){var i=!0,r=goog.events.getListenerMap_(e);if(r){var s=r.listeners[t.toString()];if(s){s=s.concat();for(var a=0;a<s.length;a++){var l=s[a];if(l&&l.capture==o&&!l.removed){var c=goog.events.fireListener(l,n);i=i&&c!==!1}}}}return i},goog.events.fireListener=function(e,t){var o=e.listener,n=e.handler||e.src;return e.callOnce&&goog.events.unlistenByKey(e),o.call(n,t)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(e,t){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(e),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),e.dispatchEvent(t)},goog.events.protectBrowserEventEntryPoint=function(e){goog.events.handleBrowserEvent_=e.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(e,t){if(e.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var o=t||goog.getObjectByName("window.event"),n=new goog.events.BrowserEvent(o,this),i=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(o)){goog.events.markIeEvent_(o);for(var r=[],s=n.currentTarget;s;s=s.parentNode)r.push(s);for(var a=e.type,l=r.length-1;!n.propagationStopped_&&l>=0;l--){n.currentTarget=r[l];var c=goog.events.fireListeners_(r[l],a,!0,n);i=i&&c}for(var l=0;!n.propagationStopped_&&l<r.length;l++){n.currentTarget=r[l];var c=goog.events.fireListeners_(r[l],a,!1,n);i=i&&c}}}else i=goog.events.fireListener(e,n);return i}return goog.events.fireListener(e,new goog.events.BrowserEvent(t,this))},goog.events.markIeEvent_=function(e){var t=!1;if(0==e.keyCode)try{return void(e.keyCode=-1)}catch(e){t=!0}(t||void 0==e.returnValue)&&(e.returnValue=!0)},goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||void 0!=e.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(e){return e+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(e){var t=e[goog.events.LISTENER_MAP_PROP_];return t instanceof goog.events.ListenerMap?t:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(e){return goog.asserts.assert(e,"Listener can not be null."),goog.isFunction(e)?e:(goog.asserts.assert(e.handleEvent,"An object listener must have handleEvent method."),e[goog.events.LISTENER_WRAPPER_PROP_]||(e[goog.events.LISTENER_WRAPPER_PROP_]=function(t){return e.handleEvent(t)}),e[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register(function(e){goog.events.handleBrowserEvent_=e(goog.events.handleBrowserEvent_)}),goog.provide("goog.functions"),goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=goog.functions.constant(!1),goog.functions.TRUE=goog.functions.constant(!0),goog.functions.NULL=goog.functions.constant(null),goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(o){return t?e==o:e===o}},goog.functions.compose=function(e,t){var o=arguments,n=o.length;return function(){var e;n&&(e=o[n-1].apply(this,arguments));for(var t=n-2;t>=0;t--)e=o[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,o=t.length;return function(){for(var e,n=0;n<o;n++)e=t[n].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,o=t.length;return function(){for(var e=0;e<o;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,o=t.length;return function(){for(var e=0;e<o;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var o=function(){};o.prototype=e.prototype;var n=new o;return e.apply(n,Array.prototype.slice.call(arguments,1)),n},goog.define("goog.functions.CACHE_RETURN_VALUE",!0),goog.functions.cacheReturnValue=function(e){var t,o=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(o||(t=e(),o=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,o){o&&(e=goog.bind(e,o));var n=null;return function(){goog.global.clearTimeout(n),n=goog.global.setTimeout(e,t)}},goog.functions.throttle=function(e,t,o){o&&(e=goog.bind(e,o));var n=null,i=!1,r=function(){n=goog.global.setTimeout(s,t),e()},s=function(){n=null,i&&(i=!1,r())};return function(){n?i=!0:r()}},goog.provide("goog.async.AnimationDelay"),goog.require("goog.Disposable"),goog.require("goog.events"),goog.require("goog.functions"),goog.async.AnimationDelay=function(e,t,o){goog.async.AnimationDelay.base(this,"constructor"),this.id_=null,this.usingListeners_=!1,this.listener_=e,this.handler_=o,this.win_=t||window,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.AnimationDelay,goog.Disposable),goog.async.AnimationDelay.TIMEOUT=20,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint",goog.async.AnimationDelay.prototype.start=function(){this.stop(),this.usingListeners_=!1;var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):e&&t?this.id_=e.call(this.win_,this.callback_):this.id_=this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)},goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):e&&t?t.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null},goog.async.AnimationDelay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_},goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_),this.id_=null,this.listener_.call(this.handler_,goog.now())},goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop(),goog.async.AnimationDelay.base(this,"disposeInternal")},goog.async.AnimationDelay.prototype.getRaf_=function(){var e=this.win_;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null},goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var e=this.win_;return e.cancelAnimationFrame||e.cancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||null},goog.provide("olcs.core.OLImageryProvider"),goog.require("goog.events"),goog.require("ol.proj"),olcs.core.OLImageryProvider=function(e,t){this.source_=e,this.projection_=null,this.fallbackProj_=goog.isDef(t)?t:null,this.ready_=!1,this.errorEvent_=new Cesium.Event,this.emptyCanvas_=goog.dom.createElement(goog.dom.TagName.CANVAS),this.emptyCanvas_.width=1,this.emptyCanvas_.height=1,this.source_.on(goog.events.EventType.CHANGE,function(e){this.handleSourceChanged_()},this),this.handleSourceChanged_()},Object.defineProperties(olcs.core.OLImageryProvider.prototype,{ready:{get:function(){return this.ready_}},rectangle:{get:function(){return this.rectangle_}},tileWidth:{get:function(){var e=this.source_.getTileGrid();return goog.isNull(e)?256:e.getTileSize(0)}},tileHeight:{get:function(){return this.tileWidth}},maximumLevel:{get:function(){var e=this.source_.getTileGrid();return goog.isNull(e)?18:e.getMaxZoom()}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.tilingScheme_}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this.errorEvent_}},credit:{get:function(){return this.credit_}},proxy:{get:function(){}},hasAlphaChannel:{get:function(){return!0}},pickFeatures:{get:function(){}}}),olcs.core.OLImageryProvider.prototype.handleSourceChanged_=function(){if(!this.ready_&&"ready"==this.source_.getState()){var e=this.source_.getProjection();this.projection_=goog.isDefAndNotNull(e)?e:this.fallbackProj_,this.projection_==ol.proj.get("EPSG:4326")?this.tilingScheme_=new Cesium.GeographicTilingScheme:this.projection_==ol.proj.get("EPSG:3857")?this.tilingScheme_=new Cesium.WebMercatorTilingScheme:this.tilingScheme_=new Cesium.GeographicTilingScheme,this.rectangle_=this.tilingScheme_.rectangle;var t=olcs.core.OLImageryProvider.createCreditForSource(this.source_);this.credit_=goog.isNull(t)?void 0:t,this.ready_=!0}},olcs.core.OLImageryProvider.createCreditForSource=function(e){var t="",o=e.getAttributions();goog.isNull(o)||goog.array.forEach(o,function(e,o,n){t+=e.getHTML().replace(/<\/?[^>]+(>|$)/g,"")+" "});var n,i;if(0==t.length){var r=e.getLogo();goog.isDef(r)&&(goog.isString(r)?n=r:(n=r.src,i=r.href))}return goog.isDef(n)||t.length>0?new Cesium.Credit(t,n,i):null},olcs.core.OLImageryProvider.prototype.getTileCredits=function(e,t,o){},goog.exportProperty(olcs.core.OLImageryProvider.prototype,"getTileCredits",olcs.core.OLImageryProvider.prototype.getTileCredits),olcs.core.OLImageryProvider.prototype.requestImage=function(e,t,o){var n=this.source_.getTileUrlFunction();if(goog.isNull(n)||goog.isNull(this.projection_))return this.emptyCanvas_;var i=this.tilingScheme_ instanceof Cesium.GeographicTilingScheme&&this.projection_==ol.proj.get("EPSG:4326")?o+1:o,r=-t-1,s=n([i,e,r],1,this.projection_);return goog.isDef(s)?Cesium.ImageryProvider.loadImage(this,s):this.emptyCanvas_},goog.exportProperty(olcs.core.OLImageryProvider.prototype,"requestImage",olcs.core.OLImageryProvider.prototype.requestImage),goog.provide("olcs.core"),goog.require("goog.asserts"),goog.require("goog.async.AnimationDelay"),goog.require("ol.layer.Tile"),goog.require("ol.proj"),goog.require("ol.source.TileImage"),goog.require("ol.source.WMTS"),goog.require("olcs.core.OLImageryProvider"),olcs.core.computePixelSizeAtCoordinate=function(e,t){var o=e.camera,n=e.canvas,i=o.frustum,r=new Cesium.Cartesian2(n.width,n.height),s=Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(o.position,t,new Cesium.Cartesian3)),a=i.getPixelSize(r,s);return a},olcs.core.computeBoundingBoxAtTarget=function(e,t,o){var n=olcs.core.computePixelSizeAtCoordinate(e,t),i=Cesium.Transforms.eastNorthUpToFixedFrame(t),r=Cesium.Matrix4.multiplyByPoint(i,new Cesium.Cartesian3(-n.x*o,-n.y*o,0),new Cesium.Cartesian3),s=Cesium.Matrix4.multiplyByPoint(i,new Cesium.Cartesian3(n.x*o,n.y*o,0),new Cesium.Cartesian3);return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray([r,s])},olcs.core.applyHeightOffsetToGeometry=function(e,t){e.applyTransform(function(e,o,n){if(goog.asserts.assert(e===o),goog.isDef(n)&&n>=3)for(var i=0;i<o.length;i+=n)o[i+2]=o[i+2]+t;return o})},olcs.core.rotateAroundAxis=function(e,t,o,n,i){var r=Cesium.Math.clamp,s=Cesium.defaultValue,a=i||{},l=s(a.duration,500),c=s(a.easing,ol.easing.linear),u=a.callback,g=goog.now(),h=0,d=new Cesium.Matrix4,p=new goog.async.AnimationDelay(function(i){var s=c(r((i-g)/l,0,1));goog.asserts.assert(s>h),e.transform.clone(d);var a=(s-h)*t;h=s,e.lookAtTransform(n),e.rotate(o,a),e.lookAtTransform(d),s<1?p.start():u&&u()});p.start()},olcs.core.setHeadingUsingBottomCenter=function(e,t,o,n){var i=e.camera,r=olcs.core.computeAngleToZenith(e,o),s=i.right,a=Cesium.Quaternion.fromAxisAngle(s,r),l=Cesium.Matrix3.fromQuaternion(a),c=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(i.position,o,c);var u=new Cesium.Cartesian3;Cesium.Matrix3.multiplyByVector(l,c,u),Cesium.Cartesian3.add(u,o,u);var g=Cesium.Matrix4.fromTranslation(u),h=olcs.core.rotateAroundAxis;h(i,t,u,g,n)},olcs.core.pickOnTerrainOrEllipsoid=function(e,t){var o=e.camera.getPickRay(t),n=e.globe.pick(o,e);return n||e.camera.pickEllipsoid(t)},olcs.core.pickBottomPoint=function(e){var t=e.canvas,o=new Cesium.Cartesian2(t.width/2,t.height);return olcs.core.pickOnTerrainOrEllipsoid(e,o)},olcs.core.pickCenterPoint=function(e){var t=e.canvas,o=new Cesium.Cartesian2(t.width/2,t.height/2);return olcs.core.pickOnTerrainOrEllipsoid(e,o)},olcs.core.computeSignedTiltAngleOnGlobe=function(e){var t=e.camera,o=new Cesium.Ray(t.position,t.direction),n=e.globe.pick(o,e);if(!n){var i=Cesium.Ellipsoid.WGS84,r=Cesium.IntersectionTests.rayEllipsoid(o,i);r&&(n=Cesium.Ray.getPoint(o,r.start))}if(n){var s=new Cesium.Cartesian3;Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(n,s);
var a=olcs.core.signedAngleBetween,l=a(t.direction,s,t.right)-Math.PI;return Cesium.Math.convertLongitudeRange(l)}},olcs.core.bottomFovRay=function(e){var t=e.camera,o=t.frustum.fovy/2,n=t.direction,i=Cesium.Quaternion.fromAxisAngle(t.right,o),r=Cesium.Matrix3.fromQuaternion(i),s=new Cesium.Cartesian3;return Cesium.Matrix3.multiplyByVector(r,n,s),new Cesium.Ray(t.position,s)},olcs.core.signedAngleBetween=function(e,t,o){var n=new Cesium.Cartesian3,i=new Cesium.Cartesian3,r=new Cesium.Cartesian3;Cesium.Cartesian3.normalize(e,n),Cesium.Cartesian3.normalize(t,i),Cesium.Cartesian3.cross(n,i,r);var s=Cesium.Cartesian3.dot(n,i),a=Cesium.Cartesian3.magnitude(r),l=Cesium.Cartesian3.dot(o,r),c=Math.atan2(a,s);return l>=0?c:-c},olcs.core.computeAngleToZenith=function(e,t){var o=e.camera,n=o.frustum.fovy/2,i=olcs.core.bottomFovRay(e),r=Cesium.Cartesian3.clone(i.direction);Cesium.Cartesian3.negate(r,r);var s=new Cesium.Cartesian3;Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(t,s);var a=new Cesium.Cartesian3;Cesium.Cartesian3.negate(o.right,a);var l=olcs.core.signedAngleBetween(s,r,a);return l+n},olcs.core.lookAt=function(e,t,o){if(goog.isDef(o)){var n=o.getHeight(t);t.height=goog.isDef(n)?n:0}var i=Cesium.Ellipsoid.WGS84,r=i.cartographicToCartesian(t),s=e.position,a=new Cesium.Cartesian3;i.geocentricSurfaceNormal(s,a),e.lookAt(s,r,a)},olcs.core.extentToRectangle=function(e,t){if(goog.isNull(e)||goog.isNull(t))return null;var o=ol.proj.transformExtent(e,t,"EPSG:4326");return Cesium.Rectangle.fromDegrees(o[0],o[1],o[2],o[3])},olcs.core.tileLayerToImageryLayer=function(e,t){if(!(e instanceof ol.layer.Tile))return null;var o=null,n=e.getSource();if(n instanceof ol.source.WMTS)return null;if(!(n instanceof ol.source.TileImage))return null;var i=n.getProjection();if(goog.isNull(i))i=t;else if(i!==t)return null;var r=i===ol.proj.get("EPSG:3857"),s=i===ol.proj.get("EPSG:4326");if(!r&&!s)return null;o=new olcs.core.OLImageryProvider(n,t);var a={},l=e.getExtent();goog.isDefAndNotNull(l)&&!goog.isNull(t)&&(a.rectangle=olcs.core.extentToRectangle(l,t));var c=new Cesium.ImageryLayer(o,a);return c},olcs.core.updateCesiumLayerProperties=function(e,t){var o=e.getOpacity();goog.isDef(o)&&(t.alpha=o);var n=e.getVisible();goog.isDef(n)&&(t.show=n)},olcs.core.ol4326CoordinateToCesiumCartesian=function(e){var t=e;return goog.isDefAndNotNull(t),t.length>2?Cesium.Cartesian3.fromDegrees(t[0],t[1],t[2]):Cesium.Cartesian3.fromDegrees(t[0],t[1])},olcs.core.ol4326CoordinateArrayToCsCartesians=function(e){goog.asserts.assert(null!==e);for(var t=olcs.core.ol4326CoordinateToCesiumCartesian,o=[],n=0;n<e.length;++n)o.push(t(e[n]));return o},olcs.core.olGeometryCloneTo4326=function(e,t){goog.asserts.assert(goog.isDef(t));var o=ol.proj.get("EPSG:4326"),n=ol.proj.get(t);if(n!==o){var i=e.getProperties();e=e.clone(),e.transform(n,o),e.setProperties(i)}return e},olcs.core.convertColorToCesium=function(e){return e=e||"black",goog.isArray(e)?new Cesium.Color(Cesium.Color.byteToFloat(e[0]),Cesium.Color.byteToFloat(e[1]),Cesium.Color.byteToFloat(e[2]),e[3]):goog.isString(e)?Cesium.Color.fromCssColorString(e):void goog.asserts.fail("impossible")},goog.provide("olcs.Camera"),goog.require("goog.events"),goog.require("ol.Observable"),goog.require("ol.proj"),goog.require("olcs.core"),olcs.Camera=function(e,t){this.scene_=e,this.cam_=e.camera,this.map_=t,this.view_=null,this.viewListenKey_=null,this.toLonLat_=olcs.Camera.identityProjection,this.fromLonLat_=olcs.Camera.identityProjection,this.tilt_=0,this.distance_=0,this.lastCameraViewMatrix_=null,this.viewUpdateInProgress_=!1,this.map_.on("change:view",function(e){this.setView_(this.map_.getView())},this),this.setView_(this.map_.getView())},olcs.Camera.identityProjection=function(e,t,o){var n=o||e.length;if(t)for(var i=0;i<n;++i)t[i]=e[i];return e},olcs.Camera.prototype.setView_=function(e){if(goog.isNull(this.view_)||(ol.Observable.unByKey(this.viewListenKey_),this.viewListenKey_=null),this.view_=e,goog.isNull(e))this.toLonLat_=olcs.Camera.identityProjection,this.fromLonLat_=olcs.Camera.identityProjection;else{var t=ol.proj.getTransform(e.getProjection(),"EPSG:4326"),o=ol.proj.getTransform("EPSG:4326",e.getProjection());goog.asserts.assert(t&&o),this.toLonLat_=t,this.fromLonLat_=o,this.viewListenKey_=e.on("propertychange",this.handleViewEvent_,this),this.readFromView()}},olcs.Camera.prototype.handleViewEvent_=function(e){this.viewUpdateInProgress_||this.disableUpdate||this.readFromView()},olcs.Camera.prototype.setHeading=function(e){goog.isNull(this.view_)||this.view_.setRotation(e)},olcs.Camera.prototype.getHeading=function(){if(!goog.isNull(this.view_)){var e=this.view_.getRotation();return goog.isDef(e)?e:0}},olcs.Camera.prototype.setTilt=function(e){this.tilt_=e,this.updateCamera_()},olcs.Camera.prototype.getTilt=function(){return this.tilt_},olcs.Camera.prototype.setDistance=function(e){this.distance_=e,this.updateCamera_(),this.updateView()},olcs.Camera.prototype.getDistance=function(){return this.distance_},olcs.Camera.prototype.setCenter=function(e){goog.isNull(this.view_)||this.view_.setCenter(e)},olcs.Camera.prototype.getCenter=function(){if(!goog.isNull(this.view_))return this.view_.getCenter()},olcs.Camera.prototype.setPosition=function(e){if(!goog.isNull(this.toLonLat_)){var t=this.toLonLat_(e);goog.asserts.assert(!goog.isNull(t));var o=new Cesium.Cartographic(goog.math.toRadians(t[0]),goog.math.toRadians(t[1]),this.getAltitude());this.cam_.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(o),this.updateView()}},olcs.Camera.prototype.getPosition=function(){if(!goog.isNull(this.fromLonLat_)){var e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position),t=this.fromLonLat_([goog.math.toDegrees(e.longitude),goog.math.toDegrees(e.latitude)]);return goog.asserts.assert(!goog.isNull(t)),t}},olcs.Camera.prototype.setAltitude=function(e){var t=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);t.height=e,this.cam_.position=Cesium.Ellipsoid.WGS84.cartographicToCartesian(t),this.updateView()},olcs.Camera.prototype.getAltitude=function(){var e=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);return e.height},olcs.Camera.prototype.lookAt=function(e){if(!goog.isNull(this.toLonLat_)){var t=this.toLonLat_(e);goog.asserts.assert(!goog.isNull(t));var o=Cesium.Cartographic.fromDegrees(t[0],t[1]);olcs.core.lookAt(this.cam_,o,this.scene_.globe),this.updateView()}},olcs.Camera.prototype.updateCamera_=function(){if(!goog.isNull(this.view_)&&!goog.isNull(this.toLonLat_)){var e=this.view_.getCenter();if(e){var t=this.toLonLat_(e);goog.asserts.assert(!goog.isNull(t));var o=new Cesium.Cartographic(goog.math.toRadians(t[0]),goog.math.toRadians(t[1]));if(this.scene_.globe){var n=Cesium.sampleTerrain(this.scene_.terrainProvider,9,o),i=this;Cesium.when(n,function(e){var n=null;n=-Cesium.Math.PI_OVER_TWO,i.cam_.setView({destination:Cesium.Cartesian3.fromDegrees(t[0],t[1],o.height),orientation:{pitch:n,heading:-i.view_.getRotation()}}),i.cam_.moveBackward(i.distance_),i.checkCameraChange(!0)})}}}},olcs.Camera.prototype.readFromView=function(){if(!goog.isNull(this.view_)&&!goog.isNull(this.toLonLat_)){var e=this.view_.getCenter();if(goog.isDefAndNotNull(e)){var t=this.toLonLat_(e);goog.asserts.assert(!goog.isNull(t));var o=this.view_.getResolution();this.distance_=this.calcDistanceForResolution_(goog.isDef(o)?o:0,goog.math.toRadians(t[1])),this.updateCamera_()}}},olcs.Camera.prototype.updateView=function(){if(!goog.isNull(this.view_)&&!goog.isNull(this.fromLonLat_)){this.viewUpdateInProgress_=!0;var e=Cesium.Ellipsoid.WGS84,t=this.scene_,o=olcs.core.pickCenterPoint(t),n=o;if(!n){var i=t.globe,r=this.cam_.positionCartographic.clone(),s=i.getHeight(r);r.height=goog.isDef(s)?s:0,n=Cesium.Ellipsoid.WGS84.cartographicToCartesian(r)}this.distance_=Cesium.Cartesian3.distance(n,this.cam_.position);var a=e.cartesianToCartographic(n);if(this.view_.setCenter(this.fromLonLat_([goog.math.toDegrees(a.longitude),goog.math.toDegrees(a.latitude)])),this.view_.setResolution(this.calcResolutionForDistance_(this.distance_,a?a.latitude:0)),o){var l=this.cam_.position,c=new Cesium.Cartesian3;e.geocentricSurfaceNormal(o,c);var u=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(l,o,u),Cesium.Cartesian3.normalize(u,u);var g=this.cam_.up,h=this.cam_.right,d=new Cesium.Cartesian3(-o.y,o.x,0),p=(Cesium.Cartesian3.angleBetween(h,d),Cesium.Cartesian3.cross(o,g,new Cesium.Cartesian3)),f=(p.z,Math.acos(Cesium.Cartesian3.dot(c,u)));this.tilt_=isNaN(f)?0:f}else this.tilt_=-this.cam_.pitch+Math.PI/2;this.viewUpdateInProgress_=!1}},olcs.Camera.prototype.checkCameraChange=function(e){var t=this.cam_.viewMatrix;this.lastCameraViewMatrix_&&this.lastCameraViewMatrix_.equals(t)||(this.lastCameraViewMatrix_=t.clone(),e!==!0&&this.updateView())},olcs.Camera.prototype.calcDistanceForResolution_=function(e,t){var o=this.scene_.canvas,n=this.cam_.frustum.fovy,i=this.view_.getProjection().getMetersPerUnit(),r=e*o.height,s=Math.cos(Math.abs(t)),a=r*i*s,l=a/2/Math.tan(n/2);return l},olcs.Camera.prototype.calcResolutionForDistance_=function(e,t){var o=this.scene_.canvas,n=this.cam_.frustum.fovy,i=this.view_.getProjection().getMetersPerUnit(),r=2*e*Math.tan(n/2),s=Math.cos(Math.abs(t)),a=r/i/s,l=a/o.height;return l},goog.provide("olcs.core.VectorLayerCounterpart"),goog.require("ol.Observable"),olcs.core.VectorLayerCounterpart=function(e,t){var o=new Cesium.BillboardCollection({scene:t}),n=new Cesium.PrimitiveCollection;this.olListenKeys=[],this.rootCollection_=new Cesium.PrimitiveCollection,this.context={projection:e,billboards:o,featureToCesiumMap:{},primitives:n},this.rootCollection_.add(o),this.rootCollection_.add(n)},olcs.core.VectorLayerCounterpart.prototype.destroy=function(){this.olListenKeys.forEach(ol.Observable.unByKey),this.olListenKeys.length=0},olcs.core.VectorLayerCounterpart.prototype.getRootPrimitive=function(){return this.rootCollection_},goog.provide("goog.events.EventTarget"),goog.require("goog.Disposable"),goog.require("goog.asserts"),goog.require("goog.events"),goog.require("goog.events.Event"),goog.require("goog.events.Listenable"),goog.require("goog.events.ListenerMap"),goog.require("goog.object"),goog.events.EventTarget=function(){goog.Disposable.call(this),this.eventTargetListeners_=new goog.events.ListenerMap(this),this.actualEventTarget_=this,this.parentEventTarget_=null},goog.inherits(goog.events.EventTarget,goog.Disposable),goog.events.Listenable.addImplementation(goog.events.EventTarget),goog.events.EventTarget.MAX_ANCESTORS_=1e3,goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_},goog.events.EventTarget.prototype.setParentEventTarget=function(e){this.parentEventTarget_=e},goog.events.EventTarget.prototype.addEventListener=function(e,t,o,n){goog.events.listen(this,e,t,o,n)},goog.events.EventTarget.prototype.removeEventListener=function(e,t,o,n){goog.events.unlisten(this,e,t,o,n)},goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var t,o=this.getParentEventTarget();if(o){t=[];for(var n=1;o;o=o.getParentEventTarget())t.push(o),goog.asserts.assert(++n<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,t)},goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this),this.removeAllListeners(),this.parentEventTarget_=null},goog.events.EventTarget.prototype.listen=function(e,t,o,n){return this.assertInitialized_(),this.eventTargetListeners_.add(String(e),t,!1,o,n)},goog.events.EventTarget.prototype.listenOnce=function(e,t,o,n){return this.eventTargetListeners_.add(String(e),t,!0,o,n)},goog.events.EventTarget.prototype.unlisten=function(e,t,o,n){return this.eventTargetListeners_.remove(String(e),t,o,n)},goog.events.EventTarget.prototype.unlistenByKey=function(e){return this.eventTargetListeners_.removeByKey(e)},goog.events.EventTarget.prototype.removeAllListeners=function(e){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(e):0},goog.events.EventTarget.prototype.fireListeners=function(e,t,o){var n=this.eventTargetListeners_.listeners[String(e)];if(!n)return!0;n=n.concat();for(var i=!0,r=0;r<n.length;++r){var s=n[r];if(s&&!s.removed&&s.capture==t){var a=s.listener,l=s.handler||s.src;s.callOnce&&this.unlistenByKey(s),i=a.call(l,o)!==!1&&i}}return i&&0!=o.returnValue_},goog.events.EventTarget.prototype.getListeners=function(e,t){return this.eventTargetListeners_.getListeners(String(e),t)},goog.events.EventTarget.prototype.getListener=function(e,t,o,n){return this.eventTargetListeners_.getListener(String(e),t,o,n)},goog.events.EventTarget.prototype.hasListener=function(e,t){var o=goog.isDef(e)?String(e):void 0;return this.eventTargetListeners_.hasListener(o,t)},goog.events.EventTarget.prototype.setTargetForTesting=function(e){this.actualEventTarget_=e},goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},goog.events.EventTarget.dispatchEventInternal_=function(e,t,o){var n=t.type||t;if(goog.isString(t))t=new goog.events.Event(t,e);else if(t instanceof goog.events.Event)t.target=t.target||e;else{var i=t;t=new goog.events.Event(n,e),goog.object.extend(t,i)}var r,s=!0;if(o)for(var a=o.length-1;!t.propagationStopped_&&a>=0;a--)r=t.currentTarget=o[a],s=r.fireListeners(n,!0,t)&&s;if(t.propagationStopped_||(r=t.currentTarget=e,s=r.fireListeners(n,!0,t)&&s,t.propagationStopped_||(s=r.fireListeners(n,!1,t)&&s)),o)for(a=0;!t.propagationStopped_&&a<o.length;a++)r=t.currentTarget=o[a],s=r.fireListeners(n,!1,t)&&s;return s},goog.provide("olcs.DragBox"),goog.provide("olcs.DragBoxEventType"),goog.require("goog.asserts"),goog.require("goog.events.EventTarget"),olcs.DragBoxEventType={BOXSTART:"boxstart",BOXEND:"boxend"},olcs.DragBox=function(e){var t=goog.isDef(e)?e:{};goog.base(this),this.scene_=null,this.handler_=null,this.box_=new Cesium.RectanglePrimitive({asynchronous:!1,rectangle:new Cesium.Rectangle,material:Cesium.Material.fromType(Cesium.Material.ColorType)}),this.box_.material.uniforms.color=new Cesium.Color(0,0,1,.5),this.modifier_=goog.isDef(t.modifier)?t.modifier:Cesium.KeyboardEventModifier.SHIFT,this.startPosition_=null},goog.inherits(olcs.DragBox,goog.events.EventTarget),olcs.DragBox.prototype.handleMouseDown=function(e){var t=this.scene_.globe.ellipsoid,o=this.scene_.camera.getPickRay(e.position),n=this.scene_.globe.pick(o,this.scene_);if(goog.isDef(n)){this.handler_.setInputAction(goog.bind(this.handleMouseMove,this),Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler_.setInputAction(goog.bind(this.handleMouseUp,this),Cesium.ScreenSpaceEventType.LEFT_UP),goog.isDef(this.modifier_)&&(this.handler_.setInputAction(goog.bind(this.handleMouseMove,this),Cesium.ScreenSpaceEventType.MOUSE_MOVE,this.modifier_),this.handler_.setInputAction(goog.bind(this.handleMouseUp,this),Cesium.ScreenSpaceEventType.LEFT_UP,this.modifier_));var i=t.cartesianToCartographic(n),r=this.box_.rectangle;r.north=r.south=i.latitude,r.east=r.west=i.longitude,this.box_.height=i.height,this.box_.show=!0,this.dispatchEvent({type:olcs.DragBoxEventType.BOXSTART,position:i}),goog.asserts.assert(!goog.isNull(this.box_)),this.scene_.primitives.contains(this.box_)||this.scene_.primitives.add(this.box_),this.scene_.screenSpaceCameraController.enableInputs=!1,this.startPosition_=i}},olcs.DragBox.prototype.handleMouseMove=function(e){var t=this.scene_.globe.ellipsoid,o=this.scene_.camera.getPickRay(e.endPosition),n=this.scene_.globe.pick(o,this.scene_);if(goog.isDef(n)){var i=t.cartesianToCartographic(n);this.box_.height=Math.max(this.box_.height,i.height),i.latitude<this.startPosition_.latitude?this.box_.rectangle.south=i.latitude:this.box_.rectangle.north=i.latitude,i.longitude<this.startPosition_.longitude?this.box_.rectangle.west=i.longitude:this.box_.rectangle.east=i.longitude}},olcs.DragBox.prototype.handleMouseUp=function(e){var t=this.scene_.globe.ellipsoid,o=this.scene_.camera.getPickRay(e.position),n=this.scene_.globe.pick(o,this.scene_);if(goog.isDef(n)){var i=t.cartesianToCartographic(n);this.box_.show=!1,this.dispatchEvent({type:olcs.DragBoxEventType.BOXEND,position:i}),this.handler_.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP),this.handler_.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE),goog.isDef(this.modifier_)&&(this.handler_.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_UP,this.modifier_),this.handler_.removeInputAction(Cesium.ScreenSpaceEventType.MOUSE_MOVE,this.modifier_))}this.scene_.screenSpaceCameraController.enableInputs=!0},olcs.DragBox.prototype.setScene=function(e){goog.isNull(e)?(goog.asserts.assert(!goog.isNull(this.box_)),this.scene_.primitives.contains(this.box_)&&this.scene_.primitives.remove(this.box_),goog.isNull(this.handler_)||(this.handler_.destroy(),this.handler_=null)):(goog.asserts.assert(e.canvas),this.handler_=new Cesium.ScreenSpaceEventHandler(e.canvas),this.handler_.setInputAction(goog.bind(this.handleMouseDown,this),Cesium.ScreenSpaceEventType.LEFT_DOWN,this.modifier_)),this.scene_=e},olcs.DragBox.prototype.listen,goog.provide("olcs.FeatureConverter"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("ol.extent"),goog.require("ol.geom.SimpleGeometry"),goog.require("olcs.core.VectorLayerCounterpart"),olcs.FeatureConverter=function(e,t){this.scene=e,this.camera_=t},olcs.FeatureConverter.prototype.setReferenceForPicking=function(e,t,o){o.olLayer=e,o.olFeature=t},olcs.FeatureConverter.prototype.createColoredPrimitive=function(e,t,o,n,i,r){var s=function(e,t){return new Cesium.GeometryInstance({geometry:e,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(t)}})},a={flat:!0,renderState:{depthTest:{enabled:!0}}};goog.isDef(r)&&(a.renderState||(a.renderState={}),a.renderState.lineWidth=r);var l,c=s(n,i),u=this.getHeightReference(e,t,o);if(u==Cesium.HeightReference.CLAMP_TO_GROUND){var g=c.geometry.constructor;if(g&&!g.createShadowVolume)return null;l=new Cesium.GroundPrimitive({geometryInstances:c})}else{var h=new Cesium.PerInstanceColorAppearance(a);l=new Cesium.Primitive({geometryInstances:c,appearance:n.appearance?n.appearance:h})}return this.setReferenceForPicking(e,t,l),l},olcs.FeatureConverter.prototype.extractColorFromOlStyle=function(e,t){var o=e.getFill()?e.getFill().getColor():null,n=e.getStroke()?e.getStroke().getColor():null,i="black";return n&&t?i=n:o&&(i=o),olcs.core.convertColorToCesium(i)},olcs.FeatureConverter.prototype.extractLineWidthFromOlStyle=function(e){return e.getStroke()?e.getStroke().getWidth():1},olcs.FeatureConverter.prototype.wrapFillAndOutlineGeometries=function(e,t,o,n,i,r){const s=this.extractColorFromOlStyle(r,!1),a=this.extractColorFromOlStyle(r,!0),l=new Cesium.PrimitiveCollection;if(r.getFill()){const c=this.createColoredPrimitive(e,t,o,n,s);goog.asserts.assert(!!c),l.add(c)}if(r.getStroke()){const u=this.extractLineWidthFromOlStyle(r),g=this.createColoredPrimitive(e,t,o,i,a,u);g&&l.add(g)}return l};olcs.FeatureConverter.prototype.addTextStyle=function(e,t,o,n,i){var r;if(i instanceof Cesium.PrimitiveCollection?r=i:(r=new Cesium.PrimitiveCollection,r.add(i)),!n.getText())return r;var s=n.getText(),a=this.olGeometry4326TextPartToCesium(e,t,o,s);return this.setReferenceForPicking(e,t,a),a&&r.add(a),r};olcs.FeatureConverter.prototype.csAddBillboard=function(e,t,o,n,i,r){var s=e.add(t);return this.setReferenceForPicking(o,n,s),s},olcs.FeatureConverter.prototype.olCircleGeometryToCesium=function(e,t,o,n,i){o=olcs.core.olGeometryCloneTo4326(o,n),goog.asserts.assert("Circle"==o.getType());var r=o.getCenter(),s=3==r.length?r[2]:0,a=r.slice();a[0]+=o.getRadius(),r=olcs.core.ol4326CoordinateToCesiumCartesian(r),a=olcs.core.ol4326CoordinateToCesiumCartesian(a);var l=Cesium.Cartesian3.distance(r,a),c=new Cesium.CircleGeometry({center:r,radius:l,height:s}),u=new Cesium.CircleOutlineGeometry({center:r,radius:l,extrudedHeight:s,height:s}),g=this.wrapFillAndOutlineGeometries(e,t,o,c,u,i);return this.addTextStyle(e,t,o,i,g)},olcs.FeatureConverter.prototype.olLineStringGeometryToCesium=function(e,t,o,n,i){o=olcs.core.olGeometryCloneTo4326(o,n),goog.asserts.assert("LineString"==o.getType());var r,s=olcs.core.ol4326CoordinateArrayToCsCartesians(o.getCoordinates()),a=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(t,i,!0)}),l={positions:s,width:this.extractLineWidthFromOlStyle(i),vertexFormat:a.vertexFormat},c=this.getHeightReference(e,t,o);if(c==Cesium.HeightReference.CLAMP_TO_GROUND){var u=this.extractColorFromOlStyle(i,!0);r=new Cesium.GroundPrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.CorridorGeometry({vertexFormat:a.vertexFormat,positions:s,width:e.getCorridorGeometryWidth?e.getCorridorGeometryWidth(t):20,cornerType:Cesium.CornerType.BEVELED}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(u)}}),appearance:a,vertexCacheOptimize:!0,interleave:!0})}else r=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolylineGeometry(l)}),appearance:a});return this.setReferenceForPicking(e,t,r),this.addTextStyle(e,t,o,i,r)},olcs.FeatureConverter.prototype.olPolygonGeometryToCesium=function(e,t,o,n,i){o=olcs.core.olGeometryCloneTo4326(o,n),goog.asserts.assert("Polygon"==o.getType());var r,s;if(5==o.getCoordinates()[0].length&&"rectangle"===t.getGeometry().get("olcs.polygon_kind")){const a=o.getCoordinates()[0],l=ol.extent.boundingExtent(a),c=Cesium.Rectangle.fromDegrees(l[0],l[1],l[2],l[3]);var u=0;if(3==a[0].length)for(var g=0;g<a.length;g++)u=Math.max(u,a[g][2]);r=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:c,height:u}),s=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:c,height:u})}else{const h=o.getLinearRings(),d={},p=d;goog.asserts.assert(h.length>0);for(var f=0;f<h.length;++f){const m=h[f].getCoordinates(),v=olcs.core.ol4326CoordinateArrayToCsCartesians(m);goog.asserts.assert(v&&v.length>0),0==f?d.positions=v:(d.holes||(d.holes=[]),d.holes.push({positions:v}))}r=new Cesium.PolygonGeometry({polygonHierarchy:p,perPositionHeight:!0});var y=this.getHeightReference(e,t,o);if(y==Cesium.HeightReference.CLAMP_TO_GROUND)s=new Cesium.CorridorGeometry({vertexFormat:Cesium.VertexFormat.DEFAULT,positions:d.positions,width:e.getCorridorGeometryWidth?e.getCorridorGeometryWidth(t):t.getCorridorGeometryWidth?t.getCorridorGeometryWidth():20});else{var _=new Cesium.PolylineMaterialAppearance({material:this.olStyleToCesium(t,i,!0)});s=new Cesium.PolylineGeometry({positions:d.positions,width:this.extractLineWidthFromOlStyle(i),vertexFormat:_.vertexFormat,perPositionHeight:!0}),s.appearance=_}}const b=this.wrapFillAndOutlineGeometries(e,t,o,r,s,i);return this.addTextStyle(e,t,o,i,b)},olcs.FeatureConverter.prototype.changeFillAndOutlineGeometriesStyle=function(e,t){var o=this.extractColorFromOlStyle(t,!1),n=this.extractColorFromOlStyle(t,!0),i=e.get(0),r=i.getGeometryInstanceAttributes(i.geometryInstances.id);r.color=Cesium.ColorGeometryInstanceAttribute.toValue(o),i.update();var s=e.get(1);r=s.getGeometryInstanceAttributes(s.geometryInstances.id),r.color=Cesium.ColorGeometryInstanceAttribute.toValue(n),s.update()},olcs.FeatureConverter.prototype.getHeightReference=function(e,t,o){var n=o.get("altitudeMode");goog.isDef(n)||(n=t.get("altitudeMode")),goog.isDef(n)||(n=e.get("altitudeMode"));var i=Cesium.HeightReference.NONE;return"clampToGround"===n?i=Cesium.HeightReference.CLAMP_TO_GROUND:"relativeToGround"===n&&(i=Cesium.HeightReference.RELATIVE_TO_GROUND),i},olcs.FeatureConverter.prototype.olPointGeometryToCesium=function(e,t,o,n,i,r,s){goog.asserts.assert("Point"==o.getType()),o=olcs.core.olGeometryCloneTo4326(o,n);var a=i.getImage();if(a instanceof ol.style.Icon&&a.load(),null!=a){var l=a.getImage(1),c=function(e){return""!=e.src&&0!=e.naturalHeight&&0!=e.naturalWidth&&e.complete},u=goog.bind(function(){if(!goog.isNull(l)&&(l instanceof HTMLCanvasElement||l instanceof Image||l instanceof HTMLImageElement)){var n,c=o.getCoordinates(),u=olcs.core.ol4326CoordinateToCesiumCartesian(c),g=a.getOpacity();goog.isDef(g)&&(n=new Cesium.Color(1,1,1,g));var h=this.getHeightReference(e,t,o),d=a.getOrigin(),p=a.getSize(),f=a.getScale(),m={image:l,color:n,heightReference:h,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,position:u,scale:f,imageSubRegion:new Cesium.BoundingRectangle(d[0],l.height-d[1]-p[1],p[0],p[1])},v=e.getMaxResolution();if("Infinity"!=v){var y=this.camera_.calcDistanceForResolution_(v,goog.math.toRadians(c[1]));m.translucencyByDistance=new Cesium.NearFarScalar(y-1e3,1,y+1e4,0)}var _=this.csAddBillboard(r,m,e,t,o,i);s&&s(_)}},this);if(l instanceof Image&&!c(l)){var g=function(){r.isDestroyed()||u()};goog.events.listenOnce(l,"load",g)}else u()}if(i.getText()){var h=new Cesium.Primitive;return this.setReferenceForPicking(e,t,h),this.addTextStyle(e,t,o,i,h)}return null},olcs.FeatureConverter.prototype.olMultiGeometryToCesium=function(e,t,o,n,i,r,s){var a,l=function(o,r){var s=new Cesium.PrimitiveCollection;return goog.array.forEach(o,function(o){s.add(r(e,t,o,n,i))}),s};switch(o.getType()){case"MultiPoint":if(o=o,a=o.getPoints(),i.getText()){var c=new Cesium.PrimitiveCollection;return goog.array.forEach(a,function(o){goog.asserts.assert(o);var a=this.olPointGeometryToCesium(e,t,o,n,i,r,s);a&&c.add(a)}.bind(this)),c}return goog.array.forEach(a,function(o){goog.asserts.assert(!goog.isNull(o)),this.olPointGeometryToCesium(e,t,o,n,i,r,s)}),null;case"MultiLineString":return o=o,a=o.getLineStrings(),l(a,this.olLineStringGeometryToCesium.bind(this));case"MultiPolygon":return o=o,a=o.getPolygons(),l(a,this.olPolygonGeometryToCesium.bind(this));default:goog.asserts.fail("Unhandled multi geometry type"+o.getType())}},olcs.FeatureConverter.prototype.olGeometry4326TextPartToCesium=function(e,t,o,n){var i=n.getText();goog.asserts.assert(goog.isDef(i));var r=new Cesium.LabelCollection({scene:this.scene}),s=ol.extent.getCenter(o.getExtent());if(o instanceof ol.geom.SimpleGeometry){var a=o.getFirstCoordinate();s[2]=3==a.length?a[2]:0}var l={};l.position=olcs.core.ol4326CoordinateToCesiumCartesian(s),l.text=i,l.heightReference=this.getHeightReference(e,t,o);var c=n.getOffsetX(),u=n.getOffsetY(),g=new Cesium.Cartesian2(c,u);l.pixelOffset=g;var h=n.getFont();goog.isDefAndNotNull(h)?l.font=h:l.font="13px Helvetica";var d=void 0;if(n.getFill()&&(l.fillColor=this.extractColorFromOlStyle(n,!1),d=Cesium.LabelStyle.FILL),n.getStroke()&&(l.outlineWidth=this.extractLineWidthFromOlStyle(n),l.outlineColor=this.extractColorFromOlStyle(n,!0),d=Cesium.LabelStyle.OUTLINE),n.getFill()&&n.getStroke()&&(d=Cesium.LabelStyle.FILL_AND_OUTLINE),l.style=d,n.getTextAlign()){var p;switch(n.getTextAlign()){case"center":p=Cesium.HorizontalOrigin.CENTER;break;case"left":p=Cesium.HorizontalOrigin.LEFT;break;case"right":p=Cesium.HorizontalOrigin.RIGHT;break;default:goog.asserts.fail("unhandled text align "+n.getTextAlign())}l.horizontalOrigin=p}if(n.getTextBaseline()){var f;switch(n.getTextBaseline()){case"top":f=Cesium.VerticalOrigin.TOP;break;case"middle":f=Cesium.VerticalOrigin.CENTER;break;case"bottom":f=Cesium.VerticalOrigin.BOTTOM;break;case"alphabetic":f=Cesium.VerticalOrigin.TOP;break;case"hanging":f=Cesium.VerticalOrigin.BOTTOM;break;default:goog.asserts.fail("unhandled baseline "+n.getTextBaseline())}l.verticalOrigin=f}var m=e.getMaxResolution();if("Infinity"!=m){var v=this.camera_.calcDistanceForResolution_(m,goog.math.toRadians(s[1]));l.translucencyByDistance=new Cesium.NearFarScalar(v-1e3,1,v+2e3,0)}var y=r.add(l);return this.setReferenceForPicking(e,t,y),r},olcs.FeatureConverter.prototype.olStyleToCesium=function(e,t,o){var n,i=t.getFill(),r=t.getStroke();return n=o&&!r||!o&&!i?[0,0,0,0]:o?r.getColor():i.getColor(),n=olcs.core.convertColorToCesium(n),o&&r&&r.getLineDash()?Cesium.Material.fromType("Stripe",{horizontal:!1,repeat:500,evenColor:n,oddColor:new Cesium.Color(0,0,0,0)}):Cesium.Material.fromType("Color",{color:n})},olcs.FeatureConverter.prototype.computePlainStyle=function(e,t,o,n){var i,r=t.getStyleFunction();return goog.isDef(r)&&(i=r.call(t,n)),!goog.isDefAndNotNull(i)&&goog.isDefAndNotNull(o)&&(i=o(t,n)),goog.isDef(i)?Array.isArray(i)?i[0]:i:null},olcs.FeatureConverter.prototype.olFeatureToCesium=function(e,t,o,n,i){var r=i||t.getGeometry(),s=n.projection;if(!r)return null;var a=function(e){n.featureToCesiumMap[goog.getUid(t)]=e};switch(r.getType()){case"GeometryCollection":var l=new Cesium.PrimitiveCollection,c=r;return goog.array.forEach(c.getGeometries(),function(i){if(i){var r=this.olFeatureToCesium(e,t,o,n,i);r&&l.add(r)}}.bind(this)),l;case"Point":r=r;var u=n.billboards,g=this.olPointGeometryToCesium(e,t,r,s,o,u,a);return g?g:null;case"Circle":return r=r,this.olCircleGeometryToCesium(e,t,r,s,o);case"LineString":return r=r,this.olLineStringGeometryToCesium(e,t,r,s,o);case"Polygon":return r=r,this.olPolygonGeometryToCesium(e,t,r,s,o);case"MultiPoint":case"MultiLineString":case"MultiPolygon":var g=this.olMultiGeometryToCesium(e,t,r,s,o,n.billboards,a);return g?g:null;case"LinearRing":throw new Error("LinearRing should only be part of polygon.");default:throw new Error("Ol geom type not handled : "+r.getType())}},olcs.FeatureConverter.prototype.olVectorLayerToCesium=function(e,t,o){var n=e.getSource().getFeatures(),i=t.getProjection(),r=t.getResolution();if(!goog.isDef(r)||!i)throw goog.asserts.fail("View not ready"),new Error("View not ready");for(var s=new olcs.core.VectorLayerCounterpart(i,this.scene),a=s.context,l=0;l<n.length;++l){var c=n[l];if(goog.isDefAndNotNull(c)){var u=e.getStyleFunction(),g=this.computePlainStyle(e,c,u,r);if(g){var h=this.olFeatureToCesium(e,c,g,a);h&&(o[goog.getUid(c)]=h,s.getRootPrimitive().add(h))}}}return s},olcs.FeatureConverter.prototype.convert=function(e,t,o,n){var i=t.getProjection(),r=t.getResolution();if(!goog.isDef(r)||!i)return null;var s=e.getStyleFunction(),a=this.computePlainStyle(e,o,s,r);return a?(n.projection=i,this.olFeatureToCesium(e,o,a,n)):null},goog.provide("goog.dom.BrowserFeature"),goog.require("goog.userAgent"),goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)},goog.provide("goog.dom.TagName"),goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",
OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEMPLATE:"TEMPLATE",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"},goog.provide("goog.dom.tags"),goog.require("goog.object"),goog.dom.tags.VOID_TAGS_=goog.object.createSet("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"),goog.dom.tags.isVoidTag=function(e){return goog.dom.tags.VOID_TAGS_[e]===!0},goog.provide("goog.string.TypedString"),goog.string.TypedString=function(){},goog.string.TypedString.prototype.implementsGoogStringTypedString,goog.string.TypedString.prototype.getTypedStringValue,goog.provide("goog.string.Const"),goog.require("goog.asserts"),goog.require("goog.string.TypedString"),goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return goog.string.Const.create__googStringSecurityPrivate_(e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.create__googStringSecurityPrivate_=function(e){var t=new goog.string.Const;return t.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e,t},goog.provide("goog.html.SafeStyle"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.string"),goog.require("goog.string.Const"),goog.require("goog.string.TypedString"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){var t=goog.string.Const.unwrap(e);return 0===t.length?goog.html.SafeStyle.EMPTY:(goog.html.SafeStyle.checkStyle_(t),goog.asserts.assert(goog.string.endsWith(t,";"),"Last character of style string is not ';': "+t),goog.asserts.assert(goog.string.contains(t,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+t),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyle.checkStyle_=function(e){goog.asserts.assert(!/[<>]/.test(e),"Forbidden characters in style string: "+e)},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"'"),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.PropertyMap,goog.html.SafeStyle.create=function(e){var t="";for(var o in e){if(!/^[-_a-zA-Z0-9]+$/.test(o))throw Error("Name allows only [-_a-zA-Z0-9], got: "+o);var n=e[o];null!=n&&(n instanceof goog.string.Const?(n=goog.string.Const.unwrap(n),goog.asserts.assert(!/[{;}]/.test(n),"Value does not allow [{;}].")):goog.html.SafeStyle.VALUE_RE_.test(n)?goog.html.SafeStyle.hasBalancedQuotes_(n)||(goog.asserts.fail("String value requires balanced quotes, got: "+n),n=goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only [-,.\"'%_!# a-zA-Z0-9], got: "+n),n=goog.html.SafeStyle.INNOCUOUS_STRING),t+=o+":"+n+";")}return t?(goog.html.SafeStyle.checkStyle_(t),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,o=!0,n=0;n<e.length;n++){var i=e.charAt(n);"'"==i&&o?t=!t:'"'==i&&t&&(o=!o)}return t&&o},goog.html.SafeStyle.VALUE_RE_=/^[-,."'%_!# a-zA-Z0-9]+$/,goog.html.SafeStyle.concat=function(e){var t="",o=function(e){goog.isArray(e)?goog.array.forEach(e,o):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,o),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.provide("goog.html.SafeStyleSheet"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.string"),goog.require("goog.string.Const"),goog.require("goog.string.TypedString"),goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.concat=function(e){var t="",o=function(e){goog.isArray(e)?goog.array.forEach(e,o):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,o),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){var t=goog.string.Const.unwrap(e);return 0===t.length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.contains(t,"<"),"Forbidden '<' character in style sheet string: "+t),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"'"),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.provide("goog.fs.url"),goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.UrlObject_,goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.provide("goog.i18n.bidi"),goog.provide("goog.i18n.bidi.Dir"),goog.provide("goog.i18n.bidi.DirectionalString"),goog.provide("goog.i18n.bidi.Format"),goog.define("goog.i18n.bidi.FORCE_RTL",!1),goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||goog.LOCALE.length>=3&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-߿‏יִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i"),goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g,goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInHtml=function(e,t){var o=void 0===t?goog.i18n.bidi.hasAnyRtl(e):t;return o?e.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>"):e.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")},goog.i18n.bidi.guardBracketInText=function(e,t){var o=void 0===t?goog.i18n.bidi.hasAnyRtl(e):t,n=o?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var o=0,n=0,i=!1,r=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),s=0;s<r.length;s++){var a=r[s];goog.i18n.bidi.startsWithRtl(a)?(o++,n++):goog.i18n.bidi.isRequiredLtrRe_.test(a)?i=!0:goog.i18n.bidi.hasAnyLtr(a)?n++:goog.i18n.bidi.hasNumeralsRe_.test(a)&&(i=!0)}return 0==n?i?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:o/n>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t),t&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"))},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString,goog.i18n.bidi.DirectionalString.prototype.getDirection,goog.provide("goog.html.SafeUrl"),goog.require("goog.asserts"),goog.require("goog.fs.url"),goog.require("goog.i18n.bidi.Dir"),goog.require("goog.i18n.bidi.DirectionalString"),goog.require("goog.string.Const"),goog.require("goog.string.TypedString"),goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"'"),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm))$/i,goog.html.SafeUrl.fromBlob=function(e){var t=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING;return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=e.match(goog.html.DATA_URL_PATTERN_),o=t&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(o?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^&:\/?#]*(?:[\/?#]|$))/i,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.SafeUrl;return t.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e,t},goog.provide("goog.html.TrustedResourceUrl"),goog.require("goog.asserts"),goog.require("goog.i18n.bidi.Dir"),goog.require("goog.i18n.bidi.DirectionalString"),goog.require("goog.string.Const"),goog.require("goog.string.TypedString"),goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"'"),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.TrustedResourceUrl;return t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e,t},goog.provide("goog.html.SafeHtml"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.dom.TagName"),goog.require("goog.dom.tags"),goog.require("goog.html.SafeStyle");goog.require("goog.html.SafeStyleSheet");goog.require("goog.html.SafeUrl"),goog.require("goog.html.TrustedResourceUrl"),goog.require("goog.i18n.bidi.Dir"),goog.require("goog.i18n.bidi.DirectionalString"),goog.require("goog.object"),goog.require("goog.string"),goog.require("goog.string.Const"),goog.require("goog.string.TypedString"),goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"'"),"type_error:SafeHtml")},goog.html.SafeHtml.TextOrHtml_,goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t=null;e.implementsGoogI18nBidiDirectionalString&&(t=e.getDirection());var o;return o=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(o),t)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){if(e instanceof goog.html.SafeHtml)return e;var t=goog.html.SafeHtml.htmlEscape(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(t)),t.getDirection())},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){if(e instanceof goog.html.SafeHtml)return e;var t=goog.html.SafeHtml.htmlEscape(e);return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(t)),t.getDirection())},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_=goog.object.createSet("action","cite","data","formaction","href","manifest","poster","src"),goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_=goog.object.createSet(goog.dom.TagName.EMBED,goog.dom.TagName.IFRAME,goog.dom.TagName.LINK,goog.dom.TagName.OBJECT,goog.dom.TagName.SCRIPT,goog.dom.TagName.STYLE,goog.dom.TagName.TEMPLATE),goog.html.SafeHtml.AttributeValue_,goog.html.SafeHtml.create=function(e,t,o){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error("Invalid tag name <"+e+">.");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+e+"> is not allowed for SafeHtml.");return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(e,t,o)},goog.html.SafeHtml.createIframe=function(e,t,o,n){var i={};i.src=e||null,i.srcdoc=t||null;var r={sandbox:""},s=goog.html.SafeHtml.combineAttributes(i,r,o);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",s,n)},goog.html.SafeHtml.createStyle=function(e,t){var o={type:"text/css"},n={},i=goog.html.SafeHtml.combineAttributes(o,n,t),r="";e=goog.array.concat(e);for(var s=0;s<e.length;s++)r+=goog.html.SafeStyleSheet.unwrap(e[s]);var a=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",i,a)},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,o){if(o instanceof goog.string.Const)o=goog.string.Const.unwrap(o);else if("style"==t.toLowerCase())o=goog.html.SafeHtml.getStyleValue_(o);else{if(/^on/i.test(t))throw Error('Attribute "'+t+'" requires goog.string.Const value, "'+o+'" given.');if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(o instanceof goog.html.TrustedResourceUrl)o=goog.html.TrustedResourceUrl.unwrap(o);else if(o instanceof goog.html.SafeUrl)o=goog.html.SafeUrl.unwrap(o);else{if(!goog.isString(o))throw Error('Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+o+'" given.');o=goog.html.SafeUrl.sanitize(o).getTypedStringValue()}}return o.implementsGoogStringTypedString&&(o=o.getTypedStringValue()),goog.asserts.assert(goog.isString(o)||goog.isNumber(o),"String or number value expected, got "+typeof o+" with value: "+o),t+'="'+goog.string.htmlEscape(String(o))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,o,n){var i=goog.html.SafeHtml.create(t,o,n);return i.dir_=e,i},goog.html.SafeHtml.concat=function(e){var t=goog.i18n.bidi.Dir.NEUTRAL,o="",n=function(e){if(goog.isArray(e))goog.array.forEach(e,n);else{var i=goog.html.SafeHtml.htmlEscape(e);o+=goog.html.SafeHtml.unwrap(i);var r=i.getDirection();t==goog.i18n.bidi.Dir.NEUTRAL?t=r:r!=goog.i18n.bidi.Dir.NEUTRAL&&t!=r&&(t=null)}};return goog.array.forEach(arguments,n),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,t)},goog.html.SafeHtml.concatWithDir=function(e,t){var o=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return o.dir_=e,o},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,o){var n=null,i="<"+e;if(t)for(var r in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(r))throw Error('Invalid attribute name "'+r+'".');var s=t[r];goog.isDefAndNotNull(s)&&(i+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,r,s))}var a=o;if(goog.isDefAndNotNull(a)?goog.isArray(a)||(a=[a]):a=[],goog.dom.tags.isVoidTag(e.toLowerCase()))goog.asserts.assert(!a.length,"Void tag <"+e+"> does not allow content."),i+=">";else{var l=goog.html.SafeHtml.concat(a);i+=">"+goog.html.SafeHtml.unwrap(l)+"</"+e+">",n=l.getDirection()}var c=t&&t.dir;return c&&(n=/^(ltr|rtl|auto)$/i.test(c)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(i,n)},goog.html.SafeHtml.combineAttributes=function(e,t,o){var n,i={};for(n in e)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),i[n]=e[n];for(n in t)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),i[n]=t[n];for(n in o){var r=n.toLowerCase();if(r in e)throw Error('Cannot override "'+r+'" attribute, got "'+n+'" with value "'+o[n]+'"');r in t&&delete i[r],i[n]=o[n]}return i},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.provide("goog.dom.safe"),goog.provide("goog.dom.safe.InsertAdjacentHtmlPosition"),goog.require("goog.asserts"),goog.require("goog.html.SafeHtml"),goog.require("goog.html.SafeUrl"),goog.require("goog.html.TrustedResourceUrl"),goog.require("goog.string"),goog.require("goog.string.Const"),goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,o){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrap(o))},goog.dom.safe.setInnerHtml=function(e,t){e.innerHTML=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrap(t))},goog.dom.safe.setAnchorHref=function(e,t){var o;o=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitize(t),e.href=goog.html.SafeUrl.unwrap(o)},goog.dom.safe.setEmbedSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setFrameSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,o){e.rel=o,goog.string.caseInsensitiveContains(o,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):t instanceof goog.html.TrustedResourceUrl?e.href=goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?e.href=goog.html.SafeUrl.unwrap(t):e.href=goog.html.SafeUrl.sanitize(t).getTypedStringValue()},goog.dom.safe.setObjectData=function(e,t){e.data=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setScriptSrc=function(e,t){e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setLocationHref=function(e,t){var o;o=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitize(t),e.href=goog.html.SafeUrl.unwrap(o)},goog.dom.safe.openInWindow=function(e,t,o,n,i){var r;r=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitize(e);var s=t||window;return s.open(goog.html.SafeUrl.unwrap(r),o?goog.string.Const.unwrap(o):"",n,i)},goog.provide("goog.math"),goog.require("goog.array"),goog.require("goog.asserts"),goog.math.randomInt=function(e){return Math.floor(Math.random()*e)},goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)},goog.math.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)},goog.math.modulo=function(e,t){var o=e%t;return o*t<0?o+t:o},goog.math.lerp=function(e,t,o){return e+o*(t-e)},goog.math.nearlyEquals=function(e,t,o){return Math.abs(e-t)<=(o||1e-6)},goog.math.standardAngle=function(e){return goog.math.modulo(e,360)},goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)},goog.math.toRadians=function(e){return e*Math.PI/180},goog.math.toDegrees=function(e){return 180*e/Math.PI},goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))},goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))},goog.math.angle=function(e,t,o,n){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(n-t,o-e)))},goog.math.angleDifference=function(e,t){var o=goog.math.standardAngle(t)-goog.math.standardAngle(e);
return o>180?o-=360:o<=-180&&(o=360+o),o},goog.math.sign=Math.sign||function(e){return e>0?1:e<0?-1:e},goog.math.longestCommonSubsequence=function(e,t,o,n){for(var i=o||function(e,t){return e==t},r=n||function(t,o){return e[t]},s=e.length,a=t.length,l=[],c=0;c<s+1;c++)l[c]=[],l[c][0]=0;for(var u=0;u<a+1;u++)l[0][u]=0;for(c=1;c<=s;c++)for(u=1;u<=a;u++)i(e[c-1],t[u-1])?l[c][u]=l[c-1][u-1]+1:l[c][u]=Math.max(l[c-1][u],l[c][u-1]);for(var g=[],c=s,u=a;c>0&&u>0;)i(e[c-1],t[u-1])?(g.unshift(r(c-1,u-1)),c--,u--):l[c-1][u]>l[c][u-1]?c--:u--;return g},goog.math.sum=function(e){return goog.array.reduce(arguments,function(e,t){return e+t},0)},goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(e){var t=arguments.length;if(t<2)return 0;var o=goog.math.average.apply(null,arguments),n=goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-o,2)}))/(t-1);return n},goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(e){return isFinite(e)&&e%1==0},goog.math.isFiniteNumber=function(e){return isFinite(e)&&!isNaN(e)},goog.math.isNegativeZero=function(e){return 0==e&&1/e<0},goog.math.log10Floor=function(e){if(e>0){var t=Math.round(Math.log(e)*Math.LOG10E);return t-(parseFloat("1e"+t)>e)}return 0==e?-(1/0):NaN},goog.math.safeFloor=function(e,t){return goog.asserts.assert(!goog.isDef(t)||t>0),Math.floor(e+(t||2e-15))},goog.math.safeCeil=function(e,t){return goog.asserts.assert(!goog.isDef(t)||t>0),Math.ceil(e-(t||2e-15))},goog.provide("goog.math.Coordinate"),goog.require("goog.math"),goog.math.Coordinate=function(e,t){this.x=goog.isDef(e)?e:0,this.y=goog.isDef(t)?t:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&(e.x==t.x&&e.y==t.y)},goog.math.Coordinate.distance=function(e,t){var o=e.x-t.x,n=e.y-t.y;return Math.sqrt(o*o+n*n)},goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)},goog.math.Coordinate.squaredDistance=function(e,t){var o=e.x-t.x,n=e.y-t.y;return o*o+n*n},goog.math.Coordinate.difference=function(e,t){return new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.math.Coordinate.sum=function(e,t){return new goog.math.Coordinate(e.x+t.x,e.y+t.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.x+=e.x,this.y+=e.y):(this.x+=e,goog.isNumber(t)&&(this.y+=t)),this},goog.math.Coordinate.prototype.scale=function(e,t){var o=goog.isNumber(t)?t:e;return this.x*=e,this.y*=o,this},goog.math.Coordinate.prototype.rotateRadians=function(e,t){var o=t||new goog.math.Coordinate(0,0),n=this.x,i=this.y,r=Math.cos(e),s=Math.sin(e);this.x=(n-o.x)*r-(i-o.y)*s+o.x,this.y=(n-o.x)*s+(i-o.y)*r+o.y},goog.math.Coordinate.prototype.rotateDegrees=function(e,t){this.rotateRadians(goog.math.toRadians(e),t)},goog.provide("goog.math.Size"),goog.math.Size=function(e,t){this.width=e,this.height=t},goog.math.Size.equals=function(e,t){return e==t||!(!e||!t)&&(e.width==t.width&&e.height==t.height)},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(e,t){var o=goog.isNumber(t)?t:e;return this.width*=e,this.height*=o,this},goog.math.Size.prototype.scaleToCover=function(e){var t=this.aspectRatio()<=e.aspectRatio()?e.width/this.width:e.height/this.height;return this.scale(t)},goog.math.Size.prototype.scaleToFit=function(e){var t=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height;return this.scale(t)},goog.provide("goog.dom"),goog.provide("goog.dom.Appendable"),goog.provide("goog.dom.DomHelper"),goog.require("goog.array"),goog.require("goog.asserts"),goog.require("goog.dom.BrowserFeature"),goog.require("goog.dom.NodeType"),goog.require("goog.dom.TagName"),goog.require("goog.dom.safe"),goog.require("goog.html.SafeHtml"),goog.require("goog.math.Coordinate"),goog.require("goog.math.Size"),goog.require("goog.object"),goog.require("goog.string"),goog.require("goog.string.Unicode"),goog.require("goog.userAgent"),goog.define("goog.dom.ASSUME_QUIRKS_MODE",!1),goog.define("goog.dom.ASSUME_STANDARDS_MODE",!1),goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.defaultDomHelper_,goog.dom.getDocument=function(){return document},goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)},goog.dom.getElementHelper_=function(e,t){return goog.isString(t)?e.getElementById(t):t},goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)},goog.dom.getRequiredElementHelper_=function(e,t){goog.asserts.assertString(t);var o=goog.dom.getElementHelper_(e,t);return o=goog.asserts.assertElement(o,"No element found with id: "+t)},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagNameAndClass=function(e,t,o){return goog.dom.getElementsByTagNameAndClass_(document,e,t,o)},goog.dom.getElementsByClass=function(e,t){var o=t||document;return goog.dom.canUseQuerySelector_(o)?o.querySelectorAll("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)},goog.dom.getElementByClass=function(e,t){var o=t||document,n=null;return n=o.getElementsByClassName?o.getElementsByClassName(e)[0]:goog.dom.canUseQuerySelector_(o)?o.querySelector("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)[0],n||null},goog.dom.getRequiredElementByClass=function(e,t){var o=goog.dom.getElementByClass(e,t);return goog.asserts.assert(o,"No element found with className: "+e)},goog.dom.canUseQuerySelector_=function(e){return!(!e.querySelectorAll||!e.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(e,t,o,n){var i=n||e,r=t&&"*"!=t?t.toUpperCase():"";if(goog.dom.canUseQuerySelector_(i)&&(r||o)){var s=r+(o?"."+o:"");return i.querySelectorAll(s)}if(o&&i.getElementsByClassName){var a=i.getElementsByClassName(o);if(r){for(var l,c={},u=0,g=0;l=a[g];g++)r==l.nodeName&&(c[u++]=l);return c.length=u,c}return a}var a=i.getElementsByTagName(r||"*");if(o){for(var l,c={},u=0,g=0;l=a[g];g++){var h=l.className;"function"==typeof h.split&&goog.array.contains(h.split(/\s+/),o)&&(c[u++]=l)}return c.length=u,c}return a},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(e,t){goog.object.forEach(t,function(t,o){"style"==o?e.style.cssText=t:"class"==o?e.className=t:"for"==o?e.htmlFor=t:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(o)?e.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[o],t):goog.string.startsWith(o,"aria-")||goog.string.startsWith(o,"data-")?e.setAttribute(o,t):e[o]=t})},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)},goog.dom.getViewportSize_=function(e){var t=e.document,o=goog.dom.isCss1CompatMode_(t)?t.documentElement:t.body;return new goog.math.Size(o.clientWidth,o.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeight_=function(e){var t=e.document,o=0;if(t){var n=t.body,i=t.documentElement;if(!i||!n)return 0;var r=goog.dom.getViewportSize_(e).height;if(goog.dom.isCss1CompatMode_(t)&&i.scrollHeight)o=i.scrollHeight!=r?i.scrollHeight:i.offsetHeight;else{var s=i.scrollHeight,a=i.offsetHeight;i.clientHeight!=a&&(s=n.scrollHeight,a=n.offsetHeight),o=s>r?s>a?s:a:s<a?s:a}}return o},goog.dom.getPageScroll=function(e){var t=e||goog.global||window;return goog.dom.getDomHelper(t.document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(e){var t=goog.dom.getDocumentScrollElement_(e),o=goog.dom.getWindow_(e);return goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&o.pageYOffset!=t.scrollTop?new goog.math.Coordinate(t.scrollLeft,t.scrollTop):new goog.math.Coordinate(o.pageXOffset||t.scrollLeft,o.pageYOffset||t.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(e){return e.scrollingElement?e.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body||e.documentElement},goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window},goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView},goog.dom.createDom=function(e,t,o){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(e,t){var o=t[0],n=t[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&n&&(n.name||n.type)){var i=["<",o];if(n.name&&i.push(' name="',goog.string.htmlEscape(n.name),'"'),n.type){i.push(' type="',goog.string.htmlEscape(n.type),'"');var r={};goog.object.extend(r,n),delete r.type,n=r}i.push(">"),o=i.join("")}var s=e.createElement(o);return n&&(goog.isString(n)?s.className=n:goog.isArray(n)?s.className=n.join(" "):goog.dom.setProperties(s,n)),t.length>2&&goog.dom.append_(e,s,t,2),s},goog.dom.append_=function(e,t,o,n){function i(o){o&&t.appendChild(goog.isString(o)?e.createTextNode(o):o)}for(var r=n;r<o.length;r++){var s=o[r];goog.isArrayLike(s)&&!goog.dom.isNodeLike(s)?goog.array.forEach(goog.dom.isNodeList(s)?goog.array.toArray(s):s,i):i(s)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(e){return document.createElement(e)},goog.dom.createTextNode=function(e){return document.createTextNode(String(e))},goog.dom.createTable=function(e,t,o){return goog.dom.createTable_(document,e,t,!!o)},goog.dom.createTable_=function(e,t,o,n){for(var i=e.createElement(goog.dom.TagName.TABLE),r=i.appendChild(e.createElement(goog.dom.TagName.TBODY)),s=0;s<t;s++){for(var a=e.createElement(goog.dom.TagName.TR),l=0;l<o;l++){var c=e.createElement(goog.dom.TagName.TD);n&&goog.dom.setTextContent(c,goog.string.Unicode.NBSP),a.appendChild(c)}r.appendChild(a)}return i},goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)},goog.dom.safeHtmlToNode_=function(e,t){var o=e.createElement(goog.dom.TagName.DIV);return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(o,goog.html.SafeHtml.concat(goog.html.SafeHtml.create("br"),t)),o.removeChild(o.firstChild)):goog.dom.safe.setInnerHtml(o,t),goog.dom.childrenToNode_(e,o)},goog.dom.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(document,e)},goog.dom.htmlToDocumentFragment_=function(e,t){var o=e.createElement(goog.dom.TagName.DIV);return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(o.innerHTML="<br>"+t,o.removeChild(o.firstChild)):o.innerHTML=t,goog.dom.childrenToNode_(e,o)},goog.dom.childrenToNode_=function(e,t){if(1==t.childNodes.length)return t.removeChild(t.firstChild);for(var o=e.createDocumentFragment();t.firstChild;)o.appendChild(t.firstChild);return o},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(e){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==e.compatMode},goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(e.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0},goog.dom.appendChild=function(e,t){e.appendChild(t)},goog.dom.append=function(e,t){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)},goog.dom.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},goog.dom.insertSiblingBefore=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)},goog.dom.insertSiblingAfter=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},goog.dom.insertChildAt=function(e,t,o){e.insertBefore(t,e.childNodes[o]||null)},goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},goog.dom.replaceNode=function(e,t){var o=t.parentNode;o&&o.replaceChild(e,t)},goog.dom.flattenElement=function(e){var t,o=e.parentNode;if(o&&o.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode)return e.removeNode(!1);for(;t=e.firstChild;)o.insertBefore(t,e);return goog.dom.removeNode(e)}},goog.dom.getChildren=function(e){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=e.children?e.children:goog.array.filter(e.childNodes,function(e){return e.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(e){return goog.isDef(e.firstElementChild)?e.firstElementChild:goog.dom.getNextElementNode_(e.firstChild,!0)};goog.dom.getLastElementChild=function(e){return goog.isDef(e.lastElementChild)?e.lastElementChild:goog.dom.getNextElementNode_(e.lastChild,!1)},goog.dom.getNextElementSibling=function(e){return goog.isDef(e.nextElementSibling)?e.nextElementSibling:goog.dom.getNextElementNode_(e.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(e){return goog.isDef(e.previousElementSibling)?e.previousElementSibling:goog.dom.getNextElementNode_(e.previousSibling,!1)},goog.dom.getNextElementNode_=function(e,t){for(;e&&e.nodeType!=goog.dom.NodeType.ELEMENT;)e=t?e.nextSibling:e.previousSibling;return e},goog.dom.getNextNode=function(e){if(!e)return null;if(e.firstChild)return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},goog.dom.getPreviousNode=function(e){if(!e)return null;if(!e.previousSibling)return e.parentNode;for(e=e.previousSibling;e&&e.lastChild;)e=e.lastChild;return e},goog.dom.isNodeLike=function(e){return goog.isObject(e)&&e.nodeType>0},goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(e){return goog.isObject(e)&&e.window==e},goog.dom.getParentElement=function(e){var t;if(goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY){var o=goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10");if(!(o&&goog.global.SVGElement&&e instanceof goog.global.SVGElement)&&(t=e.parentElement))return t}return t=e.parentNode,goog.dom.isElement(t)?t:null},goog.dom.contains=function(e,t){if(e.contains&&t.nodeType==goog.dom.NodeType.ELEMENT)return e==t||e.contains(t);if("undefined"!=typeof e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},goog.dom.compareNodeOrder=function(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(t.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var o=e.nodeType==goog.dom.NodeType.ELEMENT,n=t.nodeType==goog.dom.NodeType.ELEMENT;if(o&&n)return e.sourceIndex-t.sourceIndex;var i=e.parentNode,r=t.parentNode;return i==r?goog.dom.compareSiblingOrder_(e,t):!o&&goog.dom.contains(i,t)?-1*goog.dom.compareParentsDescendantNodeIe_(e,t):!n&&goog.dom.contains(r,e)?goog.dom.compareParentsDescendantNodeIe_(t,e):(o?e.sourceIndex:i.sourceIndex)-(n?t.sourceIndex:r.sourceIndex)}var s,a,l=goog.dom.getOwnerDocument(e);return s=l.createRange(),s.selectNode(e),s.collapse(!0),a=l.createRange(),a.selectNode(t),a.collapse(!0),s.compareBoundaryPoints(goog.global.Range.START_TO_END,a)},goog.dom.compareParentsDescendantNodeIe_=function(e,t){var o=e.parentNode;if(o==t)return-1;for(var n=t;n.parentNode!=o;)n=n.parentNode;return goog.dom.compareSiblingOrder_(n,e)},goog.dom.compareSiblingOrder_=function(e,t){for(var o=t;o=o.previousSibling;)if(o==e)return-1;return 1},goog.dom.findCommonAncestor=function(e){var t,o=arguments.length;if(!o)return null;if(1==o)return arguments[0];var n=[],i=1/0;for(t=0;t<o;t++){for(var r=[],s=arguments[t];s;)r.unshift(s),s=s.parentNode;n.push(r),i=Math.min(i,r.length)}var a=null;for(t=0;t<i;t++){for(var l=n[0][t],c=1;c<o;c++)if(l!=n[c][t])return a;a=l}return a},goog.dom.getOwnerDocument=function(e){return goog.asserts.assert(e,"Node cannot be null or undefined."),e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document},goog.dom.getFrameContentDocument=function(e){var t=e.contentDocument||e.contentWindow.document;return t},goog.dom.getFrameContentWindow=function(e){return e.contentWindow||goog.dom.getWindow(goog.dom.getFrameContentDocument(e))},goog.dom.setTextContent=function(e,t){if(goog.asserts.assert(null!=e,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in e)e.textContent=t;else if(e.nodeType==goog.dom.NodeType.TEXT)e.data=t;else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=t}else{goog.dom.removeChildren(e);var o=goog.dom.getOwnerDocument(e);e.appendChild(o.createTextNode(String(t)))}},goog.dom.getOuterHtml=function(e){if("outerHTML"in e)return e.outerHTML;var t=goog.dom.getOwnerDocument(e),o=t.createElement(goog.dom.TagName.DIV);return o.appendChild(e.cloneNode(!0)),o.innerHTML},goog.dom.findNode=function(e,t){var o=[],n=goog.dom.findNodes_(e,t,o,!0);return n?o[0]:void 0},goog.dom.findNodes=function(e,t){var o=[];return goog.dom.findNodes_(e,t,o,!1),o},goog.dom.findNodes_=function(e,t,o,n){if(null!=e)for(var i=e.firstChild;i;){if(t(i)&&(o.push(i),n))return!0;if(goog.dom.findNodes_(i,t,o,n))return!0;i=i.nextSibling}return!1},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)},goog.dom.setFocusableTabIndex=function(e,t){t?e.tabIndex=0:(e.tabIndex=-1,e.removeAttribute("tabIndex"))},goog.dom.isFocusable=function(e){var t;return t=goog.dom.nativelySupportsFocus_(e)?!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e)):goog.dom.isFocusableTabIndex(e),t&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):t},goog.dom.hasSpecifiedTabIndex_=function(e){var t=e.getAttributeNode("tabindex");return goog.isDefAndNotNull(t)&&t.specified},goog.dom.isTabIndexFocusable_=function(e){var t=e.tabIndex;return goog.isNumber(t)&&t>=0&&t<32768},goog.dom.nativelySupportsFocus_=function(e){return e.tagName==goog.dom.TagName.A||e.tagName==goog.dom.TagName.INPUT||e.tagName==goog.dom.TagName.TEXTAREA||e.tagName==goog.dom.TagName.SELECT||e.tagName==goog.dom.TagName.BUTTON},goog.dom.hasNonZeroBoundingRect_=function(e){var t=goog.isFunction(e.getBoundingClientRect)?e.getBoundingClientRect():{height:e.offsetHeight,width:e.offsetWidth};return goog.isDefAndNotNull(t)&&t.height>0&&t.width>0},goog.dom.getTextContent=function(e){var t;if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in e)t=goog.string.canonicalizeNewlines(e.innerText);else{var o=[];goog.dom.getTextContent_(e,o,!0),t=o.join("")}return t=t.replace(/ \xAD /g," ").replace(/\xAD/g,""),t=t.replace(/\u200B/g,""),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(t=t.replace(/ +/g," "))," "!=t&&(t=t.replace(/^\s*/,"")),t},goog.dom.getRawTextContent=function(e){var t=[];return goog.dom.getTextContent_(e,t,!1),t.join("")},goog.dom.getTextContent_=function(e,t,o){if(e.nodeName in goog.dom.TAGS_TO_IGNORE_);else if(e.nodeType==goog.dom.NodeType.TEXT)o?t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(e.nodeValue);else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);else for(var n=e.firstChild;n;)goog.dom.getTextContent_(n,t,o),n=n.nextSibling},goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length},goog.dom.getNodeTextOffset=function(e,t){for(var o=t||goog.dom.getOwnerDocument(e).body,n=[];e&&e!=o;){for(var i=e;i=i.previousSibling;)n.unshift(goog.dom.getTextContent(i));e=e.parentNode}return goog.string.trimLeft(n.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(e,t,o){for(var n=[e],i=0,r=null;n.length>0&&i<t;)if(r=n.pop(),r.nodeName in goog.dom.TAGS_TO_IGNORE_);else if(r.nodeType==goog.dom.NodeType.TEXT){var s=r.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");i+=s.length}else if(r.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)i+=goog.dom.PREDEFINED_TAG_VALUES_[r.nodeName].length;else for(var a=r.childNodes.length-1;a>=0;a--)n.push(r.childNodes[a]);return goog.isObject(o)&&(o.remainder=r?r.nodeValue.length+t-i-1:0,o.node=r),r},goog.dom.isNodeList=function(e){if(e&&"number"==typeof e.length){if(goog.isObject(e))return"function"==typeof e.item||"string"==typeof e.item;if(goog.isFunction(e))return"function"==typeof e.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(e,t,o,n){if(!t&&!o)return null;var i=t?t.toUpperCase():null;return goog.dom.getAncestor(e,function(e){return(!i||e.nodeName==i)&&(!o||goog.isString(e.className)&&goog.array.contains(e.className.split(/\s+/),o))},!0,n)},goog.dom.getAncestorByClass=function(e,t,o){return goog.dom.getAncestorByTagNameAndClass(e,null,t,o)},goog.dom.getAncestor=function(e,t,o,n){o||(e=e.parentNode);for(var i=null==n,r=0;e&&(i||r<=n);){if(goog.asserts.assert("parentNode"!=e.name),t(e))return e;e=e.parentNode,r++}return null},goog.dom.getActiveElement=function(e){try{return e&&e.activeElement}catch(e){}return null},goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow();return goog.isDef(e.devicePixelRatio)?e.devicePixelRatio:e.matchMedia?goog.dom.matchesPixelRatio_(.75)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(3)||1:1},goog.dom.matchesPixelRatio_=function(e){var t=goog.dom.getWindow(),o="(-webkit-min-device-pixel-ratio: "+e+"),(min--moz-device-pixel-ratio: "+e+"),(min-resolution: "+e+"dppx)";return t.matchMedia(o).matches?e:0},goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,t,o){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,t,o)},goog.dom.DomHelper.prototype.getElementsByClass=function(e,t){var o=t||this.document_;return goog.dom.getElementsByClass(e,o)},goog.dom.DomHelper.prototype.getElementByClass=function(e,t){var o=t||this.document_;return goog.dom.getElementByClass(e,o)},goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,t){var o=t||this.document_;return goog.dom.getRequiredElementByClass(e,o)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.Appendable,goog.dom.DomHelper.prototype.createDom=function(e,t,o){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(e){return this.document_.createElement(e)},goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))},goog.dom.DomHelper.prototype.createTable=function(e,t,o){return goog.dom.createTable_(this.document_,e,t,!!o)},goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)},goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(e){return goog.dom.htmlToDocumentFragment_(this.document_,e)},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.provide("olcs.RasterSynchronizer"),goog.require("olcs.AbstractSynchronizer"),goog.require("olcs.core"),olcs.RasterSynchronizer=function(e,t){this.cesiumLayers_=t.imageryLayers,this.ourLayers_=new Cesium.ImageryLayerCollection,goog.base(this,e,t)},goog.inherits(olcs.RasterSynchronizer,olcs.AbstractSynchronizer),olcs.RasterSynchronizer.prototype.addCesiumObject=function(e){this.cesiumLayers_.add(e),this.ourLayers_.add(e)},olcs.RasterSynchronizer.prototype.destroyCesiumObject=function(e){e.destroy()},olcs.RasterSynchronizer.prototype.removeSingleCesiumObject=function(e,t){this.cesiumLayers_.remove(e,t),this.ourLayers_.remove(e,!1)},olcs.RasterSynchronizer.prototype.removeAllCesiumObjects=function(e){for(var t=0;t<this.ourLayers_.length;++t)this.cesiumLayers_.remove(this.ourLayers_.get(t),e);this.ourLayers_.removeAll(!1)},olcs.RasterSynchronizer.prototype.convertLayerToCesiumImagery=olcs.core.tileLayerToImageryLayer,olcs.RasterSynchronizer.prototype.createSingleCounterpart=function(e){var t=this.view.getProjection(),o=this.convertLayerToCesiumImagery(e,t);return goog.isNull(o)||(e.on(["change:brightness","change:contrast","change:hue","change:opacity","change:saturation","change:visible"],function(t){goog.isNull(o)||olcs.core.updateCesiumLayerProperties(e,o)}),olcs.core.updateCesiumLayerProperties(e,o),e.on("change:extent",function(t){this.cesiumLayers_.remove(o,!0),this.ourLayers_.remove(o,!1),delete this.layerMap[goog.getUid(e)],this.synchronize()},this),e.on("change",function(e){var t=this.cesiumLayers_.indexOf(o);t>=0&&(this.cesiumLayers_.remove(o,!1),this.cesiumLayers_.add(o,t))},this)),o},olcs.RasterSynchronizer.prototype.orderLayers=function(){var e=[],t=[],o={};olcs.AbstractSynchronizer.flattenLayers(this.mapLayerGroup,e,t,o),goog.array.stableSort(e,function(e,t){return o[goog.getUid(e)]-o[goog.getUid(t)]}),e.forEach(function(e){var t=goog.getUid(e),o=this.layerMap[t];o&&this.raiseToTop(o)},this)},olcs.RasterSynchronizer.prototype.raiseToTop=function(e){this.cesiumLayers_.raiseToTop(e)},goog.provide("olcs.VectorSynchronizer"),
goog.require("ol.layer.Vector"),goog.require("olcs.AbstractSynchronizer"),goog.require("olcs.FeatureConverter"),goog.require("olcs.core"),goog.require("olcs.core.VectorLayerCounterpart"),olcs.VectorSynchronizer=function(e,t,o,n){this.converter=n||new olcs.FeatureConverter(t,o),this.camera_=o,this.csAllPrimitives_=new Cesium.PrimitiveCollection,t.primitives.add(this.csAllPrimitives_),this.csAllPrimitives_.destroyPrimitives=!1,goog.base(this,e,t)},goog.inherits(olcs.VectorSynchronizer,olcs.AbstractSynchronizer),olcs.VectorSynchronizer.prototype.addCesiumObject=function(e){goog.asserts.assert(!goog.isNull(e)),e.getRootPrimitive().counterpart=e,this.csAllPrimitives_.add(e.getRootPrimitive())},olcs.VectorSynchronizer.prototype.destroyCesiumObject=function(e){e.getRootPrimitive().destroy()},olcs.VectorSynchronizer.prototype.removeSingleCesiumObject=function(e,t){e.destroy(),this.csAllPrimitives_.destroyPrimitives=t,this.csAllPrimitives_.remove(e.getRootPrimitive()),this.csAllPrimitives_.destroyPrimitives=!1},olcs.VectorSynchronizer.prototype.removeAllCesiumObjects=function(e){if(this.csAllPrimitives_.destroyPrimitives=e,e)for(var t=0;t<this.csAllPrimitives_.length;++t)this.csAllPrimitives_.get(t).counterpart.destroy();this.csAllPrimitives_.removeAll(),this.csAllPrimitives_.destroyPrimitives=!1},olcs.VectorSynchronizer.prototype.createSingleCounterpart=function(e){if(e.skipSynchronize||!(e instanceof ol.layer.Vector)&&!(e instanceof ol.layer.Image&&e.getSource()instanceof ol.source.ImageVector))return null;goog.asserts.assertInstanceof(e,ol.layer.Vector);var t=e.getSource();if(t instanceof ol.source.ImageVector&&(t=t.getSource()),t instanceof ol.source.Cluster)return null;goog.asserts.assert(!goog.isNull(this.view));var o=this.view,n={},i=this.converter.olVectorLayerToCesium(e,o,n),r=i.getRootPrimitive(),s=i.olListenKeys;r.show=e.getVisible(),s.push(e.on("change:visible",function(t){r.show=e.getVisible()}));var a=goog.bind(function(t){goog.asserts.assertInstanceof(e,ol.layer.Vector);var s=i.context,a=this.converter.convert(e,o,t,s);a&&(n[goog.getUid(t)]=a,r.add(a))},this),l=goog.bind(function(e){var t=e.getGeometry(),o=goog.getUid(e);if(!t||"Point"==t.getType()){var s=i.context,a=s.featureToCesiumMap[o];delete s.featureToCesiumMap[o],a instanceof Cesium.Billboard&&s.billboards.remove(a)}var l=n[o];delete n[o],goog.isDefAndNotNull(l)&&r.remove(l)},this),c=(goog.bind(function(e,t){var o=goog.getUid(e),i=n[o];if(goog.isDefAndNotNull(i)){if(i instanceof Cesium.PrimitiveCollection)for(var r=0;r<i.length;r++){i.get(r)}this.converter.changeFillAndOutlineGeometriesStyle(i,e.getStyle())}},this),function(t){var r=t.getGeometry(),s=goog.getUid(t);if(!r||"Point"==r.getType()){var a=i.context,l=a.featureToCesiumMap[s];console.log(l),l instanceof Cesium.Billboard}var u=n[s];console.log(n[s]),goog.isDefAndNotNull(u)&&console.log(u.get(0).olFeature.getGeometry().getCoordinates()),goog.asserts.assert(e instanceof ol.layer.Vector||e instanceof ol.layer.Image);var a=i.context,g=this.converter.convert(e,o,t,a);g&&(n[goog.getUid(t)]=g,console.log(g.get(0).olFeature.getGeometry().getCoordinates())),c(u.get(0),g.get(0),t)}.bind(this),function(e,t,o){var n=o.getGeometry();"LineString"==n.getType()&&(oldGeom=e.geometryInstances.geometry._positions,newGeom=t.geometryInstances.geometry._positions)});return s.push(t.on("addfeature",function(e){goog.asserts.assert(goog.isDefAndNotNull(e.feature)),a(e.feature)},this)),s.push(t.on("removefeature",function(e){goog.asserts.assert(goog.isDefAndNotNull(e.feature)),l(e.feature)},this)),s.push(t.on("clear",function(e){},this)),s.push(t.on("changefeature",function(e){var t=e.feature;goog.asserts.assert(goog.isDefAndNotNull(t)),l(t),a(t)},this)),i},goog.provide("olcs.OLCesium"),goog.require("goog.async.AnimationDelay"),goog.require("goog.dom"),goog.require("olcs.Camera"),goog.require("olcs.RasterSynchronizer"),goog.require("olcs.VectorSynchronizer"),olcs.OLCesium=function(e){this.map_=e.map;var t="position:absolute;top:0;left:0;width:100%;height:100%;";this.container_=goog.dom.createDom(goog.dom.TagName.DIV,{style:t+"visibility:hidden;"});var o=goog.dom.getElement(e.target||null);if(o)goog.dom.appendChild(o,this.container_);else{var n=this.map_.getViewport(),i=goog.dom.getElementByClass("ol-overlaycontainer",n);i&&goog.dom.insertSiblingBefore(this.container_,i),this.scaleLine=goog.dom.getElementByClass("ol-scale-line",n)}this.isOverMap_=!goog.isDefAndNotNull(o),this.enabled_=!1,this.pausedInteractions_=[],this.hiddenRootGroup_=null,this.cesiumViewer=new Cesium.Viewer(this.container_,{animation:!1,baseLayerPicker:!1,fullscreenButton:!1,geocoder:!1,homeButton:!1,imageryProvider:!1,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,scene3DOnly:!0,automaticallyTrackDataSourceClocks:!1,creditContainer:goog.dom.createDom(goog.dom.TagName.DIV,{style:t+"visibility:hidden;"})}),this.scene_=this.cesiumViewer.scene,this.canvas_=this.scene_.canvas;var r=this.scene_.screenSpaceCameraController;r.inertiaSpin=0,r.ineartiaTranslate=0,r.inertiaZoom=0,r.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT}),r.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT}),r.enableLook=!1,this.scene_.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z,this.camera_=new olcs.Camera(this.scene_,this.map_),this.globe_=new Cesium.Globe(Cesium.Ellipsoid.WGS84),this.scene_.globe=this.globe_,this.scene_.skyAtmosphere=new Cesium.SkyAtmosphere;for(var s=goog.isDef(e.createSynchronizers)?e.createSynchronizers(this.map_,this.scene_):[new olcs.RasterSynchronizer(this.map_,this.scene_),new olcs.VectorSynchronizer(this.map_,this.scene_,this.camera_)],a=s.length-1;a>=0;--a)s[a].synchronize();if(this.isOverMap_){var l=goog.dom.getNextElementSibling(this.canvas_);goog.isDefAndNotNull(l)&&(l.style.display="none")}this.camera_.readFromView(),this.cesiumRenderingDelay_=new goog.async.AnimationDelay(function(e){this.blockCesiumRendering_||(this.scene_.initializeFrame(),this.handleResize_(),this.scene_.render(),this.enabled_&&this.camera_.checkCameraChange()),this.cesiumRenderingDelay_.start()},void 0,this),this.blockCesiumRendering_=!1},olcs.OLCesium.prototype.handleResize_=function(){var e=this.canvas_.clientWidth,t=this.canvas_.clientHeight;this.canvas_.width===e&&this.canvas_.height===t||(this.canvas_.width=e,this.canvas_.height=t,this.scene_.camera.frustum.aspectRatio=e/t)},olcs.OLCesium.prototype.getView=function(){return this.cesiumViewer},olcs.OLCesium.prototype.getCamera=function(){return this.camera_},olcs.OLCesium.prototype.getOlMap=function(){return this.map_},olcs.OLCesium.prototype.getCesiumScene=function(){return this.scene_},olcs.OLCesium.prototype.getEnabled=function(){return this.enabled_},olcs.OLCesium.prototype.setEnabled=function(e){if(this.getCamera().disableUpdate=!e,this.enabled_!=e)if(this.enabled_=e,this.container_.style.visibility=this.enabled_?"visible":"hidden",this.enabled_){if(this.scaleLine&&(this.scaleLine.style["border-radius"]="11px",this.scaleLine.style.background="rgba(255, 255, 255, 0.47)",this.scaleLine.style.padding="2px 12px 6px 12px"),this.isOverMap_){var t=this.map_.getInteractions();t.forEach(function(e,t,o){this.pausedInteractions_.push(e)},this),t.clear();var o=this.map_.getLayerGroup();o.getVisible()&&(this.hiddenRootGroup_=o,this.hiddenRootGroup_.setVisible(!1))}this.camera_.readFromView(),this.cesiumRenderingDelay_.start()}else{if(this.scaleLine&&(this.scaleLine.style.removeProperty("border-radius"),this.scaleLine.style.removeProperty("padding"),this.scaleLine.style.removeProperty("background")),this.isOverMap_){var t=this.map_.getInteractions();goog.array.forEach(this.pausedInteractions_,function(e,o,n){t.push(e)},this),this.pausedInteractions_.length=0,goog.isNull(this.hiddenRootGroup_)||(this.hiddenRootGroup_.setVisible(!0),this.hiddenRootGroup_=null)}this.camera_.updateView(),this.cesiumRenderingDelay_.stop()}},olcs.OLCesium.prototype.warmUp=function(e,t){if(!this.enabled_){this.camera_.readFromView();var o=this.globe_.ellipsoid,n=this.scene_.camera,i=o.cartesianToCartographic(n.position);i.height<e&&(i.height=e,n.position=o.cartographicToCartesian(i)),this.cesiumRenderingDelay_.start();var r=this;setTimeout(function(){!r.enabled_&&r.cesiumRenderingDelay_.stop()},t)}},olcs.OLCesium.prototype.setBlockCesiumRendering=function(e){this.blockCesiumRendering_=e},goog.addDependency("demos/editor/equationeditor.js",["goog.demos.editor.EquationEditor"],["goog.ui.equation.EquationEditorDialog"]),goog.addDependency("demos/editor/helloworld.js",["goog.demos.editor.HelloWorld"],["goog.dom","goog.dom.TagName","goog.editor.Plugin"]),goog.addDependency("demos/editor/helloworlddialog.js",["goog.demos.editor.HelloWorldDialog","goog.demos.editor.HelloWorldDialog.OkEvent"],["goog.dom.TagName","goog.events.Event","goog.string","goog.ui.editor.AbstractDialog","goog.ui.editor.AbstractDialog.Builder","goog.ui.editor.AbstractDialog.EventType"]),goog.addDependency("demos/editor/helloworlddialogplugin.js",["goog.demos.editor.HelloWorldDialogPlugin","goog.demos.editor.HelloWorldDialogPlugin.Command"],["goog.demos.editor.HelloWorldDialog","goog.dom.TagName","goog.editor.plugins.AbstractDialogPlugin","goog.editor.range","goog.functions","goog.ui.editor.AbstractDialog.EventType"]),goog.require("olcs.AbstractSynchronizer"),goog.require("olcs.Camera"),goog.require("olcs.DragBox"),goog.require("olcs.DragBoxEventType"),goog.require("olcs.FeatureConverter"),goog.require("olcs.OLCesium"),goog.require("olcs.RasterSynchronizer"),goog.require("olcs.VectorSynchronizer"),goog.require("olcs.core"),goog.exportSymbol("olcs.AbstractSynchronizer",olcs.AbstractSynchronizer),goog.exportProperty(olcs.AbstractSynchronizer.prototype,"synchronize",olcs.AbstractSynchronizer.prototype.synchronize),goog.exportSymbol("olcs.Camera",olcs.Camera),goog.exportProperty(olcs.Camera.prototype,"setHeading",olcs.Camera.prototype.setHeading),goog.exportProperty(olcs.Camera.prototype,"getHeading",olcs.Camera.prototype.getHeading),goog.exportProperty(olcs.Camera.prototype,"setTilt",olcs.Camera.prototype.setTilt),goog.exportProperty(olcs.Camera.prototype,"getTilt",olcs.Camera.prototype.getTilt),goog.exportProperty(olcs.Camera.prototype,"setDistance",olcs.Camera.prototype.setDistance),goog.exportProperty(olcs.Camera.prototype,"getDistance",olcs.Camera.prototype.getDistance),goog.exportProperty(olcs.Camera.prototype,"setCenter",olcs.Camera.prototype.setCenter),goog.exportProperty(olcs.Camera.prototype,"getCenter",olcs.Camera.prototype.getCenter),goog.exportProperty(olcs.Camera.prototype,"setPosition",olcs.Camera.prototype.setPosition),goog.exportProperty(olcs.Camera.prototype,"getPosition",olcs.Camera.prototype.getPosition),goog.exportProperty(olcs.Camera.prototype,"setAltitude",olcs.Camera.prototype.setAltitude),goog.exportProperty(olcs.Camera.prototype,"getAltitude",olcs.Camera.prototype.getAltitude),goog.exportProperty(olcs.Camera.prototype,"lookAt",olcs.Camera.prototype.lookAt),goog.exportProperty(olcs.Camera.prototype,"readFromView",olcs.Camera.prototype.readFromView),goog.exportProperty(olcs.Camera.prototype,"updateView",olcs.Camera.prototype.updateView),goog.exportSymbol("olcs.core.computePixelSizeAtCoordinate",olcs.core.computePixelSizeAtCoordinate),goog.exportSymbol("olcs.core.applyHeightOffsetToGeometry",olcs.core.applyHeightOffsetToGeometry),goog.exportSymbol("olcs.core.rotateAroundAxis",olcs.core.rotateAroundAxis),goog.exportSymbol("olcs.core.setHeadingUsingBottomCenter",olcs.core.setHeadingUsingBottomCenter),goog.exportSymbol("olcs.core.pickOnTerrainOrEllipsoid",olcs.core.pickOnTerrainOrEllipsoid),goog.exportSymbol("olcs.core.pickBottomPoint",olcs.core.pickBottomPoint),goog.exportSymbol("olcs.core.pickCenterPoint",olcs.core.pickCenterPoint),goog.exportSymbol("olcs.core.computeSignedTiltAngleOnGlobe",olcs.core.computeSignedTiltAngleOnGlobe),goog.exportSymbol("olcs.core.computeAngleToZenith",olcs.core.computeAngleToZenith),goog.exportSymbol("olcs.core.lookAt",olcs.core.lookAt),goog.exportSymbol("olcs.core.extentToRectangle",olcs.core.extentToRectangle),goog.exportSymbol("olcs.core.tileLayerToImageryLayer",olcs.core.tileLayerToImageryLayer);goog.exportSymbol("olcs.core.updateCesiumLayerProperties",olcs.core.updateCesiumLayerProperties);goog.exportSymbol("olcs.core.ol4326CoordinateToCesiumCartesian",olcs.core.ol4326CoordinateToCesiumCartesian),goog.exportSymbol("olcs.core.ol4326CoordinateArrayToCsCartesians",olcs.core.ol4326CoordinateArrayToCsCartesians),goog.exportSymbol("olcs.core.olGeometryCloneTo4326",olcs.core.olGeometryCloneTo4326),goog.exportSymbol("olcs.core.convertColorToCesium",olcs.core.convertColorToCesium),goog.exportSymbol("olcs.DragBox",olcs.DragBox),goog.exportProperty(olcs.DragBox.prototype,"setScene",olcs.DragBox.prototype.setScene),goog.exportProperty(olcs.DragBox.prototype,"listen",olcs.DragBox.prototype.listen),goog.exportSymbol("olcs.FeatureConverter",olcs.FeatureConverter),goog.exportProperty(olcs.FeatureConverter.prototype,"csAddBillboard",olcs.FeatureConverter.prototype.csAddBillboard),goog.exportProperty(olcs.FeatureConverter.prototype,"olCircleGeometryToCesium",olcs.FeatureConverter.prototype.olCircleGeometryToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"olLineStringGeometryToCesium",olcs.FeatureConverter.prototype.olLineStringGeometryToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"olPolygonGeometryToCesium",olcs.FeatureConverter.prototype.olPolygonGeometryToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"getHeightReference",olcs.FeatureConverter.prototype.getHeightReference),goog.exportProperty(olcs.FeatureConverter.prototype,"olPointGeometryToCesium",olcs.FeatureConverter.prototype.olPointGeometryToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"olMultiGeometryToCesium",olcs.FeatureConverter.prototype.olMultiGeometryToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"olGeometry4326TextPartToCesium",olcs.FeatureConverter.prototype.olGeometry4326TextPartToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"olStyleToCesium",olcs.FeatureConverter.prototype.olStyleToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"computePlainStyle",olcs.FeatureConverter.prototype.computePlainStyle),goog.exportProperty(olcs.FeatureConverter.prototype,"olFeatureToCesium",olcs.FeatureConverter.prototype.olFeatureToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"olVectorLayerToCesium",olcs.FeatureConverter.prototype.olVectorLayerToCesium),goog.exportProperty(olcs.FeatureConverter.prototype,"convert",olcs.FeatureConverter.prototype.convert),goog.exportSymbol("olcs.OLCesium",olcs.OLCesium),goog.exportProperty(olcs.OLCesium.prototype,"getCamera",olcs.OLCesium.prototype.getCamera),goog.exportProperty(olcs.OLCesium.prototype,"getOlMap",olcs.OLCesium.prototype.getOlMap),goog.exportProperty(olcs.OLCesium.prototype,"getCesiumScene",olcs.OLCesium.prototype.getCesiumScene),goog.exportProperty(olcs.OLCesium.prototype,"getEnabled",olcs.OLCesium.prototype.getEnabled),goog.exportProperty(olcs.OLCesium.prototype,"setEnabled",olcs.OLCesium.prototype.setEnabled),goog.exportProperty(olcs.OLCesium.prototype,"warmUp",olcs.OLCesium.prototype.warmUp),goog.exportProperty(olcs.OLCesium.prototype,"setBlockCesiumRendering",olcs.OLCesium.prototype.setBlockCesiumRendering),goog.exportSymbol("olcs.RasterSynchronizer",olcs.RasterSynchronizer),goog.exportSymbol("olcs.VectorSynchronizer",olcs.VectorSynchronizer),define("core/defined",[],function(){"use strict";function e(e){return void 0!==e&&null!==e}return e}),define("core/defineProperties",["./defined"],function(e){"use strict";var t=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return!1}}(),o=Object.defineProperties;return t&&e(o)||(o=function(e){return e}),o}),define("core/baseUtil",["./defined"],function(e){var t;return{assign:function(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),n=1,i=arguments.length;n<i;++n){var r=arguments[n];if(void 0!==r&&null!==r)for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];"object"==typeof a?null===a?o[s]=a:a instanceof Array?o[s]=a:"object"==typeof o[s]?this.assign(o[s],a):o[s]=r[s]:o[s]=a}}return o},getBaseUrl:function(){if(e(t))return t;for(var o=/((?:.*\/)|^)contMap[\w-]*\.js(?:\W|$)/i,n=document.getElementsByTagName("script"),i=0,r=n.length;i<r;++i){var s=n[i].getAttribute("src"),a=o.exec(s);if(null!==a){var l=a[1],c=l.lastIndexOf("/");t=a[1].substring(0,c)+"/";break}}return t},getAbsoluteUrl:function(e){return this.getBaseUrl()+e}}}),define("layer/EsriOffline/EsriOfflineDataSource",["../../core/baseUtil"],function(e){var t=function(t){this._url=t.url,this._format=t.format;var o=this;this._option=e.assign(t,{tileUrlFunction:function(e){return o._tileUrlFunction(e)},url:void 0}),ol.source.XYZ.call(this,this._option)};return ol.inherits(t,ol.source.XYZ),t.prototype._fillZero=function(e,t){var o=e.length;if(e.length<t)for(var n=0;n<t-o;n++)e="0"+e;return e},t.prototype._tileUrlFunction=function(e){var t=e[0],o=e[1],n=-e[2]-1;return o="C"+this._fillZero(o.toString(16),8),n="R"+this._fillZero(n.toString(16),8),t="L"+this._fillZero(t.toString(10),2),this._url+"/"+t+"/"+n+"/"+o+"."+this._format},t}),define("core/dataSourceFactory",["../layer/EsriOffline/EsriOfflineDataSource"],function(e){return{getSource:function(t){var o=null,n=ol.proj.get("EPSG:3857");switch(t.project&&(n=ol.proj.get(t.project)),t.type){case"EsriOffline":o=new e({url:t.url,format:t.format,projection:n});break;case"OSM":o=new ol.source.OSM;break;case"XYZ":o=new ol.source.XYZ({url:t.url+"/tile/{z}/{y}/{x}"+(t.token?"?token="+t.token:""),projection:n});break;case"TileArcGISRest":o=new ol.source.TileArcGISRest({url:t.url,projection:n});break;case"TDT":o=new ol.source.XYZ({url:"http://t{0-7}.tianditu.com/DataServer?T="+t.mapType+"&x={x}&y={y}&l={z}",projection:n});break;case"TileWMS":o=new ol.source.TileWMS({extent:t.extent,url:t.url,projection:t.projection||n,serverType:t.serverType,params:{LAYERS:t.layers,FORMAT:t.format,SRS:t.project,CRS:t.project,VERSION:t.VERSION},crossOrigin:"anonymous"});break;case"WMTS":for(var i=n.getExtent(),r=ol.extent.getWidth(i)/256,s=new Array(14),a=new Array(14),l=0;l<=t.maxLevel;++l)s[l]=r/Math.pow(2,l),a[l]=l;o=new ol.source.WMTS({url:t.url,layer:t.layer,matrixSet:t.matrixSet,format:t.format,projection:t.projection||n,tileGrid:t.tileGrid||new ol.tilegrid.WMTS({origin:ol.extent.getTopLeft(i),resolutions:s,matrixIds:a}),style:t.style})}return o}}}),define("core/config",[],function(){var e={disableWebGl:!1};return e}),define("core/detector",["./config"],function(e){return{canvas:!!window.CanvasRenderingContext2D,webgl:function(){if(e.disableWebGl)return!1;try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}},workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,o,n;e=e||{},t=void 0!==e.parent?e.parent:document.body,o=void 0!==e.id?e.id:"oldie",n=Detector.getWebGLErrorMessage(),n.id=o,t.appendChild(n)}}}),define("terrain/ContTmsTerrainProvider",[],function(){function e(e,t){this.rectangle=e,this.maxLevel=t}function t(e,t,n,i){for(var r=e._tilingScheme,a=e._rectangles,l=r.tileXYToRectangle(t,n,i),c=0,u=0;u<a.length&&15!==c;++u){var g=a[u];if(!(g.maxLevel<=i)){var h=g.rectangle,d=v.intersection(h,l,S);s(d)&&(o(r,h,2*t,2*n,i+1)&&(c|=4),o(r,h,2*t+1,2*n,i+1)&&(c|=8),o(r,h,2*t,2*n+1,i+1)&&(c|=1),o(r,h,2*t+1,2*n+1,i+1)&&(c|=2))}}return c}function o(e,t,o,n,i){var r=e.tileXYToRectangle(o,n,i);return s(v.intersection(r,t,S))}var n=Cesium.when,i=Cesium.Credit,r=Cesium.defaultValue,s=Cesium.defined,a=Cesium.defineProperties,l=Cesium.DeveloperError,c=Cesium.Ellipsoid,u=Cesium.Event,g=Cesium.GeographicTilingScheme,h=Cesium.getImagePixels,d=Cesium.HeightmapTerrainData,p=Cesium.loadImage,f=Cesium.loadXML,m=Cesium.Math,v=Cesium.Rectangle,y=Cesium.TerrainProvider,_=Cesium.throttleRequestByServer,b=Cesium.TileProviderError,w=function(t){function o(t){var o=t.getElementsByTagName("srs")[0].textContent;if("EPSG:4326"!==o)return void a("SRS "+o+" is not supported.");_._tilingScheme=new g({ellipsoid:w});var n=t.getElementsByTagName("tileformat")[0];_._heightmapWidth=parseInt(n.getAttribute("width"),10),_._heightmapHeight=parseInt(n.getAttribute("height"),10),_._levelZeroMaximumGeometricError=y.getEstimatedLevelZeroGeometricErrorForAHeightmap(w,Math.min(_._heightmapWidth,_._heightmapHeight),_._tilingScheme.getNumberOfXTilesAtLevel(0));var i=t.getElementsByTagName("boundingbox")[0],r=m.toRadians(parseFloat(i.getAttribute("minx"))),s=m.toRadians(parseFloat(i.getAttribute("miny"))),l=m.toRadians(parseFloat(i.getAttribute("maxx"))),c=m.toRadians(parseFloat(i.getAttribute("maxy"))),u=_._maxLevel;_._rectangles.push(new e(new v(r,s,l,c),u)),_._ready=!0}function a(e){var t=r(e,"An error occurred while accessing "+_._url+".");p=b.handleError(p,_,_._errorEvent,t,void 0,void 0,void 0,h)}function h(){n(f(_._url),o,a)}if(t=r(t,r.EMPTY_OBJECT),!s(t.url))throw new l("options.url is required.");this._url=t.url,this._url.length>0&&"/"!==this._url[this._url.length-1]&&(this._url+="/"),this._errorEvent=new u,this._ready=!1,this._maxLevel=t.maxLevel,this._proxy=t.proxy,this._terrainDataStructure={heightScale:.001,heightOffset:-1e3,elementsPerHeight:3,stride:4,elementMultiplier:256,isBigEndian:!0};var d=t.credit;"string"==typeof d&&(d=new i(d)),this._credit=d,this._tilingScheme=void 0,this._rectangles=[];var p,_=this,w=r(t.ellipsoid,c.WGS84);h()};a(w.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){if(!this.ready)throw new l("requestTileGeometry must not be called before ready returns true.");return this._tilingScheme}},ready:{get:function(){return this._ready}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}}}),w.prototype.requestTileGeometry=function(e,o,i,a){if(!this.ready)throw new l("requestTileGeometry must not be called before ready returns true.");var c=this._tilingScheme.getNumberOfYTilesAtLevel(i),u=this._url+"Tile/"+i+"/"+e+"/"+(c-o-1)+".cont",g=this._proxy;s(g)&&(u=g.getURL(u));var f;if(a=r(a,!0)){if(f=_(u,p),!s(f))return}else f=p(u);var m=this;return n(f,function(n){return new d({buffer:h(n),width:m._heightmapWidth,height:m._heightmapHeight,childTileMask:t(m,e,o,i),structure:m._terrainDataStructure})})},w.prototype.getLevelMaximumGeometricError=function(e){if(!this.ready)throw new l("requestTileGeometry must not be called before ready returns true.");return this._levelZeroMaximumGeometricError/(1<<e)};var S=new v;return w.prototype.getTileDataAvailable=function(e,t,o){},w}),define("core/EventObject",[],function(){var e=function(){this._evnts=[]};return e.prototype.on=function(e,t,o){this._evnts.push({eventType:e,callback:t,context:o})},e.prototype.un=function(e,t){for(var o=-1,n=0;n<this._evnts.length;n++)if(this._evnts[n].eventType===e&&this._evnts[n].callback===t){o=n;break}o!==-1&&this._evnts.splice(o,1)},e.prototype.raiseEvent=function(e,t){for(var o=0;o<this._evnts.length;o++)this._evnts[o].eventType===t&&(this._evnts[o].context?this._evnts[o].callback.call(this._evnts[o].context,e):this._evnts[o].callback(e))},e}),define("Scene",["./core/defineProperties","./core/baseUtil","./core/dataSourceFactory","./core/detector","./terrain/ContTmsTerrainProvider","./core/EventObject"],function(e,t,o,n,i,r){"use strict";function s(e){this._initView=e.initView,this._baseMap2DUrls=e.baseMap2DUrls,this._baseMap3DUrls=e.baseMap3DUrls,this._mapContainer=e.mapContainer,this._terrainProvider=e.terrainProviderUrl,this._isContTmsTerrain=e.isContTmsTerrain,this._base2DLayer=new ol.layer.Group({layers:[]}),this._base2DLayer.name="地图底图图层组",this._base2DLayer.isBaseLayer=!0,this._base2DTmpLayer=new ol.layer.Group({layers:[]}),this._base2DTmpLayer.name="地图临时图层图层组",this._base2DTmpLayer.isTmpLayer=!0,this._base2DUserLayer=new ol.layer.Group({layers:[]}),this._base2DUserLayer.name="地图用户图层图层组",this._base2DUserLayer.isUserLayer=!0,this._dataSource=null}return s.prototype=new r,e(s.prototype,{map2d:{get:function(){return this._map2d}},map3d:{get:function(){return this._map3d}},map3dScene:{get:function(){return this._map3d.getCesiumScene()}},base2DLayer:{get:function(){return this._base2DLayer}},base3DLayers:{get:function(){return this._base3DLayers}},tmpLayer:{get:function(){return this._base2DTmpLayer}},userLayer:{get:function(){return this._base2DUserLayer}},dataSource:{set:function(e){this._dataSource=e},get:function(){return this._dataSource}}}),s.prototype.init=function(){this._load2DBaseLayers();new ol.proj.Projection({code:this._initView.project});this._map2d=new ol.Map({controls:ol.control.defaults({zoom:!1,attribution:!1,rotate:!1}),layers:[this.base2DLayer,this.userLayer,this.tmpLayer],target:this._mapContainer,view:new ol.View({center:ol.proj.transform(this._initView.center,"EPSG:4326",this._initView.project),zoom:this._initView.zoom,projection:this._initView.project,minResolution:this._initView.minResolution}),logo:!1});var e=this,t=function(t){var o=e.map2d.getCoordinateFromPixel(t),n=ol.proj.transform(o,e._initView.project,"EPSG:4326"),i=e.map2d.forEachFeatureAtPixel(t,function(e,t){return e&&(e.layer=t),e},this,function(e){return e.getVisible()});return{feature:i,olLayer:i?i.layer:null,position:n}};this.map2d.on("pointermove",function(o){if("2d"===e.currentModel())for(var n=t(o.pixel),i=0;i<e._evnts.length;i++)"pointermove"===e._evnts[i].eventType&&(e._evnts[i].context?e._evnts[i].callback.call(e._evnts[i].context,n):e._evnts[i].callback(n))}),this.map2d.on("click",function(o){if("2d"===e.currentModel())for(var n=t(o.pixel),i=0;i<e._evnts.length;i++)"pointerclick"===e._evnts[i].eventType&&(e._evnts[i].context?e._evnts[i].callback.call(e._evnts[i].context,n):e._evnts[i].callback(n))})},s.prototype.currentModel=function(){return this.map3d&&this.map3d.getEnabled()?"3d":"2d"},s.prototype.set3dModel=function(e){if(this.map3d){if(!n.webgl)throw"当前浏览器不支持WebGL不能使用三维模式。";this.map3d.blockCesiumRendering_=!e}if(e&&!this.is3dInited){this._initMap3d();for(var t=this.map3d.getCesiumScene(),o=[],r=0;r<t.imageryLayers.length;r++)o.push(t.imageryLayers.get(r));this._init3DBaseLayers();for(var s=this.map3d.cesiumViewer.imageryLayers,a=0;a<this.base3DLayers.length;a++)s.addImageryProvider(this.base3DLayers[a]);for(var l=0;l<o.length;l++)t.imageryLayers.raiseToTop(o[l]);if(this._terrainProvider)if(this._isContTmsTerrain){var c=new i({url:this._terrainProvider});t.terrainProvider=c}else{var c=new Cesium.CesiumTerrainProvider({url:this._terrainProvider});t.terrainProvider=c}if(this._dataSource){this._map3d.getView().dataSources.add(this._dataSource);var u=this._dataSource;u.clustering.enabled&&setTimeout(function(){var e=u.clustering.pixelRange;u.clustering.pixelRange=0,u.clustering.pixelRange=e},3e3)}this.is3dInited=!0}this.is3dInited&&(this.map3d.setEnabled(e),document.getElementsByClassName("compass")[0].style.visibility=e?"visible":"hidden",this.map3d.cesiumViewer.cesiumWidget.leaflet.map.show=!e)},s.prototype.swich2dBaseMap=function(e){this._baseMap2DUrls=e,this._load2DBaseLayers()},s.prototype._load2DBaseLayers=function(){this.base2DLayer.getLayers().clear();var e=[];if(this._baseMap2DUrls.length>1)for(var t=0;t<this._baseMap2DUrls.length;t++){var n=o.getSource(this._baseMap2DUrls[t]),i=new ol.layer.Tile({source:n});i.name=this._baseMap2DUrls[t].name?this._baseMap2DUrls[t].name:"",e.push(i)}else{var i=new ol.layer.Tile({source:o.getSource(this._baseMap2DUrls[0])});i.name=this._baseMap2DUrls[0].name?this._baseMap2DUrls[0].name:"",e.push(i)}this.base2DLayer.setLayers(new ol.Collection(e))},s.prototype._init3DBaseLayers=function(){this._base3DLayers=[];for(var e=0;e<this._baseMap3DUrls.length;e++)this._base3DLayers.push(new olcs.core.OLImageryProvider(o.getSource(this._baseMap3DUrls[e]),ol.proj.get(this._initView.project)))},s.prototype._initMap3d=function(){this._map3d=new olcs.OLCesium({map:this.map2d});var e=this.map3d.getCesiumScene();e.fxaa=!1;var t=this;this.map3d.cesiumViewer.cesiumWidget.leaflet={map:{show:!0,zoomIn:function(e){var o=t.map2d.getView().getZoom()+e;t.map2d.getView().setZoom(o)},zoomOut:function(e){var o=t.map2d.getView().getZoom()-e;t.map2d.getView().setZoom(o)},fit:function(e){var o=180/3.1415927;t.map2d.getView().fit(ol.proj.transformExtent([e.west*o,e.south*o,e.east*o,e.north*o],"EPSG:4326",t.map2d.getView().getProjection()),t.map2d.getSize())},off:t.map2d.getView().un,on:t.map2d.getView().on,getSize:function(){return{x:t.map2d.getSize()[0],y:t.map2d.getSize()[1]}},containerPointToLatLng:function(e){return{value:t.map2d.getCoordinateFromPixel(e),distanceTo:function(e){return 1}}}}};var o=function(o){var n,i,r=e.globe.ellipsoid,s=t.map3d.cesiumViewer.camera.pickEllipsoid(o,r);if(s){var a=r.cartesianToCartographic(s);n=Cesium.Math.toDegrees(a.longitude),i=Cesium.Math.toDegrees(a.latitude)}else n=0,i=0;var l,c=[n,i];try{l=e.pick(o)}catch(e){}var u=l?l.primitive:null,g=null!=u?u.olFeature:null,h=null!=u?u.olLayer:null,d={primitive:u,pickedObj:l,feature:g,olLayer:h,position:c};return d},n=new Cesium.ScreenSpaceEventHandler(e.canvas);n.setInputAction(function(e){var n=function(e,t){return e.x!=t.x&&e.y!=t.y};if("3d"===t.currentModel()&&n(e.startPosition,e.endPosition))for(var i=o(e.endPosition),r=0;r<t._evnts.length;r++)"pointermove"===t._evnts[r].eventType&&(t._evnts[r].context?t._evnts[r].callback.call(t._evnts[r].context,i):t._evnts[r].callback(i))},Cesium.ScreenSpaceEventType.MOUSE_MOVE),n.setInputAction(function(e){if("3d"===t.currentModel())for(var n=o(e.position),i=0;i<t._evnts.length;i++)"pointerclick"===t._evnts[i].eventType&&(t._evnts[i].context?t._evnts[i].callback.call(t._evnts[i].context,n):t._evnts[i].callback(n))},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.map3d.cesiumViewer.extend(Cesium.viewerCesiumNavigationMixin,{});var i=document.getElementsByClassName("cesium-widget-cesiumNavigationContainer")[0];document.getElementsByClassName("ol-viewport")[0].appendChild(i);var r=this.map3d.cesiumViewer.cesiumNavigation;r.distanceLegendDiv.style.visibility="hidden",r.navigationDiv.childNodes[1].style.background="rgba(47, 53, 60, 0.67)";var s=this._map2d.getSize(),a=1.40625/Math.pow(2,this._initView.zoom),l=s[0]*a,c=s[1]*a,u=3.1415927/180;Cesium.Camera.DEFAULT_VIEW_RECTANGLE=new Cesium.Rectangle((this._initView.center[0]-l/2)*u,(this._initView.center[1]-c/2)*u,(this._initView.center[0]+l/2)*u,(this._initView.center[1]+c/2)*u)},s}),define("core/DeveloperError",["./defined"],function(e){"use strict";function t(e){this.name="DeveloperError",this.message=e;var t;try{throw new Error}catch(e){t=e.stack}this.stack=t}return e(Object.create)&&(t.prototype=Object.create(Error.prototype),t.prototype.constructor=t),t.prototype.toString=function(){var t=this.name+": "+this.message;return e(this.stack)&&(t+="\n"+this.stack.toString()),
t},t.throwInstantiationError=function(){throw new t("This function defines an interface and should not be called directly.")},t}),define("core/getElement",["./DeveloperError"],function(e){"use strict";function t(e){if("string"==typeof e){var t=document.getElementById(e);e=t}return e}return t}),define("core/classes",[],function(){return{addClass:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){if(this.hasClass(e,t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o," ")}},toggleClass:function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}}}),define("widgets/ViewModeSwitcher/ViewModeSwitcher",["../../core/defined","../../core/detector","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../core/classes"],function(e,t,o,n,i,r){function s(o,s){if(!e(o))throw new n("container属性为必填值");o=i(o),this._container=o,this._viewModel=s,this._is3dMap=!1,this._isVectorBaseMap=!0;var a=document.createElement("div");a.className="viewModeSwitcher-widget",o.appendChild(a),a.innerHTML="<ul><li class='normal'><span>矢量</span></li><li class='satellite'><span>影像</span></li><li class='cesium'><span>三维</span></li></ul>";var l=a.children[0].children[0],c=a.children[0].children[1],u=a.children[0].children[2];t.webgl()||r.addClass(a,"unsupportWebgl");var g=this,h=function(e){r.removeClass(l,"active"),r.removeClass(c,"active"),r.removeClass(u,"active"),r.addClass(e,"active")};h(l),l.onclick=function(){g._is3dMap&&g._contMap.scene.set3dModel(!1,o),g._isVectorBaseMap||g._contMap.scene.swich2dBaseMap(g._viewModel.normal),g._isVectorBaseMap=!0,g._is3dMap=!1,h(this)},c.onclick=function(){g._is3dMap&&g._contMap.scene.set3dModel(!1,o),g._isVectorBaseMap&&g._contMap.scene.swich2dBaseMap(g._viewModel.satellite),g._isVectorBaseMap=!1,g._is3dMap=!1,h(this)},u.onclick=function(){g._is3dMap||(g._contMap.scene.set3dModel(!0,o),g._is3dMap=!0),h(this)}}return o(s.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),s.prototype.setContMap=function(e){this._contMap=e},s.prototype.destroy=function(){},s.prototype.hiddenCesium=function(){document.getElementsByClassName("cesium")[0].style.display="none"},s}),define("widgets/MouseLocation/MouseLocation",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement"],function(e,t,o,n){var i=function(t){if(!e(t))throw new o("container属性为必填值");t=n(t),this._container=t;var i=document.createElement("div");i.className="mouseLocation-widget",t.appendChild(i),i.innerHTML="经度：<span >115</span>°<span >10</span>′<span >50</span>″纬度：<span >36</span>°<span >36</span>′<span >24</span>″",this._xDuElement=i.children[0],this._xFenElement=i.children[1],this._xMiaoElement=i.children[2],this._yDuElement=i.children[3],this._yFenElement=i.children[4],this._yMiaoElement=i.children[5],this._pointGeom=void 0};return t(i.prototype,{container:{get:function(){return this._container}},position:{get:function(){return this._pointGeom}}}),i.prototype.setContMap=function(e){this._contMap=e},i.prototype._displayLocation=function(e,t){function o(e,t){for(var o=e.toString().length;o<t;)e="0"+e,o++;return e}var n=e.position,i=n[0];i=(i+180)%360-180;var r=o(parseInt(i),3),s=60*(i-r),a=o(parseInt(s),2),l=o(parseInt(60*(s-a)),2),c=n[1],u=o(parseInt(c),2);s=60*(c-u);var g=o(parseInt(s),2),h=o(parseInt(60*(s-g)),2);this._xDuElement.innerHTML=r,this._xFenElement.innerHTML=a,this._xMiaoElement.innerHTML=l,this._yDuElement.innerHTML=u,this._yFenElement.innerHTML=g,this._yMiaoElement.innerHTML=h,this._pointGeom=new ol.geom.Point(n)},i.prototype.start=function(){this._contMap.scene.on("pointermove",this._displayLocation,this)},i.prototype.destroy=function(){this._contMap.scene.on("pointermove",this._displayLocation,this)},i}),function(){!function(e){var t=this||(0,eval)("this"),o=t.document,n=t.navigator,i=t.jQuery,r=t.JSON;!function(e){"function"==typeof define&&define.amd?define("thirdParty/knockout-3.4.0",["exports","require"],e):e("object"==typeof exports&&"object"==typeof module?module.exports||exports:t.ko={})}(function(s,a){function l(e,t){return(null===e||typeof e in m)&&e===t}function c(t,o){var n;return function(){n||(n=f.a.setTimeout(function(){n=e,t()},o))}}function u(e,t){var o;return function(){clearTimeout(o),o=f.a.setTimeout(e,t)}}function g(e,t){t&&t!==v?"beforeChange"===t?this.Kb(e):this.Ha(e,t):this.Lb(e)}function h(e,t){null!==t&&t.k&&t.k()}function d(e,t){var o=this.Hc,n=o[S];n.R||(this.lb&&this.Ma[t]?(o.Pb(t,e,this.Ma[t]),this.Ma[t]=null,--this.lb):n.r[t]||o.Pb(t,e,n.s?{ia:e}:o.uc(e)))}function p(e,t,o,n){f.d[e]={init:function(e,i,r,s,a){var l,c;return f.m(function(){var r=f.a.c(i()),s=!o!=!r,u=!c;(u||t||s!==l)&&(u&&f.va.Aa()&&(c=f.a.ua(f.f.childNodes(e),!0)),s?(u||f.f.da(e,f.a.ua(c)),f.eb(n?n(a,r):a,e)):f.f.xa(e),l=s)},null,{i:e}),{controlsDescendantBindings:!0}}},f.h.ta[e]=!1,f.f.Z[e]=!0}var f="undefined"!=typeof s?s:{};f.b=function(e,t){for(var o=e.split("."),n=f,i=0;i<o.length-1;i++)n=n[o[i]];n[o[o.length-1]]=t},f.G=function(e,t,o){e[t]=o},f.version="3.4.0",f.b("version",f.version),f.options={deferUpdates:!1,useOnlyNativeEvents:!1},f.a=function(){function s(e,t){for(var o in e)e.hasOwnProperty(o)&&t(o,e[o])}function a(e,t){if(t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function l(e,t){return e.__proto__=t,e}function c(e,t,o,n){var i=e[t].match(v)||[];f.a.q(o.match(v),function(e){f.a.pa(i,e,n)}),e[t]=i.join(" ")}var u={__proto__:[]}instanceof Array,g="function"==typeof Symbol,h={},d={};h[n&&/Firefox\/2/i.test(n.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),s(h,function(e,t){if(t.length)for(var o=0,n=t.length;o<n;o++)d[t[o]]=e});var p={propertychange:!0},m=o&&function(){for(var t=3,n=o.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return 4<t?t:e}(),v=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(e,t){for(var o=0,n=e.length;o<n;o++)t(e[o],o)},o:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var o=0,n=e.length;o<n;o++)if(e[o]===t)return o;return-1},Sb:function(e,t,o){for(var n=0,i=e.length;n<i;n++)if(t.call(o,e[n],n))return e[n];return null},La:function(e,t){var o=f.a.o(e,t);0<o?e.splice(o,1):0===o&&e.shift()},Tb:function(e){e=e||[];for(var t=[],o=0,n=e.length;o<n;o++)0>f.a.o(t,e[o])&&t.push(e[o]);return t},fb:function(e,t){e=e||[];for(var o=[],n=0,i=e.length;n<i;n++)o.push(t(e[n],n));return o},Ka:function(e,t){e=e||[];for(var o=[],n=0,i=e.length;n<i;n++)t(e[n],n)&&o.push(e[n]);return o},ra:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var o=0,n=t.length;o<n;o++)e.push(t[o]);return e},pa:function(e,t,o){var n=f.a.o(f.a.zb(e),t);0>n?o&&e.push(t):o||e.splice(n,1)},ka:u,extend:a,Xa:l,Ya:u?l:a,D:s,Ca:function(e,t){if(!e)return e;var o,n={};for(o in e)e.hasOwnProperty(o)&&(n[o]=t(e[o],o,e));return n},ob:function(e){for(;e.firstChild;)f.removeNode(e.firstChild)},jc:function(e){e=f.a.V(e);for(var t=(e[0]&&e[0].ownerDocument||o).createElement("div"),n=0,i=e.length;n<i;n++)t.appendChild(f.$(e[n]));return t},ua:function(e,t){for(var o=0,n=e.length,i=[];o<n;o++){var r=e[o].cloneNode(!0);i.push(t?f.$(r):r)}return i},da:function(e,t){if(f.a.ob(e),t)for(var o=0,n=t.length;o<n;o++)e.appendChild(t[o])},qc:function(e,t){var o=e.nodeType?[e]:e;if(0<o.length){for(var n=o[0],i=n.parentNode,r=0,s=t.length;r<s;r++)i.insertBefore(t[r],n);for(r=0,s=o.length;r<s;r++)f.removeNode(o[r])}},za:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var o=e[0],n=e[e.length-1];for(e.length=0;o!==n;)e.push(o),o=o.nextSibling;e.push(n)}}return e},sc:function(e,t){7>m?e.setAttribute("selected",t):e.selected=t},$a:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},Mc:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},nb:function(e){return f.a.Mc(e,e.ownerDocument.documentElement)},Qb:function(e){return!!f.a.Sb(e,f.a.nb)},A:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Wb:function(e){return f.onError?function(){try{return e.apply(this,arguments)}catch(e){throw f.onError&&f.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(f.a.Wb(e),t)},$b:function(e){setTimeout(function(){throw f.onError&&f.onError(e),e},0)},p:function(e,t,o){var n=f.a.Wb(o);if(o=m&&p[t],f.options.useOnlyNativeEvents||o||!i)if(o||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(t){n.call(e,t)},s="on"+t;e.attachEvent(s,r),f.a.F.oa(e,function(){e.detachEvent(s,r)})}else e.addEventListener(t,n,!1);else i(e).bind(t,n)},Da:function(e,n){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;if("input"===f.a.A(e)&&e.type&&"click"==n.toLowerCase()?(r=e.type,r="checkbox"==r||"radio"==r):r=!1,f.options.useOnlyNativeEvents||!i||r)if("function"==typeof o.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");r=o.createEvent(d[n]||"HTMLEvents"),r.initEvent(n,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+n)}else i(e).trigger(n)},c:function(e){return f.H(e)?e():e},zb:function(e){return f.H(e)?e.t():e},bb:function(e,t,o){var n;t&&("object"==typeof e.classList?(n=e.classList[o?"add":"remove"],f.a.q(t.match(v),function(t){n.call(e.classList,t)})):"string"==typeof e.className.baseVal?c(e.className,"baseVal",t,o):c(e,"className",t,o))},Za:function(t,o){var n=f.a.c(o);null!==n&&n!==e||(n="");var i=f.f.firstChild(t);!i||3!=i.nodeType||f.f.nextSibling(i)?f.f.da(t,[t.ownerDocument.createTextNode(n)]):i.data=n,f.a.Rc(t)},rc:function(e,t){if(e.name=t,7>=m)try{e.mergeAttributes(o.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},Rc:function(e){9<=m&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Nc:function(e){if(m){var t=e.style.width;e.style.width=0,e.style.width=t}},hd:function(e,t){e=f.a.c(e),t=f.a.c(t);for(var o=[],n=e;n<=t;n++)o.push(n);return o},V:function(e){for(var t=[],o=0,n=e.length;o<n;o++)t.push(e[o]);return t},Yb:function(e){return g?Symbol(e):e},rd:6===m,sd:7===m,C:m,ec:function(e,t){for(var o=f.a.V(e.getElementsByTagName("input")).concat(f.a.V(e.getElementsByTagName("textarea"))),n="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],r=o.length-1;0<=r;r--)n(o[r])&&i.push(o[r]);return i},ed:function(e){return"string"==typeof e&&(e=f.a.$a(e))?r&&r.parse?r.parse(e):new Function("return "+e)():null},Eb:function(e,t,o){if(!r||!r.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return r.stringify(f.a.c(e),t,o)},fd:function(e,t,n){n=n||{};var i=n.params||{},r=n.includeFields||this.cc,a=e;if("object"==typeof e&&"form"===f.a.A(e))for(var a=e.action,l=r.length-1;0<=l;l--)for(var c=f.a.ec(e,r[l]),u=c.length-1;0<=u;u--)i[c[u].name]=c[u].value;t=f.a.c(t);var g=o.createElement("form");g.style.display="none",g.action=a,g.method="post";for(var h in t)e=o.createElement("input"),e.type="hidden",e.name=h,e.value=f.a.Eb(f.a.c(t[h])),g.appendChild(e);s(i,function(e,t){var n=o.createElement("input");n.type="hidden",n.name=e,n.value=t,g.appendChild(n)}),o.body.appendChild(g),n.submitter?n.submitter(g):g.submit(),setTimeout(function(){g.parentNode.removeChild(g)},0)}}}(),f.b("utils",f.a),f.b("utils.arrayForEach",f.a.q),f.b("utils.arrayFirst",f.a.Sb),f.b("utils.arrayFilter",f.a.Ka),f.b("utils.arrayGetDistinctValues",f.a.Tb),f.b("utils.arrayIndexOf",f.a.o),f.b("utils.arrayMap",f.a.fb),f.b("utils.arrayPushAll",f.a.ra),f.b("utils.arrayRemoveItem",f.a.La),f.b("utils.extend",f.a.extend),f.b("utils.fieldsIncludedWithJsonPost",f.a.cc),f.b("utils.getFormFields",f.a.ec),f.b("utils.peekObservable",f.a.zb),f.b("utils.postJson",f.a.fd),f.b("utils.parseJson",f.a.ed),f.b("utils.registerEventHandler",f.a.p),f.b("utils.stringifyJson",f.a.Eb),f.b("utils.range",f.a.hd),f.b("utils.toggleDomNodeCssClass",f.a.bb),f.b("utils.triggerEvent",f.a.Da),f.b("utils.unwrapObservable",f.a.c),f.b("utils.objectForEach",f.a.D),f.b("utils.addOrRemoveItem",f.a.pa),f.b("utils.setTextContent",f.a.Za),f.b("unwrap",f.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var o=Array.prototype.slice.call(arguments,1);return function(){var n=o.slice(0);return n.push.apply(n,arguments),t.apply(e,n)}}),f.a.e=new function(){function t(t,r){var s=t[n];if(!s||"null"===s||!i[s]){if(!r)return e;s=t[n]="ko"+o++,i[s]={}}return i[s]}var o=0,n="__ko__"+(new Date).getTime(),i={};return{get:function(o,n){var i=t(o,!1);return i===e?e:i[n]},set:function(o,n,i){i===e&&t(o,!1)===e||(t(o,!0)[n]=i)},clear:function(e){var t=e[n];return!!t&&(delete i[t],e[n]=null,!0)},I:function(){return o++ +n}}},f.b("utils.domData",f.a.e),f.b("utils.domData.clear",f.a.e.clear),f.a.F=new function(){function t(t,o){var i=f.a.e.get(t,n);return i===e&&o&&(i=[],f.a.e.set(t,n,i)),i}function o(e){var n=t(e,!1);if(n)for(var n=n.slice(0),i=0;i<n.length;i++)n[i](e);if(f.a.e.clear(e),f.a.F.cleanExternalData(e),s[e.nodeType])for(n=e.firstChild;e=n;)n=e.nextSibling,8===e.nodeType&&o(e)}var n=f.a.e.I(),r={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{oa:function(e,o){if("function"!=typeof o)throw Error("Callback must be a function");t(e,!0).push(o)},pc:function(o,i){var r=t(o,!1);r&&(f.a.La(r,i),0==r.length&&f.a.e.set(o,n,e))},$:function(e){if(r[e.nodeType]&&(o(e),s[e.nodeType])){var t=[];f.a.ra(t,e.getElementsByTagName("*"));for(var n=0,i=t.length;n<i;n++)o(t[n])}return e},removeNode:function(e){f.$(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){i&&"function"==typeof i.cleanData&&i.cleanData([e])}}},f.$=f.a.F.$,f.removeNode=f.a.F.removeNode,f.b("cleanNode",f.$),f.b("removeNode",f.removeNode),f.b("utils.domNodeDisposal",f.a.F),f.b("utils.domNodeDisposal.addDisposeCallback",f.a.F.oa),f.b("utils.domNodeDisposal.removeDisposeCallback",f.a.F.pc),function(){var n=[0,"",""],r=[1,"<table>","</table>"],s=[3,"<table><tbody><tr>","</tr></tbody></table>"],a=[1,"<select multiple='multiple'>","</select>"],l={thead:r,tbody:r,tfoot:r,tr:[2,"<table><tbody>","</tbody></table>"],td:s,th:s,option:a,optgroup:a},c=8>=f.a.C;f.a.ma=function(e,r){var s;if(i){if(i.parseHTML)s=i.parseHTML(e,r)||[];else if((s=i.clean([e],r))&&s[0]){for(var a=s[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{(s=r)||(s=o);var u,a=s.parentWindow||s.defaultView||t,g=f.a.$a(e).toLowerCase(),h=s.createElement("div");for(u=(g=g.match(/^<([a-z]+)[ >]/))&&l[g[1]]||n,g=u[0],u="ignored<div>"+u[1]+e+u[2]+"</div>","function"==typeof a.innerShiv?h.appendChild(a.innerShiv(u)):(c&&s.appendChild(h),h.innerHTML=u,c&&h.parentNode.removeChild(h));g--;)h=h.lastChild;s=f.a.V(h.lastChild.childNodes)}return s},f.a.Cb=function(t,o){if(f.a.ob(t),o=f.a.c(o),null!==o&&o!==e)if("string"!=typeof o&&(o=o.toString()),i)i(t).html(o);else for(var n=f.a.ma(o,t.ownerDocument),r=0;r<n.length;r++)t.appendChild(n[r])}}(),f.b("utils.parseHtmlFragment",f.a.ma),f.b("utils.setHtml",f.a.Cb),f.M=function(){function t(e,o){if(e)if(8==e.nodeType){var n=f.M.lc(e.nodeValue);null!=n&&o.push({Lc:e,cd:n})}else if(1==e.nodeType)for(var n=0,i=e.childNodes,r=i.length;n<r;n++)t(i[n],o)}var o={};return{wb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return o[t]=e,"<!--[ko_memo:"+t+"]-->"},xc:function(t,n){var i=o[t];if(i===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete o[t]}},yc:function(e,o){var n=[];t(e,n);for(var i=0,r=n.length;i<r;i++){var s=n[i].Lc,a=[s];o&&f.a.ra(a,o),f.M.xc(n[i].cd,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},lc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),f.b("memoization",f.M),f.b("memoization.memoize",f.M.wb),f.b("memoization.unmemoize",f.M.xc),f.b("memoization.parseMemoText",f.M.lc),f.b("memoization.unmemoizeDomNodeAndDescendants",f.M.yc),f.Y=function(){function e(){if(r)for(var e,t=r,o=0;a<r;)if(e=i[a++]){if(a>t){if(5e3<=++o){a=r,f.a.$b(Error("'Too much recursion' after processing "+o+" task groups."));break}t=r}try{e()}catch(e){f.a.$b(e)}}}function n(){e(),a=r=i.length=0}var i=[],r=0,s=1,a=0;return{scheduler:t.MutationObserver?function(e){var t=o.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(n):o&&"onreadystatechange"in o.createElement("script")?function(e){var t=o.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,o.documentElement.removeChild(t),t=null,e()},o.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},Wa:function(e){return r||f.Y.scheduler(n),i[r++]=e,s++},cancel:function(e){e-=s-r,e>=a&&e<r&&(i[e]=null)},resetForTesting:function(){var e=r-a;return a=r=i.length=0,e},md:e}}(),f.b("tasks",f.Y),f.b("tasks.schedule",f.Y.Wa),f.b("tasks.runEarly",f.Y.md),f.ya={throttle:function(e,t){e.throttleEvaluation=t;var o=null;return f.B({read:e,write:function(n){clearTimeout(o),o=f.a.setTimeout(function(){e(n)},t)}})},rateLimit:function(e,t){var o,n,i;"number"==typeof t?o=t:(o=t.timeout,n=t.method),e.cb=!1,i="notifyWhenChangesStop"==n?u:c,e.Ta(function(e){return i(e,o)})},deferred:function(t,o){if(!0!==o)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.cb||(t.cb=!0,t.Ta(function(o){var n;return function(){f.Y.cancel(n),n=f.Y.Wa(o),t.notifySubscribers(e,"dirty")}}))},notify:function(e,t){e.equalityComparer="always"==t?null:l}};var m={undefined:1,boolean:1,number:1,string:1};f.b("extenders",f.ya),f.vc=function(e,t,o){this.ia=e,this.gb=t,this.Kc=o,this.R=!1,f.G(this,"dispose",this.k)},f.vc.prototype.k=function(){this.R=!0,this.Kc()},f.J=function(){f.a.Ya(this,y),y.rb(this)};var v="change",y={rb:function(e){e.K={},e.Nb=1},X:function(e,t,o){var n=this;o=o||v;var i=new f.vc(n,t?e.bind(t):e,function(){f.a.La(n.K[o],i),n.Ia&&n.Ia(o)});return n.sa&&n.sa(o),n.K[o]||(n.K[o]=[]),n.K[o].push(i),i},notifySubscribers:function(e,t){if(t=t||v,t===v&&this.zc(),this.Pa(t))try{f.l.Ub();for(var o,n=this.K[t].slice(0),i=0;o=n[i];++i)o.R||o.gb(e)}finally{f.l.end()}},Na:function(){return this.Nb},Uc:function(e){return this.Na()!==e},zc:function(){++this.Nb},Ta:function(e){var t,o,n,i=this,r=f.H(i);i.Ha||(i.Ha=i.notifySubscribers,i.notifySubscribers=g);var s=e(function(){i.Mb=!1,r&&n===i&&(n=i()),t=!1,i.tb(o,n)&&i.Ha(o=n)});i.Lb=function(e){i.Mb=t=!0,n=e,s()},i.Kb=function(e){t||(o=e,i.Ha(e,"beforeChange"))}},Pa:function(e){return this.K[e]&&this.K[e].length},Sc:function(e){if(e)return this.K[e]&&this.K[e].length||0;var t=0;return f.a.D(this.K,function(e,o){"dirty"!==e&&(t+=o.length)}),t},tb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&f.a.D(e,function(e,o){var n=f.ya[e];"function"==typeof n&&(t=n(t,o)||t)}),t}};f.G(y,"subscribe",y.X),f.G(y,"extend",y.extend),f.G(y,"getSubscriptionsCount",y.Sc),f.a.ka&&f.a.Xa(y,Function.prototype),f.J.fn=y,f.hc=function(e){return null!=e&&"function"==typeof e.X&&"function"==typeof e.notifySubscribers},f.b("subscribable",f.J),f.b("isSubscribable",f.hc),f.va=f.l=function(){function e(e){n.push(o),o=e}function t(){o=n.pop()}var o,n=[],i=0;return{Ub:e,end:t,oc:function(e){if(o){if(!f.hc(e))throw Error("Only subscribable things can act as dependencies");o.gb.call(o.Gc,e,e.Cc||(e.Cc=++i))}},w:function(o,n,i){try{return e(),o.apply(n,i||[])}finally{t()}},Aa:function(){if(o)return o.m.Aa()},Sa:function(){if(o)return o.Sa}}}(),f.b("computedContext",f.va),f.b("computedContext.getDependenciesCount",f.va.Aa),f.b("computedContext.isInitial",f.va.Sa),f.b("ignoreDependencies",f.qd=f.l.w);var _=f.a.Yb("_latestValue");f.N=function(e){function t(){return 0<arguments.length?(t.tb(t[_],arguments[0])&&(t.ga(),t[_]=arguments[0],t.fa()),this):(f.l.oc(t),t[_])}return t[_]=e,f.a.ka||f.a.extend(t,f.J.fn),f.J.fn.rb(t),f.a.Ya(t,b),f.options.deferUpdates&&f.ya.deferred(t,!0),t};var b={equalityComparer:l,t:function(){return this[_]},fa:function(){this.notifySubscribers(this[_])},ga:function(){this.notifySubscribers(this[_],"beforeChange")}};f.a.ka&&f.a.Xa(b,f.J.fn);var w=f.N.gd="__ko_proto__";b[w]=f.N,f.Oa=function(t,o){return null!==t&&t!==e&&t[w]!==e&&(t[w]===o||f.Oa(t[w],o))},f.H=function(e){return f.Oa(e,f.N)},f.Ba=function(e){return!!("function"==typeof e&&e[w]===f.N||"function"==typeof e&&e[w]===f.B&&e.Vc)},f.b("observable",f.N),f.b("isObservable",f.H),f.b("isWriteableObservable",f.Ba),f.b("isWritableObservable",f.Ba),f.b("observable.fn",b),f.G(b,"peek",b.t),f.G(b,"valueHasMutated",b.fa),f.G(b,"valueWillMutate",b.ga),f.la=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=f.N(e),f.a.Ya(e,f.la.fn),e.extend({trackArrayChanges:!0})},f.la.fn={remove:function(e){for(var t=this.t(),o=[],n="function"!=typeof e||f.H(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var r=t[i];n(r)&&(0===o.length&&this.ga(),o.push(r),t.splice(i,1),i--)}return o.length&&this.fa(),o},removeAll:function(t){if(t===e){var o=this.t(),n=o.slice(0);return this.ga(),o.splice(0,o.length),this.fa(),n}return t?this.remove(function(e){return 0<=f.a.o(t,e)}):[]},destroy:function(e){var t=this.t(),o="function"!=typeof e||f.H(e)?function(t){return t===e}:e;this.ga();for(var n=t.length-1;0<=n;n--)o(t[n])&&(t[n]._destroy=!0);this.fa()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=f.a.o(t,e)}):[]},indexOf:function(e){var t=this();return f.a.o(t,e)},replace:function(e,t){var o=this.indexOf(e);0<=o&&(this.ga(),this.t()[o]=t,this.fa())}},f.a.ka&&f.a.Xa(f.la.fn,f.N.fn),f.a.q("pop push reverse shift sort splice unshift".split(" "),function(e){f.la.fn[e]=function(){var t=this.t();this.ga(),this.Vb(t,e,arguments);var o=t[e].apply(t,arguments);return this.fa(),o===t?this:o}}),f.a.q(["slice"],function(e){f.la.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),f.b("observableArray",f.la),f.ya.trackArrayChanges=function(e,t){function o(){if(!i){i=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,o){return o&&o!==v||++s,t.apply(this,arguments)};var o=[].concat(e.t()||[]);r=null,n=e.X(function(t){if(t=[].concat(t||[]),e.Pa("arrayChange")){var n;(!r||1<s)&&(r=f.a.ib(o,t,e.hb)),n=r}o=t,r=null,s=0,n&&n.length&&e.notifySubscribers(n,"arrayChange")})}}if(e.hb={},t&&"object"==typeof t&&f.a.extend(e.hb,t),e.hb.sparse=!0,!e.Vb){var n,i=!1,r=null,s=0,a=e.sa,l=e.Ia;e.sa=function(t){a&&a.call(e,t),"arrayChange"===t&&o()},e.Ia=function(t){l&&l.call(e,t),"arrayChange"!==t||e.Pa("arrayChange")||(n.k(),i=!1)},e.Vb=function(e,t,o){function n(e,t,o){return a[a.length]={status:e,value:t,index:o}}if(i&&!s){var a=[],l=e.length,c=o.length,u=0;switch(t){case"push":u=l;case"unshift":for(t=0;t<c;t++)n("added",o[t],u+t);break;case"pop":u=l-1;case"shift":l&&n("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>o[0]?l+o[0]:o[0]),l);for(var l=1===c?l:Math.min(t+(o[1]||0),l),c=t+c-2,u=Math.max(l,c),g=[],h=[],d=2;t<u;++t,++d)t<l&&h.push(n("deleted",e[t],t)),t<c&&g.push(n("added",o[d],t));f.a.dc(h,g);break;default:return}r=a}}}};var S=f.a.Yb("_state");f.m=f.B=function(t,o,n){function i(){if(0<arguments.length){if("function"!=typeof r)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(s.pb,arguments),this}return f.l.oc(i),(s.S||s.s&&i.Qa())&&i.aa(),s.T}if("object"==typeof t?n=t:(n=n||{},t&&(n.read=t)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var r=n.write,s={T:e,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:n.read,pb:o||n.owner,i:n.disposeWhenNodeIsRemoved||n.i||null,wa:n.disposeWhen||n.wa,mb:null,r:{},L:0,bc:null};return i[S]=s,i.Vc="function"==typeof r,f.a.ka||f.a.extend(i,f.J.fn),f.J.fn.rb(i),f.a.Ya(i,C),n.pure?(s.Va=!0,s.s=!0,f.a.extend(i,E)):n.deferEvaluation&&f.a.extend(i,T),f.options.deferUpdates&&f.ya.deferred(i,!0),s.i&&(s.Fb=!0,s.i.nodeType||(s.i=null)),s.s||n.deferEvaluation||i.aa(),s.i&&i.ba()&&f.a.F.oa(s.i,s.mb=function(){i.k()}),i};var C={equalityComparer:l,Aa:function(){return this[S].L},Pb:function(e,t,o){if(this[S].Va&&t===this)throw Error("A 'pure' computed must not be called recursively");this[S].r[e]=o,o.Ga=this[S].L++,o.na=t.Na()},Qa:function(){var e,t,o=this[S].r;for(e in o)if(o.hasOwnProperty(e)&&(t=o[e],t.ia.Uc(t.na)))return!0},bd:function(){this.Fa&&!this[S].Ra&&this.Fa()},ba:function(){return this[S].S||0<this[S].L},ld:function(){this.Mb||this.ac()},uc:function(e){if(e.cb&&!this[S].i){var t=e.X(this.bd,this,"dirty"),o=e.X(this.ld,this);return{ia:e,k:function(){t.k(),o.k()}}}return e.X(this.ac,this)},ac:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[S].bc),this[S].bc=f.a.setTimeout(function(){e.aa(!0)},t)):e.Fa?e.Fa():e.aa(!0)},aa:function(e){var t=this[S],o=t.wa;if(!t.Ra&&!t.R){if(t.i&&!f.a.nb(t.i)||o&&o()){if(!t.Fb)return void this.k()}else t.Fb=!1;t.Ra=!0;try{this.Qc(e)}finally{t.Ra=!1}t.L||this.k()}},Qc:function(t){var o=this[S],n=o.Va?e:!o.L,i={Hc:this,Ma:o.r,lb:o.L};f.l.Ub({Gc:i,gb:d,m:this,Sa:n}),o.r={},o.L=0,i=this.Pc(o,i),this.tb(o.T,i)&&(o.s||this.notifySubscribers(o.T,"beforeChange"),o.T=i,o.s?this.zc():t&&this.notifySubscribers(o.T)),n&&this.notifySubscribers(o.T,"awake")},Pc:function(e,t){try{var o=e.jd;return e.pb?o.call(e.pb):o()}finally{f.l.end(),t.lb&&!e.s&&f.a.D(t.Ma,h),e.S=!1}},t:function(){var e=this[S];return(e.S&&!e.L||e.s&&this.Qa())&&this.aa(),e.T},Ta:function(e){f.J.fn.Ta.call(this,e),this.Fa=function(){this.Kb(this[S].T),this[S].S=!0,this.Lb(this)}},k:function(){var e=this[S];!e.s&&e.r&&f.a.D(e.r,function(e,t){t.k&&t.k()}),e.i&&e.mb&&f.a.F.pc(e.i,e.mb),e.r=null,e.L=0,e.R=!0,e.S=!1,e.s=!1,e.i=null}},E={sa:function(e){var t=this,o=t[S];if(!o.R&&o.s&&"change"==e){if(o.s=!1,o.S||t.Qa())o.r=null,o.L=0,o.S=!0,t.aa();else{var n=[];f.a.D(o.r,function(e,t){n[t.Ga]=e}),f.a.q(n,function(e,n){var i=o.r[e],r=t.uc(i.ia);r.Ga=n,r.na=i.na,o.r[e]=r})}o.R||t.notifySubscribers(o.T,"awake")}},Ia:function(t){var o=this[S];o.R||"change"!=t||this.Pa("change")||(f.a.D(o.r,function(e,t){t.k&&(o.r[e]={ia:t.ia,Ga:t.Ga,na:t.na},t.k())}),o.s=!0,this.notifySubscribers(e,"asleep"))},Na:function(){var e=this[S];return e.s&&(e.S||this.Qa())&&this.aa(),f.J.fn.Na.call(this)}},T={sa:function(e){"change"!=e&&"beforeChange"!=e||this.t()}};f.a.ka&&f.a.Xa(C,f.J.fn);var P=f.N.gd;f.m[P]=f.N,C[P]=f.m,f.Xc=function(e){return f.Oa(e,f.m)},f.Yc=function(e){return f.Oa(e,f.m)&&e[S]&&e[S].Va},f.b("computed",f.m),f.b("dependentObservable",f.m),f.b("isComputed",f.Xc),f.b("isPureComputed",f.Yc),f.b("computed.fn",C),f.G(C,"peek",C.t),f.G(C,"dispose",C.k),f.G(C,"isActive",C.ba),f.G(C,"getDependenciesCount",C.Aa),f.nc=function(e,t){return"function"==typeof e?f.m(e,t,{pure:!0}):(e=f.a.extend({},e),e.pure=!0,f.m(e,t))},f.b("pureComputed",f.nc),function(){function t(i,r,s){if(s=s||new n,i=r(i),"object"!=typeof i||null===i||i===e||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var a=i instanceof Array?[]:{};return s.save(i,a),o(i,function(o){var n=r(i[o]);switch(typeof n){case"boolean":case"number":case"string":case"function":a[o]=n;break;case"object":case"undefined":var l=s.get(n);a[o]=l!==e?l:t(n,r,s)}}),a}function o(e,t){if(e instanceof Array){for(var o=0;o<e.length;o++)t(o);"function"==typeof e.toJSON&&t("toJSON")}else for(o in e)t(o)}function n(){this.keys=[],this.Ib=[]}f.wc=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;f.H(e)&&10>t;t++)e=e();return e})},f.toJSON=function(e,t,o){return e=f.wc(e),f.a.Eb(e,t,o)},n.prototype={save:function(e,t){var o=f.a.o(this.keys,e);0<=o?this.Ib[o]=t:(this.keys.push(e),this.Ib.push(t))},get:function(t){return t=f.a.o(this.keys,t),0<=t?this.Ib[t]:e}}}(),f.b("toJS",f.wc),f.b("toJSON",f.toJSON),function(){f.j={u:function(t){switch(f.a.A(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?f.a.e.get(t,f.d.options.xb):7>=f.a.C?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?f.j.u(t.options[t.selectedIndex]):e;default:return t.value}},ha:function(t,o,n){switch(f.a.A(t)){case"option":switch(typeof o){case"string":f.a.e.set(t,f.d.options.xb,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=o;break;default:f.a.e.set(t,f.d.options.xb,o),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof o?o:""}break;case"select":""!==o&&null!==o||(o=e);for(var i,r=-1,s=0,a=t.options.length;s<a;++s)if(i=f.j.u(t.options[s]),i==o||""==i&&o===e){r=s;break}(n||0<=r||o===e&&1<t.size)&&(t.selectedIndex=r);break;default:null!==o&&o!==e||(o=""),t.value=o}}}}(),f.b("selectExtensions",f.j),f.b("selectExtensions.readValue",f.j.u),f.b("selectExtensions.writeValue",f.j.ha),f.h=function(){function e(e){e=f.a.$a(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t,o=[],s=e.match(n),a=[],l=0;if(s){s.push(",");for(var c,u=0;c=s[u];++u){var g=c.charCodeAt(0);if(44===g){if(0>=l){o.push(t&&a.length?{key:t,value:a.join("")}:{unknown:t||a.join("")}),t=l=0,a=[];continue}}else if(58===g){if(!l&&!t&&1===a.length){t=a.pop();continue}}else 47===g&&u&&1<c.length?(g=s[u-1].match(i))&&!r[g[0]]&&(e=e.substr(e.indexOf(c)+1),s=e.match(n),s.push(","),u=-1,c="/"):40===g||123===g||91===g?++l:41===g||125===g||93===g?--l:t||a.length||34!==g&&39!==g||(c=c.slice(1,-1));a.push(c)}}return o}var t=["true","false","null","undefined"],o=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,r={in:1,return:1,typeof:1},s={};return{ta:[],ea:s,yb:e,Ua:function(n,i){function r(e,n){var i;if(!u){var g=f.getBindingHandler(e);if(g&&g.preprocess&&!(n=g.preprocess(n,e,r)))return;(g=s[e])&&(i=n,0<=f.a.o(t,i)?i=!1:(g=i.match(o),i=null!==g&&(g[1]?"Object("+g[1]+")"+g[2]:i)),g=i),g&&l.push("'"+e+"':function(_z){"+i+"=_z}")}c&&(n="function(){return "+n+" }"),a.push("'"+e+"':"+n)}i=i||{};var a=[],l=[],c=i.valueAccessors,u=i.bindingParams,g="string"==typeof n?e(n):n;return f.a.q(g,function(e){r(e.key||e.unknown,e.value)}),l.length&&r("_ko_property_writers","{"+l.join(",")+" }"),a.join(",")},ad:function(e,t){for(var o=0;o<e.length;o++)if(e[o].key==t)return!0;return!1},Ea:function(e,t,o,n,i){e&&f.H(e)?!f.Ba(e)||i&&e.t()===n||e(n):(e=t.get("_ko_property_writers"))&&e[o]&&e[o](n);
}}}(),f.b("expressionRewriting",f.h),f.b("expressionRewriting.bindingRewriteValidators",f.h.ta),f.b("expressionRewriting.parseObjectLiteral",f.h.yb),f.b("expressionRewriting.preProcessBindings",f.h.Ua),f.b("expressionRewriting._twoWayBindings",f.h.ea),f.b("jsonExpressionRewriting",f.h),f.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",f.h.Ua),function(){function e(e){return 8==e.nodeType&&s.test(r?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(r?e.text:e.nodeValue)}function n(o,n){for(var i=o,r=1,s=[];i=i.nextSibling;){if(t(i)&&(r--,0===r))return s;s.push(i),e(i)&&r++}if(!n)throw Error("Cannot find closing comment tag to match: "+o.nodeValue);return null}function i(e,t){var o=n(e,t);return o?0<o.length?o[o.length-1].nextSibling:e.nextSibling:null}var r=o&&"<!--test-->"===o.createComment("test").text,s=r?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};f.f={Z:{},childNodes:function(t){return e(t)?n(t):t.childNodes},xa:function(t){if(e(t)){t=f.f.childNodes(t);for(var o=0,n=t.length;o<n;o++)f.removeNode(t[o])}else f.a.ob(t)},da:function(t,o){if(e(t)){f.f.xa(t);for(var n=t.nextSibling,i=0,r=o.length;i<r;i++)n.parentNode.insertBefore(o[i],n)}else f.a.da(t,o)},mc:function(t,o){e(t)?t.parentNode.insertBefore(o,t.nextSibling):t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o)},gc:function(t,o,n){n?e(t)?t.parentNode.insertBefore(o,n.nextSibling):n.nextSibling?t.insertBefore(o,n.nextSibling):t.appendChild(o):f.f.mc(t,o)},firstChild:function(o){return e(o)?!o.nextSibling||t(o.nextSibling)?null:o.nextSibling:o.firstChild},nextSibling:function(o){return e(o)&&(o=i(o)),o.nextSibling&&t(o.nextSibling)?null:o.nextSibling},Tc:e,pd:function(e){return(e=(r?e.text:e.nodeValue).match(s))?e[1]:null},kc:function(o){if(l[f.a.A(o)]){var n=o.firstChild;if(n)do if(1===n.nodeType){var r;r=n.firstChild;var s=null;if(r)do if(s)s.push(r);else if(e(r)){var a=i(r,!0);a?r=a:s=[r]}else t(r)&&(s=[r]);while(r=r.nextSibling);if(r=s)for(s=n.nextSibling,a=0;a<r.length;a++)s?o.insertBefore(r[a],s):o.appendChild(r[a])}while(n=n.nextSibling)}}}}(),f.b("virtualElements",f.f),f.b("virtualElements.allowedBindings",f.f.Z),f.b("virtualElements.emptyNode",f.f.xa),f.b("virtualElements.insertAfter",f.f.gc),f.b("virtualElements.prepend",f.f.mc),f.b("virtualElements.setDomNodeChildren",f.f.da),function(){f.Q=function(){this.Fc={}},f.a.extend(f.Q.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||f.g.getComponentNameForNode(e);case 8:return f.f.Tc(e);default:return!1}},getBindings:function(e,t){var o=this.getBindingsString(e,t),o=o?this.parseBindingsString(o,t,e):null;return f.g.Ob(o,e,t,!1)},getBindingAccessors:function(e,t){var o=this.getBindingsString(e,t),o=o?this.parseBindingsString(o,t,e,{valueAccessors:!0}):null;return f.g.Ob(o,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return f.f.pd(e);default:return null}},parseBindingsString:function(e,t,o,n){try{var i,r=this.Fc,s=e+(n&&n.valueAccessors||"");if(!(i=r[s])){var a,l="with($context){with($data||{}){return{"+f.h.Ua(e,n)+"}}}";a=new Function("$context","$element",l),i=r[s]=a}return i(t,o)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),f.Q.instance=new f.Q}(),f.b("bindingProvider",f.Q),function(){function o(e){return function(){return e}}function n(e){return e()}function r(e){return f.a.Ca(f.l.w(e),function(t,o){return function(){return e()[o]}})}function s(e,t,n){return"function"==typeof e?r(e.bind(null,t,n)):f.a.Ca(e,o)}function a(e,t){return r(this.getBindings.bind(this,e,t))}function l(e,t,o){var n,i=f.f.firstChild(t),r=f.Q.instance,s=r.preprocessNode;if(s){for(;n=i;)i=f.f.nextSibling(n),s.call(r,n);i=f.f.firstChild(t)}for(;n=i;)i=f.f.nextSibling(n),c(e,n,o)}function c(e,t,o){var n=!0,i=1===t.nodeType;i&&f.f.kc(t),(i&&o||f.Q.instance.nodeHasBindings(t))&&(n=g(t,null,e,o).shouldBindDescendants),n&&!d[f.a.A(t)]&&l(e,t,!i)}function u(e){var t=[],o={},n=[];return f.a.D(e,function i(r){if(!o[r]){var s=f.getBindingHandler(r);s&&(s.after&&(n.push(r),f.a.q(s.after,function(t){if(e[t]){if(-1!==f.a.o(n,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+n.join(", "));i(t)}}),n.length--),t.push({key:r,fc:s})),o[r]=!0}}),t}function g(t,o,i,r){var s=f.a.e.get(t,p);if(!o){if(s)throw Error("You cannot apply bindings multiple times to the same element.");f.a.e.set(t,p,!0)}!s&&r&&f.tc(t,i);var l;if(o&&"function"!=typeof o)l=o;else{var c=f.Q.instance,g=c.getBindingAccessors||a,h=f.B(function(){return(l=o?o(i,t):g.call(c,t,i))&&i.P&&i.P(),l},null,{i:t});l&&h.ba()||(h=null)}var d;if(l){var m=h?function(e){return function(){return n(h()[e])}}:function(e){return l[e]},v=function(){return f.a.Ca(h?h():l,n)};v.get=function(e){return l[e]&&n(m(e))},v.has=function(e){return e in l},r=u(l),f.a.q(r,function(o){var n=o.fc.init,r=o.fc.update,s=o.key;if(8===t.nodeType&&!f.f.Z[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof n&&f.l.w(function(){var o=n(t,m(s),v,i.$data,i);if(o&&o.controlsDescendantBindings){if(d!==e)throw Error("Multiple bindings ("+d+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");d=s}}),"function"==typeof r&&f.B(function(){r(t,m(s),v,i.$data,i)},null,{i:t})}catch(e){throw e.message='Unable to process binding "'+s+": "+l[s]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:d===e}}function h(e){return e&&e instanceof f.U?e:new f.U(e)}f.d={};var d={script:!0,textarea:!0,template:!0};f.getBindingHandler=function(e){return f.d[e]},f.U=function(t,o,n,i){var r,s=this,a="function"==typeof t&&!f.H(t),l=f.B(function(){var e=a?t():t,r=f.a.c(e);return o?(o.P&&o.P(),f.a.extend(s,o),l&&(s.P=l)):(s.$parents=[],s.$root=r,s.ko=f),s.$rawData=e,s.$data=r,n&&(s[n]=r),i&&i(s,o,r),s.$data},null,{wa:function(){return r&&!f.a.Qb(r)},i:!0});l.ba()&&(s.P=l,l.equalityComparer=null,r=[],l.Ac=function(t){r.push(t),f.a.F.oa(t,function(t){f.a.La(r,t),r.length||(l.k(),s.P=l=e)})})},f.U.prototype.createChildContext=function(e,t,o){return new f.U(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),o&&o(e)})},f.U.prototype.extend=function(e){return new f.U(this.P||this.$data,this,null,function(t,o){t.$rawData=o.$rawData,f.a.extend(t,"function"==typeof e?e():e)})};var p=f.a.e.I(),m=f.a.e.I();f.tc=function(e,t){return 2!=arguments.length?f.a.e.get(e,m):(f.a.e.set(e,m,t),void(t.P&&t.P.Ac(e)))},f.Ja=function(e,t,o){return 1===e.nodeType&&f.f.kc(e),g(e,t,h(o),!0)},f.Dc=function(e,t,o){return o=h(o),f.Ja(e,s(t,o,e),o)},f.eb=function(e,t){1!==t.nodeType&&8!==t.nodeType||l(h(e),t,!0)},f.Rb=function(e,o){if(!i&&t.jQuery&&(i=t.jQuery),o&&1!==o.nodeType&&8!==o.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");o=o||t.document.body,c(h(e),o,!0)},f.kb=function(t){switch(t.nodeType){case 1:case 8:var o=f.tc(t);if(o)return o;if(t.parentNode)return f.kb(t.parentNode)}return e},f.Jc=function(t){return(t=f.kb(t))?t.$data:e},f.b("bindingHandlers",f.d),f.b("applyBindings",f.Rb),f.b("applyBindingsToDescendants",f.eb),f.b("applyBindingAccessorsToNode",f.Ja),f.b("applyBindingsToNode",f.Dc),f.b("contextFor",f.kb),f.b("dataFor",f.Jc)}(),function(e){function t(t,n){var s,a=i.hasOwnProperty(t)?i[t]:e;a?a.X(n):(a=i[t]=new f.J,a.X(n),o(t,function(e,o){var n=!(!o||!o.synchronous);r[t]={definition:e,Zc:n},delete i[t],s||n?a.notifySubscribers(e):f.Y.Wa(function(){a.notifySubscribers(e)})}),s=!0)}function o(e,t){n("getConfig",[e],function(o){o?n("loadComponent",[e,o],function(e){t(e,o)}):t(null,null)})}function n(t,o,i,r){r||(r=f.g.loaders.slice(0));var s=r.shift();if(s){var a=s[t];if(a){var l=!1;if(a.apply(s,o.concat(function(e){l?i(null):null!==e?i(e):n(t,o,i,r)}))!==e&&(l=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else n(t,o,i,r)}else i(null)}var i={},r={};f.g={get:function(o,n){var i=r.hasOwnProperty(o)?r[o]:e;i?i.Zc?f.l.w(function(){n(i.definition)}):f.Y.Wa(function(){n(i.definition)}):t(o,n)},Xb:function(e){delete r[e]},Jb:n},f.g.loaders=[],f.b("components",f.g),f.b("components.get",f.g.get),f.b("components.clearCachedDefinition",f.g.Xb)}(),function(){function e(e,t,o,n){function i(){0===--a&&n(r)}var r={},a=2,l=o.template;o=o.viewModel,l?s(t,l,function(t){f.g.Jb("loadTemplate",[e,t],function(e){r.template=e,i()})}):i(),o?s(t,o,function(t){f.g.Jb("loadViewModel",[e,t],function(e){r[u]=e,i()})}):i()}function n(e,t,o){if("function"==typeof t)o(function(e){return new t(e)});else if("function"==typeof t[u])o(t[u]);else if("instance"in t){var i=t.instance;o(function(){return i})}else"viewModel"in t?n(e,t.viewModel,o):e("Unknown viewModel value: "+t)}function i(e){switch(f.a.A(e)){case"script":return f.a.ma(e.text);case"textarea":return f.a.ma(e.value);case"template":if(r(e.content))return f.a.ua(e.content.childNodes)}return f.a.ua(e.childNodes)}function r(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function s(e,o,n){"string"==typeof o.require?a||t.require?(a||t.require)([o.require],n):e("Uses require, but no AMD loader is present"):n(o)}function l(e){return function(t){throw Error("Component '"+e+"': "+t)}}var c={};f.g.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(f.g.ub(e))throw Error("Component "+e+" is already registered");c[e]=t},f.g.ub=function(e){return c.hasOwnProperty(e)},f.g.od=function(e){delete c[e],f.g.Xb(e)},f.g.Zb={getConfig:function(e,t){t(c.hasOwnProperty(e)?c[e]:null)},loadComponent:function(t,o,n){var i=l(t);s(i,o,function(o){e(t,i,o,n)})},loadTemplate:function(e,n,s){if(e=l(e),"string"==typeof n)s(f.a.ma(n));else if(n instanceof Array)s(n);else if(r(n))s(f.a.V(n.childNodes));else if(n.element)if(n=n.element,t.HTMLElement?n instanceof HTMLElement:n&&n.tagName&&1===n.nodeType)s(i(n));else if("string"==typeof n){var a=o.getElementById(n);a?s(i(a)):e("Cannot find element with ID "+n)}else e("Unknown element type: "+n);else e("Unknown template value: "+n)},loadViewModel:function(e,t,o){n(l(e),t,o)}};var u="createViewModel";f.b("components.register",f.g.register),f.b("components.isRegistered",f.g.ub),f.b("components.unregister",f.g.od),f.b("components.defaultLoader",f.g.Zb),f.g.loaders.push(f.g.Zb),f.g.Bc=c}(),function(){function e(e,o){var n=e.getAttribute("params");if(n){var n=t.parseBindingsString(n,o,e,{valueAccessors:!0,bindingParams:!0}),n=f.a.Ca(n,function(t){return f.m(t,null,{i:e})}),i=f.a.Ca(n,function(t){var o=t.t();return t.ba()?f.m({read:function(){return f.a.c(t())},write:f.Ba(o)&&function(e){t()(e)},i:e}):o});return i.hasOwnProperty("$raw")||(i.$raw=n),i}return{$raw:{}}}f.g.getComponentNameForNode=function(e){var t=f.a.A(e);if(f.g.ub(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=f.a.C&&e.tagName===t))return t},f.g.Ob=function(t,o,n,i){if(1===o.nodeType){var r=f.g.getComponentNameForNode(o);if(r){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:r,params:e(o,n)};t.component=i?function(){return s}:s}}return t};var t=new f.Q;9>f.a.C&&(f.g.register=function(e){return function(t){return o.createElement(t),e.apply(this,arguments)}}(f.g.register),o.createDocumentFragment=function(e){return function(){var t,o=e(),n=f.g.Bc;for(t in n)n.hasOwnProperty(t)&&o.createElement(t);return o}}(o.createDocumentFragment))}(),function(e){function t(e,t,o){if(t=t.template,!t)throw Error("Component '"+e+"' has no template");e=f.a.ua(t),f.f.da(o,e)}function o(e,t,o,n){var i=e.createViewModel;return i?i.call(e,n,{element:t,templateNodes:o}):n}var n=0;f.d.component={init:function(i,r,s,a,l){function c(){var e=u&&u.dispose;"function"==typeof e&&e.call(u),g=u=null}var u,g,h=f.a.V(f.f.childNodes(i));return f.a.F.oa(i,c),f.m(function(){var s,a,d=f.a.c(r());if("string"==typeof d?s=d:(s=f.a.c(d.name),a=f.a.c(d.params)),!s)throw Error("No component name specified");var p=g=++n;f.g.get(s,function(n){if(g===p){if(c(),!n)throw Error("Unknown component '"+s+"'");t(s,n,i);var r=o(n,i,h,a);n=l.createChildContext(r,e,function(e){e.$component=r,e.$componentTemplateNodes=h}),u=r,f.eb(n,i)}})},null,{i:i}),{controlsDescendantBindings:!0}}},f.f.Z.component=!0}();var A={class:"className",for:"htmlFor"};f.d.attr={update:function(t,o){var n=f.a.c(o())||{};f.a.D(n,function(o,n){n=f.a.c(n);var i=!1===n||null===n||n===e;i&&t.removeAttribute(o),8>=f.a.C&&o in A?(o=A[o],i?t.removeAttribute(o):t[o]=n):i||t.setAttribute(o,n.toString()),"name"===o&&f.a.rc(t,i?"":n.toString())})}},function(){f.d.checked={after:["value","attr"],init:function(t,o,n){function i(){var e=t.checked,i=d?s():e;if(!f.va.Sa()&&(!l||e)){var r=f.l.w(o);if(u){var a=g?r.t():r;h!==i?(e&&(f.a.pa(a,i,!0),f.a.pa(a,h,!1)),h=i):f.a.pa(a,i,e),g&&f.Ba(r)&&r(a)}else f.h.Ea(r,n,"checked",i,!0)}}function r(){var e=f.a.c(o());t.checked=u?0<=f.a.o(e,s()):a?e:s()===e}var s=f.nc(function(){return n.has("checkedValue")?f.a.c(n.get("checkedValue")):n.has("value")?f.a.c(n.get("value")):t.value}),a="checkbox"==t.type,l="radio"==t.type;if(a||l){var c=o(),u=a&&f.a.c(c)instanceof Array,g=!(u&&c.push&&c.splice),h=u?s():e,d=l||u;l&&!t.name&&f.d.uniqueName.init(t,function(){return!0}),f.m(i,null,{i:t}),f.a.p(t,"click",i),f.m(r,null,{i:t}),c=e}}},f.h.ea.checked=!0,f.d.checkedValue={update:function(e,t){e.value=f.a.c(t())}}}(),f.d.css={update:function(e,t){var o=f.a.c(t());null!==o&&"object"==typeof o?f.a.D(o,function(t,o){o=f.a.c(o),f.a.bb(e,t,o)}):(o=f.a.$a(String(o||"")),f.a.bb(e,e.__ko__cssValue,!1),e.__ko__cssValue=o,f.a.bb(e,o,!0))}},f.d.enable={update:function(e,t){var o=f.a.c(t());o&&e.disabled?e.removeAttribute("disabled"):o||e.disabled||(e.disabled=!0)}},f.d.disable={update:function(e,t){f.d.enable.update(e,function(){return!f.a.c(t())})}},f.d.event={init:function(e,t,o,n,i){var r=t()||{};f.a.D(r,function(r){"string"==typeof r&&f.a.p(e,r,function(e){var s,a=t()[r];if(a){try{var l=f.a.V(arguments);n=i.$data,l.unshift(n),s=a.apply(n,l)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===o.get(r+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},f.d.foreach={ic:function(e){return function(){var t=e(),o=f.a.zb(t);return o&&"number"!=typeof o.length?(f.a.c(t),{foreach:o.data,as:o.as,includeDestroyed:o.includeDestroyed,afterAdd:o.afterAdd,beforeRemove:o.beforeRemove,afterRender:o.afterRender,beforeMove:o.beforeMove,afterMove:o.afterMove,templateEngine:f.W.sb}):{foreach:t,templateEngine:f.W.sb}}},init:function(e,t){return f.d.template.init(e,f.d.foreach.ic(t))},update:function(e,t,o,n,i){return f.d.template.update(e,f.d.foreach.ic(t),o,n,i)}},f.h.ta.foreach=!1,f.f.Z.foreach=!0,f.d.hasfocus={init:function(e,t,o){function n(n){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var r;try{r=i.activeElement}catch(e){r=i.body}n=r===e}i=t(),f.h.Ea(i,o,"hasfocus",n,!0),e.__ko_hasfocusLastValue=n,e.__ko_hasfocusUpdating=!1}var i=n.bind(null,!0),r=n.bind(null,!1);f.a.p(e,"focus",i),f.a.p(e,"focusin",i),f.a.p(e,"blur",r),f.a.p(e,"focusout",r)},update:function(e,t){var o=!!f.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===o||(o?e.focus():e.blur(),!o&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),f.l.w(f.a.Da,null,[e,o?"focusin":"focusout"]))}},f.h.ea.hasfocus=!0,f.d.hasFocus=f.d.hasfocus,f.h.ea.hasFocus=!0,f.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.a.Cb(e,t())}},p("if"),p("ifnot",!1,!0),p("with",!0,!1,function(e,t){return e.createChildContext(t)});var x={};f.d.options={init:function(e){if("select"!==f.a.A(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,o,n){function i(){return f.a.Ka(t.options,function(e){return e.selected})}function r(e,t,o){var n=typeof t;return"function"==n?t(e):"string"==n?e[t]:o}function s(e,o){if(p&&u)f.j.ha(t,f.a.c(n.get("value")),!0);else if(d.length){var i=0<=f.a.o(d,f.j.u(o[0]));f.a.sc(o[0],i),p&&!i&&f.l.w(f.a.Da,null,[t,"change"])}}var a=t.multiple,l=0!=t.length&&a?t.scrollTop:null,c=f.a.c(o()),u=n.get("valueAllowUnset")&&n.has("value"),g=n.get("optionsIncludeDestroyed");o={};var h,d=[];u||(a?d=f.a.fb(i(),f.j.u):0<=t.selectedIndex&&d.push(f.j.u(t.options[t.selectedIndex]))),c&&("undefined"==typeof c.length&&(c=[c]),h=f.a.Ka(c,function(t){return g||t===e||null===t||!f.a.c(t._destroy)}),n.has("optionsCaption")&&(c=f.a.c(n.get("optionsCaption")),null!==c&&c!==e&&h.unshift(x)));var p=!1;o.beforeRemove=function(e){t.removeChild(e)},c=s,n.has("optionsAfterRender")&&"function"==typeof n.get("optionsAfterRender")&&(c=function(t,o){s(0,o),f.l.w(n.get("optionsAfterRender"),null,[o[0],t!==x?t:e])}),f.a.Bb(t,h,function(o,i,s){return s.length&&(d=!u&&s[0].selected?[f.j.u(s[0])]:[],p=!0),i=t.ownerDocument.createElement("option"),o===x?(f.a.Za(i,n.get("optionsCaption")),f.j.ha(i,e)):(s=r(o,n.get("optionsValue"),o),f.j.ha(i,f.a.c(s)),o=r(o,n.get("optionsText"),s),f.a.Za(i,o)),[i]},o,c),f.l.w(function(){u?f.j.ha(t,f.a.c(n.get("value")),!0):(a?d.length&&i().length<d.length:d.length&&0<=t.selectedIndex?f.j.u(t.options[t.selectedIndex])!==d[0]:d.length||0<=t.selectedIndex)&&f.a.Da(t,"change")}),f.a.Nc(t),l&&20<Math.abs(l-t.scrollTop)&&(t.scrollTop=l)}},f.d.options.xb=f.a.e.I(),f.d.selectedOptions={after:["options","foreach"],init:function(e,t,o){f.a.p(e,"change",function(){var n=t(),i=[];f.a.q(e.getElementsByTagName("option"),function(e){e.selected&&i.push(f.j.u(e))}),f.h.Ea(n,o,"selectedOptions",i)})},update:function(e,t){if("select"!=f.a.A(e))throw Error("values binding applies only to SELECT elements");var o=f.a.c(t()),n=e.scrollTop;o&&"number"==typeof o.length&&f.a.q(e.getElementsByTagName("option"),function(e){var t=0<=f.a.o(o,f.j.u(e));e.selected!=t&&f.a.sc(e,t)}),e.scrollTop=n}},f.h.ea.selectedOptions=!0,f.d.style={update:function(t,o){var n=f.a.c(o()||{});f.a.D(n,function(o,n){n=f.a.c(n),null!==n&&n!==e&&!1!==n||(n=""),t.style[o]=n})}},f.d.submit={init:function(e,t,o,n,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");f.a.p(e,"submit",function(o){var n,r=t();try{n=r.call(i.$data,e)}finally{!0!==n&&(o.preventDefault?o.preventDefault():o.returnValue=!1)}})}},f.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.a.Za(e,t())}},f.f.Z.text=!0,function(){if(t&&t.navigator)var o=function(e){if(e)return parseFloat(e[1])},n=t.opera&&t.opera.version&&parseInt(t.opera.version()),i=t.navigator.userAgent,r=o(i.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),s=o(i.match(/Firefox\/([^ ]*)/));if(10>f.a.C)var a=f.a.e.I(),l=f.a.e.I(),c=function(e){var t=this.activeElement;(t=t&&f.a.e.get(t,l))&&t(e)},u=function(e,t){var o=e.ownerDocument;f.a.e.get(o,a)||(f.a.e.set(o,a,!0),f.a.p(o,"selectionchange",c)),f.a.e.set(e,l,t)};f.d.textInput={init:function(t,o,i){function a(e,o){f.a.p(t,e,o)}function l(){var n=f.a.c(o());null!==n&&n!==e||(n=""),d!==e&&n===d?f.a.setTimeout(l,4):t.value!==n&&(p=n,t.value=n)}function c(){h||(d=t.value,h=f.a.setTimeout(g,4))}function g(){clearTimeout(h),d=h=e;var n=t.value;p!==n&&(p=n,f.h.Ea(o(),i,"textInput",n))}var h,d,p=t.value,m=9==f.a.C?c:g;10>f.a.C?(a("propertychange",function(e){"value"===e.propertyName&&m(e)}),8==f.a.C&&(a("keyup",g),a("keydown",g)),8<=f.a.C&&(u(t,m),a("dragend",c))):(a("input",g),5>r&&"textarea"===f.a.A(t)?(a("keydown",c),a("paste",c),a("cut",c)):11>n?a("keydown",c):4>s&&(a("DOMAutoComplete",g),a("dragdrop",g),a("drop",g))),a("change",g),f.m(l,null,{i:t})}},f.h.ea.textInput=!0,f.d.textinput={preprocess:function(e,t,o){o("textInput",e)}}}(),f.d.uniqueName={init:function(e,t){if(t()){var o="ko_unique_"+ ++f.d.uniqueName.Ic;f.a.rc(e,o)}}},f.d.uniqueName.Ic=0,f.d.value={after:["options","foreach"],init:function(e,t,o){if("input"!=e.tagName.toLowerCase()||"checkbox"!=e.type&&"radio"!=e.type){var n=["change"],i=o.get("valueUpdate"),r=!1,s=null;i&&("string"==typeof i&&(i=[i]),f.a.ra(n,i),n=f.a.Tb(n));var a=function(){s=null,r=!1;var n=t(),i=f.j.u(e);f.h.Ea(n,o,"value",i)};!f.a.C||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=f.a.o(n,"propertychange")||(f.a.p(e,"propertychange",function(){r=!0}),f.a.p(e,"focus",function(){r=!1}),f.a.p(e,"blur",function(){r&&a()})),f.a.q(n,function(t){var o=a;f.a.nd(t,"after")&&(o=function(){s=f.j.u(e),f.a.setTimeout(a,0)},t=t.substring(5)),f.a.p(e,t,o)});var l=function(){var n=f.a.c(t()),i=f.j.u(e);if(null!==s&&n===s)f.a.setTimeout(l,0);else if(n!==i)if("select"===f.a.A(e)){var r=o.get("valueAllowUnset"),i=function(){f.j.ha(e,n,r)};i(),r||n===f.j.u(e)?f.a.setTimeout(i,0):f.l.w(f.a.Da,null,[e,"change"])}else f.j.ha(e,n)};f.m(l,null,{i:e})}else f.Ja(e,{checkedValue:t})},update:function(){}},f.h.ea.value=!0,f.d.visible={update:function(e,t){var o=f.a.c(t()),n="none"!=e.style.display;o&&!n?e.style.display="":!o&&n&&(e.style.display="none")}},function(e){f.d[e]={init:function(t,o,n,i,r){return f.d.event.init.call(this,t,function(){var t={};return t[e]=o(),t},n,i,r)}}}("click"),f.O=function(){},f.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},f.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},f.O.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||o;var n=t.getElementById(e);if(!n)throw Error("Cannot find template with ID "+e);return new f.v.n(n)}if(1==e.nodeType||8==e.nodeType)return new f.v.qa(e);throw Error("Unknown template type: "+e)},f.O.prototype.renderTemplate=function(e,t,o,n){return e=this.makeTemplateSource(e,n),this.renderTemplateSource(e,t,o,n)},f.O.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},f.O.prototype.rewriteTemplate=function(e,t,o){e=this.makeTemplateSource(e,o),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},f.b("templateEngine",f.O),f.Gb=function(){function e(e,t,o,n){e=f.h.yb(e);for(var i=f.h.ta,r=0;r<e.length;r++){var s=e[r].key;if(i.hasOwnProperty(s)){var a=i[s];if("function"==typeof a){if(s=a(e[r].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return o="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f.h.Ua(e,{valueAccessors:!0})+" } })()},'"+o.toLowerCase()+"')",n.createJavaScriptEvaluatorBlock(o)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,o=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(e,t,o){t.isTemplateRewritten(e,o)||t.rewriteTemplate(e,function(e){return f.Gb.dd(e,t)},o)},dd:function(n,i){return n.replace(t,function(t,o,n,r,s){return e(s,o,n,i)}).replace(o,function(t,o){return e(o,"<!-- ko -->","#comment",i)})},Ec:function(e,t){return f.M.wb(function(o,n){var i=o.nextSibling;i&&i.nodeName.toLowerCase()===t&&f.Ja(i,e,n)})}}}(),f.b("__tr_ambtns",f.Gb.Ec),function(){f.v={},f.v.n=function(e){if(this.n=e){var t=f.a.A(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},f.v.n.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.n[e];var t=arguments[0];"innerHTML"===e?f.a.Cb(this.n,t):this.n[e]=t};var t=f.a.e.I()+"_";f.v.n.prototype.data=function(e){return 1===arguments.length?f.a.e.get(this.n,t+e):void f.a.e.set(this.n,t+e,arguments[1])};var o=f.a.e.I();f.v.n.prototype.nodes=function(){var t=this.n;return 0==arguments.length?(f.a.e.get(t,o)||{}).jb||(3===this.ab?t.content:4===this.ab?t:e):void f.a.e.set(t,o,{jb:arguments[0]})},f.v.qa=function(e){this.n=e},f.v.qa.prototype=new f.v.n,f.v.qa.prototype.text=function(){if(0==arguments.length){var t=f.a.e.get(this.n,o)||{};return t.Hb===e&&t.jb&&(t.Hb=t.jb.innerHTML),t.Hb}f.a.e.set(this.n,o,{Hb:arguments[0]})},f.b("templateSources",f.v),f.b("templateSources.domElement",f.v.n),f.b("templateSources.anonymousTemplate",f.v.qa)}(),function(){function t(e,t,o){var n;for(t=f.f.nextSibling(t);e&&(n=e)!==t;)e=f.f.nextSibling(n),o(n,e)}function o(e,o){if(e.length){var n=e[0],i=e[e.length-1],r=n.parentNode,s=f.Q.instance,a=s.preprocessNode;if(a){if(t(n,i,function(e,t){var o=e.previousSibling,r=a.call(s,e);r&&(e===n&&(n=r[0]||t),e===i&&(i=r[r.length-1]||o))}),e.length=0,!n)return;n===i?e.push(n):(e.push(n,i),f.a.za(e,r))}t(n,i,function(e){1!==e.nodeType&&8!==e.nodeType||f.Rb(o,e)}),t(n,i,function(e){1!==e.nodeType&&8!==e.nodeType||f.M.yc(e,[o])}),f.a.za(e,r)}}function n(e){return e.nodeType?e:0<e.length?e[0]:null}function i(e,t,i,r,a){a=a||{};var l=(e&&n(e)||i||{}).ownerDocument,c=a.templateEngine||s;if(f.Gb.Oc(i,c,l),i=c.renderTemplate(i,r,a,l),"number"!=typeof i.length||0<i.length&&"number"!=typeof i[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,t){case"replaceChildren":f.f.da(e,i),l=!0;break;case"replaceNode":f.a.qc(e,i),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return l&&(o(i,r),a.afterRender&&f.l.w(a.afterRender,null,[i,r.$data])),i}function r(e,t,o){return f.H(e)?e():"function"==typeof e?e(t,o):e}var s;f.Db=function(t){if(t!=e&&!(t instanceof f.O))throw Error("templateEngine must inherit from ko.templateEngine");s=t},f.Ab=function(t,o,a,l,c){if(a=a||{},(a.templateEngine||s)==e)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",l){var u=n(l);return f.B(function(){var e=o&&o instanceof f.U?o:new f.U(f.a.c(o)),s=r(t,e.$data,e),e=i(l,c,s,e,a);"replaceNode"==c&&(l=e,u=n(l))},null,{wa:function(){return!u||!f.a.nb(u)},i:u&&"replaceNode"==c?u.parentNode:u})}return f.M.wb(function(e){f.Ab(t,o,a,e,"replaceNode")})},f.kd=function(t,n,s,a,l){function c(e,t){o(t,g),s.afterRender&&s.afterRender(t,e),g=null}function u(e,o){g=l.createChildContext(e,s.as,function(e){e.$index=o});var n=r(t,e,g);return i(null,"ignoreTargetNode",n,g,s)}var g;return f.B(function(){var t=f.a.c(n)||[];"undefined"==typeof t.length&&(t=[t]),t=f.a.Ka(t,function(t){return s.includeDestroyed||t===e||null===t||!f.a.c(t._destroy)}),f.l.w(f.a.Bb,null,[a,t,u,s,c])},null,{i:a})};var a=f.a.e.I();f.d.template={init:function(e,t){var o=f.a.c(t());if("string"==typeof o||o.name)f.f.xa(e);else{if("nodes"in o){if(o=o.nodes||[],f.H(o))throw Error('The "nodes" option must be a plain, non-observable array.')}else o=f.f.childNodes(e);o=f.a.jc(o),new f.v.qa(e).nodes(o)}return{controlsDescendantBindings:!0}},update:function(t,o,n,i,r){var s,l=o();o=f.a.c(l),n=!0,i=null,"string"==typeof o?o={}:(l=o.name,"if"in o&&(n=f.a.c(o.if)),n&&"ifnot"in o&&(n=!f.a.c(o.ifnot)),s=f.a.c(o.data)),"foreach"in o?i=f.kd(l||t,n&&o.foreach||[],o,t,r):n?(r="data"in o?r.createChildContext(s,o.as):r,i=f.Ab(l||t,r,o,t)):f.f.xa(t),r=i,(s=f.a.e.get(t,a))&&"function"==typeof s.k&&s.k(),f.a.e.set(t,a,r&&r.ba()?r:e)}},f.h.ta.template=function(e){return e=f.h.yb(e),1==e.length&&e[0].unknown||f.h.ad(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},f.f.Z.template=!0}(),f.b("setTemplateEngine",f.Db),f.b("renderTemplate",f.Ab),f.a.dc=function(e,t,o){if(e.length&&t.length){var n,i,r,s,a;for(n=i=0;(!o||n<o)&&(s=e[i]);++i){for(r=0;a=t[r];++r)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(r,1),n=r=0;break}n+=r}}},f.a.ib=function(){function e(e,t,o,n,i){var r,s,a,l,c,u=Math.min,g=Math.max,h=[],d=e.length,p=t.length,m=p-d||1,v=d+p+1;for(r=0;r<=d;r++)for(l=a,h.push(a=[]),c=u(p,r+m),s=g(0,r-1);s<=c;s++)a[s]=s?r?e[r-1]===t[s-1]?l[s-1]:u(l[s]||v,a[s-1]||v)+1:s+1:r+1;for(u=[],g=[],m=[],r=d,s=p;r||s;)p=h[r][s]-1,s&&p===h[r][s-1]?g.push(u[u.length]={status:o,value:t[--s],index:s}):r&&p===h[r-1][s]?m.push(u[u.length]={status:n,value:e[--r],index:r}):(--s,--r,i.sparse||u.push({status:"retained",value:t[s]}));return f.a.dc(m,g,!i.dontLimitMoves&&10*d),u.reverse()}return function(t,o,n){return n="boolean"==typeof n?{dontLimitMoves:n}:n||{},t=t||[],o=o||[],t.length<o.length?e(t,o,"added","deleted",n):e(o,t,"deleted","added",n)}}(),f.b("utils.compareArrays",f.a.ib),function(){function t(t,o,n,i,r){var s=[],a=f.B(function(){var e=o(n,r,f.a.za(s,t))||[];0<s.length&&(f.a.qc(s,e),i&&f.l.w(i,null,[n,e,r])),s.length=0,f.a.ra(s,e)},null,{i:t,wa:function(){return!f.a.Qb(s)}});return{ca:s,B:a.ba()?a:e}}var o=f.a.e.I(),n=f.a.e.I();f.a.Bb=function(i,r,s,a,l){function c(e,t){w=h[t],y!==t&&(E[e]=w),w.qb(y++),f.a.za(w.ca,i),m.push(w),b.push(w)}function u(e,t){if(e)for(var o=0,n=t.length;o<n;o++)t[o]&&f.a.q(t[o].ca,function(n){e(n,o,t[o].ja)})}r=r||[],a=a||{};var g=f.a.e.get(i,o)===e,h=f.a.e.get(i,o)||[],d=f.a.fb(h,function(e){return e.ja}),p=f.a.ib(d,r,a.dontLimitMoves),m=[],v=0,y=0,_=[],b=[];r=[];for(var w,S,C,E=[],d=[],T=0;S=p[T];T++)switch(C=S.moved,S.status){case"deleted":C===e&&(w=h[v],w.B&&(w.B.k(),w.B=e),f.a.za(w.ca,i).length&&(a.beforeRemove&&(m.push(w),b.push(w),w.ja===n?w=null:r[T]=w),w&&_.push.apply(_,w.ca))),v++;break;case"retained":c(T,v++);break;case"added":C!==e?c(T,C):(w={ja:S.value,qb:f.N(y++)},m.push(w),b.push(w),g||(d[T]=w))}f.a.e.set(i,o,m),u(a.beforeMove,E),f.a.q(_,a.beforeRemove?f.$:f.removeNode);for(var P,T=0,g=f.f.firstChild(i);w=b[T];T++){for(w.ca||f.a.extend(w,t(i,s,w.ja,l,w.qb)),v=0;p=w.ca[v];g=p.nextSibling,P=p,v++)p!==g&&f.f.gc(i,p,P);!w.Wc&&l&&(l(w.ja,w.ca,w.qb),w.Wc=!0)}for(u(a.beforeRemove,r),T=0;T<r.length;++T)r[T]&&(r[T].ja=n);u(a.afterMove,E),u(a.afterAdd,d)}}(),f.b("utils.setDomNodeChildrenFromArrayMapping",f.a.Bb),f.W=function(){this.allowTemplateRewriting=!1},f.W.prototype=new f.O,f.W.prototype.renderTemplateSource=function(e,t,o,n){return(t=(9>f.a.C?0:e.nodes)?e.nodes():null)?f.a.V(t.cloneNode(!0).childNodes):(e=e.text(),f.a.ma(e,n))},f.W.sb=new f.W,f.Db(f.W.sb),f.b("nativeTemplateEngine",f.W),function(){f.vb=function(){var e=this.$c=function(){if(!i||!i.tmpl)return 0;try{if(0<=i.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,n,r,s){if(s=s||o,r=r||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var a=t.data("precompiled");return a||(a=t.text()||"",a=i.template(null,"{{ko_with $item.koBindingContext}}"+a+"{{/ko_with}}"),t.data("precompiled",a)),t=[n.$data],n=i.extend({koBindingContext:n},r.templateOptions),n=i.tmpl(a,t,n),n.appendTo(s.createElement("div")),i.fragments={},n},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){o.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(i.tmpl.tag.ko_code={open:"__.push($1 || '');"},i.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},f.vb.prototype=new f.O;var e=new f.vb;0<e.$c&&f.Db(e),f.b("jqueryTmplTemplateEngine",f.vb)}()})}()}(),define("thirdParty/knockout-es5",[],function(){"use strict";function e(e,o){if(!e)throw new Error("When calling ko.track, you must pass an object as the first parameter.");var i=this,r=t(e,!0);return o=o||Object.getOwnPropertyNames(e),o.forEach(function(t){if(t!==g&&t!==h&&!(t in r)){var o=e[t],s=o instanceof Array,a=i.isObservable(o)?o:s?i.observableArray(o):i.observable(o);Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:a,set:i.isWriteableObservable(a)?a:void 0}),r[t]=a,s&&n(i,a)}}),e}function t(e,t){var o=e[g];return!o&&t&&(o={},Object.defineProperty(e,g,{value:o})),o}function o(t,o,n){var i=this,r={owner:t,deferEvaluation:!0};if("function"==typeof n)r.read=n;else{if("value"in n)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');
if("function"!=typeof n.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');r.read=n.get,r.write=n.set}return t[o]=i.computed(r),e.call(i,t,[o]),t}function n(e,t){var o=null;e.computed(function(){o&&(o.dispose(),o=null);var n=t();n instanceof Array&&(o=i(e,t,n))})}function i(e,t,o){var n=r(e,o);return n.subscribe(t)}function r(e,t){var o=t[h];if(!o){o=new e.subscribable,Object.defineProperty(t,h,{value:o});var n={};s(t,o,n),a(e,t,o,n)}return o}function s(e,t,o){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(n){var i=e[n];e[n]=function(){var e=i.apply(this,arguments);return o.pause!==!0&&t.notifySubscribers(this),e}})}function a(e,t,o,n){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(i){Object.defineProperty(t,i,{enumerable:!1,value:function(){var r;n.pause=!0;try{r=e.observableArray.fn[i].apply(e.observableArray(t),arguments)}finally{n.pause=!1}return o.notifySubscribers(t),r}})})}function l(e,o){if(!e)return null;var n=t(e,!1);return n&&n[o]||null}function c(e,t){var o=l(e,t);o&&o.valueHasMutated()}function u(t){t.track=e,t.getObservable=l,t.valueHasMutated=c,t.defineProperty=o}var g="__knockoutObservables",h="__knockoutSubscribable";return{attachToKo:u}}),function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define("thirdParty/knockout.validation",["./knockout-3.4.0","exports"],e):e(ko,ko.validation={})}(function(e,t){function o(e){var t="max"===e;return function(o,n){if(r.utils.isEmptyVal(o))return!0;var i,s;void 0===n.typeAttr?(s="text",i=n):(s=n.typeAttr,i=n.value),isNaN(i)||i instanceof Date||(s="number");var a,l,c;switch(s.toLowerCase()){case"week":if(a=/^(\d{4})-W(\d{2})$/,l=o.match(a),null===l)throw new Error("Invalid value for "+e+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min");return c=i.match(a),!!c&&(t?l[1]<c[1]||l[1]===c[1]&&l[2]<=c[2]:l[1]>c[1]||l[1]===c[1]&&l[2]>=c[2]);case"month":if(a=/^(\d{4})-(\d{2})$/,l=o.match(a),null===l)throw new Error("Invalid value for "+e+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min");return c=i.match(a),!!c&&(t?l[1]<c[1]||l[1]===c[1]&&l[2]<=c[2]:l[1]>c[1]||l[1]===c[1]&&l[2]>=c[2]);case"number":case"range":return t?!isNaN(o)&&parseFloat(o)<=parseFloat(i):!isNaN(o)&&parseFloat(o)>=parseFloat(i);default:return t?o<=i:o>=i}}}function n(e,t,o){return!!t.validator(e(),void 0===o.params||a(o.params))||(e.setError(r.formatMessage(o.message||t.message,a(o.params),e)),!1)}function i(e,t,o){e.isValidating(!0);var n=function(n){var i=!1,s="";return e.__valid__()?(n.message?(i=n.isValid,s=n.message):i=n,i||(e.error(r.formatMessage(s||o.message||t.message,a(o.params),e)),e.__valid__(i)),void e.isValidating(!1)):void e.isValidating(!1)};r.utils.async(function(){t.validator(e(),void 0===o.params||a(o.params),n)})}if("undefined"==typeof e)throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in");e.validation=t;var r=e.validation,s=e.utils,a=s.unwrapObservable,l=s.arrayForEach,c=s.extend,u={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},g=c({},u);g.html5Attributes=["required","pattern","min","max","step"],g.html5InputTypes=["email","number","date"],g.reset=function(){c(g,u)},r.configuration=g,r.utils=function(){var e=(new Date).getTime(),t={},o="__ko_validation__";return{isArray:function(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"object"==typeof e},isNumber:function(e){return!isNaN(e)},isObservableArray:function(e){return!!e&&"function"==typeof e.remove&&"function"==typeof e.removeAll&&"function"==typeof e.destroy&&"function"==typeof e.destroyAll&&"function"==typeof e.indexOf&&"function"==typeof e.replace},values:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(e[o]);return t},getValue:function(e){return"function"==typeof e?e():e},hasAttribute:function(e,t){return null!==e.getAttribute(t)},getAttribute:function(e,t){return e.getAttribute(t)},setAttribute:function(e,t,o){return e.setAttribute(t,o)},isValidatable:function(e){return!!(e&&e.rules&&e.isValid&&e.isModified)},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},newId:function(){return e+=1},getConfigOptions:function(e){var t=r.utils.contextFor(e);return t||r.configuration},setDomData:function(e,n){var i=e[o];i||(e[o]=i=r.utils.newId()),t[i]=n},getDomData:function(e){var n=e[o];if(n)return t[n]},contextFor:function(e){switch(e.nodeType){case 1:case 8:var t=r.utils.getDomData(e);if(t)return t;if(e.parentNode)return r.utils.contextFor(e.parentNode)}},isEmptyVal:function(e){return void 0===e||(null===e||(""===e||void 0))},getOriginalElementTitle:function(e){var t=r.utils.getAttribute(e,"data-orig-title"),o=e.title,n=r.utils.hasAttribute(e,"data-orig-title");return n?t:o},async:function(e){window.setImmediate?window.setImmediate(e):window.setTimeout(e,0)},forEach:function(e,t){if(r.utils.isArray(e))return l(e,t);for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)}}}();var h=function(){function t(e){l(e.subscriptions,function(e){e.dispose()}),e.subscriptions=[]}function o(e){e.options.deep&&(l(e.flagged,function(e){delete e.__kv_traversed}),e.flagged.length=0),e.options.live||t(e)}function n(e,n){n.validatables=[],t(n),i(e,n),o(n)}function i(t,o,n){var r=[],s=t.peek?t.peek():t;t.__kv_traversed!==!0&&(o.options.deep&&(t.__kv_traversed=!0,o.flagged.push(t)),n=void 0!==n?n:o.options.deep?1:-1,e.isObservable(t)&&(t.errors||d.isValidatable(t)||t.extend({validatable:!0}),o.validatables.push(t),o.options.live&&d.isObservableArray(t)&&o.subscriptions.push(t.subscribe(function(){o.graphMonitor.valueHasMutated()}))),s&&!s._destroy&&(d.isArray(s)?r=s:d.isObject(s)&&(r=d.values(s))),0!==n&&d.forEach(r,function(t){!t||t.nodeType||e.isComputed(t)&&!t.rules||i(t,o,n+1)}))}function u(e){var t=[];return l(e,function(e){d.isValidatable(e)&&!e.isValid()&&t.push(e.error.peek())}),t}var g=0,h=r.configuration,d=r.utils;return{init:function(e,t){g>0&&!t||(e=e||{},e.errorElementClass=e.errorElementClass||e.errorClass||h.errorElementClass,e.errorMessageClass=e.errorMessageClass||e.errorClass||h.errorMessageClass,c(h,e),h.registerExtenders&&r.registerExtenders(),g=1)},reset:r.configuration.reset,group:function(t,o){o=c(c({},h.grouping),o);var i={options:o,graphMonitor:e.observable(),flagged:[],subscriptions:[],validatables:[]},r=null;return r=o.observable?e.computed(function(){return i.graphMonitor(),n(t,i),u(i.validatables)}):function(){return n(t,i),u(i.validatables)},r.showAllMessages=function(e){void 0===e&&(e=!0),r.forEach(function(t){d.isValidatable(t)&&t.isModified(e)})},r.isAnyMessageShown=function(){var e;return e=!!r.find(function(e){return d.isValidatable(e)&&!e.isValid()&&e.isModified()})},r.filter=function(e){return e=e||function(){return!0},r(),s.arrayFilter(i.validatables,e)},r.find=function(e){return e=e||function(){return!0},r(),s.arrayFirst(i.validatables,e)},r.forEach=function(e){e=e||function(){},r(),l(i.validatables,e)},r.map=function(e){return e=e||function(e){return e},r(),s.arrayMap(i.validatables,e)},r._updateState=function(e){if(!d.isObject(e))throw new Error("An object is required.");return t=e,o.observable?void i.graphMonitor.valueHasMutated():(n(e,i),u(i.validatables))},r},formatMessage:function(e,t,o){if(d.isObject(t)&&t.typeAttr&&(t=t.value),"function"==typeof e)return e(t,o);var n=a(t);return null==n&&(n=[]),d.isArray(n)||(n=[n]),e.replace(/{(\d+)}/gi,function(e,t){return"undefined"!=typeof n[t]?n[t]:e})},addRule:function(e,t){e.extend({validatable:!0});var o=!!s.arrayFirst(e.rules(),function(e){return e.rule&&e.rule===t.rule});return o||e.rules.push(t),e},addAnonymousRule:function(e,t){void 0===t.message&&(t.message="Error"),t.onlyIf&&(t.condition=t.onlyIf),r.addRule(e,t)},addExtender:function(t){e.extenders[t]=function(e,o){return o&&(o.message||o.onlyIf)?r.addRule(e,{rule:t,message:o.message,params:!!d.isEmptyVal(o.params)||o.params,condition:o.onlyIf}):r.addRule(e,{rule:t,params:o})}},registerExtenders:function(){if(h.registerExtenders)for(var t in r.rules)r.rules.hasOwnProperty(t)&&(e.extenders[t]||r.addExtender(t))},insertValidationMessage:function(e){var t=document.createElement("SPAN");return t.className=d.getConfigOptions(e).errorMessageClass,d.insertAfter(e,t),t},parseInputValidationAttributes:function(e,t){l(r.configuration.html5Attributes,function(o){if(d.hasAttribute(e,o)){var n=e.getAttribute(o)||!0;if("min"===o||"max"===o){var i=e.getAttribute("type");"undefined"!=typeof i&&i||(i="text"),n={typeAttr:i,value:n}}r.addRule(t(),{rule:o,params:n})}});var o=e.getAttribute("type");l(r.configuration.html5InputTypes,function(e){e===o&&r.addRule(t(),{rule:"date"===e?"dateISO":e,params:!0})})},writeInputValidationAttributes:function(t,o){var n=o();if(n&&n.rules){var i=n.rules();l(r.configuration.html5Attributes,function(o){var n=s.arrayFirst(i,function(e){return e.rule&&e.rule.toLowerCase()===o.toLowerCase()});n&&e.computed({read:function(){var i=e.unwrap(n.params);"pattern"===n.rule&&i instanceof RegExp&&(i=i.source),t.setAttribute(o,i)},disposeWhenNodeIsRemoved:t})}),i=null}},makeBindingHandlerValidatable:function(t){var o=e.bindingHandlers[t].init;e.bindingHandlers[t].init=function(t,n,i,r,s){return o(t,n,i,r,s),e.bindingHandlers.validationCore.init(t,n,i,r,s)}},setRules:function(t,o){var n=function(t,o){if(t&&o)for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];if(t[i]){var l=t[i],c=a(l),u={},g={};for(var h in s)s.hasOwnProperty(h)&&(r.rules[h]?u[h]=s[h]:g[h]=s[h]);if(e.isObservable(l)&&l.extend(u),c&&d.isArray(c))for(var p=0;p<c.length;p++)n(c[p],g);else n(c,g)}}};n(t,o)}}}();c(e.validation,h),r.rules={},r.rules.required={validator:function(e,t){var o;return void 0===e||null===e?!t:(o=e,"string"==typeof e&&(o=String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")),!t||(o+"").length>0)},message:"This field is required."},r.rules.min={validator:o("min"),message:"Please enter a value greater than or equal to {0}."},r.rules.max={validator:o("max"),message:"Please enter a value less than or equal to {0}."},r.rules.minLength={validator:function(e,t){if(r.utils.isEmptyVal(e))return!0;var o=r.utils.isNumber(e)?""+e:e;return o.length>=t},message:"Please enter at least {0} characters."},r.rules.maxLength={validator:function(e,t){if(r.utils.isEmptyVal(e))return!0;var o=r.utils.isNumber(e)?""+e:e;return o.length<=t},message:"Please enter no more than {0} characters."},r.rules.pattern={validator:function(e,t){return r.utils.isEmptyVal(e)||null!==e.toString().match(t)},message:"Please check this value."},r.rules.step={validator:function(e,t){if(r.utils.isEmptyVal(e)||"any"===t)return!0;var o=100*e%(100*t);return Math.abs(o)<1e-5||Math.abs(1-o)<1e-5},message:"The value must increment by {0}."},r.rules.email={validator:function(e,t){return!t||(r.utils.isEmptyVal(e)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e))},message:"Please enter a proper email address."},r.rules.date={validator:function(e,t){return!t||(r.utils.isEmptyVal(e)||t&&!/Invalid|NaN/.test(new Date(e)))},message:"Please enter a proper date."},r.rules.dateISO={validator:function(e,t){return!t||(r.utils.isEmptyVal(e)||t&&/^\d{4}[-\/](?:0?[1-9]|1[012])[-\/](?:0?[1-9]|[12][0-9]|3[01])$/.test(e))},message:"Please enter a proper date."},r.rules.number={validator:function(e,t){return!t||(r.utils.isEmptyVal(e)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e))},message:"Please enter a number."},r.rules.digit={validator:function(e,t){return!t||(r.utils.isEmptyVal(e)||t&&/^\d+$/.test(e))},message:"Please enter a digit."},r.rules.phoneUS={validator:function(e,t){return!t||(!!r.utils.isEmptyVal(e)||"string"==typeof e&&(e=e.replace(/\s+/g,""),t&&e.length>9&&e.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)))},message:"Please specify a valid phone number."},r.rules.equal={validator:function(e,t){var o=t;return e===r.utils.getValue(o)},message:"Values must equal."},r.rules.notEqual={validator:function(e,t){var o=t;return e!==r.utils.getValue(o)},message:"Please choose another value."},r.rules.unique={validator:function(e,t){var o=r.utils.getValue(t.collection),n=r.utils.getValue(t.externalValue),i=0;return!e||!o||(s.arrayFilter(o,function(o){e===(t.valueAccessor?t.valueAccessor(o):o)&&i++}),i<(n?1:2))},message:"Please make sure the value is unique."},function(){r.registerExtenders()}(),e.bindingHandlers.validationCore=function(){return{init:function(t,o,n,i,s){var a=r.utils.getConfigOptions(t),l=o();if(a.parseInputAttributes&&r.utils.async(function(){r.parseInputValidationAttributes(t,o)}),a.insertMessages&&r.utils.isValidatable(l)){var c=r.insertValidationMessage(t);a.messageTemplate?e.renderTemplate(a.messageTemplate,{field:l},null,c,"replaceNode"):e.applyBindingsToNode(c,{validationMessage:l})}a.writeInputAttributes&&r.utils.isValidatable(l)&&r.writeInputValidationAttributes(t,o),a.decorateInputElement&&r.utils.isValidatable(l)&&e.applyBindingsToNode(t,{validationElement:l})}}}(),r.makeBindingHandlerValidatable("value"),r.makeBindingHandlerValidatable("checked"),e.bindingHandlers.textInput&&r.makeBindingHandlerValidatable("textInput"),r.makeBindingHandlerValidatable("selectedOptions"),e.bindingHandlers.validationMessage={update:function(t,o){var n=o(),i=r.utils.getConfigOptions(t),l=(a(n),!1),c=!1;if(null===n||"undefined"==typeof n)throw new Error("Cannot bind validationMessage to undefined value. data-bind expression: "+t.getAttribute("data-bind"));l=n.isModified&&n.isModified(),c=n.isValid&&n.isValid();var u=null;i.messagesOnModified&&!l||(u=c?null:n.error);var g=!(i.messagesOnModified&&!l)&&!c,h="none"!==t.style.display;i.allowHtmlMessages?s.setHtml(t,u):e.bindingHandlers.text.update(t,function(){return u}),h&&!g?t.style.display="none":!h&&g&&(t.style.display="")}},e.bindingHandlers.validationElement={update:function(t,o,n){var i=o(),s=r.utils.getConfigOptions(t),l=(a(i),!1),c=!1;if(null===i||"undefined"==typeof i)throw new Error("Cannot bind validationElement to undefined value. data-bind expression: "+t.getAttribute("data-bind"));l=i.isModified&&i.isModified(),c=i.isValid&&i.isValid();var u=function(){var e={},t=!(s.decorateElementOnModified&&!l)&&!c;return e[s.errorElementClass]=t,e};e.bindingHandlers.css.update(t,u,n),s.errorsAsTitle&&e.bindingHandlers.attr.update(t,function(){var e=!s.errorsAsTitleOnModified||l,o=r.utils.getOriginalElementTitle(t);return e&&!c?{title:i.error,"data-orig-title":o}:!e||c?{title:o,"data-orig-title":null}:void 0})}},e.bindingHandlers.validationOptions=function(){return{init:function(e,t,o,n,i){var s=a(t());if(s){var l=c({},r.configuration);c(l,s),r.utils.setDomData(e,l)}}}}(),e.extenders.validation=function(e,t){return l(r.utils.isArray(t)?t:[t],function(t){r.addAnonymousRule(e,t)}),e},e.extenders.validatable=function(t,o){if(r.utils.isObject(o)||(o={enable:o}),"enable"in o||(o.enable=!0),o.enable&&!r.utils.isValidatable(t)){var n=r.configuration.validate||{},i={throttleEvaluation:o.throttle||n.throttle};t.error=e.observable(null),t.rules=e.observableArray(),t.isValidating=e.observable(!1),t.__valid__=e.observable(!0),t.isModified=e.observable(!1),t.isValid=e.computed(t.__valid__),t.setError=function(e){var o=t.error.peek(),n=t.__valid__.peek();t.error(e),t.__valid__(!1),o===e||n||t.isValid.notifySubscribers()},t.clearError=function(){return t.error(null),t.__valid__(!0),t};var s=t.subscribe(function(){t.isModified(!0)}),a=e.computed(c({read:function(){t(),t.rules();return r.validateObservable(t),!0}},i));c(a,i),t._disposeValidation=function(){t.isValid.dispose(),t.rules.removeAll(),s.dispose(),a.dispose(),delete t.rules,delete t.error,delete t.isValid,delete t.isValidating,delete t.__valid__,delete t.isModified,delete t.setError,delete t.clearError,delete t._disposeValidation}}else o.enable===!1&&t._disposeValidation&&t._disposeValidation();return t},r.validateObservable=function(e){for(var t,o,s=0,a=e.rules(),l=a.length;s<l;s++)if(o=a[s],!o.condition||o.condition())if(t=o.rule?r.rules[o.rule]:o,t.async||o.async)i(e,t,o);else if(!n(e,t,o))return!1;return e.clearError(),!0};var d,p={};r.defineLocale=function(e,t){return e&&t?(p[e.toLowerCase()]=t,t):null},r.locale=function(e){if(e){if(e=e.toLowerCase(),!p.hasOwnProperty(e))throw new Error("Localization "+e+" has not been loaded.");r.localize(p[e]),d=e}return d},r.localize=function(e){var t=r.rules;for(var o in e)t.hasOwnProperty(o)&&(t[o].message=e[o])},function(){var e={},t=r.rules;for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o].message);r.defineLocale("en-us",e)}(),d="en-us",e.applyBindingsWithValidation=function(t,o,n){var i,s=document.body;o&&o.nodeType?(s=o,i=n):i=o,r.init(),i&&(i=c(c({},r.configuration),i),r.utils.setDomData(s,i)),e.applyBindings(t,s)};var f=e.applyBindings;e.applyBindings=function(e,t){r.init(),f(e,t)},e.validatedObservable=function(t,o){if(!o&&!r.utils.isObject(t))return e.observable(t).extend({validatable:!0});var n=e.observable(t);return n.errors=r.group(r.utils.isObject(t)?t:{},o),n.isValid=e.observable(0===n.errors().length),e.isObservable(n.errors)?n.errors.subscribe(function(e){n.isValid(0===e.length)}):e.computed(n.errors).subscribe(function(e){n.isValid(0===e.length)}),n.subscribe(function(e){r.utils.isObject(e)||(e={}),n.errors._updateState(e),n.isValid(0===n.errors().length)}),n}}),define("thirdParty/knockout",["./knockout-3.4.0","./knockout-es5","./knockout.validation"],function(e,t,o){"use strict";return t.attachToKo(e),o.init({registerExtenders:!0,messagesOnModified:!0,insertMessages:!0,parseInputAttributes:!0,messageTemplate:null},!0),e}),function(e){"use strict";e("thirdParty/when",[],function(){function e(e,o,n,i){return t(e).then(o,n,i)}function t(e){var t,o;return e instanceof n?t=e:a(e)?(o=s(),e.then(function(e){o.resolve(e)},function(e){o.reject(e)},function(e){o.progress(e)}),t=o.promise):t=i(e),t}function o(t){return e(t,r)}function n(e){this.then=e}function i(e){var o=new n(function(o){try{return t(o?o(e):e)}catch(e){return r(e)}});return o}function r(e){var o=new n(function(o,n){try{return n?t(n(e)):r(e)}catch(e){return r(e)}});return o}function s(){function e(e,t,o){return h(e,t,o)}function o(e){return p(e)}function i(e){return p(r(e))}function a(e){return d(e)}var l,c,u,g,h,d,p;return c=new n(e),l={then:e,resolve:o,reject:i,progress:a,promise:c,resolver:{resolve:o,reject:i,progress:a}},u=[],g=[],h=function(e,t,o){var n,i;return n=s(),i="function"==typeof o?function(e){try{n.progress(o(e))}catch(e){n.progress(e)}}:function(e){n.progress(e)},u.push(function(o){o.then(e,t).then(n.resolve,n.reject,i)}),g.push(i),n.promise},d=function(e){return f(g,e),e},p=function(e){return e=t(e),h=e.then,p=t,d=v,f(u,e),g=u=w,e},l}function a(e){return e&&"function"==typeof e.then}function l(t,o,n,i,r){return m(2,arguments),e(t,function(t){function a(e){f(e)}function l(e){p(e)}var c,u,g,h,d,p,f,m,y,_;if(y=t.length>>>0,c=Math.max(0,Math.min(o,y)),g=[],u=y-c+1,h=[],d=s(),c)for(m=d.progress,f=function(e){h.push(e),--u||(p=f=v,d.reject(h))},p=function(e){g.push(e),--c||(p=f=v,d.resolve(g))},_=0;_<y;++_)_ in t&&e(t[_],l,a,m);else d.resolve(g);return d.then(n,i,r)})}function c(e,t,o,n){function i(e){return t?t(e[0]):e[0]}return l(e,1,i,o,n)}function u(e,t,o,n){return m(1,arguments),h(e,y).then(t,o,n)}function g(){return h(arguments,y)}function h(t,o){return e(t,function(t){var n,i,r,a,l,c;if(r=i=t.length>>>0,n=[],c=s(),r)for(a=function(t,i){e(t,o).then(function(e){n[i]=e,--r||c.resolve(n)},c.reject)},l=0;l<i;l++)l in t?a(t[l],l):--r;else c.resolve(n);return c.promise})}function d(t,o){var n=b.call(arguments,1);return e(t,function(t){var i;return i=t.length,n[0]=function(t,n,r){return e(t,function(t){return e(n,function(e){return o(t,e,r,i)})})},_.apply(t,n)})}function p(t,o,n){var i=arguments.length>2;return e(t,function(e){return e=i?n:e,o.resolve(e),e},function(e){return o.reject(e),r(e)},o.progress)}function f(e,t){for(var o,n=0;o=e[n++];)o(t)}function m(e,t){for(var o,n=t.length;n>e;)if(o=t[--n],null!=o&&"function"!=typeof o)throw new Error("arg "+n+" must be a function")}function v(){}function y(e){return e}var _,b,w;return e.defer=s,e.resolve=t,e.reject=o,e.join=g,e.all=u,e.map=h,e.reduce=d,e.any=c,e.some=l,e.chain=p,e.isPromise=a,n.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(w,e)},yield:function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return u(t,function(t){return e.apply(w,t)})})}},b=[].slice,_=[].reduce||function(e){var t,o,n,i,r;if(r=0,t=Object(this),i=t.length>>>0,o=arguments,o.length<=1)for(;;){if(r in t){n=t[r++];break}if(++r>=i)throw new TypeError}else n=o[1];for(;r<i;++r)r in t&&(n=e(n,t[r],r,t));return n},e})}("function"==typeof define&&define.amd?define:function(e){"object"==typeof exports?module.exports=e():this.when=e()}),define("core/loadJsonp",["../thirdParty/when","./DeveloperError"],function(e,t){var o=function(n){var i=o;return e(n.url,function(o){function r(){}function s(){l.parentNode&&l.parentNode.removeChild(l),window[u]=r,c&&clearTimeout(c)}var a=e.defer();i._callbackIndex++;var l,c,u="jsonp"+i._callbackIndex,g=null!=n.timeout?n.timeout:6e4,h=encodeURIComponent;return g&&(c=setTimeout(function(){s(),a.reject(new t("服务器请求超时"))},g)),window[u]=function(e){s(),a.resolve(e)},o+=(~o.indexOf("?")?"&":"?")+"callback="+h(u),o=o.replace("?&","?"),l=document.createElement("script"),l.src=o,document.getElementsByTagName("head")[0].appendChild(l),a.promise})};return o._callbackIndex=0,o}),define("core/resources",["./baseUtil"],function(e){return{mapIcon:e.getAbsoluteUrl("css/images/markers_new2_4ab0bc5.png"),tianditu:e.getAbsoluteUrl("assets/common/tianditu.png"),geoq:e.getAbsoluteUrl("assets/common/geoq.png"),osm:e.getAbsoluteUrl("assets/common/osm.png")}}),define("core/loadWithXhr",["../thirdParty/when","./defined","./DeveloperError"],function(e,t,o){"use strict";function n(t){var o=t.responseType,i=t.method,r=t.data,s=t.headers,a=t.overrideMimeType;return e(t.url,function(t){var l=e.defer();return n.load(t,o,i,r,s,l,a),l.promise})}function i(e,t){var o=decodeURIComponent(t);return e?atob(o):o}function r(e,t){for(var o=i(e,t),n=new ArrayBuffer(o.length),r=new Uint8Array(n),s=0;s<o.length;s++)r[s]=o.charCodeAt(s);return n}function s(e,t){var o=e[1],n=!!e[2],s=e[3];switch(t){case"":case"text":return i(n,s);case"arraybuffer":return r(n,s);case"blob":var a=r(n,s);return new Blob([a],{type:o});case"document":var l=new DOMParser;return l.parseFromString(i(n,s),o);case"json":return JSON.parse(i(n,s))}}var a=/^data:(.*?)(;base64)?,(.*)$/;return n.load=function(e,n,i,r,l,c,u){var g=a.exec(e);if(null!==g)return void c.resolve(s(g,n));var h=new XMLHttpRequest;if(t(u)&&t(h.overrideMimeType)&&h.overrideMimeType(u),h.open(i,e,!0),t(l))for(var d in l)l.hasOwnProperty(d)&&h.setRequestHeader(d,l[d]);t(n)&&(h.responseType=n),h.onload=function(){if(h.status<200||h.status>=300)return void c.reject(new o("服务器请求错误"));var e=h.response,i=h.responseType;if(!t(e)||t(n)&&i!==n)if("json"===n&&"string"==typeof e)try{c.resolve(JSON.parse(e))}catch(e){c.reject(e)}else(""===i||"document"===i)&&t(h.responseXML)&&h.responseXML.hasChildNodes()?c.resolve(h.responseXML):""!==i&&"text"!==i||!t(h.responseText)?c.reject(new o("返回结果类型不正确")):c.resolve(h.responseText);else c.resolve(e)},h.onerror=function(e){c.reject(new o("服务器请求错误"))},"string"==typeof r?h.send(r):h.send(JSON.stringify(r))},n.defaultLoad=n.load,n}),define("thirdParty/text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function o(e,o,n,i){if(o===i)return!0;if(e===n){if("http"===e)return t(o,"80")===t(i,"80");if("https"===e)return t(o,"443")===t(i,"443")}return!1}var n,i,r,s,a,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,g="undefined"!=typeof location&&location.href,h=g&&location.protocol&&location.protocol.replace(/\:/,""),d=g&&location.hostname,p=g&&(location.port||void 0),f={},m=e.config&&e.config()||{};return n={version:"2.0.15",strip:function(e){if(e){e=e.replace(c,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,o;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){o=l[t];try{e=new ActiveXObject(o)}catch(e){}if(e){l=[o];break}}return e},parseName:function(e){var t,o,n,i=!1,r=e.lastIndexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return r!==-1&&(!s||r>1)?(t=e.substring(0,r),o=e.substring(r+1)):t=e,n=o||t,r=n.indexOf("!"),r!==-1&&(i="strip"===n.substring(r+1),n=n.substring(0,r),o?o=n:t=n),{moduleName:t,ext:o,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,i,r){var s,a,l,c=n.xdRegExp.exec(e);return!c||(s=c[2],a=c[3],a=a.split(":"),l=a[1],a=a[0],(!s||s===t)&&(!a||a.toLowerCase()===i.toLowerCase())&&(!l&&!a||o(s,l,t,r)))},finishLoad:function(e,t,o,i){o=t?n.strip(o):o,m.isBuild&&(f[e]=o),i(o)},load:function(e,t,o,i){if(i&&i.isBuild&&!i.inlineText)return void o();m.isBuild=i&&i.isBuild;var r=n.parseName(e),s=r.moduleName+(r.ext?"."+r.ext:""),a=t.toUrl(s),l=m.useXhr||n.useXhr;return 0===a.indexOf("empty:")?void o():void(!g||l(a,h,d,p)?n.get(a,function(t){n.finishLoad(e,r.strip,t,o)},function(e){o.error&&o.error(e)}):t([s],function(e){n.finishLoad(r.moduleName+"."+r.ext,r.strip,e,o)}))},write:function(e,t,o,i){if(f.hasOwnProperty(t)){var r=n.jsEscape(f[t]);o.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,o,i,r){var s=n.parseName(t),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=o.toUrl(s.moduleName+a)+".js";n.load(l,o,function(t){var o=function(e){return i(c,e)};o.asModule=function(e,t){return i.asModule(e,c,t)},n.write(e,l,o,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),n.get=function(e,t,o){try{var n=i.readFileSync(e,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),t(n)}catch(e){o&&o(e)}}):"xhr"===m.env||!m.env&&n.createXhr()?n.get=function(e,t,o,i){var r,s=n.createXhr();if(s.open("GET",e,!0),i)for(r in i)i.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),i[r]);m.onXhr&&m.onXhr(s,e),s.onreadystatechange=function(n){var i,r;4===s.readyState&&(i=s.status||0,i>399&&i<600?(r=new Error(e+" HTTP status: "+i),r.xhr=s,o&&o(r)):t(s.responseText),m.onXhrComplete&&m.onXhrComplete(s,e))},s.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var o,n,i="utf-8",r=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),i)),l="";try{for(o=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&o.append(n);null!==(n=a.readLine());)o.append(s),o.append(n);l=String(o.toString())}finally{a.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),a="@mozilla.org/windows-registry-key;1"in r,n.get=function(e,t){var o,n,i,l={};a&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{o=r["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),o.init(i,1,0,!1),n=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),n.init(o,"utf-8",o.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(o.available(),l),n.close(),o.close(),t(l.value)}catch(e){throw new Error((i&&i.path||"")+": "+e)}}),n}),define("thirdParty/text!widgets/SearchResultItems/SearchResultItems.html",[],function(){return'<div class="xbSearchResult"\r\n     data-bind="css:{hidden:pagedResultItems().Data.length==0&&choosedItem()==null,autoHeight:itemsClose}">\r\n    <div class="itemsContainor hidden" data-bind="css:{hidden:pagedResultItems().Data.length==0}">\r\n        <!-- ko if:itemsClose -->\r\n        <div class="goback" data-bind="click:function(){itemsClose(false);choosedItem(null);}">\r\n            <i class="glyphicon glyphicon-chevron-left"></i><span>返回搜索结果</span>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- ko if:!itemsClose() -->\r\n        <div class="items">\r\n            <div class="resultTitle">\r\n                搜索结果：共<span data-bind="text:pagedResultItems().TotalRecords">100</span>个小班,<span\r\n                    data-bind="text:pagedResultItems().TotalPages">0</span>页\r\n            </div>\r\n            <div class="wrapper">\r\n                <ul data-bind="foreach:pagedResultItems().Data">\r\n                    <li data-bind="click:function(){$parent.displayModel(\'小班\');$parent.showResult($index());},event:{mouseover:function(){$parent.selectResult($index());}}">\r\n                        <div class="mapMaker">\r\n                            <a data-bind="attr:{class:\'no-\'+(1+$index())}" href="javascript:void(0)"></a>\r\n                        </div>\r\n                        <div class="xbResultInfo" data-bind="if:$parent.displayModel()==\'小班\'">\r\n                            <p class="title">\r\n                                <span data-bind="text:LinBanHao">0000</span>林班<span\r\n                                    data-bind="text:XiaoBanHao">0014</span>小班<span\r\n                                    data-bind="text:\'(\'+Cun+\')\'">姚家庄村委会</span>\r\n                            </p>\r\n                            <p>\r\n                                面积<span data-bind="text:MianJi">4.51</span>hm²<span\r\n                                    data-bind="if:DiLei!=\'非林地\'">, 蓄积<span\r\n                                    data-bind="text:XuJi">74.3248</span>m³</span> <span\r\n                                    data-bind="if:XuJi!=0">,株数<span\r\n                                    data-bind="text:ZhuShu">74</span>株</span>\r\n                            </p>\r\n                            <p>\r\n                                <!-- ko if:$parent.trim(LinZhong)!=\'\' -->\r\n                                <span data-bind="text:LinZhong">水土保持林</span>\r\n                                <!-- /ko -->\r\n                                <!-- ko if:$parent.trim(YSSZ)!=\'\' -->\r\n                                <span data-bind="text:YSSZ" class="YSSZ round">针叶混</span>\r\n                                <!-- /ko -->\r\n                                <!-- ko if:$parent.trim(QiYuan)!=\'\' -->\r\n                                <span data-bind="text:QiYuan"\r\n                                      class="QiYuan round">针叶混</span>\r\n                                <!-- /ko -->\r\n                                <!-- ko if:$parent.trim(DiLei)!=\'\' -->\r\n                                <span data-bind="text:DiLei"\r\n                                      class="DiLei round">疏林地</span>\r\n                                <!-- /ko -->\r\n                            </p>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <nav>\r\n                <ul class="pagination">\r\n                    <li data-bind="css:{disabled:pagedResultItems().PageNumber<=1}">\r\n                        <a href="#" aria-label="Previous" data-bind="click:prePage">\r\n                            <span aria-hidden="true">上一页</span>\r\n                        </a>\r\n                    </li>\r\n                    <!-- ko foreach: _availabelPageIndexes -->\r\n                    <li data-bind="css:{active:$parent.pagedResultItems().PageNumber==$data}">\r\n                        <a href="#" data-bind="click:$parent.gotoPage,text:$data"></a>\r\n                    </li>\r\n                    <!-- /ko -->\r\n                    <li data-bind="css:{disabled:pagedResultItems().PageNumber>=pagedResultItems().TotalPages}">\r\n                        <a href="#" aria-label="Next" data-bind="click:nextPage">\r\n                            <span aria-hidden="true">下一页</span>\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </nav>\r\n        </div>\r\n        <!-- /ko -->\r\n    </div>\r\n    <div class="itemInfo hidden" data-bind="css:{hidden:choosedItem()==null}">\r\n        <div class="title">\r\n            <!-- ko if:displayModel()==\'小班\' -->\r\n            <span data-bind="text:choosedItem()?choosedItem().XiaoBanHao+\'号小班\':\'\'"></span>\r\n            <!-- /ko -->\r\n            <!-- ko if:displayModel()==\'自定义\' -->\r\n            <span data-bind="text:choosedItem()?choosedItem().Name:\'\'"></span>\r\n            <!-- /ko -->\r\n        </div>\r\n        <!-- ko if:displayModel()==\'小班\' -->\r\n        <!-- ko with:choosedItem -->\r\n        <div class="info1 info">\r\n            <img data-bind="attr:{src:\'\'+XiaoBanID,onerror:\'this.src=\\\'\'+$parent.resources.notFoundImg+\'\\\'\'}"/>\r\n            <div>\r\n                <div>\r\n                    <p>\r\n                        <span data-bind="text:Sheng"></span>\r\n                        <span data-bind="text:Shi"></span>\r\n                    </p>\r\n                    <p>\r\n                        <span data-bind="text:Xian"></span>\r\n                        <span data-bind="text:Xiang"></span>\r\n                    </p>\r\n                    <p>\r\n                        <span data-bind="text:Cun"></span>\r\n                        <span data-bind="text:LingChang"></span>\r\n                    </p>\r\n                    <p>\r\n                        <span data-bind="text:LinBanHao">0000</span>林班\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="info info2">\r\n            <table>\r\n                <tr class="tableHeader">\r\n                    <td>地类</td>\r\n                    <td>林种</td>\r\n                    <td>起源</td>\r\n                </tr>\r\n                <tr>\r\n                    <td data-bind="text:DiLei"></td>\r\n                    <td data-bind="text:LinZhong"></td>\r\n                    <td data-bind="text:QiYuan"></td>\r\n                </tr>\r\n                <tr class="tableHeader">\r\n                    <td>面积</td>\r\n                    <td>蓄积</td>\r\n                    <td>株数</td>\r\n                </tr>\r\n                <tr>\r\n                    <td data-bind="text:MianJi"></td>\r\n                    <td data-bind="text:XuJi"></td>\r\n                    <td data-bind="text:ZhuShu"></td>\r\n                </tr>\r\n                <tr class="tableHeader">\r\n                    <td>森林类别</td>\r\n                    <td>公益林事权</td>\r\n                    <td>公益林保护</td>\r\n                </tr>\r\n                <tr>\r\n                    <td data-bind="text:SLLB"></td>\r\n                    <td data-bind="text:GYLSQ"></td>\r\n                    <td data-bind="text:GYLBH"></td>\r\n                </tr>\r\n                <tr class="tableHeader">\r\n                    <td>优势树种</td>\r\n                    <td>郁闭度</td>\r\n                    <td>树种结构</td>\r\n                </tr>\r\n                <tr>\r\n                    <td data-bind="text:YSSZ"></td>\r\n                    <td data-bind="text:YuBiDu"></td>\r\n                    <td data-bind="text:SZJG"></td>\r\n                </tr>\r\n            </table>\r\n            <div>\r\n                <a class="pull-right" data-bind="attr:{href:$parent.xbCardUrl()+\'?xiaobanId=\'+XiaoBanID}"\r\n                   target="_blank">更多小班因子>></a>\r\n            </div>\r\n        </div>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n        <!-- ko if:displayModel()==\'自定义\' -->\r\n        <iframe data-bind="attr:{src:choosedItem()?choosedItem().Url:\'\'}"></iframe>\r\n        <!-- /ko -->\r\n\r\n    </div>\r\n</div>\r\n';
}),define("widgets/SearchResultItems/SearchResultItemsViewModel",["../../thirdParty/knockout","../../core/loadWithXhr","../../core/resources"],function(e,t,o){var n=null,i=function(t,i){this._contMap=t,this.resources=o,n=this,this._evnts=[],this.markerLayer=null,this.displayModel=e.observable("小班"),this._availabelPageIndexes=e.observableArray([]),this.itemsClose=e.observable(!1),this.xbShapeLayer=null,this.xbCardUrl=e.observable(i.xbCardUrl),this.pagedResultItems=e.observable({Data:[]}),this.choosedItem=e.observable(),this.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}};return i.prototype.init=function(){function e(e,t){var o=t-e,n=Math.random();return e+Math.round(n*o)}this.markerLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]})}),this.markerLayer.set("altitudeMode","clampToGround",!1);var t=function(e,t){var o=19,n=e.get("XiaoBanHao");return t>o&&(n=""),n},o=function(o,n){return o.fill||(o.fill=new ol.style.Fill({color:"rgba("+e(0,255)+", "+e(0,255)+", "+e(0,255)+", 0.5)"})),[new ol.style.Style({stroke:new ol.style.Stroke({color:"blue",width:1}),fill:o.fill,text:new ol.style.Text({textAlign:"center",text:t(o,n),fill:new ol.style.Fill({color:"red"}),stroke:new ol.style.Stroke({color:"white",width:3}),offsetY:6})})]};this.xbShapeLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]}),maxResolution:70,style:o}),this._contMap.layerManager.addLayer(this.xbShapeLayer,!0),this._contMap.layerManager.addLayer(this.markerLayer,!0);var n=this;this._contMap.scene.map2d.on("pointermove",function(e){if(!e.dragging){var t=n._contMap.scene.map2d.forEachFeatureAtPixel(e.pixel,function(e){return e},this,function(e){return e===n.markerLayer});t?n.chooseMarkerFeature(t.get("index"),n):n.chooseMarkerFeature(-1,n)}}),this._contMap.scene.map2d.on("click",function(e){var t=n._contMap.scene.map2d.forEachFeatureAtPixel(e.pixel,function(e){return e},this,function(e){return e===n.markerLayer});t&&(n.itemsClose(!0),n.showResult(t.get("index")))}),this._contMap.scene.map2d.on("pointerdrag",function(e){n.itemsClose(!0)})},i.prototype.showSearchResult=function(e){this.clearSearchResult();var t=e.PageNumber,n=Math.floor(t/5);if(n=t%5===0?n:n+1,this._availabelPageIndexes([]),n>0){var i=5*(n-1)+1,r=5*n;r=r>this.pagedResultItems.TotalPages?this.pagedResultItems.TotalPages:r;for(var s=i;s<=r;s++)this._availabelPageIndexes.push(s)}this.pagedResultItems(e);for(var a=new ol.format.WKT,l=ol.extent.createEmpty(),s=0;s<e.Data.length;s++){var c=e.Data[s],u=a.readFeature(c.ShapeWkt,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});c.index=s,u.setProperties(c,!1),ol.extent.extend(l,u.getGeometry().getExtent()),this.xbShapeLayer.getSource().addFeature(u);var g=u.getGeometry().getInteriorPoint();u=new ol.Feature({geometry:g}),u.setProperties(c,!1);var h=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:o.mapIcon,offset:[18*s,139],size:[18,27]})}),d=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:o.mapIcon,offset:[18*s,166],size:[18,27]})});u.unselectedStyle=h,u.selectedStyle=d,u.setStyle(u.unselectedStyle),u.setProperties(e.Data,!1),this.markerLayer.getSource().addFeature(u)}e.Data.length>0&&this._contMap.viewControl.jumpTo(l)},i.prototype.clearSearchResult=function(){this.pagedResultItems({Data:[]}),this.itemsClose(!1),this.choosedItem(null),null!=this.markerLayer&&this.markerLayer.getSource().clear(!1),null!=this.xbShapeLayer&&this.xbShapeLayer.getSource().clear(!1)},i.prototype.getMarkerFeature=function(e,t){var o,n=t.markerLayer.getSource(),i=n.getFeatures();if(e>-1&&e<i.length)for(var r=0;r<i.length;r++){var s=i[r];if(s.get("index")===e){o=s;break}}return o},i.prototype.chooseMarkerFeature=function(e,t){var o=t.markerLayer.getSource();o.selectedFeature&&(o.selectedFeature.setStyle(o.selectedFeature.unselectedStyle),t.hasSelectedFeature=!1);var n=t.getMarkerFeature(e,t);n&&n.get("index")===e&&(o.selectedFeature=n,t.hasSelectedFeature=!0,n.setStyle(n.selectedStyle))},i.prototype.showResult=function(e){this.showDetail(n.pagedResultItems().Data[e]),this.chooseMarkerFeature(e,this);var t=this.markerLayer.getSource();this._contMap.viewControl.jumpTo(t.selectedFeature.getGeometry().getCoordinates())},i.prototype.showDetail=function(e){this.itemsClose(!0),this.choosedItem(e)},i.prototype.selectResult=function(e){this.chooseMarkerFeature(e,this)},i.prototype.gotoPage=function(e){for(var t=0;t<n._evnts.length;t++)"gotoPage"===n._evnts[t].eventType&&(n._evnts[t].context?n._evnts[t].callback.call(n._evnts[t].context,e):n._evnts[t].callback(e))},i.prototype.prePage=function(){for(var e=0;e<n._evnts.length;e++)"prePage"===n._evnts[e].eventType&&(n._evnts[e].context?n._evnts[e].callback.call(this._evnts[e].context):n._evnts[e].callback())},i.prototype.nextPage=function(){for(var e=0;e<n._evnts.length;e++)"nextPage"===n._evnts[e].eventType&&(n._evnts[e].context?n._evnts[e].callback.call(n._evnts[e].context):n._evnts[e].callback())},i.prototype.on=function(e,t,o){this._evnts.push({eventType:e,callback:t,context:o})},i.prototype.un=function(e,t){for(var o=-1,n=0;n<this._evnts.length;n++)if(this._evnts[n].eventType===e&&this._evnts[n].callback===t){o=n;break}o!==-1&&this._evnts.splice(o,1)},i}),define("widgets/SearchResultItems/SearchResultItems",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../thirdParty/knockout","../../core/loadWithXhr","../../thirdParty/text!../SearchResultItems/SearchResultItems.html","./SearchResultItemsViewModel"],function(e,t,o,n,i,r,s,a){var l=function(t,i){if(!e(t))throw new o("container属性为必填值");t=n(t),this._container=t,this._options=i};return t(l.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),l.prototype.init=function(e){this._viewModel=new a(e,this._options),this._viewModel.init(),this._container.innerHTML=s,this._element=this.container.children[0],i.applyBindings(this._viewModel,this._element)},l.prototype.showResult=function(e){this._viewModel.showSearchResult(e)},l}),define("widgets/SubcompartmentFilter/SubcompartmentFilterViewModel",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../thirdParty/knockout","../../core/loadJsonp","../../core/resources","../SearchResultItems/SearchResultItems"],function(e,t,o,n,i,r,s){var a=function(e,t){this._map=e,this._options=t;var o=this;this.filter={regionCode:"",xbCode:"",dilei:{Code:""},lingzhong:{Code:""},sllb:{Code:""},yssz:{Code:""},gylbhdj:{Code:""},gylsqdj:{Code:""},ybdMin:"",ybdMax:"",mjMin:"",mjMax:"",xjMin:"",xjMax:"",drawRegion:!1,drawXbLayer:!1},this.pageIndex=n.observable(1),this.pageNumber=n.observable(10),this.searching=n.observable(!1),this.isDistrictFilterWidgetShow=n.observable(!1),this.isXbFactorFilterWidgetShow=n.observable(!1),this.choosedRegion=n.observable({}),this.pagedResultItems=n.observable({Data:[]}),this.filterStr=n.observable("选择森林资源小班因子"),this.hasChoosedItem=n.observable(!1),this.hasNoResult=n.computed(function(){return o.searching()||!(o.pagedResultItems().Data.length>0||o.hasChoosedItem())})};return a.prototype.buildFilterStr=function(){var e="";null!=this.filter.dilei&&""!==this.filter.dilei.Code&&(e+=this.filter.dilei.Name+" "),null!=this.filter.lingzhong&&""!==this.filter.lingzhong.Code&&(e+=this.filter.lingzhong.Name+" "),null!=this.filter.gylbhdj&&""!==this.filter.gylbhdj.Code&&(e+=this.filter.gylbhdj.Name+" "),null!=this.filter.sllb&&""!==this.filter.sllb.Code&&(e+=this.filter.sllb.Name+" "),null!=this.filter.yssz&&""!==this.filter.yssz.Code&&(e+=this.filter.yssz.Name+" "),null!=this.filter.gylsqdj&&""!==this.filter.gylsqdj.Code&&(e+=this.filter.gylsqdj.Name+" "),e+=this.filter.ybdMin&&""!==this.filter.ybdMin?" 郁闭度≥"+this.filter.ybdMin:"",e+=this.filter.ybdMax&&""!==this.filter.ybdMax?" 郁闭度≤"+this.filter.ybdMax:"",e+=this.filter.mjMin&&""!==this.filter.mjMin?" 面积≥"+this.filter.mjMin:"",e+=this.filter.mjMax&&""!==this.filter.mjMax?" 面积≤"+this.filter.mjMax:"",e+=this.filter.xjMin&&""!==this.filter.xjMin?" 蓄积≥"+this.filter.xjMin:"",e+=this.filter.xjMax&&""!==this.filter.xjMax?" 蓄积≤"+this.filter.xjMax:"",""===e&&(e="选择森林资源小班因子"),this.filterStr(e)},a.prototype.search=function(e){this.searching(!0),e?this.pageIndex(e):this.pageIndex(1);var t=this,o=this.filter.xbCode.indexOf("-"),n="",r=this.filter.xbCode;if(o>=0&&(n=this.filter.xbCode.substring(0,o),r=this.filter.xbCode.substring(o+1)),i({url:this._options.subcompartmentSearchUrl+"?pageIndex="+this.pageIndex()+"&pageNumber="+this.pageNumber()+"&disTrictCode="+this.filter.regionCode+"&linbanHao="+n+"&xiaoBanHao="+r+"&diLei="+(null==this.filter.dilei?"":this.filter.dilei.Code)+"&linZhong="+(null==this.filter.lingzhong?"":this.filter.lingzhong.Code)+"&mj.Max="+this.filter.mjMax+"&mj.Min="+this.filter.mjMin+"&xj.Max="+this.filter.xjMax+"&xj.Min="+this.filter.xjMin+"&ybd.Max="+this.filter.ybdMax+"&ybd.Min="+this.filter.ybdMin+"&qiyuan="+(void 0!=this.filter.qiyuan?this.filter.qiyuan.Code:"")+"&yssz="+(void 0!=this.filter.yssz?this.filter.yssz.Code:"")+"&gylbhdj="+(void 0!=this.filter.gylbhdj?this.filter.gylbhdj.Code:"")+"&gylsqdj="+(void 0!=this.filter.gylsqdj?this.filter.gylsqdj.Code:"")+"&sllb="+(void 0!=this.filter.sllb?this.filter.sllb.Code:"")}).then(function(e){e=e.Data,t.showSearchResult(e),t.pagedResultItems(e),t.searching(!1)}).otherwise(function(e){t.searching(!1),console.error("查询小班数据时失败！"+e.toString())}),this.filter.drawRegion){var s=function(e,t){var o=map.map2d.getPixelFromCoordinate(ol.proj.fromLonLat(e[0]));t.moveTo(o[0],o[1]);for(var n=1;n<e.length;n++){var i=e[n];o=map.map2d.getPixelFromCoordinate(ol.proj.fromLonLat(i)),t.lineTo(o[0],o[1])}},a=function(e,t){t.beginPath();for(var o=0;o<e.length;o++)s(e[o],t);t.closePath()};drawFeatureFromArcGis(this.filter.regionCode,function(e){!$scope.themeMapChoose.themeMaps[6].choosed&&t.filter.drawXbLayer&&$scope.themeMapChoose.toggleAddMap($scope.themeMapChoose.themeMaps[6]);var o=$scope.themeMapChoose.themeMaps[6].ol3layer;$scope.tmpRings=e,o.hasNotEventAdded||(o.on("precompose",function(e){var t=e.context;t.save(),a($scope.tmpRings,t),t.clip()}),o.on("postcompose",function(e){var t=e.context;t.restore()}),o.hasNotEventAdded=!0)})}},a.prototype.prePage=function(){this.pageIndex()-1<=0||this.search(this.pageIndex()-1)},a.prototype.nextPage=function(){this.pageIndex()+1>=this.pagedResultItems().TotalPages||this.search(this.pageIndex()+1)},a.prototype.gotoPage=function(e){this.search(e)},a.prototype.showSearchResult=function(e){if(!this._searchResultItems)throw new o("未设置显示结果控件");this._searchResultItems.showResult(e),this._searchResultItems._viewModel.displayModel("小班")},a.prototype.setSearchResultItemsWidget=function(e){this._searchResultItems=e;var t=this;e.viewModel.choosedItem.subscribe(function(e){t.hasChoosedItem(null!=e)}),e.viewModel.on("prePage",this.prePage,this),e.viewModel.on("nextPage",this.nextPage,this),e.viewModel.on("gotoPage",this.gotoPage,this)},a.prototype.clearSearchResult=function(){this._searchResultItems.viewModel.clearSearchResult()},a}),define("thirdParty/text!widgets/SubcompartmentFilter/DistrictFilter.html",[],function(){return'<div class="districtFilter-widget" data-bind="visible: visible">\r\n    <div class="townsCatalog" data-bind="foreach: currentRegion">\r\n                        <span>\r\n                            <span data-bind="if: $index()!=0">/</span>\r\n                            <a data-bind="text: Value,click:function(){$parent.setCurrentRegion($index());}"></a>\r\n                        </span>\r\n    </div>\r\n    <div class="closeButtonPanel">\r\n        <input type="button" data-bind="click: close" class="closeButton" title="关闭" value="X"\r\n               onfocus=" this.blur(); "/>\r\n    </div>\r\n    <div style="border-top: 1px solid #CCC; clear: both;"></div>\r\n    <div class="subRegions">\r\n                    <span data-bind="foreach: subRegions">\r\n                            <a data-bind="text: Value,click: $parent.chooseSubRegion"></a>\r\n                    </span>\r\n        <span data-bind="if: subRegions().length==0">无下级行政区划！</span>\r\n    </div>\r\n    <div style="border-top: 1px solid #CCC; clear: both;"></div>\r\n    <div class="drawRegionCheck">\r\n        <input type="checkbox" data-bind="checked: mustDrawRegion"/>绘制区域\r\n        <span data-bind="if: mustDrawRegion">\r\n                            <input type="checkbox" data-bind="checked: mustDrawSubcompartment"/>加载小班\r\n                        </span>\r\n    </div>\r\n</div>'}),define("widgets/SubcompartmentFilter/DistrictFilter",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../core/loadJsonp","../../thirdParty/knockout","../../thirdParty/text!../../widgets/SubcompartmentFilter/DistrictFilter.html"],function(e,t,o,n,i,r,s){var a=function(t,i){if(!e(t))throw new o("container属性为必填值");t=n(t),this._container=t,this._options=i};return t(a.prototype,{container:{get:function(){return this._container}},currentRegion:{get:function(){return this._viewModel.currentRegion()}},visible:{get:function(){return this._viewModel.visible()}},regionCode:{get:function(){return this.currentRegion[this.currentRegion.length-1].Key}},mustDrawRegion:{get:function(){return this._viewModel.mustDrawRegion()}},mustDrawSubcompartment:{get:function(){return this._viewModel.mustDrawSubcompartment()}}}),a.prototype.init=function(e){var t=this,o={_dataLoaded:!1,_rootDistrict:e,subRegions:r.observableArray([]),currentRegion:r.observableArray([e]),visible:r.observable(!1),mustDrawRegion:r.observable(!1),mustDrawSubcompartment:r.observable(!1),close:function(){o.visible(!1)},getSubRegions:function(e){i({url:t._options.getDistrictListUrl+"?id="+e}).then(function(e){e.Data.shift(),o.subRegions(e.Data)}).otherwise(function(e){console.error("获取下级行政区划失败！"+e.toString())})},setCurrentRegion:function(e){o.currentRegion.splice(e+1),o.getSubRegions(o.currentRegion()[e].Key)},chooseSubRegion:function(e){o.currentRegion.push(e),o.getSubRegions(e.Key)}};this._viewModel=o,this._dataDisplay()},a.prototype._dataDisplay=function(){this.container.innerHTML=s,this._element=this.container.children[0],r.applyBindings(this._viewModel,this._element)},a.prototype.show=function(e){e&&!this._viewModel._dataLoaded&&(this._viewModel.getSubRegions(this._viewModel._rootDistrict.Key),this._viewModel._dataLoaded=!0),this._viewModel.visible(e)},a}),define("thirdParty/text!widgets/SubcompartmentFilter/SubcompartmentFactorFilter.html",[],function(){return'<div class="subcompartmentFactorFilter-widget" data-bind="visible:visible,click:function(){dileiDropdownVisible(false);lingzhongDropdownVisible(false);}">\r\n    <div class="filterTitle">\r\n        <span>小班信息筛选</span>\r\n        <input type="button" id="filter_close" class="closeButton" title="关闭" value="X"\r\n               onfocus="this.blur();" data-bind="click: function(){visible(false)}"/>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">地类：</span>\r\n        </div>\r\n        <div>\r\n            <div class="dropdown">\r\n\t\t\t\t<span class="select btn-xs dropdown-toggle" type="button"\r\n                      data-bind="click:function(){lingzhongDropdownVisible(false);dileiDropdownVisible(!dileiDropdownVisible());}, clickBubble: false">\r\n\t\t\t\t\t<span data-bind="text:choosedDileiType().Name" class="label"></span>\r\n\t\t\t\t\t<span class="caret"></span>\r\n\t\t\t\t</span>\r\n                <ul class="dropdown-menu" data-bind="foreach:dileiTypes,visible:dileiDropdownVisible">\r\n                    <li data-bind="click:function(){$parent.choosedDileiType(this);}">\r\n                        <a href="#" data-bind="text:Label"></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">林种：</span>\r\n        </div>\r\n        <div>\r\n            <div class="dropdown">\r\n\t\t\t\t<span class="select btn-xs dropdown-toggle" type="button"\r\n                      data-bind="click:function(){dileiDropdownVisible(false);lingzhongDropdownVisible(!lingzhongDropdownVisible());}, clickBubble: false">\r\n\t\t\t\t\t<span data-bind="text:choosedLingzhongType().Name" class="label"></span>\r\n\t\t\t\t\t<span class="caret"></span>\r\n\t\t\t\t</span>\r\n                <ul class="dropdown-menu" data-bind="foreach:lingzhongTypes,visible:lingzhongDropdownVisible">\r\n                    <li data-bind="click:function(){$parent.choosedLingzhongType(this)}">\r\n                        <a href="#" data-bind="text:Label"></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">森林类别：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <select class="dilei-input select"\r\n                    data-bind="options:sllbTypes,optionsText:\'Name\',value:choosedSllbType">\r\n                <option value="null"></option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">事权等级：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <select class="gylsqdj-input select"\r\n                    data-bind="options:gylsqdjTypes,optionsText:\'Name\',value:choosedGylsqdjType">\r\n                <option value=""></option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">保护等级：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <select class="gylbhdj-input select"\r\n                    data-bind="options:gylbhdjTypes,optionsText:\'Name\',value:choosedGylbhdjType">\r\n                <option value=""></option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">优势树种：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <select class="dilei-input select"\r\n                    data-bind="options:ysszTypes,optionsText:\'Name\',value:choosedYsszType">\r\n                <option value=""></option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">郁闭度：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <div style="float: left;width: 48%;">\r\n                <div style="padding: 0 4px;margin-left: -4px;">\r\n                    <input type="text" style="width:100%;"\r\n                           pattern="^(?:0\\.\\d+|[01](?:\\.0)?)$"\r\n                           data-bind="value:ybdMin,validationElement:ybdMin"/>\r\n                </div>\r\n            </div>\r\n            <div style="float: left;width: 4%;text-align: center;">\r\n                -\r\n            </div>\r\n            <div style="float: left;width: 48%;">\r\n                <div style="padding: 0 4px;margin-left: -4px;">\r\n                    <input type="text" style="width:100%;"\r\n                           pattern="^(?:0\\.\\d+|[01](?:\\.0)?)$"\r\n                           data-bind="value:ybdMax,validationElement:ybdMax"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">面积hm²：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <div style="float: left;width: 48%;">\r\n                <div style="padding: 0 4px;margin-left: -4px;">\r\n                    <input type="text" type="text" style="width:100%;"\r\n                           pattern="^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$"\r\n                           data-bind="value:mjMin,validationElement:mjMin"/>\r\n                </div>\r\n            </div>\r\n            <div style="float: left;width: 4%;text-align: center;">\r\n                -\r\n            </div>\r\n            <div style="float: left;width: 48%;">\r\n                <div style="padding: 0 4px;margin-left: -4px;">\r\n                    <input type="text" type="text" style="width:100%;"\r\n                           pattern="^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$"\r\n                           data-bind="value:mjMax,validationElement:mjMax"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="classifySelectDiv">\r\n        <div class="filterName">\r\n            <span style="margin-left: 20px;">蓄积m³：</span>\r\n        </div>\r\n        <div class="dropdown">\r\n            <div style="float: left;width: 48%;">\r\n                <div style="padding: 0 4px;margin-left: -4px;">\r\n                    <input type="text" type="text" style="width:100%;"\r\n                           pattern="^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$"\r\n                           data-bind="value:xjMin,validationElement:xjMin"/>\r\n                </div>\r\n            </div>\r\n            <div style="float: left;width: 4%;text-align: center;">\r\n                -\r\n            </div>\r\n            <div style="float: left;width: 48%;">\r\n                <div style="padding: 0 4px;margin-left: -4px;">\r\n                    <input type="text" type="text" style="width:100%;"\r\n                           pattern="^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$"\r\n                           data-bind="value:xjMax,validationElement:xjMax"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("widgets/SubcompartmentFilter/SubcompartmentFactorFilter",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../core/loadJsonp","../../thirdParty/knockout","../../thirdParty/text!../../widgets/SubcompartmentFilter/SubcompartmentFactorFilter.html"],function(e,t,o,n,i,r,s){var a=function(t,i){if(!e(t))throw new o("container属性为必填值");t=n(t),this._container=t,this._options=i};return t(a.prototype,{container:{get:function(){return this._container}},visible:{get:function(){return this._viewModel.visible()}},viewModel:{get:function(){return this._viewModel}}}),a.prototype.init=function(){var e={dileiTypes:r.observableArray([]),lingzhongTypes:r.observableArray([]),sllbTypes:r.observableArray([]),gylsqdjTypes:r.observableArray([]),gylbhdjTypes:r.observableArray([]),ysszTypes:r.observableArray([]),choosedDileiType:r.observable({Name:"",Code:"",Label:String.fromCharCode(160)}),choosedLingzhongType:r.observable({Name:"",Code:"",Label:String.fromCharCode(160)}),choosedSllbType:r.observable({Name:"",Code:""}),choosedYsszType:r.observable({Name:"",Code:""}),choosedGylbhdjType:r.observable({Name:"",Code:""}),choosedGylsqdjType:r.observable({Name:"",Code:""}),ybdMin:r.observable(""),ybdMax:r.observable(""),mjMin:r.observable(""),mjMax:r.observable(""),xjMin:r.observable(""),xjMax:r.observable(""),visible:r.observable(!1),dileiDropdownVisible:r.observable(!1),lingzhongDropdownVisible:r.observable(!1)};this._viewModel=e,this._dataLoaded=!1,this.container.innerHTML=s,this._element=this.container.children[0],r.applyBindings(this._viewModel,this._element)},a.prototype._loadData=function(){var e=this;i({url:this._options.dileiTypesUrl}).then(function(t){t=t.Data;for(var o=0;o<t.length;o++){for(var n=1,i="";"0"===t[o].Code.charAt(t[o].Code.length-n);)n++;for(var r=0;r<2-(n-1);r++)i+=String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160);t[o].Label=i+t[o].Name}t.splice(0,0,{Name:"",Code:"",Label:String.fromCharCode(160)}),e._viewModel.dileiTypes(t)}).otherwise(function(e){console.error("获取地类类型失败！"+e.toString())}),i({url:this._options.lingzhongTypesUrl}).then(function(t){t=t.Data;for(var o=0;o<t.length;o++){for(var n=1,i="";"0"===t[o].Code.charAt(t[o].Code.length-n);)n++;for(var r=0;r<1-(n-1);r++)i+=String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160)+String.fromCharCode(160);t[o].Label=i+t[o].Name}t.splice(0,0,{Name:"",Code:"",Label:String.fromCharCode(160)}),e._viewModel.lingzhongTypes(t)}).otherwise(function(e){console.error("获取林种类型失败！"+e.toString())}),i({url:this._options.sllbTypesUrl}).then(function(t){t=t.Data,t.splice(0,0,{Name:"",Code:""}),e._viewModel.sllbTypes(t)}).otherwise(function(e){console.error("获取森林类别类型失败！"+e.toString())}),i({url:this._options.ysszTypesUrl}).then(function(t){t=t.Data,t.splice(0,0,{Name:"",Code:""}),e._viewModel.ysszTypes(t)}).otherwise(function(e){console.error("获取优势树种类型失败！"+e.toString())}),i({url:this._options.gylbhdjTypesUrl}).then(function(t){t=t.Data,t.splice(0,0,{Name:"",Code:""}),e._viewModel.gylbhdjTypes(t)}).otherwise(function(e){console.error("获取公益林保护等级类型失败！"+e.toString())}),i({url:this._options.gylsqdjTypesUrl}).then(function(t){t=t.Data,t.splice(0,0,{Name:"",Code:""}),e._viewModel.gylsqdjTypes(t)}).otherwise(function(e){console.error("获取公益林事权等级类型失败！"+e.toString())})},a.prototype.show=function(e){e&&!this._dataLoaded&&(this._loadData(),this._dataLoaded=!0),this._viewModel.visible(e)},a}),define("thirdParty/text!widgets/SubcompartmentFilter/SubcompartmentFilter.html",[],function(){return'<div class="subcompartmentFilter-widget" data-bind="css: { searching: searching }">\r\n    <div class="pull-left filter">\r\n        <div>\r\n\t\t\t<span class="locationFilter dropDown"\r\n                  style="display: inline-flex;"\r\n                  data-bind="css: { open: isDistrictFilterWidgetShow },click:function(){isDistrictFilterWidgetShow(!isDistrictFilterWidgetShow());}">\r\n\t\t\t\t<span style="display: inline-block; min-width: 42px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"\r\n                      data-bind="text: choosedRegion().Value">山东省</span>\r\n\t\t\t\t<em></em>\r\n\t\t\t</span>\r\n        </div>\r\n        <div class="xbFactorFilter" data-bind="click:function(){isXbFactorFilterWidgetShow(!isXbFactorFilterWidgetShow());}">\r\n            <div class="split"></div>\r\n            <span class="text-overflow"\r\n                  data-bind="text: filterStr">选择森林资源小班因子</span>\r\n        </div>\r\n        <div class="dropDownContainer" data-bind="visible: hasNoResult">\r\n\t\t\t<span class="iconSpan dropDown"\r\n                  data-bind="css: { open: isXbFactorFilterWidgetShow }">\r\n\t\t\t\t<em></em>\r\n\t\t\t</span>\r\n        </div>\r\n        <div class="searchingContainer">\r\n\t\t\t<span>\r\n\t\t\t\t<em></em>\r\n\t\t\t</span>\r\n        </div>\r\n        <div class="completContainer hidden"\r\n             data-bind="css: { hidden: hasNoResult },click:function(){clearSearchResult();pagedResultItems({Data:[]});}">\r\n\t\t\t<span>\r\n\t\t\t\t<em></em>\r\n\t\t\t</span>\r\n        </div>\r\n        <div class="districtFilterContent filterBottomContainer">\r\n        </div>\r\n        <div class="xbFactorFilterContent filterBottomContainer">\r\n        </div>\r\n    </div>\r\n    <div class="pull-left"\r\n         data-bind="click:function(){isDistrictFilterWidgetShow(!isDistrictFilterWidgetShow());isDistrictFilterWidgetShow(!isDistrictFilterWidgetShow());}">\r\n        <div class="search" data-bind="click:function(){search();}"></div>\r\n    </div>\r\n    <div class="searchResultContent">\r\n    </div>\r\n</div>'}),define("widgets/singletonWeidgetShow",[],function(){return{widgets:[],addWidget:function(e){this.widgets.push(e)},show:function(e){hidenAll(),e.show(!0)},hidenAll:function(){for(var e=0;e<this.widgets.length;e++){var t=this.widgets[e];t.show(!1)}}}}),define("widgets/SubcompartmentFilter/SubcompartmentFilter",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../thirdParty/knockout","./SubcompartmentFilterViewModel","./DistrictFilter","./SubcompartmentFactorFilter","../SearchResultItems/SearchResultItems","../../thirdParty/text!../../widgets/SubcompartmentFilter/SubcompartmentFilter.html","../singletonWeidgetShow"],function(e,t,o,n,i,r,s,a,l,c,u){var g=function(t,i){if(!e(t))throw new o("container属性为必填值");t=n(t),this._container=t,this._options=i};return t(g.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),g.prototype.init=function(){var e=document.createElement("div");e.innerHTML=c,this._element=e.children[0],this.container.appendChild(this._element),this._viewModel=new r(this._contMap,{subcompartmentSearchUrl:this._options.subcompartmentSearchUrl}),this._viewModel.choosedRegion(this._options.rootDistrict),i.applyBindings(this._viewModel,this._element),this._districtFilterElement=this._element.children[0].children[5],this._subcompartmentFactorFilterElement=this._element.children[0].children[6],this._searchResultContentElement=this._element.children[2],this._districtFilterWidgetBinding(),this._subcompartmentFactorFilterWidgetBinding(),this._searchResultItemsWidgetBinding()},g.prototype._districtFilterWidgetBinding=function(){this._districtFilterWidget=new s(this._districtFilterElement,{getDistrictListUrl:this._options.getDistrictListUrl}),this._districtFilterWidget.init(this._options.rootDistrict),u.addWidget(this._districtFilterWidget);var e=this;this._viewModel.isDistrictFilterWidgetShow.subscribe(function(t){u.hidenAll(),e._districtFilterWidget.show(t)}),this._districtFilterWidget._viewModel.visible.subscribe(function(t){e._viewModel.isDistrictFilterWidgetShow(t)}),this._districtFilterWidget._viewModel.currentRegion.subscribe(function(t){e._viewModel.choosedRegion(t[t.length-1])})},g.prototype._subcompartmentFactorFilterWidgetBinding=function(){var e=this;this._subcompartmentFactorFilterWidget=new a(this._subcompartmentFactorFilterElement,this._options.getTypesUrls),this._subcompartmentFactorFilterWidget.init(),u.addWidget(this._subcompartmentFactorFilterWidget),this._viewModel.isXbFactorFilterWidgetShow.subscribe(function(t){u.hidenAll(),e._subcompartmentFactorFilterWidget.show(t)}),this._subcompartmentFactorFilterWidget._viewModel.visible.subscribe(function(t){e._viewModel.isXbFactorFilterWidgetShow(t)}),this._typesBinding(this._subcompartmentFactorFilterWidget._viewModel.choosedDileiType,"dilei"),this._typesBinding(this._subcompartmentFactorFilterWidget._viewModel.choosedLingzhongType,"lingzhong"),this._typesBinding(this._subcompartmentFactorFilterWidget._viewModel.choosedSllbType,"sllb"),this._typesBinding(this._subcompartmentFactorFilterWidget._viewModel.choosedGylsqdjType,"gylsqdj"),this._typesBinding(this._subcompartmentFactorFilterWidget._viewModel.choosedYsszType,"yssz"),this._typesBinding(this._subcompartmentFactorFilterWidget._viewModel.choosedGylbhdjType,"gylbhdj"),this._valueBinding(this._subcompartmentFactorFilterWidget._viewModel.ybdMin,"ybdMin"),this._valueBinding(this._subcompartmentFactorFilterWidget._viewModel.ybdMax,"ybdMax"),this._valueBinding(this._subcompartmentFactorFilterWidget._viewModel.mjMin,"mjMin"),this._valueBinding(this._subcompartmentFactorFilterWidget._viewModel.mjMax,"mjMax"),this._valueBinding(this._subcompartmentFactorFilterWidget._viewModel.xjMin,"xjMin"),this._valueBinding(this._subcompartmentFactorFilterWidget._viewModel.xjMax,"xjMax")},g.prototype._typesBinding=function(e,t){var o=this;e.subscribe(function(e){o._viewModel.filter[t]=e,o._viewModel.buildFilterStr()})},g.prototype._valueBinding=function(e,t){
var o=this;e.subscribe(function(e){var n=i.validation.validateObservable(this);n&&(o._viewModel.filter[t]=e,o._viewModel.buildFilterStr())},e)},g.prototype._searchResultItemsWidgetBinding=function(){this._searchResultItems=new l(this._searchResultContentElement,this._options.searchResultItems),this._searchResultItems.init(this._contMap),this._viewModel.setSearchResultItemsWidget(this._searchResultItems)},g.prototype.setContMap=function(e){this._contMap=e},g.prototype.destroy=function(){},g}),define("widgets/ToolBoxPanel/ToolBoxPanelViewModel",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../thirdParty/knockout","../../core/loadJsonp"],function(e,t,o,n,i){var r=function(e,t){this._contMap=e,this._projection=e._getProjection(),this._options=t,this.currentLocationName=n.observable("中国"),this.currentLocationCode=n.observable(null),this.isDistrictZoomToWidgetShow=n.observable(this._options.showCurrentLocation),this.isThemeMapPanelShow=n.observable(!1),this.isLayerManagePanelShow=n.observable(!1),this.isStatisticsPanelShow=n.observable(!1),this.isMeasureShow=n.observable(!1),this.isDrawShow=n.observable(!1),this.isFiresDrawShow=n.observable(!1),this.isMilitaryDrawShow=n.observable(!1),this.isFullScreen=n.observable(!1),this.choosedRegion=n.observable({}),this.choosedRegions=n.observable([]),this.subRegions=n.observable([{Key:"370000",Value:"山东省"}])};return r.prototype.init=function(){function e(e){i({url:o._options.getDistrictListUrl.GetDistrictList+"?id="+e}).then(function(e){e.Data.shift(),o.subRegions(e.Data)}).otherwise(function(e){console.log("获取下级行政区划失败！"+e)})}function t(t){i({url:o._options.getDistrictListUrl.GetRegionWithParentRegions+"?unitCode="+t}).then(function(t){o.choosedRegions(t.Data),e(t.Data[t.Data.length-1].Key)}).otherwise(function(e){console.log("获取上级行政区划失败！"+e)})}if(this._options.showCurrentLocation){var o=this;e("370000"),o._contMap.scene.map2d.on("moveend",function(e){var n=o._contMap.scene.map2d.getView().getCenter();n=ol.proj.transform(n,o._projection,"EPSG:4326");var r=o._contMap.scene.map2d.getView().getZoom(),s=n[0],a=n[1];i({url:o._options.ToolBoxSearchUrl+"?level="+r+"&x="+s+"&y="+a}).then(function(e){e.Data.Name&&(o.currentLocationName(e.Data.Name),o.currentLocationCode(e.Data.Code),t(e.Data.Code))}).otherwise(function(e){console.log("获取行政区划名称失败！"+e)})})}},r.prototype.fullScreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.isFullScreen(!0)},r.prototype.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msEitFullscreen&&document.msEitFullscreen(),this.isFullScreen(!1)},r.prototype.isShow=function(e){"District"===e&&(this.isDistrictZoomToWidgetShow(!this.isDistrictZoomToWidgetShow()),this.isMeasureShow(!1),this.isDrawShow(!1),this.isStatisticsPanelShow(!1),this.isLayerManagePanelShow(!1),this.isThemeMapPanelShow(!1),this.isFiresDrawShow(!1),this.isMilitaryDrawShow(!1)),"ThemeMap"===e&&(this.isThemeMapPanelShow(!this.isThemeMapPanelShow()),this.isDistrictZoomToWidgetShow(!1),this.isMeasureShow(!1),this.isDrawShow(!1),this.isStatisticsPanelShow(!1),this.isLayerManagePanelShow(!1),this.isFiresDrawShow(!1),this.isMilitaryDrawShow(!1)),"LayerManage"===e&&(this.isLayerManagePanelShow(!this.isLayerManagePanelShow()),this.isDistrictZoomToWidgetShow(!1),this.isMeasureShow(!1),this.isDrawShow(!1),this.isStatisticsPanelShow(!1),this.isThemeMapPanelShow(!1),this.isFiresDrawShow(!1),this.isMilitaryDrawShow(!1)),"Statistics"===e&&(this.isStatisticsPanelShow(!this.isStatisticsPanelShow()),this.isDistrictZoomToWidgetShow(!1),this.isMeasureShow(!1),this.isDrawShow(!1),this.isLayerManagePanelShow(!1),this.isThemeMapPanelShow(!1),this.isFiresDrawShow(!1),this.isMilitaryDrawShow(!1)),"Measure"===e&&(this.isMeasureShow(!this.isMeasureShow()),this.isDrawShow(!1),this.isDistrictZoomToWidgetShow(!1),this.isStatisticsPanelShow(!1),this.isLayerManagePanelShow(!1),this.isThemeMapPanelShow(!1),this.isFiresDrawShow(!1),this.isMilitaryDrawShow(!1)),"Draw"===e&&(this.isDrawShow(!this.isDrawShow()),this.isMeasureShow(!1),this.isDistrictZoomToWidgetShow(!1),this.isStatisticsPanelShow(!1),this.isLayerManagePanelShow(!1),this.isThemeMapPanelShow(!1),this.isFiresDrawShow(!1),this.isMilitaryDrawShow(!1)),"firesDraw"===e&&(this.isFiresDrawShow(!this.isFiresDrawShow()),this.isDrawShow(!1),this.isMeasureShow(!1),this.isDistrictZoomToWidgetShow(!1),this.isStatisticsPanelShow(!1),this.isLayerManagePanelShow(!1),this.isThemeMapPanelShow(!1),this.isMilitaryDrawShow(!1)),"militaryDraw"===e&&(this.isMilitaryDrawShow(!this.isMilitaryDrawShow()),this.isFiresDrawShow(!1),this.isDrawShow(!1),this.isMeasureShow(!1),this.isDistrictZoomToWidgetShow(!1),this.isStatisticsPanelShow(!1),this.isLayerManagePanelShow(!1),this.isThemeMapPanelShow(!1))},r}),define("ViewControl",["./core/defineProperties"],function(e){var t=function(e){this._contMap=e};return e(t.prototype,{proj:{get:function(){return this._contMap.scene.map2d.getView().getProjection().getCode()}}}),t.prototype.jumpTo=function(e,t){var o={};if(e instanceof Array&&4===e.length)o=e;else{if(e instanceof Array&&2===e.length)return void this._contMap.scene.map2d.getView().setCenter(e);if("Point"===e.getType())return o=new ol.geom.Point(e.coordinates,"XY"),void this._contMap.scene.map2d.getView().setCenter(e.getCoordinates());if("Polygon"===e.getType())o=new ol.geom.Polygon(e.coordinates,"XY");else{if("MultiPolygon"!==e.getType())return;o=new ol.geom.MultiPolygon(e.getCoordinates(),"XY")}}var n=this._contMap.scene.map2d.getSize();this._contMap.scene.map2d.getView().fit(o,n,{padding:t?t:[0,0,0,0]})},t.prototype.setZoom=function(e){this._contMap.scene.map2d.getView().setZoom(e)},t.prototype.setResolution=function(e){this._contMap.scene.map2d.getView().setResolution(e)},t.prototype.getZoom=function(){return this._contMap.scene.map2d.getView().getZoom()},t.prototype.getExtent=function(){return this._contMap.scene.map2d.getView().calculateExtent(this._contMap.scene.map2d.getSize())},t}),define("thirdParty/text!widgets/ToolBoxPanel//DistrictZoomTo.html",[],function(){return'<div class="cityListPanel rightPanel" id="cityListPanel" data-bind="visible:visible">\r\n    <div class="panelTitle">\r\n        <span>山东省城市列表</span>\r\n        <input type="button" id="popup_close" class="closeButton" title="关闭" value="X"\r\n               onfocus="this.blur();" data-bind="click:close"/>\r\n    </div>\r\n    <div class="searchCity">\r\n        <span data-bind="text:currentLocationName()" style="width: 140px;display: inline-block"></span>\r\n        <input placeholder="请输入地名" data-bind="value:inputName, valueUpdate:\'afterkeydown\',event:{keypress:function(){QueryRegion(inputName())}}"  style="display: inline-block"/>\r\n        <a data-bind="if:regions,click:function(){ClearName();}">X</a>\r\n    </div>\r\n    <div style="border-top: 1px solid #CCC; padding-bottom: 0;"></div>\r\n    <div data-bind="visible:!regions()">\r\n        <div class="presentCity">\r\n            <div class="choosedRegions">\r\n                    <span data-bind="foreach:choosedRegions">\r\n                        <span data-bind="if:$index() !== 0">></span>\r\n                        <a >\r\n                            <span data-bind="text:Value,click:function(){$parent.setCurrentRegion($index())}"></span>\r\n                        </a>\r\n                    </span>\r\n            </div>\r\n            <div class="jumpTo">\r\n                <a data-bind="click:function(){jumpTo(choosedRegions()[choosedRegions().length-1].Key)}">跳至</a>\r\n            </div>\r\n        </div>\r\n        <div style="border-top: 1px solid #CCC; padding-bottom: 0;"></div>\r\n        <div class="cityParticulars">\r\n                <span data-bind="foreach: subRegions">\r\n                    <a data-bind="click:function(){$parent.chooseSubRegion($data)}">\r\n                         <span data-bind="text:Value"></span>\r\n                    </a>\r\n                </span>\r\n            <span data-bind="if: subRegions().length === 0">无下级行政区划！</span>\r\n        </div>\r\n    </div>\r\n    <div data-bind="if:regions() !== undefined">\r\n        <div class="presentCity">\r\n            <div class="choosedRegions">\r\n                <ul data-bind="foreach: regions">\r\n                    <li><a data-bind="click:function(){$parent.jumpTo($data.Code);},text:$data.Name" >\r\n                        <span data-bind="text:Name"></span>\r\n                    </a></li>\r\n                    <li><a data-bind="click:function(){$parent.jumpTo($data.Code);},html:$data.Name"></a></li>\r\n                    <!--ng-bind-html="region.Name|highlight:inputName"-->\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("widgets/ToolBoxPanel/DistrictZoomTo",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../core/loadJsonp","../../ViewControl","../../thirdParty/knockout","../../thirdParty/text!.//DistrictZoomTo.html"],function(e,t,o,n,i,r,s,a){var l=function(t,i,s){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._options=i,this._contMap=s,this._projection=s._getProjection(),this._layerManger=this._contMap.layerManager,this._viewControl=new r(this._contMap)};return t(l.prototype,{container:{get:function(){return this._container}},currentRegion:{get:function(){return this._viewModel.currentRegion()}},visible:{get:function(){return this._viewModel.visible()}},regionCode:{get:function(){return this.currentRegion[this.currentRegion.length-1].Key}}}),l.prototype.init=function(e){var t=this,o={cityLayer:s.observable(void 0),visible:s.observable(!1),inputName:s.observable(""),regions:s.observable(void 0),currentRegion:s.observable({}),currentLocationName:s.observable("山东"),currentLocationCode:s.observable(null),choosedRegions:s.observable([{Key:"370000",Value:"山东省"}]),subRegions:s.observable([{Key:"37000",Value:"山东"},{Key:"37000",Value:"青岛"}]),xbPropertySearch:s.observable({_map:null,filter:{regionCode:""}}),drawFeature:function(e,o){var n=this;""===e&&(e="370000"),i({url:t._options.getDistrictListUrl.GetRegionByCode+"?disTrictCode="+e}).then(function(e){var i=new ol.format.WKT,r=i.readGeometry(e.Data.Geometry,{dataProjection:"EPSG:4326",featureProjection:t._projection}),s=r;o&&o(s),void 0==n.cityLayer()&&(n.cityLayer(new ol.layer.Vector({source:new ol.source.Vector({features:[]}),style:new ol.style.Style({stroke:new ol.style.Stroke({color:"red",width:3})})})),t._layerManger.addLayer(n.cityLayer(),!0)),n.cityLayer().getSource().clear(!1);var a=[];if("MultiPolygon"===s.getType())for(var l=s.getPolygons(),c=0;c<l.length;c++)for(var u=l[c],g=u.getLinearRings(),h=0;h<g.length;h++)a.push(g[h].getCoordinates());else for(var d=s.getLinearRings(),h=0;h<d.length;h++)a.push(d[h].getCoordinates());var p=new ol.geom.MultiLineString(a,"XY"),f=new ol.Feature({geometry:p});n.cityLayer().getSource().addFeature(f)}).otherwise(function(e){console.log("跳转失败！"+e)})},jumpTo:function(e){this.drawFeature(e,function(e){t._viewControl.jumpTo(e.getExtent())})},chooseSubRegion:function(e){this.choosedRegions().push(e),this.choosedRegions(this.choosedRegions()),this.xbPropertySearch().filter.regionCode=e.Key,this.getSubRegions(e.Key)},setCurrentRegion:function(e){this.choosedRegions(this.choosedRegions().splice(0,e+1)),this.xbPropertySearch().filter.regionCode=this.choosedRegions()[e].Key,this.getSubRegions(this.choosedRegions()[e].Key)},getSubRegions:function(e){var o=this;i({url:t._options.getDistrictListUrl.GetDistrictList+"?id="+e}).then(function(e){e.Data.shift(),o.subRegions(e.Data)}).otherwise(function(e){console.log("获取下级行政区划失败！"+e)})},setRegionDisplay:function(e){var o=this;i({url:t._options.getDistrictListUrl.GetRegionWithParentRegions+"?unitCode="+e}).then(function(e){o.choosedRegions(e.Data),o.getSubRegions(e.Data[e.Data.length-1].Key)}).otherwise(function(e){console.log("获取上级行政区划失败！"+e)})},close:function(){o.visible(!1)},QueryRegion:function(e){i({url:t._options.getDistrictListUrl.GetRegionListByName+"?disTrictName="+e}).then(function(e){o.regions(e.Data)}).otherwise(function(e){console.log("查询行政区信息失败"+e)})},ClearName:function(){o.regions(void 0),o.inputName("")}};this._viewModel=o,this._viewModel.getSubRegions(e.Key);var n=document.createElement("div");n.innerHTML=a,this._element=n.children[0],this._container.appendChild(this._element),s.applyBindings(this._viewModel,this._element)},l.prototype._dataDisplay=function(){},l.prototype.show=function(e){this._viewModel.visible(e)},l}),define("thirdParty/text!widgets/ToolBoxPanel//ThemeMapChoose.html",[],function(){return'<div class="rightPanel themeMapChoosePanel " data-bind="visible:visible">\r\n    <div class="panelTitle">\r\n        <span>专题图</span>\r\n        <input type="button" class="closeButton" title="关闭" value="X"\r\n               onfocus=" this.blur(); " data-bind="click:close"/>\r\n    </div>\r\n    <div class="tips">\r\n        <span data-bind="text:tempMapName()" >点击专题图进行选择加载</span>\r\n    </div>\r\n    <div class="maps">\r\n        <ul class="list-inline" data-bind="foreach:themeMaps()">\r\n            <li >\r\n                <img data-bind="attr:{src:$data.thumbImg},event:{mouseover:function(){$parent.tempMapName($data.name);},mouseout:\r\n                function(){$parent.tempMapName(\'点击专题图进行选择加载\');}},\r\n                click:function(){$parent.toggleAddMap($data,$index());}"\r\n                />\r\n                <div class="mapName"><span data-bind="text:name"></span></div>\r\n                <div class="icon" data-bind="visible:choosed">\r\n\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'}),define("widgets/ToolBoxPanel/ThemeMapChoose",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../thirdParty/knockout","../../thirdParty/text!.//ThemeMapChoose.html"],function(e,t,o,n,i,r){var s=function(t,i,r){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._options=i,this._contMap=r,this._projection=this._contMap._getProjection(),this._layerManger=this._contMap.layerManager,this._themeMaps=this._options.themeMaps,this._arr=new Array(this._themeMaps.length);for(var s=0;s<this._arr.length;s++)this._arr[s]=!1};return s.prototype.init=function(){for(var e=this,t=0;t<this._themeMaps.length;t++){var o=this._themeMaps[t];o.choosed=i.observable(!1)}var n={visible:i.observable(!1),themeMaps:i.observable(this._themeMaps),tempMapName:i.observable("点击专题图进行选择加载"),init:function(){e._layerManger.on("removeLayer",function(e){var t=e.layer;t.themeMap&&t.themeMap.choosed(!1)})},toggleAddMap:function(t,o){t.choosed()?(t.ol3layer&&e._layerManger.removeLayer(t.ol3layer),t.choosed(!1)):(t.ol3layer=e._layerManger.addLayer(t,!1),t.ol3layer.themeMap=t,t.ol3layer.ResourceId=t.resourceId,t.choosed(!0))},close:function(){n.visible(!1)}};n.init(),this._viewModel=n;var s=document.createElement("div");s.innerHTML=r,this._element=s.children[0],this._container.appendChild(this._element),i.applyBindings(this._viewModel,this._element)},s.prototype.show=function(e){this._viewModel.visible(e)},s}),define("thirdParty/text!widgets/ToolBoxPanel/LayerManage.html",[],function(){return'<div class="rightPanel layerManage" data-bind="visible:visible">\r\n    <div class="panelTitle">\r\n        <span>图层管理</span>\r\n        <input type="button" class="closeButton" title="关闭" value="X" onfocus=" this.blur(); "\r\n               data-bind="click:close"/>\r\n    </div>\r\n    <div>\r\n        <div class="removeAllLayers">\r\n            <a data-bind="click:removeAllLayers">移除所有</a>\r\n            <a class="pull-right" data-toggle="modal" data-target="#moreLayers"\r\n               data-bind="click:function(){getResourceType()},if:showMoreLayer()"\r\n               onclick="document.getElementById(\'moreLayers\').style.display=\'block\'">更多图层</a>\r\n        </div>\r\n        <ul class="list-unstyled" data-bind="sortable:{foreach:userLayers,options:sortableOptions}">\r\n            <li>\r\n                <div class="layerName">\r\n                    <span><i class="glyphicon glyphicon-align-justify" draggable="true"></i></span>\r\n                    <span>\r\n                             <i class="glyphicon"\r\n                                data-bind="click:function(){visible(!visible())},css:{\'glyphicon-eye-open\':visible,\'glyphicon-eye-close\':!visible()}">\r\n                             </i>\r\n                         </span>\r\n                    <span id="layerName" data-bind="text:name,click:function(){opShow(!opShow())}">\r\n                     </span>\r\n                    <span class="pull-right" data-bind="click:function(){opShow(!opShow())}">\r\n                             <i class="glyphicon"\r\n                                data-bind="css:{ \'glyphicon-triangle-right\':!opShow(),\'glyphicon-triangle-bottom\':opShow()}">\r\n                             </i>\r\n                         </span>\r\n                </div>\r\n                <div class="ops" data-bind="visible:opShow">\r\n                    <div>\r\n                        <ul class="list-inline pull-right">\r\n                            <li data-bind="if:typeof ResourceId!=\'undefined\'">\r\n                                <a data-bind="click:function(){$parent.zoomToLayer($data)}">\r\n                                    缩放到\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a target="_blank"\r\n                                   data-bind="visible:typeof ResourceId!=\'undefined\',click:function(){$parent.resourceDetail($data)}">\r\n                                    资源信息\r\n                                </a>\r\n                            </li>\r\n                            <li>\r\n                                <a data-bind="click:function(){$parent.delLayer($data)}">\r\n                                    删除\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="content">\r\n                        透明度调节：<span data-bind="text:opacity100"></span>\r\n                        <input type="range" id="range" data-bind="event:{input:onOpacityChanged}" min="0" max="100"\r\n                               value="100" step="10" class="slider">\r\n                    </div>\r\n                    <div data-bind="if:typeof ResourceId!=\'undefined\',click:function(){if(ResourceId){getLegendData($data)}">\r\n                        <div class="legend" data-bind="style:{\'max-height\':\'120px\', \'overflow\':\'auto\'}">\r\n                            <table>\r\n                                <tr>\r\n                                    <td tyle="width: 26px">&nbsp;</td>\r\n                                    <th colspan="2" data-bind="style:{\'text-align\':\'justify\'}">\r\n                                         <span><!--data-bind="text:legendData.title">-->\r\n                                             <!--标题-->\r\n                                         </span>\r\n                                    </th>\r\n                                </tr>\r\n\r\n                                <tr style=\'height: 20px\'>\r\n                                    <td data-bind=\'style:{"width": "26px", "border": "0px solid white"}\'>\r\n                                        <div>\r\n                                            <!--data-bind=\'style:{"width": "90%", "height": "15px", "background-color":item.color}\'>-->\r\n                                            &nbsp;\r\n                                        </div>\r\n                                    </td>\r\n                                    <td>\r\n                                         <span><!--data-bind="text:item.name">-->\r\n                                         </span>\r\n                                    </td>\r\n                                </tr>\r\n\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div id="moreLayers" class="modal fade " tabindex="-1" role="dialog" data-bind="if:showMoreLayer">\r\n        <div class="modal-dialog" role="document">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <input type="button" class="closeButton" title="关闭" value="X" onfocus=" this.blur(); "\r\n                           onclick="document.getElementById(\'moreLayers\').style.display=\'none\'"/>\r\n                    <h4 class="modal-title" id="H2">共享资源地图添加</h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="container-fluid" style="max-height: 380px; overflow: auto;">\r\n                        <div class="menuHeader">\r\n                            <ul class="list-unstyled typeItems">\r\n                                <!-- ko foreach: {data:resourceTypes,as:\'type\'} -->\r\n                                <li>\r\n                                    <div class="typeName"\r\n                                         data-bind="click:function(){if(!type.resourceInited){$parent.GetResources(type,1);type.resourceInited=true;}type.showSub(!type.showSub());}">\r\n                                        <span data-bind="text:type.Name"></span>\r\n                                        <span class="expendIcon">\r\n                                             <i class="glyphicon"\r\n                                                data-bind="css:{ \'glyphicon-triangle-right\':!type.showSub(),\'glyphicon-triangle-bottom\':type.showSub()}"></i>\r\n                                            </span>\r\n                                    </div>\r\n                                    <div class="pages" data-bind="visible:type.showSub()">\r\n                                        <!-- ko foreach:{data:type.pagedResources,as:\'page\'}-->\r\n                                        <ul class="list-unstyled">\r\n                                            <!-- ko foreach:{data:page,as:\'resource\'} -->\r\n                                            <li>\r\n                                                <div class=" resourceName">\r\n                                                    <label data-bind="click:$root.updateSelection">\r\n                                                        <!--  <input type="checkbox"\r\n                                                                 data-bind="checked:resource.checkValue"/>-->\r\n                                                        <span class="unchecked checkImg"\r\n                                                              data-bind="visible:resource.checkbeforeVisible"></span>\r\n                                                        <span class="checked checkImg"\r\n                                                              data-bind="visible:resource.checkafterVisible"></span>\r\n                                                        <span data-bind="text:resource.Name"></span>\r\n                                                    </label>\r\n                                                    <span><a target="_blank"><i\r\n                                                            data-bind="click:function(){$root.jumpToResourceDetail(resource)}"\r\n                                                            class="glyphicon glyphicon-info-sign"></i></a></span>\r\n                                                </div>\r\n                                            </li>\r\n                                            <!-- /ko -->\r\n                                        </ul>\r\n                                        <!-- /ko -->\r\n                                    </div>\r\n                                </li>\r\n                                <!-- /ko -->\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),!function(e){"use strict";"function"==typeof define&&define.amd?define("thirdParty/Sortable",e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[F]=this;var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var n in o)!(n in t)&&(t[n]=o[n]);Y(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&V,i(e,"mousedown",this._onTapStart),i(e,"touchstart",this._onTapStart),this.nativeDraggable&&(i(e,"dragover",this),i(e,"dragenter",this)),W.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){w&&w.state!==e&&(a(w,"display",e?"none":""),!e&&w.state&&S.insertBefore(w,y),w.state=e)}function o(e,t,o){if(e){o=o||B,t=t.split(".");var n=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===n&&e.parentNode===o||(""===n||e.nodeName.toUpperCase()==n)&&(!t.length||((" "+e.className+" ").match(i)||[]).length==t.length))return e;while(e!==o&&(e=e.parentNode))}return null}function n(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function i(e,t,o){e.addEventListener(t,o,!1)}function r(e,t,o){e.removeEventListener(t,o,!1)}function s(e,t,o){if(e)if(e.classList)e.classList[o?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(N," ").replace(" "+t+" "," ");e.className=(n+(o?" "+t:"")).replace(N," ")}}function a(e,t,o){var n=e&&e.style;if(n){if(void 0===o)return B.defaultView&&B.defaultView.getComputedStyle?o=B.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in n||(t="-webkit-"+t),n[t]=o+("string"==typeof o?"":"px")}}function l(e,t,o){if(e){var n=e.getElementsByTagName(t),i=0,r=n.length;if(o)for(;r>i;i++)o(n[i],i);return n}return[]}function c(e,t,o,n,i,r,s){var a=B.createEvent("Event"),l=(e||t[F]).options,c="on"+o.charAt(0).toUpperCase()+o.substr(1);a.initEvent(o,!0,!0),a.to=t,a.from=i||t,a.item=n||t,a.clone=w,a.oldIndex=r,a.newIndex=s,t.dispatchEvent(a),l[c]&&l[c].call(e,a)}function u(e,t,o,n,i,r){var s,a,l=e[F],c=l.options.onMove;return s=B.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=o,s.draggedRect=n,s.related=i||t,s.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(s),c&&(a=c.call(l,s)),a}function g(e){e.draggable=!1}function h(){z=!1}function d(e,t){var o=e.lastElementChild,n=o.getBoundingClientRect();return(t.clientY-(n.top+n.height)>5||t.clientX-(n.right+n.width)>5)&&o}function p(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,n=0;o--;)n+=t.charCodeAt(o);return n.toString(36)}function f(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function m(e,t){var o,n;return function(){void 0===o&&(o=arguments,n=this,setTimeout(function(){1===o.length?e.call(n,o[0]):e.apply(n,o),o=void 0},t))}}function v(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}var y,_,b,w,S,C,E,T,P,A,x,M,L,D,k,O,R,I={},N=/\s+/g,F="Sortable"+(new Date).getTime(),U=window,B=U.document,H=U.parseInt,V=!!("draggable"in B.createElement("div")),j=function(e){return e=B.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),z=!1,G=Math.abs,W=([].slice,[]),q=m(function(e,t,o){if(o&&t.scroll){var n,i,r,s,a=t.scrollSensitivity,l=t.scrollSpeed,c=e.clientX,u=e.clientY,g=window.innerWidth,h=window.innerHeight;if(T!==o&&(E=t.scroll,T=o,E===!0)){E=o;do if(E.offsetWidth<E.scrollWidth||E.offsetHeight<E.scrollHeight)break;while(E=E.parentNode)}E&&(n=E,i=E.getBoundingClientRect(),r=(G(i.right-c)<=a)-(G(i.left-c)<=a),s=(G(i.bottom-u)<=a)-(G(i.top-u)<=a)),r||s||(r=(a>=g-c)-(a>=c),s=(a>=h-u)-(a>=u),(r||s)&&(n=U)),(I.vx!==r||I.vy!==s||I.el!==n)&&(I.el=n,I.vx=r,I.vy=s,clearInterval(I.pid),n&&(I.pid=setInterval(function(){n===U?U.scrollTo(U.pageXOffset+r*l,U.pageYOffset+s*l):(s&&(n.scrollTop+=s*l),r&&(n.scrollLeft+=r*l))},24)))}},30),Y=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,n=this.el,i=this.options,r=e.type,s=e.touches&&e.touches[0],a=(s||e).target,l=a,u=i.filter;if(!("mousedown"===r&&0!==e.button||i.disabled)&&(a=o(a,i.draggable,n))){if(M=f(a),"function"==typeof u){if(u.call(this,e,a,this))return c(t,l,"filter",a,n,M),void e.preventDefault()}else if(u&&(u=u.split(",").some(function(e){return e=o(l,e.trim(),n),e?(c(t,e,"filter",a,n,M),!0):void 0})))return void e.preventDefault();(!i.handle||o(l,i.handle,n))&&this._prepareDragStart(e,s,a)}},_prepareDragStart:function(e,t,o){var n,r=this,a=r.el,c=r.options,u=a.ownerDocument;o&&!y&&o.parentNode===a&&(k=e,S=a,y=o,_=y.parentNode,C=y.nextSibling,D=c.group,n=function(){r._disableDelayedDrag(),y.draggable=!0,s(y,r.options.chosenClass,!0),r._triggerDragStart(t)},c.ignore.split(",").forEach(function(e){l(y,e.trim(),g)}),i(u,"mouseup",r._onDrop),i(u,"touchend",r._onDrop),i(u,"touchcancel",r._onDrop),c.delay?(i(u,"mouseup",r._disableDelayedDrag),i(u,"touchend",r._disableDelayedDrag),i(u,"touchcancel",r._disableDelayedDrag),i(u,"mousemove",r._disableDelayedDrag),i(u,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(n,c.delay)):n())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(k={target:y,clientX:e.clientX,clientY:e.clientY},this._onDragStart(k,"touch")):this.nativeDraggable?(i(y,"dragend",this),i(S,"dragstart",this._onDragStart)):this._onDragStart(k,!0);try{B.selection?B.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){S&&y&&(s(y,this.options.ghostClass,!0),e.active=this,c(this,S,"start",y,S,M))},_emulateDragOver:function(){if(O){if(this._lastX===O.clientX&&this._lastY===O.clientY)return;this._lastX=O.clientX,this._lastY=O.clientY,j||a(b,"display","none");var e=B.elementFromPoint(O.clientX,O.clientY),t=e,o=" "+this.options.group.name,n=W.length;if(t)do{if(t[F]&&t[F].options.groups.indexOf(o)>-1){for(;n--;)W[n]({clientX:O.clientX,clientY:O.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);j||a(b,"display","")}},_onTouchMove:function(t){if(k){e.active||this._dragStarted(),this._appendGhost();var o=t.touches?t.touches[0]:t,n=o.clientX-k.clientX,i=o.clientY-k.clientY,r=t.touches?"translate3d("+n+"px,"+i+"px,0)":"translate("+n+"px,"+i+"px)";R=!0,O=o,a(b,"webkitTransform",r),a(b,"mozTransform",r),a(b,"msTransform",r),a(b,"transform",r),t.preventDefault();
}},_appendGhost:function(){if(!b){var e,t=y.getBoundingClientRect(),o=a(y);b=y.cloneNode(!0),s(b,this.options.ghostClass,!1),s(b,this.options.fallbackClass,!0),a(b,"top",t.top-H(o.marginTop,10)),a(b,"left",t.left-H(o.marginLeft,10)),a(b,"width",t.width),a(b,"height",t.height),a(b,"opacity","0.8"),a(b,"position","fixed"),a(b,"zIndex","100000"),a(b,"pointerEvents","none"),this.options.fallbackOnBody&&B.body.appendChild(b)||S.appendChild(b),e=b.getBoundingClientRect(),a(b,"width",2*t.width-e.width),a(b,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var o=e.dataTransfer,n=this.options;this._offUpEvents(),"clone"==D.pull&&(w=y.cloneNode(!0),a(w,"display","none"),S.insertBefore(w,y)),t?("touch"===t?(i(B,"touchmove",this._onTouchMove),i(B,"touchend",this._onDrop),i(B,"touchcancel",this._onDrop)):(i(B,"mousemove",this._onTouchMove),i(B,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(o&&(o.effectAllowed="move",n.setData&&n.setData.call(this,o,y)),i(B,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var n,i,r,s=this.el,l=this.options,c=l.group,g=c.put,p=D===c,f=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),R=!0,D&&!l.disabled&&(p?f||(r=!S.contains(y)):D.pull&&g&&(D.name===c.name||g.indexOf&&~g.indexOf(D.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(q(e,l,this.el),z)return;if(n=o(e.target,l.draggable,s),i=y.getBoundingClientRect(),r)return t(!0),void(w||C?S.insertBefore(y,w||C):f||S.appendChild(y));if(0===s.children.length||s.children[0]===b||s===e.target&&(n=d(s,e))){if(n){if(n.animated)return;v=n.getBoundingClientRect()}t(p),u(S,s,y,i,n,v)!==!1&&(y.contains(s)||(s.appendChild(y),_=s),this._animate(i,y),n&&this._animate(v,n))}else if(n&&!n.animated&&n!==y&&void 0!==n.parentNode[F]){P!==n&&(P=n,A=a(n),x=a(n.parentNode));var m,v=n.getBoundingClientRect(),E=v.right-v.left,T=v.bottom-v.top,M=/left|right|inline/.test(A.cssFloat+A.display)||"flex"==x.display&&0===x["flex-direction"].indexOf("row"),L=n.offsetWidth>y.offsetWidth,k=n.offsetHeight>y.offsetHeight,O=(M?(e.clientX-v.left)/E:(e.clientY-v.top)/T)>.5,I=n.nextElementSibling,N=u(S,s,y,i,n,v);if(N!==!1){if(z=!0,setTimeout(h,30),t(p),1===N||-1===N)m=1===N;else if(M){var U=y.offsetTop,B=n.offsetTop;m=U===B?n.previousElementSibling===y&&!L||O&&L:B>U}else m=I!==y&&!k||O&&k;y.contains(s)||(m&&!I?s.appendChild(y):n.parentNode.insertBefore(y,m?I:n)),_=y.parentNode,this._animate(i,y),this._animate(v,n)}}}},_animate:function(e,t){var o=this.options.animation;if(o){var n=t.getBoundingClientRect();a(t,"transition","none"),a(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,a(t,"transition","all "+o+"ms"),a(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){a(t,"transition",""),a(t,"transform",""),t.animated=!1},o)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(B,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var o=this.el,n=this.options;clearInterval(this._loopId),clearInterval(I.pid),clearTimeout(this._dragStartTimer),r(B,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(B,"drop",this),r(o,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(R&&(t.preventDefault(),!n.dropBubble&&t.stopPropagation()),b&&b.parentNode.removeChild(b),y&&(this.nativeDraggable&&r(y,"dragend",this),g(y),s(y,this.options.ghostClass,!1),s(y,this.options.chosenClass,!1),S!==_?(L=f(y),L>=0&&(c(null,_,"sort",y,S,M,L),c(this,S,"sort",y,S,M,L),c(null,_,"add",y,S,M,L),c(this,S,"remove",y,S,M,L))):(w&&w.parentNode.removeChild(w),y.nextSibling!==C&&(L=f(y),L>=0&&(c(this,S,"update",y,S,M,L),c(this,S,"sort",y,S,M,L)))),e.active&&((null===L||-1===L)&&(L=M),c(this,S,"end",y,S,M,L),this.save())),S=y=_=b=C=w=E=T=k=O=R=L=P=A=D=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?y&&(this._onDragOver(e),n(e)):("drop"===t||"dragend"===t)&&this._onDrop(e)},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,s=this.options;r>i;i++)e=n[i],o(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||p(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,i){var r=n.children[i];o(r,this.options.draggable,n)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return o(e,t||this.options.draggable,this.el)},option:function(e,t){var o=this.options;return void 0===t?o[e]:(o[e]=t,void("group"===e&&Y(o)))},destroy:function(){var e=this.el;e[F]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),W.splice(W.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:i,off:r,css:a,find:l,is:function(e,t){return!!o(e,t,e)},extend:v,throttle:m,closest:o,toggleClass:s,index:f},e.create=function(t,o){return new e(t,o)},e.version="1.3.0",e}),define("thirdParty/knockout-sortable",["./knockout","./Sortable"],function(e,t){"use strict";var o=function(o,n,s,a,l,c){var u=r(n,c);["onStart","onEnd","onRemove","onAdd","onUpdate","onSort","onFilter","onMove","onClone"].forEach(function(t){(u[t]||i[t])&&(u[t]=function(t,o,n,r,s){var a=e.dataFor(s.item),l=e.utils.peekObservable(n()),c=l.sortable||l.draggable,u=c.collection||c.foreach;r&&r(s,a,o,u,l),i[t]&&i[t](s,a,o,u,l)}.bind(void 0,t,a,s,u[t]))});var g=t.create(o,u);return e.utils.domNodeDisposal.addDisposeCallback(o,function(){g.destroy()}),e.bindingHandlers.template.init(o,n)},n=function(t,o,n,i,r,s){return e.bindingHandlers.template.update(t,o,n,i,r)},i=function(t){var o=[],n=function(e,t,n,r,s){var a={event:e,itemVM:t,parentVM:n,collection:r,parentBindings:s},l=o.filter(function(e){return e.itemVM===a.itemVM})[0];if(l){o.splice(o.indexOf(l),1);var c="remove"===a.event.type?a:l,u="add"===a.event.type?a:l;i(t,c.collection,u.collection,u.event.clone,u.event)}else o.push(a)},i=function(t,o,n,i,r){var s=o(),a=s.indexOf(t),l=r.newIndex;r.item.previousElementSibling&&(l=n().indexOf(e.dataFor(r.item.previousElementSibling))+1),r.item.parentNode.removeChild(r.item),s.splice(a,1),o.valueHasMutated(),i&&o!==n&&(s.splice(a,0,t),o.valueHasMutated()),e.tasks.runEarly(),n().splice(l,0,t),n.valueHasMutated()};return t.onRemove=n,t.onAdd=n,t.onUpdate=function(e,t,o,n,r){i(t,n,n,!1,e)},t}({}),r=function(t,o){var n=function(e,t){for(var o in t)"[object Object]"===Object.prototype.toString.call(t[o])?("[object Object]"!==Object.prototype.toString.call(e[o])&&(e[o]={}),e[o]=n(e[o],t[o])):e[o]=t[o];return e},i=e.utils.peekObservable(t()).options||{};return o=n({},o),i.group&&"[object Object]"!==Object.prototype.toString.call(i.group)&&(i.group={name:i.group}),n(o,i)};e.bindingHandlers.draggable={sortableOptions:{group:{pull:"clone",put:!1},sort:!1},init:function(t,n,i,r,s){return o(t,n,i,r,s,e.bindingHandlers.draggable.sortableOptions)},update:function(t,o,i,r,s){return n(t,o,i,r,s,e.bindingHandlers.draggable.sortableOptions)}},e.bindingHandlers.sortable={sortableOptions:{group:{pull:!0,put:!0}},init:function(t,n,i,r,s){return o(t,n,i,r,s,e.bindingHandlers.sortable.sortableOptions)},update:function(t,o,i,r,s){return n(t,o,i,r,s,e.bindingHandlers.sortable.sortableOptions)}}}),define("widgets/ToolBoxPanel/LayerManage",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../thirdParty/knockout","../../core/getElement","../../core/loadJsonp","../../thirdParty/text!./LayerManage.html","../../thirdParty/knockout-sortable"],function(e,t,o,n,i,r,s){var a=function(t,n,r){if(!e(t))throw new o("container属性为必填值");t=i(t),this._container=t,this._options=n,this._contMap=r,this._layerManager=r.layerManager};return t(a.prototype,{container:{get:function(){return this._container}},visible:{get function(){return this._viewModel.visible()}},layer:{get function(){return this._layer}},viewModel:{get function(){return this._viewModel}},resourcesToShow:{get function(){return this._resourcesToShow}}}),a.prototype._dataDisplay=function(){var e=document.createElement("div");e.innerHTML=s,this._element=e.children[0],this._container.appendChild(this._element),n.applyBindings(this._viewModel,this._element)},a.prototype.init=function(){var e=this,t=1,o={visible:n.observable(!1),config:e._options,contMap:e._contMap,userLayers:n.observableArray([]),init:function(){e._layerManager.on("addLayer",function(e){if(!e.isTmpLayer){var t=e.layer;t.visible||(t.visible=n.observable(t.getVisible()),t.on("change:visible",function(){t.visible(t.getVisible())}),t.visible.subscribe(function(e){t.setVisible(e)})),t.opShow||(t.opShow=n.observable(!1)),t.opacity100||(t.opacity100=n.observable(100*t.getOpacity()),t.onOpacityChanged=function(e,t){e.opacity100(t.currentTarget.value),e.setOpacity(t.currentTarget.value/100)}),o.userLayers.splice(0,0,t)}}),e._layerManager.on("removeLayer",function(e){o.userLayers.remove(e.layer)})},sortableOptions:{sort:!0,animation:150,handle:".glyphicon-align-justify",onEnd:function(t){var o=t.oldIndex,n=t.newIndex,i=e._layerManager.userLayers.getArray(),r=i.length-1-o,s=i.length-1-n;e._layerManager.move(r,s)}},close:function(){o.visible(!1)},removeAllLayers:function(){for(var t=e._contMap.scene.userLayer.getLayers().getArray(),n=t.length,i=0;i<n;i++)this.delLayer(t[0]);o.resourcesToShow([])},delLayer:function(t){e._layerManager.removeLayer(t)},zoomToLayer:function(t){var o=t.Extent84,n=ol.proj.get("EPSG:4326"),i=n.getExtent(),r=[Math.max(o.MinX,i[0]),Math.max(o.MinY,i[1],-89),Math.min(o.MaxX,i[2]),Math.min(o.MaxY,i[3],89)],s=ol.proj.transformExtent(r,n,e._contMap.scene.map2d.getView().getProjection());e._contMap.scene.map2d.getView().fit(s,e._contMap.scene.map2d.getSize())},getLegendData:function(t){r({url:e._options.getfrsspResourceRootUrl+"?id="+t.ResourceId}).then(function(e){t.legendData=e.Data}).otherwise(function(){console.log("获取图例文件时失败！")})},jumpToResourceDetail:function(t){window.open(e._options.getResourceDetailUrl+"/GetDetail?resourceId="+t.ID)},resourceDetail:function(t){window.open(e._options.getResourceDetailUrl+"/GetDetail?resourceId="+t.ResourceId)},resourcesToShow:n.observableArray([]),resourceTypes:n.observableArray([]),pagedResources:n.observableArray([]),TotalPages:n.observableArray(),showMoreLayer:n.observable(void 0!=this._options.layerManage.mareLayer||0==this._options.layerManage.mareLayer),getResourceType:function(){t&&(r({url:"http://192.168.2.166:8088/ResourceDisplay/GetTypes"}).then(function(e){for(var t=0;t<e.Data.length;t++){var i=e.Data[t];i.showSub=n.observable(!1),i.pagedResources=n.observableArray([]),i.TotalPages=n.observableArray([]),i=n.observable(i),o.resourceTypes.push(i)}}).otherwise(function(e){console.error("获取资源类别时失败！"+e.toString())}),t=0)},GetResources:function(e,t){r({url:"http://192.168.2.166:8088/MapResource/GetPagedItems?pageIndex=1&types="+e.ID}).then(function(t){e.TotalPages(t.Data.TotalPages);for(var o=0;o<t.Data.Data.length;o++){var i=t.Data.Data[o];if(i.checkbeforeVisible=n.observable(!0),i.checkafterVisible=n.observable(!1),i.checkafterVisible==n.observable(!0))return}var r=n.observableArray(t.Data.Data);e.pagedResources.push(r)}).otherwise(function(e){console.error("获取资源时失败！"+e.toString())})},updateSelection:function(e){e.checkbeforeVisible(!e.checkbeforeVisible()),e.checkafterVisible(!e.checkafterVisible());var t=e.checkbeforeVisible()?"remove":"add";if("add"===t){for(var n=!1,i=0;i<o.resourcesToShow().length;i++)if(o.resourcesToShow()[i].ID===e.ID){n=!0;break}n===!1&&(o.resourcesToShow().push(e),o.addResourceShow(e))}if("remove"===t){n=!1;for(var r=0,i=0;i<o.resourcesToShow().length;i++)if(o.resourcesToShow()[i].ID===e.ID){n=!0,r=i;break}n===!0&&(o.resourcesToShow().splice(r,1),o.removeResourceShow(e))}},isChecked:function(e){for(var t=0;t<o.resourcesToShow().length;t++)if(o.resourcesToShow()[t].ID===e.ID)return void e.checkafterVisible(!0)},addResourceShow:function(t){r({url:"http://192.168.2.166:8088/MapResource/GetAccess?resourceId="+t.ID+"&protocol="+t.Protocol}).then(function(o){var n="";switch(o.Data.Protocol){default:case"OGC_WMS":n=o.Data.AccessToken.HasToken===!0?new ol.layer.Tile({source:new ol.source.TileWMS({url:o.Data.Url+"?token="+o.Data.AccessToken.Token,params:{LAYERS:o.Data.Layers.join(","),FORMAT:"image/png"},crossOrigin:"Anonymous"})}):new ol.layer.Tile({source:new ol.source.TileWMS({url:o.Data.Url,params:{LAYERS:o.Data.Layers.join(","),FORMAT:"image/png"},crossOrigin:"Anonymous"})});break;case"OGC_WFS":break;case"OGC_WMTS":break;case"ArcGIS_MapServer_Tiled":var i=JSON.parse(o.Data.SpatialReference);if(3857===i.wkid||102100===i.wkid){n=o.Data.AccessToken.HasToken===!0?new ol.layer.Tile({source:new ol.source.XYZ({url:o.Data.Url+"/tile/{z}/{y}/{x}?token="+o.Data.AccessToken.Token})}):new ol.layer.Tile({source:new ol.source.XYZ({url:o.Data.Url+"/tile/{z}/{y}/{x}"})});break}case"ArcGIS_MapServer_Dynamic":case"ArcGIS_ImageServer":n=o.Data.AccessToken.HasToken===!0?new ol.layer.Tile({source:new ol.source.TileArcGISRest({url:o.Data.Url+"/export?token="+o.Data.AccessToken.Token})}):new ol.layer.Tile({source:new ol.source.TileArcGISRest({url:o.Data.Url})});break;case"OpenGIS_TMS":}n.name=t.Name,n.ResourceId=t.ID,n.Extent84=o.Data.DataExtent,e._layerManager.addLayer(n,!1)}).otherwise(function(e){for(var n=0;n<o.resourcesToShow.length;n++)if(o.resourcesToShow[n]===t){o.resourcesToShow.splice(n,1);break}console.error("获取资源类别时失败！"+e.toString())})},removeResourceShow:function(t){var n=e._contMap.scene.userLayer.getLayers();n.forEach(function(e,i){e.ResourceId===t.ID&&(n.remove(e),o.userLayers.remove(e))},n)},nextPage:function(e,t){t+=1,e.currentPage+=1,o.GetResources(e,t)}};o.init(),this._viewModel=o,this._dataDisplay()},a.prototype.show=function(e){this._viewModel.visible(e)},a.prototype.setTransparency=function(e,t){e.setTransparency(t)},a.prototype.setContMap=function(e){this._contMap=e},a}),define("draw/drawOl",["../core/DeveloperError","../core/baseUtil","../core/defineProperties"],function(e,t,o){function n(e){this._contMap=e,this._drawLayer,this._features,this._modify}var i=t.getAbsoluteUrl("assets/common/draw_point.png");return o(n.prototype,{drawLayer:{get:function(){return this._drawLayer}}}),n.prototype.init=function(e){this._features=e.getFeaturesCollection(),this._drawLayer=new ol.layer.Vector({source:e,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.5)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Icon({src:i})})}),this._contMap.scene.map2d.addLayer(this._drawLayer),this._addModify()},n.prototype._addModify=function(){this._modify=new ol.interaction.Modify({features:this._features,deleteCondition:function(e){return ol.events.condition.shiftKeyOnly(e)&&ol.events.condition.singleClick(e)}}),this._modify.setActive(!1),this._contMap.scene.map2d.addInteraction(this._modify)},n.prototype.wakeModify=function(){this._modify.setActive(!0)},n.prototype.sleepModify=function(){this._modify.setActive(!1)},n.prototype.addDraw=function(t){if("Point"!=t&&"Polygon"!=t&&"LineString"!=t)throw new e("type参数错误");var o=new ol.interaction.Draw({features:this._features,type:t});this._contMap.scene.map2d.addInteraction(o);var n=this;o.on("drawend",function(){n._contMap.scene.map2d.removeInteraction(o)},n)},n.prototype.getLayer=function(){return this._drawLayer},n.prototype.getFeature=function(){return this._features},n}),define("measure/measureOl",["../core/defineProperties","../draw/drawOl"],function(e,t){function o(e){this._sketch,this._measureTooltipElement,this._measureTooltip,this._typeHelp,this._draw,this._wgs84Sphere=new ol.Sphere(6378137),this._source,this._vectorLayer,this._contMap=e,this._map=e.scene.map2d,this._dataSourceTab}new ol.Sphere(6378137);return e(o.prototype,{draw:{get:function(){return this._draw}},source:{get:function(){return this._source},set:function(e){this._source=e}},vectorLayer:{get:function(){return this._vectorLayer},set:function(e){this._vectorLayer=e,this._map.addLayer(this._vectorLayer)}},dataSourceTab:{get:function(){return this._dataSourceTab}}}),o.prototype.formatLength=function(e){var t,o;return t=Math.round(100*e.getLength())/100,o=t>100?Math.round(t/1e3*100)/100+" km":Math.round(100*t)/100+" m"},o.prototype.formatArea=function(e){var t,o;return t=e.getArea(),o=t>1e4?Math.round(t/1e6*100)/100+" km<sup>2</sup>":Math.round(100*t)/100+" m<sup>2</sup>"},o.prototype.initMeasure=function(){var e=new ol.Collection,t=new ol.source.Vector({features:e}),o=new ol.layer.Vector({source:t,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.4)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})});this._source=t,this._vectorLayer=o},o.prototype.measureLength=function(){var e=this,t="LineString";e._draw=new ol.interaction.Draw({source:e._source,type:t,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.4)"}),stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.7)"}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"})})})}),e._map.addInteraction(e._draw)},o.prototype.measureArea=function(){var e=this,t="Polygon";e._draw=new ol.interaction.Draw({source:e._source,type:t,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.4)"}),stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.7)"}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"})})})}),e._map.addInteraction(e._draw)},o.prototype.unMeasure=function(){this._map.removeInteraction(this._draw)},o.prototype.addInteraction=function(e,t){var o,n=this,e=e;n._draw=new ol.interaction.Draw({source:n._source,type:e,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.4)"}),stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"rgba(0, 0, 0, 0.7)"}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"})})})}),n._map.addInteraction(n._draw),n._draw.on("drawstart",function(e){n._sketch=e.feature}),n._draw.on("drawend",function(e){var i=e.feature.getGeometry();i instanceof ol.geom.LineString?(n._dataSourceTab="",n._dataSourceTab+="<i>水平距离:</i>"+n.formatLength(i)):i instanceof ol.geom.Polygon&&(n._dataSourceTab="",n._dataSourceTab+="<i>面积:</i>"+n.formatArea(i)),t(n._dataSourceTab),ol.Observable.unByKey(o),n._map.removeInteraction(n._draw)})},o.prototype._measurePolyline=function(e){for(var t=this,o=[],n=e.getCoordinates(),i=t._contMap.scene.map2d.getView().getProjection(),r=0,s=n.length-1;r<s;++r){var a=ol.proj.transform(n[r],i,"EPSG:4326"),l=ol.proj.transform(n[r+1],i,"EPSG:4326");o.push(t._wgs84Sphere.haversineDistance(a,l).toFixed(3))}var c;return c=o>100?Math.round(o/1e3*100)/100+" 公里":Math.round(100*o)/100+" 米",o},o.prototype.setTipStyle=function(){this._measureTooltipElement.className="tooltip tooltip-static",this._measureTooltip.setOffset([0,-7]),this._sketch=null,this._measureTooltipElement=null,this.createMeasureTooltip()},o.prototype.setTipPos_polygon=function(e){var t=this.formatArea(e),o=e.getInteriorPoint().getCoordinates();this._measureTooltipElement.innerHTML=t,this._measureTooltip.setPosition(o)},o.prototype.setTipPos_polyline=function(e){var t=this.formatLength(e),o=e.getLastCoordinate();this._measureTooltipElement.innerHTML=t,this._measureTooltip.setPosition(o)},o.prototype.createMeasureTooltip=function(){this._measureTooltipElement&&this._measureTooltipElement.parentNode.removeChild(this._measureTooltipElement),this._measureTooltipElement=document.createElement("div"),this._measureTooltipElement.className="tooltip tooltip-measure",this._measureTooltip=new ol.Overlay({element:this._measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),this._map.addOverlay(this._measureTooltip)},o.prototype.getLayer=function(){return this._vectorLayer},o}),define("draw/core",["../core/defineProperties","../core/baseUtil"],function(e,t){var o=Cesium.Ellipsoid.WGS84,n=function(){this.defaultShapeOptions={ellipsoid:Cesium.Ellipsoid.WGS84,textureRotationAngle:0,height:0,asynchronous:!0,show:!0,debugShowBoundingVolume:!1},this.defaultSurfaceOptions=this.copyOptions(this.defaultShapeOptions,{appearance:new Cesium.EllipsoidSurfaceAppearance({aboveGround:!1}),material:this.material,granularity:Math.PI/180}),this.material=Cesium.Material.fromType(Cesium.Material.ColorType),this.material.uniforms.color=new Cesium.Color(1,1,0,.5),this.defaultBillboard={iconUrl:t.getAbsoluteUrl("assets/common/dragIcon.png"),shiftX:0,shiftY:0},this.dragBillboard={iconUrl:t.getAbsoluteUrl("assets/common/dragIcon.png"),shiftX:0,shiftY:0},this.dragHalfBillboard={iconUrl:t.getAbsoluteUrl("assets/common/dragIconLight.png"),shiftX:0,shiftY:0},this.defaultPolygonOptions=this.copyOptions(this.defaultShapeOptions,{}),this.defaultExtentOptions=this.copyOptions(this.defaultShapeOptions,{}),this.defaultCircleOptions=this.copyOptions(this.defaultShapeOptions,{}),this.defaultEllipseOptions=this.copyOptions(this.defaultSurfaceOptions,{rotation:0}),this.defaultPolylineOptions=this.copyOptions(this.defaultShapeOptions,{width:5,geodesic:!0,granularity:1e4,appearance:new Cesium.PolylineMaterialAppearance({aboveGround:!1}),material:this.material})};return n.prototype.getExtent=function(e,t){var o=new Cesium.Rectangle;o.west=Math.min(e.longitude,t.longitude),o.east=Math.max(e.longitude,t.longitude),o.south=Math.min(e.latitude,t.latitude),o.north=Math.max(e.latitude,t.latitude);var n=Cesium.Math.EPSILON7;return o.east-o.west<n&&(o.east+=2*n),o.north-o.south<n&&(o.north+=2*n),o},n.prototype.clone=function(e,t){if(null==e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var o in e)t[o]="undefined"==typeof t[o]?this.clone(e[o],null):t[o];return t},n.prototype.fillOptions=function(e,t){e=e||{};var o;for(o in t)void 0===e[o]&&(e[o]=this.clone(t[o]))},n.prototype.copyOptions=function(e,t){var o,n=this.clone(e);for(o in t)void 0===n[o]&&(n[o]=this.clone(t[o]));return n},n.prototype.setListener=function(e,t,o){e[t]=o},n.prototype.enhanceWithListeners=function(e){e._listeners={},e.addListener=function(e,t){return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this._listeners[e].length},e.executeListeners=function(e,t){if(this._listeners[e.name]&&this._listeners[e.name].length>0)for(var o=0;o<this._listeners[e.name].length;o++)this._listeners[e.name][o](e);else t&&t(e)}},n.prototype.getExtentCorners=function(e){return o.cartographicArrayToCartesianArray([Cesium.Rectangle.northwest(e),Cesium.Rectangle.northeast(e),Cesium.Rectangle.southeast(e),Cesium.Rectangle.southwest(e)])},n.prototype.coord3dTo2d=function(e,t){for(var o,n,i=[],r=0;r<e.length;r++)o=t.globe.ellipsoid.cartesianToCartographic(e[r]),n=ol.proj.fromLonLat([o.longitude/Math.PI*180,o.latitude/Math.PI*180]),i.push(n);return i},n.prototype.coord3dToLonLat=function(e,t){for(var o,n=[],i=0;i<e.length;i++)o=t.globe.ellipsoid.cartesianToCartographic(e[i]),resGeom=[o.longitude/Math.PI*180,o.latitude/Math.PI*180],n.push(resGeom);return n},n.prototype.coord3dHeight=function(e,t){var o,n,i;return n=t.globe.ellipsoid.cartesianToCartographic(e[0]),i=t.globe.ellipsoid.cartesianToCartographic(e[e.length-1]),o=(i.height-n.height).toFixed(3)},n.prototype.coord2dTo3d=function(e){for(var t,o,n=[],i=0;i<e.length;i++)t=ol.proj.toLonLat(e[i]),o=Cesium.Cartesian3.fromDegrees(t[0],t[1]),n.push(o);return n},n}),define("draw/BillboardGroup",["./core"],function(e){function t(t,o){this.core=new e,this._scene=t,this._options=this.core.copyOptions(o,this.core.defaultBillboard);var n=new Cesium.BillboardCollection;this._scene.primitives.add(n),this._billboards=n,this._orderedBillboards=[]}var o=Cesium.Ellipsoid.WGS84;return t.prototype.createBillboard=function(e,t){function n(e){a.enableRotate=e}function i(){for(var e=0,t=s._orderedBillboards.length;e<t&&s._orderedBillboards[e]!=r;++e);return e}var r=this._billboards.add({show:!0,position:e,pixelOffset:new Cesium.Cartesian2(this._options.shiftX,this._options.shiftY),eyeOffset:new Cesium.Cartesian3(0,0,0),verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:1,image:this._options.iconUrl,color:new Cesium.Color(1,1,1,1)});if(t){var s=this,a=this._scene.screenSpaceCameraController;if(t.dragHandlers){var s=this;s.core.setListener(r,"leftDown",function(e){function a(e){r.position=e;for(var o=0,n=s._orderedBillboards.length;o<n&&s._orderedBillboards[o]!=r;++o);t.dragHandlers.onDrag&&t.dragHandlers.onDrag(i(),e)}function l(e){c.destroy(),n(!0),t.dragHandlers.onDragEnd&&t.dragHandlers.onDragEnd(i(),e)}var c=new Cesium.ScreenSpaceEventHandler(s._scene.canvas);c.setInputAction(function(e){var t=s._scene.camera.pickEllipsoid(e.endPosition,o);t?a(t):l(t)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),c.setInputAction(function(e){l(s._scene.camera.pickEllipsoid(e.position,o))},Cesium.ScreenSpaceEventType.LEFT_UP),n(!1),t.dragHandlers.onDragStart&&t.dragHandlers.onDragStart(i(),s._scene.camera.pickEllipsoid(e,o))})}t.onDoubleClick&&s.core.setListener(r,"leftDoubleClick",function(e){t.onDoubleClick(i())}),t.onClick&&s.core.setListener(r,"leftClick",function(e){t.onClick(i())}),t.tooltip&&(s.core.setListener(r,"mouseMove",function(e){}),s.core.setListener(r,"mouseOut",function(e){}))}return r},t.prototype.insertBillboard=function(e,t,o){this._orderedBillboards.splice(e,0,this.createBillboard(t,o))},t.prototype.addBillboard=function(e,t){this._orderedBillboards.push(this.createBillboard(e,t))},t.prototype.addBillboards=function(e,t){for(var o=0;o<e.length;o++)this.addBillboard(e[o],t)},t.prototype.updateBillboardsPositions=function(e){for(var t=0;t<e.length;t++)this.getBillboard(t).position=e[t]},t.prototype.countBillboards=function(){return this._orderedBillboards.length},t.prototype.getBillboard=function(e){return this._orderedBillboards[e]},t.prototype.removeBillboard=function(e){this._billboards.remove(this.getBillboard(e)),this._orderedBillboards.splice(e,1)},t.prototype.remove=function(){this._billboards=this._billboards&&this._billboards.removeAll()&&this._billboards.destroy()},t.prototype.setOnTop=function(){this._scene.primitives.raiseToTop(this._billboards)},t}),define("draw/PrimitivesManager",[],function(){var e=function(){function e(){var e=new Cesium.PrimitiveCollection;return{add:function(t){e.add(t)},remove:function(t){e.remove(t)},removeAll:function(){e.removeAll()},contains:function(t){return e.contains(t)},get:function(){return e}}}var t;return{getInstance:function(){return t||(t=e()),t}}}();return{primitivesManager:e}}),define("draw/abstractPrimitive",["./core","./BillboardGroup","./PrimitivesManager"],function(e,t,o){function n(){this.core=new e}var i=Cesium.Ellipsoid.WGS84;return n.prototype.initialiseOptions=function(e){this.core.fillOptions(this,e),this._ellipsoid=void 0,this._granularity=void 0,this._height=void 0,this._textureRotationAngle=void 0,this._id=void 0,this._createPrimitive=!0,this._primitive=void 0,this._outlinePolygon=void 0,this._bool=!0},n.prototype.setAttribute=function(e,t){this[e]=t,this._createPrimitive=!0},n.prototype.getAttribute=function(e){return this[e]},n.prototype.update=function(e,t,o){if(!Cesium.defined(this.ellipsoid))throw new Cesium.DeveloperError("this.ellipsoid must be defined.");if(!Cesium.defined(this.appearance))throw new Cesium.DeveloperError("this.material must be defined.");if(this.granularity<0)throw new Cesium.DeveloperError("this.granularity and scene2D/scene3D overrides must be greater than zero.");if(this.show&&(this._createPrimitive||Cesium.defined(this._primitive))){if(this._createPrimitive||this._ellipsoid!==this.ellipsoid||this._granularity!==this.granularity||this._height!==this.height||this._textureRotationAngle!==this.textureRotationAngle||this._id!==this.id){var n=this.getGeometry();if(!n)return;this._createPrimitive=!1,this._ellipsoid=this.ellipsoid,this._granularity=this.granularity,this._height=this.height,this._textureRotationAngle=this.textureRotationAngle,this._id=this.id,this._primitive=this._primitive&&this._primitive.destroy(),this._primitive=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:n,id:this.id,pickPrimitive:this}),appearance:this.appearance,asynchronous:this.asynchronous}),this._outlinePolygon=this._outlinePolygon&&this._outlinePolygon.destroy(),this.strokeColor&&this.getOutlineGeometry&&(this._outlinePolygon=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:this.getOutlineGeometry(),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(this.strokeColor)}}),appearance:new Cesium.PerInstanceColorAppearance({flat:!0,renderState:{depthTest:{enabled:!0},lineWidth:this.strokeWidth||4}})}))}var i=this._primitive;i.appearance.material=this.core.material,i.debugShowBoundingVolume=this.debugShowBoundingVolume,i.update(e,t,o),this._outlinePolygon&&this._outlinePolygon.update(e,t,o)}},n.prototype.isDestroyed=function(){return!1},n.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),Cesium.destroyObject(this)},n.prototype.setStrokeStyle=function(e,t){this.strokeColor&&this.strokeColor.equals(e)&&this.strokeWidth==t||(this._createPrimitive=!0,this.strokeColor=e,this.strokeWidth=t)},n.prototype.registerEditableShape=function(e){var t=this;t.core.setListener(e,"mouseMove",function(t){e.setHighlighted(!0)}),t.core.setListener(e,"mouseOut",function(t){e.setHighlighted(!1)}),t.core.setListener(e,"leftClick",function(o){e.setEditMode(!0,t.scene,t.drawSource)})},n.prototype.disableAllHighlights=function(){this.setHighlighted(void 0)},n.prototype.setHighlighted=function(e){this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=e&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=e},n.prototype.setEdited=function(e){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=e},n.prototype.SetHighlighted=function(e){this._highlighted&&this._highlighted==e||this._editMode!==!0&&(this._highlighted=e,e?(this.setHighlighted(this),this._strokeColor=this.strokeColor,this.setStrokeStyle(Cesium.Color.fromCssColorString("white"),this.strokeWidth)):this._strokeColor?this.setStrokeStyle(this._strokeColor,this.strokeWidth):this.setStrokeStyle(void 0,void 0))},n.prototype.SetEditMode=function(e,n,r){function s(e,t){var o=e-1<0?t.length-1:e-1;o<g.countBillboards()&&(g.getBillboard(o).position=l(o)),o=e,o<g.countBillboards()&&(g.getBillboard(o).position=l(o))}function a(){c.executeListeners({name:"onEdited",positions:c.positions})}function l(e){var t=c.positions;return i.cartographicToCartesian(new Cesium.EllipsoidGeodesic(i.cartesianToCartographic(t[e]),i.cartesianToCartographic(t[e<t.length-1?e+1:0])).interpolateUsingFraction(.5))}if(this._editMode!=e)if(this.disableAllHighlights(),e){this.setEdited(this);var n=n,c=this;if(null==this._markers){var u=new t(n,c.core.dragBillboard),g=new t(n,c.core.dragHalfBillboard),h={dragHandlers:{onDrag:function(e,t){c.positions[e]=t,s(e,c.positions),c._createPrimitive=!0},onDragEnd:function(e,t){c._createPrimitive=!0,a()}},onDoubleClick:function(e){c.positions.length<4||(c.positions.splice(e,1),c._createPrimitive=!0,u.removeBillboard(e),g.removeBillboard(e),s(e,c.positions),a())}};u.addBillboards(c.positions,h),
this._markers=u;for(var d=[],p=0,f=c.positions.length+(this.isPolygon?0:-1);p<f;p++)d.push(l(p));var m={dragHandlers:{onDragStart:function(e,t){this.index=e+1,c.positions.splice(this.index,0,t),c._createPrimitive=!0},onDrag:function(e,t){c.positions[this.index]=t,c._createPrimitive=!0},onDragEnd:function(e,t){u.insertBillboard(this.index,t,h),g.getBillboard(this.index-1).position=l(this.index-1),g.insertBillboard(this.index,l(this.index),m),c._createPrimitive=!0,a()}}};g.addBillboards(d,m),this._editMarkers=g,this._globeClickhandler=new Cesium.ScreenSpaceEventHandler(n.canvas),this._globeClickhandler.setInputAction(function(e){if(e)var t=n.pick(e.position);if(!t||!t.primitive||t.primitive!=this){c.setEditMode(!1);var i,s=c.getPositions(),a=c.core.coord3dTo2d(s,n);c.idPolygon!==!0?i=new ol.Feature(new ol.geom.LineString(a)):1==c.idPolygon&&(i=new ol.Feature(new ol.geom.Polygon([a]))),r.getFeaturesCollection().push(i),n.primitives.remove(c),o.primitivesManager.getInstance().contains(c)&&o.primitivesManager.getInstance().remove(c),c._bool=!1}},Cesium.ScreenSpaceEventType.LEFT_CLICK),u.setOnTop(),g.setOnTop()}this._editMode=!0}else null!=this._markers&&(this._markers.remove(),this._editMarkers.remove(),this._markers=null,this._editMarkers=null,this._globeClickhandler.destroy()),this._editMode=!1},n.prototype.simulationEvent=function(){this._globeClickhandler.getInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK)()},n}),define("draw/PolygonPrimitive",["./core","./abstractPrimitive"],function(e,t){function o(t){this.core=new e,t=this.core.copyOptions(t,this.core.defaultSurfaceOptions),this.initialiseOptions(t),this.idPolygon=!0,this.scene,this.drawSource}Cesium.Ellipsoid.WGS84;return o.prototype=new t,o.prototype.setPositions=function(e){this.setAttribute("positions",e)},o.prototype.getPositions=function(){return this.getAttribute("positions")},o.prototype.getGeometry=function(){if(Cesium.defined(this.positions)&&!(this.positions.length<3))return Cesium.PolygonGeometry.fromPositions({positions:this.positions,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},o.prototype.getOutlineGeometry=function(){return Cesium.PolygonOutlineGeometry.fromPositions({positions:this.getPositions()})},o.prototype.setEditable=function(e,t){this.scene=e,this.drawSource=t;var o=this;o.asynchronous=!1,o.registerEditableShape(o),o.setEditMode=this.SetEditMode,o.setHighlighted=this.SetHighlighted,this.core.enhanceWithListeners(o),o.setEditMode(!1)},o}),define("draw/PolylinePrimitive",["./core","./abstractPrimitive"],function(e,t){function o(t){this.core=new e,t=this.core.copyOptions(t,this.core.defaultPolylineOptions),this.initialiseOptions(t),this.scene,this.drawSource}var n=Cesium.Ellipsoid.WGS84;return o.prototype=new t,o.prototype.setPositions=function(e){this.setAttribute("positions",e)},o.prototype.setWidth=function(e){this.setAttribute("width",e)},o.prototype.setGeodesic=function(e){this.setAttribute("geodesic",e)},o.prototype.getPositions=function(){return this.getAttribute("positions")},o.prototype.getWidth=function(){return this.getAttribute("width")},o.prototype.getGeodesic=function(e){return this.getAttribute("geodesic")},o.prototype.getGeometry=function(){if(Cesium.defined(this.positions)&&!(this.positions.length<2))return new Cesium.PolylineGeometry({positions:this.positions,height:this.height,width:this.width<1?1:this.width,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,ellipsoid:this.ellipsoid})},o.prototype.setEditable=function(e,t){if(!this.setEditMode){this.scene=e,this.drawSource=t;var o=this;o.isPolygon=!1,o.asynchronous=!1,o.registerEditableShape(o),o.setEditMode=this.SetEditMode;var i=this.width;o.setHighlighted=function(e){this._editMode!==!0&&(e?(this._highlightedSurface&&!this._highlightedSurface.isDestroyed()&&this._highlightedSurface!=o&&this._highlightedSurface.setHighlighted(!1),this._highlightedSurface=o,this.setWidth(2*i)):this.setWidth(i))},o.getExtent=function(){return Cesium.Extent.fromCartographicArray(n.cartesianArrayToCartographicArray(this.positions))},this.core.enhanceWithListeners(o),o.setEditMode(!1)}},o}),define("draw/EllipsePrimitive",["./core","./abstractPrimitive"],function(e,t){function o(t){if(!(Cesium.defined(t.center)&&Cesium.defined(t.semiMajorAxis)&&Cesium.defined(t.semiMinorAxis)))throw new Cesium.DeveloperError("Center and semi major and semi minor axis are required");t=e.copyOptions(t,e.defaultEllipseOptions),this.initialiseOptions(t)}return o.prototype=new t,o.prototype.setCenter=function(e){this.setAttribute("center",e)},o.prototype.setSemiMajorAxis=function(e){e<this.getSemiMinorAxis()||this.setAttribute("semiMajorAxis",e)},o.prototype.setSemiMinorAxis=function(e){e>this.getSemiMajorAxis()||this.setAttribute("semiMinorAxis",e)},o.prototype.setRotation=function(e){return this.setAttribute("rotation",e)},o.prototype.getCenter=function(){return this.getAttribute("center")},o.prototype.getSemiMajorAxis=function(){return this.getAttribute("semiMajorAxis")},o.prototype.getSemiMinorAxis=function(){return this.getAttribute("semiMinorAxis")},o.prototype.getRotation=function(){return this.getAttribute("rotation")},o.prototype.getGeometry=function(){if(Cesium.defined(this.center)&&Cesium.defined(this.semiMajorAxis)&&Cesium.defined(this.semiMinorAxis))return new Cesium.EllipseGeometry({ellipsoid:this.ellipsoid,center:this.center,semiMajorAxis:this.semiMajorAxis,semiMinorAxis:this.semiMinorAxis,rotation:this.rotation,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},o.prototype.getOutlineGeometry=function(){return new Cesium.EllipseOutlineGeometry({center:this.getCenter(),semiMajorAxis:this.getSemiMajorAxis(),semiMinorAxis:this.getSemiMinorAxis(),rotation:this.getRotation()})},o}),define("draw/ExtentPrimitive",["./core","./abstractPrimitive","./BillboardGroup"],function(e,t,o){function n(e){if(!Cesium.defined(e.extent))throw new Cesium.DeveloperError("Extent is required")}return n.prototype=new t,n.prototype.setExtent=function(e){this.setAttribute("extent",e)},n.prototype.getExtent=function(){return this.getAttribute("extent")},n.prototype.getGeometry=function(){if(Cesium.defined(this.extent))return new Cesium.RectangleGeometry({rectangle:this.extent,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},n.prototype.getOutlineGeometry=function(){return new Cesium.RectangleOutlineGeometry({rectangle:this.extent})},n}),define("draw/CirclePrimitive",["./core","./abstractPrimitive"],function(e,t){function o(t){if(this.core=new e,!Cesium.defined(t.center)||!Cesium.defined(t.radius))throw new Cesium.DeveloperError("Center and radius are required");t=this.core.copyOptions(t,this.core.defaultSurfaceOptions),this.initialiseOptions(t),this.setRadius(t.radius)}return o.prototype=new t,o.prototype.setCenter=function(e){this.setAttribute("center",e)},o.prototype.setRadius=function(e){this.setAttribute("radius",Math.max(.1,e))},o.prototype.getCenter=function(){return this.getAttribute("center")},o.prototype.getRadius=function(){return this.getAttribute("radius")},o.prototype.getGeometry=function(){if(Cesium.defined(this.center)&&Cesium.defined(this.radius))return new Cesium.CircleGeometry({center:this.center,radius:this.radius,height:this.height,vertexFormat:Cesium.EllipsoidSurfaceAppearance.VERTEX_FORMAT,stRotation:this.textureRotationAngle,ellipsoid:this.ellipsoid,granularity:this.granularity})},o.prototype.getOutlineGeometry=function(){return new Cesium.CircleOutlineGeometry({center:this.getCenter(),radius:this.getRadius()})},o}),define("draw/drawCesium",["./core","./BillboardGroup","./PolygonPrimitive","./PolylinePrimitive","./EllipsePrimitive","./ExtentPrimitive","./CirclePrimitive","./PrimitivesManager","../core/baseUtil","../core/defineProperties"],function(e,t,o,n,i,r,s,a,l,c){function u(t){this.core=new e,this._contMap=t,this._scene,this._drawSource,this._surface=[]}var g=Cesium.Ellipsoid.WGS84;l.getAbsoluteUrl("assets/common/draw_point.png");return c(u.prototype,{scene:{get:function(){return this._scene},set:function(e){this._scene=e}},drawSource:{get:function(){return this._drawSource},set:function(e){this._drawSource=e}}}),u.prototype.init=function(){this.initialiseHandlers(),this.extendBillboardCollection()},u.prototype.initialiseHandlers=function(){function e(e,n){if(1!=o._handlersMuted){var i=t.pick(n);i&&i.primitive&&i.primitive[e]&&i.primitive[e](n)}}var t=this._scene,o=this,n=new Cesium.ScreenSpaceEventHandler(t.canvas);n.setInputAction(function(t){e("leftClick",t.position)},Cesium.ScreenSpaceEventType.LEFT_CLICK),n.setInputAction(function(t){e("leftDoubleClick",t.position)},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);var i;n.setInputAction(function(e){if(1!=o._handlersMuted){var n=t.pick(e.endPosition);!i||n&&i==n.primitive||(!(i.isDestroyed&&i.isDestroyed())&&i.mouseOut(e.endPosition),i=null),n&&n.primitive&&(n=n.primitive,n.mouseOut&&(i=n),n.mouseMove&&n.mouseMove(e.endPosition))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),n.setInputAction(function(t){e("leftUp",t.position)},Cesium.ScreenSpaceEventType.LEFT_UP),n.setInputAction(function(t){e("leftDown",t.position)},Cesium.ScreenSpaceEventType.LEFT_DOWN)},u.prototype.setListener=function(e,t,o){e[t]=o},u.prototype.muteHandlers=function(e){this._handlersMuted=e},u.prototype.startDrawing=function(e){this.disableAllEditMode(),this.editCleanUp&&this.editCleanUp(),this.editCleanUp=e,this.muteHandlers(!0)},u.prototype.stopDrawing=function(){this.editCleanUp&&(this.editCleanUp(),this.editCleanUp=null),this.muteHandlers(!1)},u.prototype.disableAllEditMode=function(){this.setEdited(void 0)},u.prototype.setEdited=function(e){this._editedSurface&&!this._editedSurface.isDestroyed()&&this._editedSurface.setEditMode(!1),this._editedSurface=e},u.prototype.createBillboardGroup=function(e,o,n){var i=new t(this._scene,o);return i.addBillboards(e,n),i},u.prototype.startDrawingMarker=function(e){var e=this.core.copyOptions(e,this.core.defaultBillboard);this.startDrawing(function(){i.remove(),r.destroy()});var o=this,n=this._scene,i=(n.primitives,new t(this._scene,e)),r=new Cesium.ScreenSpaceEventHandler(n.canvas);r.setInputAction(function(t){if(null!=t.position){var r=n.camera.pickEllipsoid(t.position,g);r&&(i.addBillboard(r),o.stopDrawing(),e.callback(r))}},Cesium.ScreenSpaceEventType.LEFT_CLICK),r.setInputAction(function(e){e.endPosition},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},u.prototype.startDrawingPolygon=function(e){var e=this.core.copyOptions(e,this.core.defaultSurfaceOptions);this.startDrawingPolyshape(!0,e)},u.prototype.startDrawingPolyline=function(e){var e=this.core.copyOptions(e,this.core.defaultPolylineOptions);this.startDrawingPolyshape(!1,e)},u.prototype.startDrawingPolyshape=function(e,i){this.startDrawing(function(){c.remove(r),d.remove(),p.destroy()});var r,s=this,l=this._scene,c=l.primitives,u=e?3:2;r=e?new o(i):new n(i),r.asynchronous=!1,c.add(r),a.primitivesManager.getInstance().add(r);var h=[],d=new t(this._scene,s.core.defaultBillboard),p=new Cesium.ScreenSpaceEventHandler(l.canvas);p.setInputAction(function(e){if(null!=e.position){var t=l.camera.pickEllipsoid(e.position,g);t&&(0==h.length&&(h.push(t.clone()),d.addBillboard(h[0])),h.length>=u&&(r.positions=h,r._createPrimitive=!0),h.push(t),d.addBillboard(t))}},Cesium.ScreenSpaceEventType.LEFT_CLICK),p.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(0==h.length);else{var o=l.camera.pickEllipsoid(t,g);o&&(h.pop(),o.y+=1+Math.random(),h.push(o),h.length>=u&&(r.positions=h,r._createPrimitive=!0),d.getBillboard(h.length-1).position=o)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),p.setInputAction(function(e){var t=e.position;if(null!=t){if(h.length<u+2)return;var o=l.camera.pickEllipsoid(t,g);if(o&&(s.stopDrawing(),"function"==typeof i.callback)){h.length-1;i.callback(h)}}},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},u.prototype.startDrawingExtent=function(e){function o(e){null==a&&(a=new Cesium.RectangleGeometry,a.asynchronous=!1,r.add(a)),a.rectangle=e;var o=n.core.getExtentCorners(e);null==l?(l=new t(n._scene,n.core.defaultBillboard),l.addBillboards(o)):l.updateBillboardsPositions(o)}var e=this.core.copyOptions(e,this.core.defaultSurfaceOptions);this.startDrawing(function(){null!=a&&r.remove(a),l.remove(),c.destroy()});var n=this,i=this._scene,r=this._scene.primitives,s=null,a=null,l=null,c=new Cesium.ScreenSpaceEventHandler(i.canvas);c.setInputAction(function(t){if(null!=t.position){var r=i.camera.pickEllipsoid(t.position,g);if(r)if(null==a){s=g.cartesianToCartographic(r);var l=n.core.getExtent(s,s);o(l)}else n.stopDrawing(),"function"==typeof e.callback&&e.callback(n.core.getExtent(s,g.cartesianToCartographic(r)))}},Cesium.ScreenSpaceEventType.LEFT_DOWN),c.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==a);else{var r=i.camera.pickEllipsoid(t,g);if(r){var l=n.core.getExtent(s,g.cartesianToCartographic(r));o(l)}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},u.prototype.startDrawingCircle=function(e){var e=this.core.copyOptions(e,this.core.defaultSurfaceOptions);this.startDrawing(function(){null!=r&&i.remove(r),a.remove(),l.destroy()});var o=this,n=this._scene,i=this._scene.primitives,r=(this._tooltip,null),a=null,l=new Cesium.ScreenSpaceEventHandler(n.canvas);l.setInputAction(function(l){if(null!=l.position){var c=n.camera.pickEllipsoid(l.position,g);c&&(null==r?(r=new s({center:c,radius:0,asynchronous:!1,material:e.material}),i.add(r),a=new t(o._scene,o.core.defaultBillboard),a.addBillboards([c])):("function"==typeof e.callback&&e.callback(r.getCenter(),r.getRadius()),o.stopDrawing()))}},Cesium.ScreenSpaceEventType.LEFT_DOWN),l.setInputAction(function(e){var t=e.endPosition;if(null!=t)if(null==r);else{var o=n.camera.pickEllipsoid(t,g);o&&(r.setRadius(Cesium.Cartesian3.distance(r.getCenter(),o)),a.updateBillboardsPositions(o))}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)},u.prototype.extendBillboardCollection=function(){var e=this;Cesium.BillboardCollection.prototype.setEditable=function(){function t(t){e._scene.screenSpaceCameraController.enableRotate=t}if(!this._editable){this._editable=!0;var o=this,n=this.get(0),i=this.get(0);e.core.setListener(n,"leftDown",function(r){function s(t){n.position=t,e.executeListeners({name:"drag",positions:t})}function a(o){l.destroy(),t(!0),e.executeListeners({name:"dragEnd",positions:o})}var l=new Cesium.ScreenSpaceEventHandler(e._scene.canvas);l.setInputAction(function(t){var o=e._scene.camera.pickEllipsoid(t.endPosition,g);o?s(o):a(o)},Cesium.ScreenSpaceEventType.MOUSE_MOVE),l.setInputAction(function(t){a(e._scene.camera.pickEllipsoid(t.position,g));var n=e.core.coord3dTo2d([i.position],e._scene),r=new ol.Feature(new ol.geom.Point(n[0]));e._drawSource.getFeaturesCollection().push(r),e._scene.primitives.remove(o)},Cesium.ScreenSpaceEventType.LEFT_UP),t(!1)}),e.core.enhanceWithListeners(n),e.core.enhanceWithListeners(e)}}},u.prototype.drawMarker=function(){this.core.enhanceWithListeners(this);var e=this;e.startDrawingMarker({callback:function(t){e.executeListeners({name:"markerCreated",position:t})}})},u.prototype.drawPolyline=function(){this.core.enhanceWithListeners(this);var e=this;e.startDrawingPolyline({callback:function(t){e.executeListeners({name:"polylineCreated",positions:t})}})},u.prototype.drawPolygon=function(){this.core.enhanceWithListeners(this);var e=this;e.startDrawingPolygon({callback:function(t){e.executeListeners({name:"polygonCreated",positions:t})}})},u.prototype.drawExtent=function(){this.core.enhanceWithListeners(this);var e=this;e.startDrawingExtent({callback:function(t){e.executeListeners({name:"extentCreated",extent:t})}})},u.prototype.drawCircle=function(){this.core.enhanceWithListeners(this);var e=this;e.startDrawingCircle({callback:function(t,o){e.executeListeners({name:"circleCreated",center:t,radius:o})}})},u.prototype.createMarker=function(){var e=this;e.addListener("markerCreated",function(t){var o=new Cesium.BillboardCollection;e._scene.primitives.add(o);o.add({show:!0,position:t.position,pixelOffset:new Cesium.Cartesian2(0,0),eyeOffset:new Cesium.Cartesian3(0,0,0),verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:1,image:l.getAbsoluteUrl("assets/common/draw_point.png"),color:new Cesium.Color(1,1,1,1)});o.setEditable()})},u.prototype.createPolyline=function(){var e=this;e.addListener("polylineCreated",function(t){var o=new n({positions:t.positions,width:5,geodesic:!0});e._scene.primitives.add(o),o.setEditable(e._scene,e._drawSource)})},u.prototype.createPolygon=function(){var e=this;e.addListener("polygonCreated",function(t){var n=new o({positions:t.positions,material:Cesium.Material.fromType("Checkerboard")});e._scene.primitives.add(n),n.setEditable(e._scene,e._drawSource)})},u.prototype.createCircle=function(){var e=this;e.addListener("circleCreated",function(t){var o=new s({center:t.center,radius:t.radius,material:Cesium.Material.fromType(Cesium.Material.RimLightingType)});e._scene.primitives.add(o),o.setEditable()})},u.prototype.createExtent=function(){var e=this;e.addListener("extentCreated",function(t){var o=t.extent,n=new r({extent:o,material:Cesium.Material.fromType(Cesium.Material.StripeType)});e._scene.primitives.add(n),n.setEditable()})},u.prototype.exitEdit=function(){for(var e=this._scene.primitives,t=0;t<e.length;t++)(e.get(t)instanceof n||e.get(t)instanceof o)&&(e.get(t).simulationEvent(),console.log(1))},u}),define("measure/measureHelpers",["./measureOl","../draw/drawCesium","../draw/core","../draw/PolygonPrimitive","../draw/PolylinePrimitive"],function(e,t,o,n,i){function r(o){this._contMap=o,this._measureOl=new e(this._contMap);var n=new ol.Collection,i=new ol.source.Vector({features:n}),r=new ol.layer.Vector({source:i,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.4)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})});this._measureOl.source=i,this._measureOl.vectorLayer=r,this._vectorLayer=this._measureOl.getLayer(),this._drawCesium=new t(this._contMap),this._scene,this._flag=0,this._is3d=!1,this._dataSourceTab}var o=new o;return r.prototype.init=function(){return this._is3dMap()?(this._is3d=!0,void(1==this._flag&&1==this._flag&&(this._drawCesium.drawSource=this._vectorLayer,this._drawCesium.scene=this._contMap.scene.map3d.getCesiumScene(),this._scene=this._contMap.scene.map3d.getCesiumScene(),this._drawCesium.init()))):void(this._is3d=!1)},r.prototype.measureLength=function(e){e(""),this.init(),this._is3d?(this._drawCesium.drawPolyline(),this._create2dPolylineTip(e)):this._measureOl.addInteraction("LineString",e)},r.prototype._create2dPolylineTip=function(e){var t=this;t._drawCesium.addListener("polylineCreated",function(n){var i=n.positions;if(i){var r=o.coord3dTo2d(i,t._scene),s=new ol.geom.LineString(r),a=new ol.Feature(s);t._vectorLayer.getSource().getFeaturesCollection().push(a),t._dataSourceTab="",t._dataSourceTab=t._dataSourceTab+"<i>距离:</i>"+t._measureOl.formatLength(s),t._dataSourceTab=t._dataSourceTab+"<br><i>高差:</i>"+o.coord3dHeight(i,t._scene)+"m",e(t._dataSourceTab)}})},r.prototype.measureArea=function(e){this.init(),e(""),this._is3d?(this._drawCesium.drawPolygon(),this._create2dPolygonTip(e)):this._measureOl.addInteraction("Polygon",e)},r.prototype._create2dPolygonTip=function(e){var t=this;t._drawCesium.addListener("polygonCreated",function(n){var i=n.positions;if(i){var r=o.coord3dTo2d(i,t._scene),s=new ol.geom.Polygon([r]),a=new ol.Feature(s);t._vectorLayer.getSource().getFeaturesCollection().push(a),t._dataSourceTab="",t._dataSourceTab=t._dataSourceTab+"<i>面积:</i>"+t._measureOl.formatArea(s),e(t._dataSourceTab)}})},r.prototype._is3dMap=function(){return this._contMap._widgets.viewModeSwitcher._is3dMap&&(this._flag=this._flag+1),this._contMap._widgets.viewModeSwitcher._is3dMap},r.prototype.clear=function(e){if(e(""),this._vectorLayer){this._vectorLayer.getSource().clear();for(var t=document.getElementsByClassName("tooltip tooltip-static"),o=t.length,n=0;n<o;n++)t[0].parentElement.parentNode.removeChild(t[0].parentElement)}},r}),define("thirdParty/text!widgets/ToolBoxPanel//Measure.html",[],function(){return'<div>\r\n<div class="rightPanel measure" data-bind="visible:visible" >\r\n    <div class="panelTitle">\r\n        <span>测量</span>\r\n        <input type="button" class="closeButton" title="关闭" value="X"\r\n               onfocus=" this.blur(); "\r\n               data-bind="click:closeAll"/>\r\n    </div>\r\n    <div class="measure-tool block" data-bind="click:function(){lengthMeasure()}">\r\n        <span class="length img"></span>\r\n        <span>长度测量</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="measure-tool block" data-bind="click:function(){areaMeasure()}">\r\n        <span class="area img"></span>\r\n        <span>面积测量</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="measure-tool block" data-bind="click:function(){clearMeasure()}">\r\n        <span class="empty img"></span>\r\n        <span>清除测量</span>\r\n    </div>\r\n</div>\r\n    <div class="measure-table" data-bind="visible:visible">\r\n        <strong>测量工具面板</strong><br>\r\n\r\n        <i data-bind="html:dataSourceTab"></i>\r\n        <button class="measure-done" data-bind="click:function(){closeAll()}">关闭</button>\r\n    </div>\r\n\r\n</div>'}),define("widgets/ToolBoxPanel/Measure",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../thirdParty/knockout","../../measure/measureHelpers","../../thirdParty/text!.//Measure.html"],function(e,t,o,n,i,r,s){var a=function(t,i){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._contMap=i,this._projection=i._getProjection(),this._layerManger=this._contMap.layerManager,this._measureSource="",this._measureLayer="",this._measureDraw="",this._wgs84Sphere=new ol.Sphere(6378137),this._sketch="",this._helpTooltipElement="",this._helpTooltip="",this._measureTooltipElement="",this._measureTooltip="",this._continuePolygonMsg="点击继续",this._continueLineMsg="点击继续",this._measureHelpers=new r(i)};return a.prototype.init=function(){var e=this;e._measureSource=new ol.source.Vector({features:[]});var t={visible:i.observable(!1),visibleTab:i.observable(!0),dataSourceTab:i.observable(),closeAll:function(){e._measureHelpers.clear(this.dataSourceTab),t.visible(!1)},clearMeasure:function(){e._measureHelpers.clear(this.dataSourceTab)},lengthMeasure:function(){e._measureHelpers.clear(this.dataSourceTab),e._measureHelpers.measureLength(this.dataSourceTab)},areaMeasure:function(){e._measureHelpers.clear(this.dataSourceTab),e._measureHelpers.measureArea(this.dataSourceTab)}};this._viewModel=t;var o=document.createElement("div");o.innerHTML=s,this._element=o.children[0],e._container.appendChild(this._element),i.applyBindings(this._viewModel,this._element)},a.prototype.addInteraction=function(e){function t(){n._helpTooltipElement&&n._helpTooltipElement.parentNode.removeChild(n._helpTooltipElement),n._helpTooltipElement=document.createElement("div"),n._helpTooltipElement.className="tooltip hidden",n._helpTooltip=new ol.Overlay({element:n._helpTooltipElement,offset:[15,0],positioning:"center-left"}),n._contMap.scene.map2d.addOverlay(n._helpTooltip)}function o(){n._measureTooltipElement&&n._measureTooltipElement.parentNode.removeChild(n._measureTooltipElement),n._measureTooltipElement=document.createElement("div"),n._measureTooltipElement.className="tooltip tooltip-measure",n._measureTooltip=new ol.Overlay({element:n._measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),n._contMap.scene.map2d.addOverlay(n._measureTooltip)}var n=this;n._measureLayer=new ol.layer.Vector({source:n._measureSource,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.2)"}),stroke:new ol.style.Stroke({color:"rgb(67,86,250)",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})}),n._measureDraw=new ol.interaction.Draw({source:n._measureSource,type:e,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.2)"}),stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.5)",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"rgba(0,0,0,0.7)"}),fill:new ol.style.Fill({color:"rgba(255,255,255,0.2)"})})})}),n._layerManger.addLayer(n._measureLayer,!0),n._contMap.scene.map2d.on("pointermove",self.pointerMoveHandler,self),n._contMap.scene.map2d.getViewport().addEventListener("mouseout",function(){n._helpTooltipElement.className=n._helpTooltipElement.className+"hidden"}),n._contMap.scene.map2d.addInteraction(n._measureDraw),o(),t();var i;n._measureDraw.on("drawstart",function(e){n._sketch=e.feature;var t=e.coordinate;i=n._sketch.getGeometry().on("change",function(e){var o,i=e.target;i instanceof ol.geom.Polygon?(o=n.formatArea(i),t=i.getInteriorPoint().getCoordinates()):i instanceof ol.geom.LineString&&(o=n.formatLength(i),t=i.getLastCoordinate()),n._measureTooltipElement.innerHTML=o,n._measureTooltip.setPosition(t)})}),n._measureDraw.on("drawend",function(){n._measureTooltipElement.className="tooltip tooltip-static",n._measureTooltip.setOffset([0,-7]),n._sketch=null,n._measureTooltipElement=null,o(),ol.Observable.unByKey(i),n._helpTooltipElement.style.display="none",n._helpTooltipElement.style.display="none",n._contMap.scene.map2d.removeInteraction(n._measureDraw)})},a.prototype.formatLength=function(e){var t,o=this,n=e.getCoordinates();t=0;for(var i=o._contMap.scene.map2d.getView().getProjection(),r=0,s=n.length-1;r<s;++r){var a=ol.proj.transform(n[r],i,"EPSG:4326"),l=ol.proj.transform(n[r+1],i,"EPSG:4326");t+=o._wgs84Sphere.haversineDistance(a,l)}var c;return c=t>100?Math.round(t/1e3*100)/100+" 公里":Math.round(100*t)/100+" 米"},a.prototype.formatArea=function(e){var t,o=this,n=o._contMap.scene.map2d.getView().getProjection(),i=e.clone().transform(n,"EPSG:4326"),r=i.getLinearRing(0).getCoordinates();t=Math.abs(o._wgs84Sphere.geodesicArea(r));var s;return s=t>1e4?Math.round(t/1e4*100)/100+" hm<sup>2</sup>":Math.round(100*t)/100+" m<sup>2</sup>"},a.prototype.pointerMoveHandler=function(e){if(!e.dragging){var t="点击开始绘图";if(this._sketch){var o=this._sketch.getGeometry();o instanceof ol.geom.Polygon?t=this._continuePolygonMsg:o instanceof ol.geom.LineString&&(t=this._continueLineMsg)}this._helpTooltipElement.innerHTML=t,this._helpTooltip.setPosition(e.coordinate),this._helpTooltipElement.className="tooltip"}},a.prototype.show=function(e){this._viewModel.visible(e)},a.prototype.lengthMeasure=function(){var e=this;e._contMap.scene.map2d.removeInteraction(e._measureDraw),e._measureSource=new ol.source.Vector({features:[]}),this.addInteraction("LineString")},a.prototype.areaMeasure=function(){var e=this;e._contMap.scene.map2d.removeInteraction(e._measureDraw),e._measureSource=new ol.source.Vector({features:[]}),this.addInteraction("Polygon")},a.prototype.clearMeasure=function(){for(var e=this,t=document.getElementsByClassName("ol-overlay-container"),o=0;o<t.length;o++)t[o].style.visibility="hidden",t[o].style.display="none";e._contMap.scene.map2d.removeInteraction(e._measureDraw),e._measureSource.clear()},a}),define("core/MapOperation",["./defineProperties","./DeveloperError"],function(e,t){var o=function(){};return e(o.prototype,{}),o.prototype.init=function(e){this._contMap=e},o.prototype.onMouseMove=function(e,t,o){},o.prototype.OnMouseClick=function(e,t,o){},o.prototype.destroy=function(){},o}),define("core/MapOperationSimpleWrapper",["./MapOperation"],function(e){var t=function(e,t){this._initFun=e,this._destoryFun=t};return t.prototype=new e,t.prototype.init=function(e){this.__proto__.__proto__.init(),this._initFun.call(this,e)},t.prototype.destroy=function(){this._destoryFun.call(this),this.__proto__.__proto__.destroy()},t}),define("draw/DrawHelpers",["./drawOl","./drawCesium","./core","./PolygonPrimitive","./PolylinePrimitive","../core/baseUtil"],function(e,t,o,n,i,r){function s(o,n){this._contMap=o,this._drawOl=new e(this._contMap);var i=n.getSource();this._drawOl.init(i),this._drawCesium=new t(this._contMap),this._scene,this._flag=0,this._drawSource=i,this._is3d=!1,this._globeClickhandler=void 0}var o=new o;return s.prototype.init=function(){return this._is3dMap()?(this._is3d=!0,void(1==this._flag&&1==this._flag&&(this._drawCesium.drawSource=this._drawSource,this._drawCesium.scene=this._contMap.scene.map3d.getCesiumScene(),this._scene=this._scene?this._scene:this._contMap.scene.map3d.getCesiumScene(),this._drawCesium.init()))):void(this._is3d=!1)},s.prototype.wake2dEdit=function(){this._drawOl.wakeModify()},s.prototype.wake3dEdit=function(){var e=this;e._scene||(e._drawCesium.drawSource=e._drawSource,e._drawCesium.scene=e._contMap.scene.map3d.getCesiumScene(),e._scene=e._contMap.scene.map3d.getCesiumScene(),e._drawCesium.init()),e._globeClickhandler=new Cesium.ScreenSpaceEventHandler(e._scene.canvas),e._globeClickhandler.setInputAction(function(t){var s,a,l=e._scene.pick(t.position),c=e._drawOl.getLayer(),u=e._drawOl.getFeature();if(l&&l.primitive){if(l.primitive.olLayer!=c&&l.primitive.olFeature!=u)return;if(l.primitive.olFeature){var g,h=l.primitive.olFeature.getGeometry(),d=h.getCoordinates();if(h instanceof ol.geom.Polygon)g=o.coord2dTo3d(d[0]),s=new n({positions:g,material:Cesium.Material.fromType("Checkerboard")}),e._scene.primitives.add(s),s.setEditable(e._scene,e._drawSource),e._drawSource.getFeaturesCollection().remove(l.primitive.olFeature);else if(h instanceof ol.geom.LineString)g=o.coord2dTo3d(d),a=new i({positions:g,width:5,geodesic:!0}),e._scene.primitives.add(a),a.setEditable(e._scene,e._drawSource),e._drawSource.getFeaturesCollection().remove(l.primitive.olFeature);else if(h instanceof ol.geom.Point){g=o.coord2dTo3d([d]);var p=new Cesium.BillboardCollection;e._scene.primitives.add(p);p.add({show:!0,position:g[0],pixelOffset:new Cesium.Cartesian2(0,0),eyeOffset:new Cesium.Cartesian3(0,0,0),verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:1.25,image:r.getAbsoluteUrl("assets/common/draw_point.png"),color:new Cesium.Color(1,1,1,1)});p.setEditable(),e._drawSource.getFeaturesCollection().remove(l.primitive.olFeature)}}}},Cesium.ScreenSpaceEventType.LEFT_CLICK)},s.prototype.sleep2dEdit=function(){this._drawOl.sleepModify()},s.prototype.sleep3dEdit=function(){this._globeClickhandler&&(this._globeClickhandler=this._globeClickhandler.destroy(),this._drawCesium.exitEdit())},s.prototype.wake=function(){this.wake3dEdit(),this.wake2dEdit()},s.prototype.sleep=function(){this.sleep2dEdit(),this.sleep3dEdit()},s.prototype.drawMarker=function(){var e=this;e.init(),e._is3d?(e._drawCesium.drawMarker(),e._create2dMarker()):e._drawOl.addDraw("Point")},s.prototype._create2dMarker=function(){var e=this;e._drawCesium.addListener("markerCreated",function(t){var n=t.position;if(n){var i=o.coord3dTo2d([n],e._scene),r=new ol.Feature(new ol.geom.Point(i[0]));e._drawSource.getFeaturesCollection().push(r)}})},s.prototype.drawPolyline=function(){var e=this;e.init(),e._is3d?(e._drawCesium.drawPolyline(),e._create2dPolyline()):e._drawOl.addDraw("LineString")},s.prototype._create2dPolyline=function(){var e=this;e._drawCesium.addListener("polylineCreated",function(t){var n=t.positions;if(n){var i=o.coord3dTo2d(n,e._scene),r=new ol.Feature(new ol.geom.LineString(i));e._drawSource.getFeaturesCollection().push(r)}})},s.prototype.drawPolygon=function(){var e=this;e.init(),e._is3d?(e._drawCesium.drawPolygon(),e._create2dPolygon()):e._drawOl.addDraw("Polygon")},s.prototype._create2dPolygon=function(){var e=this;e._drawCesium.addListener("polygonCreated",function(t){var n=t.positions;if(n){var i=o.coord3dTo2d(n,e._scene),r=new ol.Feature(new ol.geom.Polygon([i]));
e._drawSource.getFeaturesCollection().push(r)}})},s.prototype.clear=function(){this._drawSource&&this._drawSource.clear()},s.prototype._is3dMap=function(){return this._contMap._widgets.viewModeSwitcher._is3dMap&&(this._flag=this._flag+1),this._contMap._widgets.viewModeSwitcher._is3dMap},s}),define("thirdParty/text!widgets/ToolBoxPanel/Draw/Common//Draw.html",[],function(){return'<div class="rightPanel draw" data-bind="visible:visible" >\r\n    <div class="panelTitle">\r\n        <span>标绘</span>\r\n        <input type="button" class="closeButton" title="关闭" value="X"\r\n               onfocus=" this.blur(); "\r\n               data-bind="click:close"/>\r\n    </div>\r\n    <div class="draw-tool block" data-bind="click:function(){addPoint()}">\r\n        <span class="point img"></span>\r\n        <span>点</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="draw-tool block" data-bind="click:function(){addPolyline()}">\r\n        <span class="polyline img"></span>\r\n        <span>多段线</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="draw-tool block" data-bind="click:function(){addPolygon()}">\r\n        <span class="polygon img"></span>\r\n        <span>多边形</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="draw-tool block" data-bind="click:function(){editAll()}">\r\n        <span class="edit img"></span>\r\n        <span data-bind="text:editText()"></span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="draw-tool block" data-bind="click:function(){removeAll()}">\r\n        <span class="empty img"></span>\r\n        <span>删除</span>\r\n    </div>\r\n</div>'}),define("widgets/ToolBoxPanel/Draw/Common/Draw",["../../../../core/defined","../../../../core/defineProperties","../../../../core/DeveloperError","../../../../core/getElement","../../../../core/baseUtil","../../../../core/MapOperationSimpleWrapper","../../../../thirdParty/knockout","../../../../draw/DrawHelpers","../../../../thirdParty/text!.//Draw.html"],function(e,t,o,n,i,r,s,a,l){var c=function(t,r){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._contMap=r,this._projection=r._getProjection(),this._layerManger=this._contMap.layerManager,this._wgs84Sphere=new ol.Sphere(6378137);var s=new ol.source.Vector({features:new ol.Collection}),l=i.getAbsoluteUrl("assets/common/draw_point.png"),c=new ol.layer.Vector({source:s,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.5)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Icon({src:l})})});this._drawHelpers=new a(this._contMap,c)};return c.prototype.init=function(){var e=this,t={visible:s.observable(!1),editText:s.observable("开启编辑"),close:function(){t.visible(!1)},addPoint:function(){var t=new r(function(t){e._drawHelpers.drawMarker()},function(){});e._contMap.currentOperation=t},addPolyline:function(){var t=new r(function(t){e._drawHelpers.drawPolyline()},function(){});e._contMap.currentOperation=t},addPolygon:function(){var t=new r(function(t){e._drawHelpers.drawPolygon()},function(){});e._contMap.currentOperation=t},editAll:function(){"开启编辑"==this.editText()?(e._drawHelpers._is3dMap()?(e._drawHelpers.wake2dEdit(),e._drawHelpers.wake3dEdit()):e._drawHelpers.wake2dEdit(),this.editText("关闭编辑")):(e._drawHelpers._is3dMap()?(e._drawHelpers.sleep2dEdit(),e._drawHelpers.sleep3dEdit()):e._drawHelpers.sleep2dEdit(),this.editText("开启编辑"))},removeAll:function(){e._drawHelpers.clear()}};this._viewModel=t;var o=document.createElement("div");o.innerHTML=l,this._element=o.children[0],e._container.appendChild(this._element),s.applyBindings(this._viewModel,this._element)},c.prototype.show=function(e){this._viewModel.visible(e)},c.prototype.editable=function(e){e||(this._drawHelpers._is3dMap()?(this._drawHelpers.sleep2dEdit(),this._drawHelpers.sleep3dEdit()):this._drawHelpers.sleep2dEdit(),this._viewModel.editText("开启编辑"))},c}),define("layer/FiresPreventionPlot2/resouces",[],function(){var e={styles:{"箭头":{"简单箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})},"直角箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})},"自定义燕尾箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})},"合围箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})}},"点":{"火点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",offset:t?[102,204]:[204,204],scale:.5,size:[100,100]})})},"烟点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[810,306]:[912,306],size:[100,100]})})},"已灭火点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1428,102]:[1530,102],size:[100,100]})})},"指挥中心":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[816,102]:[918,102],size:[100,100]})})},"分指中心":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1422,306]:[1524,306],size:[100,100]})})},"打火队伍":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1122,102]:[1224,102],size:[100,100]})})},"武警标志":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1530,0]:[0,102],size:[100,100]})})},"森警标志":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[408,204]:[510,204],size:[100,100]})})},"森林警察":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[714,204]:[816,204],size:[100,100]})})},"飞机":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[306,306]:[408,306],size:[100,100]})})},"指挥车":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[510,102]:[612,102],size:[100,100]})})},"停机坪":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1326,204]:[1428,204],size:[100,100]})})},"取水点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1020,204]:[1122,204],size:[100,100]})})},"洒水点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[0,408]:[102,408],size:[100,100]})})},"强火线":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1116,306]:[1218,306],size:[100,100]})})},"中火线":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[0,306]:[102,306],size:[100,100]})})},"弱火线":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[918,0]:[1020,0],size:[100,100]})})},"军队":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[204,102]:[306,102],size:[100,100]})})},"雷击点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[306,408]:[408,0],size:[100,100]})})},"瞭望塔":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[612,0]:[714,0],size:[100,100]})})},"风向标":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/icon.png",scale:.5,offset:t?[1224,0]:[1326,0],size:[100,100]})})},"自定义":{}},"线":{"火线":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3})})},"已灭火线":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"black",width:3})})},"受控火线":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"blue",width:3})})},"隔离带":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"green",width:3})})},"自定义":{}},"文本":{"火头":function(e,t){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"火头",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})},"火尾":function(e,t){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"火尾",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})},"扑火队伍":function(e,t){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"扑火队伍",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})},"自定义文本":function(e,t,o){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:o,offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})}}}};return e}),define("layer/FiresPreventionPlot2/FiresPreventionPlotLayer2",["../../core/defineProperties","../../core/DeveloperError","../../core/baseUtil","./resouces","../../core/EventObject"],function(e,t,o,n,i){var r=function(e,n){if(this._contMap=e,this._options=n,this._resourceRootUrl=o.getBaseUrl()+"layer/FiresPreventionPlot2",this._customStyles=n.customStyles,!n.firesPreventionPlotsSource)throw new t("firesPreventionPlotsSource参数为必填项。");this._firesPreventionPlotsSource=n.firesPreventionPlotsSource,this._selectedFeature=null,this.draw3DBorder=!0;var i=this;ol.layer.Vector.call(this,{source:this._firesPreventionPlotsSource,style:function(e){return[i._styleFunction(e)]}}),this._contMap.scene.on("pointermove",function(e){var t=e.feature;t&&e.olLayer==i?(i._contMap.scene.map2d.getViewport().style.cursor="pointer",i.highLightFeature(t)):(i._contMap.scene.map2d.getViewport().style.cursor="",i.highLightFeature(null))}),this._contMap.scene.on("pointerclick",function(e){var t=e.feature;if(t&&e.olLayer==i)for(var o=0;o<i._evnts.length;o++)"layerclick"===i._evnts[o].eventType&&i._evnts[o].callback.call(i,t)})};ol.inherits(r,ol.layer.Vector),e(r.prototype,{options:{get:function(){return this._options}},customStyles:{get:function(){return this._customStyles}},firesPreventionPlotsSource:{get:function(){return this._firesPreventionPlotsSource}},selectedFeature:{get:function(){return this._selectedFeature}}});var s=new i;return r.prototype.on=s.on,r.prototype.un=s.un,r.prototype._evnts=s._evnts,r.prototype._styleFunction=function(e,t){if(e.unSelectedStyle)return e.unSelectedStyle;var o,i,r=e.get("plotInfo").ElementType,s=e.get("plotInfo").Style.StyleKey,a=s.split("|"),l=a[0];if("自定义"==l)i=this._getUnSelectedCustomStyle(r,a[1],e,t),o=this._getSelectedCustomStyle(r,a[1],e,t);else{if("文本"==r){var c=e.get("plotInfo").Text;l=c,n.styles[r].hasOwnProperty(c)||(l="自定义文本",a[1]=c)}i=n.styles[r][l](this._resourceRootUrl,!1,a[1]),o=n.styles[r][l](this._resourceRootUrl,!0,a[1])}return e.unSelectedStyle=i,e.selectedStyle=o,e.unSelectedStyle},r.prototype._getUnSelectedCustomStyle=function(e,t,o,n){switch(e){case 1:return this._getUnSelectedPointCustomStyle(t,o,n);case 2:return this._getUnSelectedPolylineCustomStyle(t,o,n);case 3:return this._getUnSelectedPolygonCustomStyle(t,o,n)}},r.prototype._getUnSelectedPointCustomStyle=function(e,t,o){var n=this._customStyles.point[e];return new ol.style.Style({image:n.icon?new ol.style.Icon({anchor:n.icon.normal.anchor,src:n.icon.normal.url,offset:n.icon.normal.offset,size:n.icon.normal.size,opacity:n.icon.normal.opacity,scale:n.icon.normal.scale}):undefinded,text:n.label?new ol.style.Text({textAlign:"left",font:n.label.font?n.label.font:"10px sans-serif",text:t.get("plotInfo")[n.label.textFiled],fill:new ol.style.Fill({color:n.label.fillColor}),stroke:new ol.style.Stroke(n.label.stroke),offsetY:n.label.offsetY,offsetX:n.label.offsetX}):void 0})},r.prototype._getUnSelectedPolylineCustomStyle=function(e,t,o){var n=this._customStyles.polyline[e].normal;return new ol.style.Style({stroke:new ol.style.Stroke(n)})},r.prototype._getUnSelectedPolygonCustomStyle=function(e,t,o){var n=this._customStyles.polygon[e].normal;return new ol.style.Style({stroke:new ol.style.Stroke(n.border),fill:new ol.style.Fill(n.fill)})},r.prototype._getSelectedCustomStyle=function(e,t,o,n){switch(e){case 1:return this._getSelectedPointCustomStyle(t,o,n);case 2:return this._getSelectedPolylineCustomStyle(t,o,n);case 3:return this._getSelectedPolygonCustomStyle(t,o,n)}},r.prototype._getSelectedPointCustomStyle=function(e,t,o){var n=this._customStyles.point[e];return new ol.style.Style({image:n.icon?new ol.style.Icon({anchor:n.icon.active.anchor,src:n.icon.active.url,offset:n.icon.active.offset,size:n.icon.active.size,scale:n.icon.active.scale,opacity:n.icon.active.opacity}):undefinded,text:n.label?new ol.style.Text({textAlign:"left",font:n.label.font?n.label.font:"10px sans-serif",text:t.get("plotInfo")[n.label.textFiled],fill:new ol.style.Fill({color:n.label.fillColor}),stroke:new ol.style.Stroke(n.label.stroke),offsetY:n.label.offsetY,offsetX:n.label.offsetX}):void 0})},r.prototype._getSelectedPolylineCustomStyle=function(e,t,o){var n=this._customStyles.polyline[e].active;return new ol.style.Style({stroke:new ol.style.Stroke(n)})},r.prototype._getSelectedPolygonCustomStyle=function(e,t,o){var n=this._customStyles.polygon[e].active;return new ol.style.Style({stroke:new ol.style.Stroke(n.border),fill:new ol.style.Fill(n.fill)})},r.prototype.highLightFeature=function(e){if(null!=this._selectedFeature&&(this._selectedFeature.setStyle(null),this._selectedFeature=null),null!=e){e.setStyle(e.selectedStyle),this._selectedFeature=e;e.get("plotInfo").Style.StyleKey}},r}),define("layer/FiresPreventionPlot2/FiresPreventionPlotSource2",["../../core/defineProperties"],function(e){var t=function(){this._plotsDataSet=[],ol.source.Vector.call(this,{})};return ol.inherits(t,ol.source.Vector),e(t.prototype,{plotsDataSet:{get:function(){return this._plotsDataSet}}}),t.prototype.addPlots=function(e){this._plotsDataSet.push(e);for(var t=0;t<e.ElementInfoCollection.length;t++){var o=e.ElementInfoCollection[t];this.addPlotInfo(o)}},t.prototype.addPlotInfo=function(e){var t=new ol.format.EsriJSON,o=JSON.parse(e.Geometry);o.spatialReference.wkid=4326,e.Geometry=JSON.stringify(o);var o=t.readGeometry(e.Geometry,{featureProjection:"EPSG:3857"}),n=new ol.Feature(o);n.setProperties({plotInfo:e},!0),n.setId(e.ElementId),n.setProperties({altitudeMode:"clampToGround"},!0),this.addFeature(n)},t.prototype.removePlots=function(e){for(var t=-1,o=0;o<this._plotsDataSet.length;o++){var n=this._plotsDataSet[o];if(n==e){t=o;break}}t!=-1&&this._plotsDataSet.splice(t,1);for(var o=0;o<e.plotInfos.length;o++){var i=e.plotInfos[o],r=this.getFeatureById(i.id);null!=r&&this.removeFeature(r)}},t.prototype.clearPlots=function(){this._plotsDataSet.splice(0,this._plotsDataSet.length),this.clear(!1)},t}),define("draw/FiresPreventionPlot/FiresPreventionPlot",["../../layer/FiresPreventionPlot2/FiresPreventionPlotLayer2","../../layer/FiresPreventionPlot2/FiresPreventionPlotSource2","../DrawHelpers","../drawCesium","../core"],function(e,t,o,n,i){var i=new i,r=function(o){this._contMap=o,this._drawCesium=new n(this._contMap),this._scene,this._flag=0,this._is3d=!1,this._proj=o._getProjection(),this._firesPreventionPlotSource=new t,this._firesPreventionPlotLayer=new e(this._contMap,{firesPreventionPlotsSource:this._firesPreventionPlotSource,customStyles:{point:{"风格名称1":{icon:{normal:{offset:[0,0],url:"./images/省会点a.png",anchor:[.5,.5],size:[16,15],opacity:.8},active:{offset:[0,0],url:"./images/省会点.png",anchor:[.5,.5],size:[16,15],opacity:1}},label:{textFiled:"Name",fillColor:"red",font:"25px 微软雅黑",stroke:{color:"white",width:6},offsetY:0,offsetX:9}}},polyline:{"风格名称1":{normal:{color:"red",width:3},active:{color:[255,255,0,1],width:3}}},polygon:{"风格名称1":{normal:{border:{color:"red",width:3},fill:{color:"rgba(0, 0, 255, 0.1)"}},active:{border:{color:[255,255,0,1],width:3},fill:{color:"rgba(0, 0, 255, 0.5)"}}}}}}),this._contMap.layerManager.addLayer(this._firesPreventionPlotLayer,!0)};return r.prototype.init=function(){return this._is3dMap()?(this._is3d=!0,void(1==this._flag&&1==this._flag&&(this._drawCesium.scene=this._contMap.scene.map3d.getCesiumScene(),this._scene=this._scene?this._scene:this._contMap.scene.map3d.getCesiumScene(),this._drawCesium.init()))):void(this._is3d=!1)},r.prototype._addDrawPoint2d=function(e){var t=new ol.interaction.Draw({type:"Point"});this._contMap.scene.map2d.addInteraction(t);var o=this;t.on("drawend",function(n){var i=n.feature.getGeometry(),r=i.getCoordinates(),s=ol.proj.toLonLat(r);o._addDrawPoint(s,e),o._contMap.scene.map2d.removeInteraction(t)})},r.prototype._addDrawPoint3d=function(e){this._drawCesium.drawMarker();var t=this;t._drawCesium.addListener("markerCreated",function(o){var n=o.position;if(n){var r=i.coord3dToLonLat([n],t._scene)[0];t._addDrawPoint(r,e)}})},r.prototype._addDrawPoint=function(e,t){var o={ElementType:"点",Geometry:'{"x":'+e[0]+',"y":'+e[1]+',"spatialReference":{"wkid":4326}}',Style:{StyleKey:t}};this._firesPreventionPlotSource.addPlotInfo(o)},r.prototype.drawPoint=function(e){this.init(),this._is3d?this._addDrawPoint3d(e):this._addDrawPoint2d(e)},r.prototype._addDrawText2d=function(e){var t=new ol.interaction.Draw({type:"Point"});this._contMap.scene.map2d.addInteraction(t);var o=this;t.on("drawend",function(n){var i=n.feature.getGeometry(),r=i.getCoordinates(),s=ol.proj.toLonLat(r);o._addDrawText(s,e),o._contMap.scene.map2d.removeInteraction(t)})},r.prototype._addDrawText3d=function(e){this._drawCesium.drawMarker();var t=this;t._drawCesium.addListener("markerCreated",function(o){var n=o.position;if(n){var r=i.coord3dToLonLat([n],t._scene)[0];t._addDrawText(r,e)}})},r.prototype._addDrawText=function(e,t){var o={ElementType:"文本",Geometry:'{"x":'+e[0]+',"y":'+e[1]+',"spatialReference":{"wkid":4326}}',Style:{StyleKey:"文本",Symbol:"{Color:宋体,Font:255,0,0,Size:32}"},Text:t};this._firesPreventionPlotSource.addPlotInfo(o)},r.prototype.drawText=function(e){this.init(),this._is3d?this._addDrawText3d(e):this._addDrawText2d(e)},r.prototype._addDrawPolyline2d=function(e){var t=new ol.interaction.Draw({type:"LineString"});this._contMap.scene.map2d.addInteraction(t);var o=this;t.on("drawend",function(n){for(var i,r=n.feature.getGeometry(),s=r.getCoordinates(),a=[],l=0,c=s.length;l<c;l++)i=ol.proj.toLonLat(s[l]),a.push(i);o._addDrawPolyline(a,e),o._contMap.scene.map2d.removeInteraction(t)})},r.prototype._addDrawPolyline3d=function(e){this._drawCesium.drawPolyline();var t=this;t._drawCesium.addListener("polylineCreated",function(o){var n=o.positions;if(n){var r=i.coord3dToLonLat(n,t._scene);t._addDrawPolyline(r,e)}})},r.prototype._addDrawPolyline=function(e,t){var o={ElementType:"线",Geometry:JSON.stringify({paths:[e],spatialReference:{wkid:4326}}),Style:{StyleKey:t}};this._firesPreventionPlotSource.addPlotInfo(o)},r.prototype.drawPolyline=function(e){this.init(),this._is3d?this._addDrawPolyline3d(e):this._addDrawPolyline2d(e)},r.prototype._addDrawPolygon2d=function(e){var t=new ol.interaction.Draw({type:"Polygon"});this._contMap.scene.map2d.addInteraction(t);var o=this;t.on("drawend",function(n){for(var i,r=n.feature.getGeometry(),s=r.getCoordinates(),a=[],l=0,c=s[0].length;l<c;l++)i=ol.proj.toLonLat(s[0][l]),a.push(i);o._addDrawPolygon(a,e),o._contMap.scene.map2d.removeInteraction(t)})},r.prototype._addDrawPolygon3d=function(e){this._drawCesium.drawPolygon();var t=this;t._drawCesium.addListener("polygonCreated",function(o){var n=o.positions;if(n){var r=i.coord3dToLonLat(n,t._scene);t._addDrawPolygon(r,e)}})},r.prototype._addDrawPolygon=function(e,t){var o={ElementId:3,Geometry:JSON.stringify({rings:[e],spatialReference:{wkid:4326}}),ElementType:3,Style:{StyleKey:"自定义|风格名称1"}};this._firesPreventionPlotSource.addPlotInfo(o)},r.prototype.drawPolygon=function(e){this.init(),this._is3d?this._addDrawPolygon3d(e):this._addDrawPolygon2d(e)},r.prototype._addDrawArrow2d=function(e){var t=new ol.interaction.Draw({type:"Polygon"});this._contMap.scene.map2d.addInteraction(t);var o=this;t.on("drawend",function(n){for(var i,r=n.feature.getGeometry(),s=r.getCoordinates(),a=[],l=0,c=s[0].length;l<c;l++)i=ol.proj.toLonLat(s[0][l]),a.push(i);o._addDrawArrow(a,e),o._contMap.scene.map2d.removeInteraction(t)})},r.prototype._addDrawArrow3d=function(e){this._drawCesium.drawPolygon();var t=this;t._drawCesium.addListener("polygonCreated",function(o){var n=o.positions;if(n){var r=i.coord3dToLonLat(n,t._scene);t._addDrawArrow(r,e)}})},r.prototype._addDrawArrow=function(e,t){var o={ElementType:"箭头",Geometry:JSON.stringify({rings:[e],spatialReference:{wkid:4326}}),Style:{StyleKey:t}};this._firesPreventionPlotSource.addPlotInfo(o)},r.prototype.drawArrow=function(e){this.init(),this._is3d?this._addDrawArrow3d(e):this._addDrawArrow2d(e)},r.prototype.clear=function(){this._firesPreventionPlotSource.clearPlots()},r.prototype._is3dMap=function(){return this._contMap._widgets.viewModeSwitcher._is3dMap&&(this._flag=this._flag+1),this._contMap._widgets.viewModeSwitcher._is3dMap},r}),define("thirdParty/text!widgets/ToolBoxPanel/Draw/FiresDraw//FiresDraw.html",[],function(){return'<div>\r\n<div class="rightPanel firesDraw" data-bind="visible:visible" >\r\n    <div class="panelTitle">\r\n        <span>防火标绘</span>\r\n        <input type="button" class="closeButton" title="关闭" value="X"\r\n               onfocus=" this.blur(); "\r\n               data-bind="click:close"/>\r\n    </div>\r\n    <div class="firesDraw-tool block" data-bind="click:firesArror">\r\n        <span class="arror img"></span>\r\n        <span>箭头</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="firesDraw-tool block" data-bind="click:firesMarker">\r\n        <span class="point img"></span>\r\n        <span>点</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="firesDraw-tool block" data-bind="click:firesPolyline">\r\n        <span class="polyline img"></span>\r\n        <span>线</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="firesDraw-tool block" data-bind="click:firesPolygon">\r\n        <span class="polygon img"></span>\r\n        <span>面</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="firesDraw-tool block" data-bind="click:firesText">\r\n        <span class="text img"></span>\r\n        <span>文本</span>\r\n    </div>\r\n    <div class="split block" style="margin-bottom: 17px;"></div>\r\n    <div class="firesDraw-tool block" data-bind="click:firesClear">\r\n        <span class="empty img"></span>\r\n        <span>删除</span>\r\n    </div>\r\n</div>\r\n<div class="firesDraw-table" data-bind="visible:visible,css:{height:panelHeight()}">\r\n    <strong style="color: #EAEAEA;">防火标绘</strong> > <span style="color: #EAEAEA;" data-bind="text:drawType"></span><br>\r\n    <div data-bind="foreach:firesDrawPara">\r\n        <img  height="40" width="40" data-bind="attr:{alt:name,src:url},click:function(){$parent.firesDraw($parent.drawType(),name)}">\r\n    </div>\r\n</div>\r\n</div>'}),define("widgets/ToolBoxPanel/Draw/FiresDraw/FiresDraw",["../../../../core/defined","../../../../core/defineProperties","../../../../core/DeveloperError","../../../../core/getElement","../../../../core/baseUtil","../../../../thirdParty/knockout","../../../../draw/FiresPreventionPlot/FiresPreventionPlot","../../../../thirdParty/text!.//FiresDraw.html"],function(e,t,o,n,i,r,s,a){var l=function(t,r){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._contMap=r,this._projection=r._getProjection(),this._layerManger=this._contMap.layerManager,this._wgs84Sphere=new ol.Sphere(6378137),this._FiresPreventionPlot=new s(this._contMap),this._baseUrl=i.getBaseUrl()+"layer/FiresPreventionPlot2/img/",this._firesMarker=[{name:"火点",url:this._baseUrl+"marker/symbol_firepoint.png"},{name:"烟点",url:this._baseUrl+"marker/symbol_smokepoint.png"},{name:"已灭火点",url:this._baseUrl+"marker/symbol_fireoutpoint.png"},{name:"指挥中心",url:this._baseUrl+"marker/symbol_commandoffice.png"},{name:"分指中心",url:this._baseUrl+"marker/symbol_subcommandoffice.png"},{name:"打火队伍",url:this._baseUrl+"marker/symbol_firehitteam.png"},{name:"武警标志",url:this._baseUrl+"marker/symbol_armedpolice.png"},{name:"森警标志",url:this._baseUrl+"marker/symbol_forestpolice.png"},{name:"森林警察",url:this._baseUrl+"marker/symbol_forestpoliceman.png"},{name:"飞机",url:this._baseUrl+"marker/symbol_plane.png"},{name:"指挥车",url:this._baseUrl+"marker/symbol_commandcar.png"},{name:"停机坪",url:this._baseUrl+"marker/symbol_helicopterstoppoint.png"},{name:"取水点",url:this._baseUrl+"marker/symbol_getwaterpoint.png"},{name:"洒水点",url:this._baseUrl+"marker/symbol_throwwaterpoint.png"},{name:"强火线",url:this._baseUrl+"marker/symbol_strong.png"},{name:"中火线",url:this._baseUrl+"marker/symbol_middle.png"},{name:"弱火线",url:this._baseUrl+"marker/symbol_weak.png"},{name:"军队",url:this._baseUrl+"marker/symbol_army.png"},{name:"雷击点",url:this._baseUrl+"marker/symbol_thunderpoint.png"},{name:"瞭望塔",url:this._baseUrl+"marker/symbol_tower.png"}],this._firesArror=[{name:"简单箭头",url:this._baseUrl+"arrow/symbol_arrow_simple.png"},{name:"直角箭头",url:this._baseUrl+"arrow/symbol_arrow_straight.png"},{name:"自定义燕尾箭头",url:this._baseUrl+"arrow/symbol_arrow_custom_tailed.png"},{name:"合围箭头",url:this._baseUrl+"arrow/symbol_arrow_double.png"}],this._firesPolyline=[{name:"火线",url:this._baseUrl+"polyline/symbol_redline.png"},{name:"已灭火线",url:this._baseUrl+"polyline/symbol_blackline.png"},{name:"受控火线",url:this._baseUrl+"polyline/symbol_blueline.png"},{name:"隔离带",url:this._baseUrl+"polyline/symbol_greenline.png"}],this._firesText=[{name:"火头",url:this._baseUrl+"text/symbol_huotou2.png"},{name:"火尾",url:this._baseUrl+"text/symbol_huowei2.png"},{name:"扑火队伍",url:this._baseUrl+"text/symbol_duiwu2.png"}],this._firesPolygon=[{name:"自定义面",url:this._baseUrl+"polygon/fires_polygon.png"}]};return l.prototype.init=function(){var e=this,t={visible:r.observable(!1),firesDrawPara:r.observable([]),drawType:r.observable(),panelHeight:r.observable(50),close:function(){t.visible(!1)},firesDraw:function(t,o){"点"==t&&e._FiresPreventionPlot.drawPoint(o),"线"===t&&e._FiresPreventionPlot.drawPolyline(o),"面"===t&&e._FiresPreventionPlot.drawPolygon(o),"文本"===t&&e._FiresPreventionPlot.drawText(o),"箭头"===t&&e._FiresPreventionPlot.drawArrow(o)},firesArror:function(){t.drawType("箭头");var o=e.mathHeight(e._firesArror.length);t.panelHeight(o),t.firesDrawPara(e._firesArror)},firesMarker:function(){t.drawType("点");var o=e.mathHeight(e._firesMarker.length);t.panelHeight(o),t.firesDrawPara(e._firesMarker)},firesPolyline:function(){t.drawType("线");var o=e.mathHeight(e._firesPolyline.length);t.panelHeight(o),t.firesDrawPara(e._firesPolyline)},firesPolygon:function(){t.drawType("面");var o=e.mathHeight(e._firesPolygon.length);t.panelHeight(o),t.firesDrawPara(e._firesPolygon)},firesText:function(){t.drawType("文本");var o=e.mathHeight(e._firesText.length);t.panelHeight(o),t.firesDrawPara(e._firesText)},firesClear:function(){e._FiresPreventionPlot.clear()}};this._viewModel=t;var o=document.createElement("div");o.innerHTML=a,this._element=o.children[0],e._container.appendChild(this._element),r.applyBindings(this._viewModel,this._element)},l.prototype.show=function(e){this._viewModel.visible(e)},l.prototype.addFiresIcon=function(e,t){"点"===e&&this._firesMarker.push(t),"箭头"===e&&this._firesArror.push(t),"线"===e&&this._firesPolyline.push(t),"面"===e&&this._firesPolygon.push(t),"文本"===e&&this._firesText.push(t)},l.prototype.mathHeight=function(e){return 40*Math.ceil(e/7)+50},l}),define("draw/MilitaryPlot/PlotTypes",[],function(){var e={ARC:"arc",ELLIPSE:"ellipse",CURVE:"curve",CLOSED_CURVE:"closedcurve",LUNE:"lune",SECTOR:"sector",GATHERING_PLACE:"gatheringplace",STRAIGHT_ARROW:"straightarrow",ASSAULT_DIRECTION:"assaultdirection",ATTACK_ARROW:"attackarrow",TAILED_ATTACK_ARROW:"tailedattackarrow",SQUAD_COMBAT:"squadcombat",TAILED_SQUAD_COMBAT:"tailedsquadcombat",FINE_ARROW:"finearrow",CIRCLE:"circle",DOUBLE_ARROW:"doublearrow",POLYLINE:"polyline",FREEHAND_LINE:"freehandline",POLYGON:"polygon",FREEHAND_POLYGON:"freehandpolygon",RECTANGLE:"rectangle",MARKER:"marker",TRIANGLE:"triangle"};return e}),define("draw/MilitaryPlot/Plot/Plot",[],function(){var e=function(e){this.setPoints(e)};return e.prototype.isPlot=function(){return!0},e.prototype.setPoints=function(e){this.points=e?e:[],this.points.length>=1&&this.generate()},e.prototype.getPoints=function(){return this.points.slice(0)},e.prototype.getPointCount=function(){return this.points.length},e.prototype.updatePoint=function(e,t){t>=0&&t<this.points.length&&(this.points[t]=e,this.generate())},e.prototype.updateLastPoint=function(e){this.updatePoint(e,this.points.length-1)},e.prototype.generate=function(){},e.prototype.finishDrawing=function(){},e}),define("draw/MilitaryPlot/PlotUtils",[],function(){var e={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},o={};return o.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},o.distance=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},o.wholeDistance=function(e){for(var t=0,n=0;n<e.length-1;n++)t+=o.distance(e[n],e[n+1]);return t},o.getBaseLength=function(e){return Math.pow(o.wholeDistance(e),.99)},o.mid=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]},o.getCircleCenterOfThreePoints=function(e,t,n){var i=[(e[0]+t[0])/2,(e[1]+t[1])/2],r=[i[0]-e[1]+t[1],i[1]+e[0]-t[0]],s=[(e[0]+n[0])/2,(e[1]+n[1])/2],a=[s[0]-e[1]+n[1],s[1]+e[0]-n[0]];return o.getIntersectPoint(i,r,s,a)},o.getIntersectPoint=function(e,t,o,n){if(e[1]==t[1]){var i=(n[0]-o[0])/(n[1]-o[1]),r=i*(e[1]-o[1])+o[0],s=e[1];return[r,s]}if(o[1]==n[1]){var a=(t[0]-e[0])/(t[1]-e[1]);return r=a*(o[1]-e[1])+e[0],s=o[1],[r,s]}return a=(t[0]-e[0])/(t[1]-e[1]),i=(n[0]-o[0])/(n[1]-o[1]),s=(a*e[1]-e[0]-i*o[1]+o[0])/(a-i),r=a*s-a*e[1]+e[0],[r,s]},o.getAzimuth=function(t,n){var i,r=Math.asin(Math.abs(n[1]-t[1])/o.distance(t,n));return n[1]>=t[1]&&n[0]>=t[0]?i=r+Math.PI:n[1]>=t[1]&&n[0]<t[0]?i=e.TWO_PI-r:n[1]<t[1]&&n[0]<t[0]?i=r:n[1]<t[1]&&n[0]>=t[0]&&(i=Math.PI-r),i},o.getAngleOfThreePoints=function(t,n,i){var r=o.getAzimuth(n,t)-o.getAzimuth(n,i);return r<0?r+e.TWO_PI:r},o.isClockWise=function(e,t,o){return(o[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(o[0]-e[0])},o.getPointOnLine=function(e,t,o){var n=t[0]+e*(o[0]-t[0]),i=t[1]+e*(o[1]-t[1]);return[n,i]},o.getCubicValue=function(e,t,o,n,i){e=Math.max(Math.min(e,1),0);var r=1-e,s=e*e,a=s*e,l=r*r,c=l*r,u=c*t[0]+3*l*e*o[0]+3*r*s*n[0]+a*i[0],g=c*t[1]+3*l*e*o[1]+3*r*s*n[1]+a*i[1];return[u,g]},o.getThirdPoint=function(e,t,n,i,r){var s=o.getAzimuth(e,t),a=r?s+n:s-n,l=i*Math.cos(a),c=i*Math.sin(a);return[t[0]+l,t[1]+c]},o.getArcPoints=function(t,o,n,i){var r,s,a=[],l=i-n;l=l<0?l+e.TWO_PI:l;for(var c=0;c<=e.FITTING_COUNT;c++){var u=n+l*c/e.FITTING_COUNT;r=t[0]+o*Math.cos(u),s=t[1]+o*Math.sin(u),a.push([r,s])}return a},o.getBisectorNormals=function(t,n,i,r){var s=o.getNormal(n,i,r),a=Math.sqrt(s[0]*s[0]+s[1]*s[1]),l=s[0]/a,c=s[1]/a,u=o.distance(n,i),g=o.distance(i,r);if(a>e.ZERO_TOLERANCE)if(o.isClockWise(n,i,r)){var h=t*u,d=i[0]-h*c,p=i[1]+h*l,f=[d,p];h=t*g,d=i[0]+h*c,p=i[1]-h*l;var m=[d,p]}else h=t*u,d=i[0]+h*c,p=i[1]-h*l,f=[d,p],h=t*g,
d=i[0]-h*c,p=i[1]+h*l,m=[d,p];else d=i[0]+t*(n[0]-i[0]),p=i[1]+t*(n[1]-i[1]),f=[d,p],d=i[0]+t*(r[0]-i[0]),p=i[1]+t*(r[1]-i[1]),m=[d,p];return[f,m]},o.getNormal=function(e,t,o){var n=e[0]-t[0],i=e[1]-t[1],r=Math.sqrt(n*n+i*i);n/=r,i/=r;var s=o[0]-t[0],a=o[1]-t[1],l=Math.sqrt(s*s+a*a);s/=l,a/=l;var c=n+s,u=i+a;return[c,u]},o.getCurvePoints=function(t,n){for(var i=o.getLeftMostControlPoint(n),r=[i],s=0;s<n.length-2;s++){var a=n[s],l=n[s+1],c=n[s+2],u=o.getBisectorNormals(t,a,l,c);r=r.concat(u)}var g=o.getRightMostControlPoint(n);r.push(g);var h=[];for(s=0;s<n.length-1;s++){a=n[s],l=n[s+1],h.push(a);for(var t=0;t<e.FITTING_COUNT;t++){var d=o.getCubicValue(t/e.FITTING_COUNT,a,r[2*s],r[2*s+1],l);h.push(d)}h.push(l)}return h},o.getLeftMostControlPoint=function(n){var i=n[0],r=n[1],s=n[2],a=o.getBisectorNormals(0,i,r,s),l=a[0],c=o.getNormal(i,r,s),u=Math.sqrt(c[0]*c[0]+c[1]*c[1]);if(u>e.ZERO_TOLERANCE)var g=o.mid(i,r),h=i[0]-g[0],d=i[1]-g[1],p=o.distance(i,r),f=2/p,m=-f*d,v=f*h,y=m*m-v*v,_=2*m*v,b=v*v-m*m,w=l[0]-g[0],S=l[1]-g[1],C=g[0]+y*w+_*S,E=g[1]+_*w+b*S;else C=i[0]+t*(r[0]-i[0]),E=i[1]+t*(r[1]-i[1]);return[C,E]},o.getRightMostControlPoint=function(n){var i=n.length,r=n[i-3],s=n[i-2],a=n[i-1],l=o.getBisectorNormals(0,r,s,a),c=l[1],u=o.getNormal(r,s,a),g=Math.sqrt(u[0]*u[0]+u[1]*u[1]);if(g>e.ZERO_TOLERANCE)var h=o.mid(s,a),d=a[0]-h[0],p=a[1]-h[1],f=o.distance(s,a),m=2/f,v=-m*p,y=m*d,_=v*v-y*y,b=2*v*y,w=y*y-v*v,S=c[0]-h[0],C=c[1]-h[1],E=h[0]+_*S+b*C,T=h[1]+b*S+w*C;else E=a[0]+t*(s[0]-a[0]),T=a[1]+t*(s[1]-a[1]);return[E,T]},o.getBezierPoints=function(e){if(e.length<=2)return e;for(var t=[],n=e.length-1,i=0;i<=1;i+=.01){for(var r=y=0,s=0;s<=n;s++){var a=o.getBinomialFactor(n,s),l=Math.pow(i,s),c=Math.pow(1-i,n-s);r+=a*l*c*e[s][0],y+=a*l*c*e[s][1]}t.push([r,y])}return t.push(e[n]),t},o.getBinomialFactor=function(e,t){return o.getFactorial(e)/(o.getFactorial(t)*o.getFactorial(e-t))},o.getFactorial=function(e){if(e<=1)return 1;if(2==e)return 2;if(3==e)return 6;if(4==e)return 24;if(5==e)return 120;for(var t=1,o=1;o<=e;o++)t*=o;return t},o.getQBSplinePoints=function(e){if(e.length<=2)return e;var t=2,n=[],i=e.length-t-1;n.push(e[0]);for(var r=0;r<=i;r++)for(var s=0;s<=1;s+=.05){for(var a=y=0,l=0;l<=t;l++){var c=o.getQuadricBSplineFactor(l,s);a+=c*e[r+l][0],y+=c*e[r+l][1]}n.push([a,y])}return n.push(e[e.length-1]),n},o.getQuadricBSplineFactor=function(e,t){return 0==e?Math.pow(t-1,2)/2:1==e?(-2*Math.pow(t,2)+2*t+1)/2:2==e?Math.pow(t,2)/2:0},o}),define("draw/MilitaryPlot/Plot/Arc",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),ol.geom.LineString.call(this),this.type=e.ARC,this.fixPointCount=3,this.setPoints(t)};return goog.inherits(n,ol.geom.LineString),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();if(e<2)return void this.setCoordinates(this.points);if(2==e)this.setCoordinates(this.points);else{var t=this.points[0],n=this.points[1],i=this.points[2],r=o.getCircleCenterOfThreePoints(t,n,i),s=o.distance(t,r),a=o.getAzimuth(t,r),l=o.getAzimuth(n,r);if(o.isClockWise(t,n,i))var c=l,u=a;else c=a,u=l;this.setCoordinates(o.getArcPoints(r,s,c,u))}},n}),define("draw/MilitaryPlot/Plot/FineArrow",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.FINE_ARROW,this.tailWidthFactor=.15,this.neckWidthFactor=.2,this.headWidthFactor=.25,this.headAngle=Math.PI/8.5,this.neckAngle=Math.PI/13,this.fixPointCount=2,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var t=this.getPoints(),n=t[0],i=t[1],r=o.getBaseLength(t),s=r*this.tailWidthFactor,a=r*this.neckWidthFactor,l=r*this.headWidthFactor,c=o.getThirdPoint(i,n,o.Constants.HALF_PI,s,!0),u=o.getThirdPoint(i,n,o.Constants.HALF_PI,s,!1),g=o.getThirdPoint(n,i,this.headAngle,l,!1),h=o.getThirdPoint(n,i,this.headAngle,l,!0),d=o.getThirdPoint(n,i,this.neckAngle,a,!1),p=o.getThirdPoint(n,i,this.neckAngle,a,!0),f=[c,d,g,i,h,p,u];this.setCoordinates([f])}},n}),define("draw/MilitaryPlot/Plot/AssaultDirection",["../PlotTypes","./FineArrow"],function(e,t){var o=function(t){goog.base(this,[]),this.type=e.ASSAULT_DIRECTION,this.tailWidthFactor=.2,this.neckWidthFactor=.25,this.headWidthFactor=.3,this.headAngle=Math.PI/4,this.neckAngle=.17741*Math.PI,this.setPoints(t)};return goog.inherits(o,t),o}),define("draw/MilitaryPlot/Plot/AttackArrow",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.ATTACK_ARROW,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.headTailFactor=.8,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){if(!(this.getPointCount()<2)){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var e=this.getPoints(),t=e[0],n=e[1];o.isClockWise(e[0],e[1],e[2])&&(t=e[1],n=e[0]);var i=o.mid(t,n),r=[i].concat(e.slice(2)),s=this.getArrowHeadPoints(r,t,n),a=s[0],l=s[4],c=o.distance(t,n)/o.getBaseLength(r),u=this.getArrowBodyPoints(r,a,l,c),g=u.length,h=[t].concat(u.slice(0,g/2));h.push(a);var d=[n].concat(u.slice(g/2,g));d.push(l),h=o.getQBSplinePoints(h),d=o.getQBSplinePoints(d),this.setCoordinates([h.concat(s,d.reverse())])}},n.prototype.getArrowHeadPoints=function(e,t,n){var i=o.getBaseLength(e),r=i*this.headHeightFactor,s=e[e.length-1];i=o.distance(s,e[e.length-2]);var a=o.distance(t,n);r>a*this.headTailFactor&&(r=a*this.headTailFactor);var l=r*this.headWidthFactor,c=r*this.neckWidthFactor;r=r>i?i:r;var u=r*this.neckHeightFactor,g=o.getThirdPoint(e[e.length-2],s,0,r,!0),h=o.getThirdPoint(e[e.length-2],s,0,u,!0),d=o.getThirdPoint(s,g,o.Constants.HALF_PI,l,!1),p=o.getThirdPoint(s,g,o.Constants.HALF_PI,l,!0),f=o.getThirdPoint(s,h,o.Constants.HALF_PI,c,!1),m=o.getThirdPoint(s,h,o.Constants.HALF_PI,c,!0);return[f,d,s,p,m]},n.prototype.getArrowBodyPoints=function(e,t,n,i){for(var r=o.wholeDistance(e),s=o.getBaseLength(e),a=s*i,l=o.distance(t,n),c=(a-l)/2,u=0,g=[],h=[],d=1;d<e.length-1;d++){var p=o.getAngleOfThreePoints(e[d-1],e[d],e[d+1])/2;u+=o.distance(e[d-1],e[d]);var f=(a/2-u/r*c)/Math.sin(p),m=o.getThirdPoint(e[d-1],e[d],Math.PI-p,f,!0),v=o.getThirdPoint(e[d-1],e[d],p,f,!1);g.push(m),h.push(v)}return g.concat(h)},n}),define("draw/MilitaryPlot/Plot/Circle",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.CIRCLE,this.fixPointCount=2,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var t=this.points[0],n=o.distance(t,this.points[1]);this.setCoordinates([this.generatePoints(t,n)])}},n.prototype.generatePoints=function(e,t){for(var n,i,r,s=[],a=0;a<=o.Constants.FITTING_COUNT;a++)r=2*Math.PI*a/o.Constants.FITTING_COUNT,n=e[0]+t*Math.cos(r),i=e[1]+t*Math.sin(r),s.push([n,i]);return s},n}),define("draw/MilitaryPlot/Plot/ClosedCurve",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.CLOSED_CURVE,this.t=.3,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2))if(2==e)this.setCoordinates([this.points]);else{var t=this.getPoints();t.push(t[0],t[1]);for(var n=[],i=0;i<t.length-2;i++){var r=o.getBisectorNormals(this.t,t[i],t[i+1],t[i+2]);n=n.concat(r)}var e=n.length;n=[n[e-1]].concat(n.slice(0,e-1));var s=[];for(i=0;i<t.length-2;i++){var a=t[i],l=t[i+1];s.push(a);for(var c=0;c<=o.Constants.FITTING_COUNT;c++){var u=o.getCubicValue(c/o.Constants.FITTING_COUNT,a,n[2*i],n[2*i+1],l);s.push(u)}s.push(l)}this.setCoordinates([s])}},n}),define("draw/MilitaryPlot/Plot/Curve",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.CURVE,this.t=.3,this.setPoints(t)};return goog.inherits(n,ol.geom.LineString),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();e<2||(2==e?this.setCoordinates(this.points):this.setCoordinates(o.getCurvePoints(this.t,this.points)))},n}),define("draw/MilitaryPlot/Plot/DoubleArrow",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.DOUBLE_ARROW,this.headHeightFactor=.25,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.connPoint=null,this.tempPoint4=null,this.fixPointCount=4,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.finishDrawing=function(){3==this.getPointCount()&&null!=this.tempPoint4&&this.points.push(this.tempPoint4),null!=this.connPoint&&this.points.push(this.connPoint)},n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){if(2==e)return void this.setCoordinates([this.points]);var t=this.points[0],n=this.points[1],i=this.points[2],e=this.getPointCount();3==e?this.tempPoint4=this.getTempPoint4(t,n,i):this.tempPoint4=this.points[3],3==e||4==e?this.connPoint=o.mid(t,n):this.connPoint=this.points[4];var r,s;o.isClockWise(t,n,i)?(r=this.getArrowPoints(t,this.connPoint,this.tempPoint4,!1),s=this.getArrowPoints(this.connPoint,n,i,!0)):(r=this.getArrowPoints(n,this.connPoint,i,!1),s=this.getArrowPoints(this.connPoint,t,this.tempPoint4,!0));var a=r.length,l=(a-5)/2,c=r.slice(0,l),u=r.slice(l,l+5),g=r.slice(l+5,a),h=s.slice(0,l),d=s.slice(l,l+5),p=s.slice(l+5,a);h=o.getBezierPoints(h);var f=o.getBezierPoints(p.concat(c.slice(1)));g=o.getBezierPoints(g);var m=h.concat(d,f,u,g);this.setCoordinates([m])}},n.prototype.getArrowPoints=function(e,t,n,i){var r=o.mid(e,t),s=o.distance(r,n),a=o.getThirdPoint(n,r,0,.3*s,!0),l=o.getThirdPoint(n,r,0,.5*s,!0);a=o.getThirdPoint(r,a,o.Constants.HALF_PI,s/5,i),l=o.getThirdPoint(r,l,o.Constants.HALF_PI,s/4,i);var c=[r,a,l,n],u=this.getArrowHeadPoints(c,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),g=u[0],h=u[4],d=o.distance(e,t)/o.getBaseLength(c)/2,p=this.getArrowBodyPoints(c,g,h,d),f=p.length,m=p.slice(0,f/2),v=p.slice(f/2,f);return m.push(g),v.push(h),m=m.reverse(),m.push(t),v=v.reverse(),v.push(e),m.reverse().concat(u,v)},n.prototype.getArrowHeadPoints=function(e,t,n){var i=o.getBaseLength(e),r=i*this.headHeightFactor,s=e[e.length-1],a=(o.distance(t,n),r*this.headWidthFactor),l=r*this.neckWidthFactor,c=r*this.neckHeightFactor,u=o.getThirdPoint(e[e.length-2],s,0,r,!0),g=o.getThirdPoint(e[e.length-2],s,0,c,!0),h=o.getThirdPoint(s,u,o.Constants.HALF_PI,a,!1),d=o.getThirdPoint(s,u,o.Constants.HALF_PI,a,!0),p=o.getThirdPoint(s,g,o.Constants.HALF_PI,l,!1),f=o.getThirdPoint(s,g,o.Constants.HALF_PI,l,!0);return[p,h,s,d,f]},n.prototype.getArrowBodyPoints=function(e,t,n,i){for(var r=o.wholeDistance(e),s=o.getBaseLength(e),a=s*i,l=o.distance(t,n),c=(a-l)/2,u=0,g=[],h=[],d=1;d<e.length-1;d++){var p=o.getAngleOfThreePoints(e[d-1],e[d],e[d+1])/2;u+=o.distance(e[d-1],e[d]);var f=(a/2-u/r*c)/Math.sin(p),m=o.getThirdPoint(e[d-1],e[d],Math.PI-p,f,!0),v=o.getThirdPoint(e[d-1],e[d],p,f,!1);g.push(m),h.push(v)}return g.concat(h)},n.prototype.getTempPoint4=function(e,t,n){var i,r,s,a,l=o.mid(e,t),c=o.distance(l,n),u=o.getAngleOfThreePoints(e,l,n);return u<o.Constants.HALF_PI?(r=c*Math.sin(u),s=c*Math.cos(u),a=o.getThirdPoint(e,l,o.Constants.HALF_PI,r,!1),i=o.getThirdPoint(l,a,o.Constants.HALF_PI,s,!0)):u>=o.Constants.HALF_PI&&u<Math.PI?(r=c*Math.sin(Math.PI-u),s=c*Math.cos(Math.PI-u),a=o.getThirdPoint(e,l,o.Constants.HALF_PI,r,!1),i=o.getThirdPoint(l,a,o.Constants.HALF_PI,s,!1)):u>=Math.PI&&u<1.5*Math.PI?(r=c*Math.sin(u-Math.PI),s=c*Math.cos(u-Math.PI),a=o.getThirdPoint(e,l,o.Constants.HALF_PI,r,!0),i=o.getThirdPoint(l,a,o.Constants.HALF_PI,s,!0)):(r=c*Math.sin(2*Math.PI-u),s=c*Math.cos(2*Math.PI-u),a=o.getThirdPoint(e,l,o.Constants.HALF_PI,r,!0),i=o.getThirdPoint(l,a,o.Constants.HALF_PI,s,!1)),i},n}),define("draw/MilitaryPlot/Plot/Ellipse",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.ELLIPSE,this.fixPointCount=2,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var t=this.points[0],n=this.points[1],i=o.mid(t,n),r=Math.abs((t[0]-n[0])/2),s=Math.abs((t[1]-n[1])/2);this.setCoordinates([this.generatePoints(i,r,s)])}},n.prototype.generatePoints=function(e,t,n){for(var i,r,s,a=[],l=0;l<=o.Constants.FITTING_COUNT;l++)s=2*Math.PI*l/o.Constants.FITTING_COUNT,i=e[0]+t*Math.cos(s),r=e[1]+n*Math.sin(s),a.push([i,r]);return a},n}),define("draw/MilitaryPlot/Plot/FreehandLine",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.FREEHAND_LINE,this.freehand=!0,this.setPoints(t)};return goog.inherits(n,ol.geom.LineString),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();e<2||this.setCoordinates(this.points)},n}),define("draw/MilitaryPlot/Plot/FreehandPolygon",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.FREEHAND_POLYGON,this.freehand=!0,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();e<2||this.setCoordinates([this.points])},n}),define("draw/MilitaryPlot/Plot/GatheringPlace",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.GATHERING_PLACE,this.t=.4,this.fixPointCount=3,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPoints();if(!(e.length<2)){if(2==this.getPointCount()){var t=o.mid(e[0],e[1]),n=o.distance(e[0],t)/.9,i=o.getThirdPoint(e[0],t,o.Constants.HALF_PI,n,!0);e=[e[0],i,e[1]]}var t=o.mid(e[0],e[2]);e.push(t,e[0],e[1]);for(var r=[],s=0;s<e.length-2;s++){var a=e[s],l=e[s+1],c=e[s+2],u=o.getBisectorNormals(this.t,a,l,c);r=r.concat(u)}var g=r.length;r=[r[g-1]].concat(r.slice(0,g-1));var h=[];for(s=0;s<e.length-2;s++){a=e[s],l=e[s+1],h.push(a);for(var d=0;d<=o.Constants.FITTING_COUNT;d++){var i=o.getCubicValue(d/o.Constants.FITTING_COUNT,a,r[2*s],r[2*s+1],l);h.push(i)}h.push(l)}this.setCoordinates([h])}},n}),define("draw/MilitaryPlot/Plot/LineStringPlot",[],function(){var e=function(e){this.setPoints(e)};ol.inherits(e,ol.geom.LineString),e.prototype.isPlot=function(){return!0},e.prototype.setPoints=function(e){this.points=e?e:[],this.points.length>=1&&this.generate()},e.prototype.getPoints=function(){return this.points.slice(0)},e.prototype.getPointCount=function(){return this.points.length},e.prototype.updatePoint=function(e,t){t>=0&&t<this.points.length&&(this.points[t]=e,this.generate())},e.prototype.updateLastPoint=function(e){this.updatePoint(e,this.points.length-1)},e.prototype.generate=function(){},e.prototype.finishDrawing=function(){}}),define("draw/MilitaryPlot/Plot/Lune",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.LUNE,this.fixPointCount=3,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){if(!(this.getPointCount()<2)){var e=this.getPoints();if(2==this.getPointCount()){var t=o.mid(e[0],e[1]),n=o.distance(e[0],t),i=o.getThirdPoint(e[0],t,o.Constants.HALF_PI,n);e.push(i)}var r=e[0],s=e[1],a=e[2],l=o.getCircleCenterOfThreePoints(r,s,a),c=o.distance(r,l),u=o.getAzimuth(r,l),g=o.getAzimuth(s,l);if(o.isClockWise(r,s,a))var h=g,d=u;else h=u,d=g;var e=o.getArcPoints(l,c,h,d);e.push(e[0]),this.setCoordinates([e])}},n}),define("draw/MilitaryPlot/Plot/Marker",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[0,0]),this.type=e.MARKER,this.fixPointCount=1,this.setPoints(t)};return goog.inherits(n,ol.geom.Point),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.points[0];this.setCoordinates(e)},n}),define("draw/MilitaryPlot/Plot/Polygon",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.POLYGON,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();e<2||this.setCoordinates([this.points])},n}),define("draw/MilitaryPlot/Plot/PolygonPlot",[],function(){var e=function(e){this.setPoints(e)};ol.inherits(e,ol.geom.Polygon),e.prototype.isPlot=function(){return!0},e.prototype.setPoints=function(e){this.points=e?e:[],this.points.length>=1&&this.generate()},e.prototype.getPoints=function(){return this.points.slice(0)},e.prototype.getPointCount=function(){return this.points.length},e.prototype.updatePoint=function(e,t){t>=0&&t<this.points.length&&(this.points[t]=e,this.generate())},e.prototype.updateLastPoint=function(e){this.updatePoint(e,this.points.length-1)},e.prototype.generate=function(){},e.prototype.finishDrawing=function(){}}),define("draw/MilitaryPlot/Plot/Polyline",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.POLYLINE,this.setPoints(t)};return goog.inherits(n,ol.geom.LineString),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();e<2||this.setCoordinates(this.points)},n}),define("draw/MilitaryPlot/Plot/Rectangle",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.RECTANGLE,this.fixPointCount=2,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var t=this.points[0],o=this.points[1],n=Math.min(t[0],o[0]),i=Math.max(t[0],o[0]),r=Math.min(t[1],o[1]),s=Math.max(t[1],o[1]),a=[n,s],l=[i,s],c=[i,r],u=[n,r];this.setCoordinates([[a,l,c,u]])}},n}),define("draw/MilitaryPlot/Plot/Sector",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.SECTOR,this.fixPointCount=3,this.setPoints(t)};return goog.inherits(n,ol.geom.Polygon),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){if(!(this.getPointCount()<2))if(2==this.getPointCount())this.setCoordinates([this.points]);else{var e=this.getPoints(),t=e[0],n=e[1],i=e[2],r=o.distance(n,t),s=o.getAzimuth(n,t),a=o.getAzimuth(i,t),l=o.getArcPoints(t,r,s,a);l.push(t,l[0]),this.setCoordinates([l])}},n}),define("draw/MilitaryPlot/Plot/SquadCombat",["../PlotTypes","./AttackArrow","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.SQUAD_COMBAT,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.setPoints(t)};return goog.inherits(n,t),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var t=this.getPoints(),n=this.getTailPoints(t),i=this.getArrowHeadPoints(t,n[0],n[1]),r=i[0],s=i[4],a=this.getArrowBodyPoints(t,r,s,this.tailWidthFactor),e=a.length,l=[n[0]].concat(a.slice(0,e/2));l.push(r);var c=[n[1]].concat(a.slice(e/2,e));c.push(s),l=o.getQBSplinePoints(l),c=o.getQBSplinePoints(c),this.setCoordinates([l.concat(i,c.reverse())])}},n.prototype.getTailPoints=function(e){var t=o.getBaseLength(e),n=t*this.tailWidthFactor,i=o.getThirdPoint(e[1],e[0],o.Constants.HALF_PI,n,!1),r=o.getThirdPoint(e[1],e[0],o.Constants.HALF_PI,n,!0);return[i,r]},n}),define("draw/MilitaryPlot/Plot/StraightArrow",["../PlotTypes","./Plot","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.STRAIGHT_ARROW,this.fixPointCount=2,this.maxArrowLength=3e6,this.arrowLengthScale=5,this.setPoints(t)};return goog.inherits(n,ol.geom.LineString),goog.mixin(n.prototype,t.prototype),n.prototype.generate=function(){if(!(this.getPointCount()<2)){var e=this.getPoints(),t=e[0],n=e[1],i=o.distance(t,n),r=i/this.arrowLengthScale;r=r>this.maxArrowLength?this.maxArrowLength:r;var s=o.getThirdPoint(t,n,Math.PI/6,r,!1),a=o.getThirdPoint(t,n,Math.PI/6,r,!0);this.setCoordinates([t,n,s,n,a])}},n}),define("draw/MilitaryPlot/Plot/TailedAttackArrow",["../PlotTypes","./AttackArrow","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.TAILED_ATTACK_ARROW,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.headTailFactor=.8,this.swallowTailFactor=1,this.swallowTailPnt=null,this.setPoints(t)};return goog.inherits(n,t),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var t=this.getPoints(),n=t[0],i=t[1];o.isClockWise(t[0],t[1],t[2])&&(n=t[1],i=t[0]);var r=o.mid(n,i),s=[r].concat(t.slice(2)),a=this.getArrowHeadPoints(s,n,i),l=a[0],c=a[4],u=o.distance(n,i),g=o.getBaseLength(s),h=g*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=o.getThirdPoint(s[1],s[0],0,h,!0);var d=u/g,p=this.getArrowBodyPoints(s,l,c,d),e=p.length,f=[n].concat(p.slice(0,e/2));f.push(l);var m=[i].concat(p.slice(e/2,e));m.push(c),f=o.getQBSplinePoints(f),m=o.getQBSplinePoints(m),this.setCoordinates([f.concat(a,m.reverse(),[this.swallowTailPnt,f[0]])])}},n}),define("draw/MilitaryPlot/Plot/TailedSquadCombat",["../PlotTypes","./AttackArrow","../PlotUtils"],function(e,t,o){var n=function(t){goog.base(this,[]),this.type=e.TAILED_SQUAD_COMBAT,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.swallowTailFactor=1,this.swallowTailPnt=null,this.setPoints(t)};return goog.inherits(n,t),n.prototype.generate=function(){var e=this.getPointCount();if(!(e<2)){var t=this.getPoints(),n=this.getTailPoints(t),i=this.getArrowHeadPoints(t,n[0],n[2]),r=i[0],s=i[4],a=this.getArrowBodyPoints(t,r,s,this.tailWidthFactor),e=a.length,l=[n[0]].concat(a.slice(0,e/2));l.push(r);var c=[n[2]].concat(a.slice(e/2,e));c.push(s),l=o.getQBSplinePoints(l),c=o.getQBSplinePoints(c),this.setCoordinates([l.concat(i,c.reverse(),[n[1],l[0]])])}},n.prototype.getTailPoints=function(e){var t=o.getBaseLength(e),n=t*this.tailWidthFactor,i=o.getThirdPoint(e[1],e[0],o.Constants.HALF_PI,n,!1),r=o.getThirdPoint(e[1],e[0],o.Constants.HALF_PI,n,!0),s=n*this.swallowTailFactor,a=o.getThirdPoint(e[1],e[0],0,s,!0);return[i,a,r]},n}),define("draw/MilitaryPlot/PlotFactory",["./PlotTypes","./Plot/Arc","./Plot/AssaultDirection","./Plot/AttackArrow","./Plot/Circle","./Plot/ClosedCurve","./Plot/Curve","./Plot/DoubleArrow","./Plot/Ellipse","./Plot/FineArrow","./Plot/FreehandLine","./Plot/FreehandPolygon","./Plot/GatheringPlace","./Plot/LineStringPlot","./Plot/Lune","./Plot/Marker","./Plot/Polygon","./Plot/PolygonPlot","./Plot/Polyline","./Plot/Rectangle","./Plot/Sector","./Plot/SquadCombat","./Plot/StraightArrow","./Plot/TailedAttackArrow","./Plot/TailedSquadCombat"],function(e,t,o,n,i,r,s,a,l,c,u,g,h,d,p,f,m,v,y,_,b,w,S,C,E){var T={};return T.createPlot=function(d,v){switch(d){case e.ARC:return new t(v);case e.ASSAULT_DIRECTION:return new o(v);case e.ATTACK_ARROW:return new n(v);case e.CIRCLE:return new i(v);case e.CLOSED_CURVE:return new r(v);case e.CURVE:return new s(v);case e.DOUBLE_ARROW:return new a(v);case e.ELLIPSE:return new l(v);case e.FINE_ARROW:return new c(v);case e.FREEHAND_LINE:return new u(v);case e.FREEHAND_POLYGON:return new g(v);case e.GATHERING_PLACE:return new h(v);case e.LUNE:return new p(v);case e.MARKER:return new f(v);case e.POLYGON:return new m(v);case e.POLYLINE:return new y(v);case e.RECTANGLE:return new _(v);case e.SECTOR:return new b(v);case e.SQUAD_COMBAT:return new w(v);case e.STRAIGHT_ARROW:return new S(v);case e.TAILED_ATTACK_ARROW:return new C(v);case e.TAILED_SQUAD_COMBAT:return new E(v)}return null},T}),define("draw/MilitaryPlot/DrawEvent",[],function(){var e=function(e,t){goog.events.Event.call(this,e),this.feature=t};return ol.inherits(e,goog.events.Event),e.Type={DRAW_START:"drawstart",DRAW_END:"drawend",EDIT_START:"editstart",EDIT_END:"editend",MOUSEMOVE:"mousemove",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown"},e}),define("draw/MilitaryPlot/PlotDraw",["./PlotFactory","./PlotUtils","./DrawEvent"],function(e,t,o){var n={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},i="mousemove",r=function(e){ol.Object.call(this),this.points=null,this.plot=null,this.feature=null,this.plotType=null,this.plotParams=null,this.mapViewport=null,this.dblClickZoomInteraction=null;var t=new ol.style.Stroke({color:"#000000",width:1.25}),o=new ol.style.Fill({color:"rgba(0,0,0,0.4)"});this.style=new ol.style.Style({fill:o,stroke:t}),this.featureSource=new ol.source.Vector,this.drawOverlay=new ol.layer.Vector({source:this.featureSource}),this.drawOverlay.setStyle(this.style),this.setMap(e)};return goog.inherits(r,ol.Object),r.prototype.activate=function(e,t){this.deactivate(),this.deactivateMapTools(),this.map.on("click",this.mapFirstClickHandler,this),this.plotType=e,this.plotParams=t,this.map.addLayer(this.drawOverlay)},r.prototype.deactivate=function(){this.disconnectEventHandlers(),this.map.removeLayer(this.drawOverlay),this.featureSource.clear(),this.points=[],this.plot=null,this.feature=null,this.plotType=null,this.plotParams=null,this.activateMapTools()},r.prototype.isDrawing=function(){return null!=this.plotType},r.prototype.setMap=function(e){this.map=e,this.mapViewport=this.map.getViewport()},r.prototype.mapFirstClickHandler=function(t){return this.points.push(t.coordinate),this.plot=e.createPlot(this.plotType,this.points,this.plotParams),this.feature=new ol.Feature(this.plot),this.featureSource.addFeature(this.feature),this.map.un("click",this.mapFirstClickHandler,this),this.plot.fixPointCount==this.plot.getPointCount()?void this.mapDoubleClickHandler(t):(this.map.on("click",this.mapNextClickHandler,this),this.plot.freehand||this.map.on("dblclick",this.mapDoubleClickHandler,this),void goog.events.listen(this.mapViewport,i,this.mapMouseMoveHandler,!1,this))},r.prototype.mapMouseMoveHandler=function(e){var o=this.map.getCoordinateFromPixel([e.offsetX,e.offsetY]);if(!(t.distance(o,this.points[this.points.length-1])<n.ZERO_TOLERANCE))if(this.plot.freehand)this.points.push(o),this.plot.setPoints(this.points);else{var i=this.points.concat([o]);this.plot.setPoints(i)}},r.prototype.mapNextClickHandler=function(e){if(this.plot.freehand||!(t.distance(e.coordinate,this.points[this.points.length-1])<n.ZERO_TOLERANCE))return this.points.push(e.coordinate),this.plot.setPoints(this.points),this.plot.fixPointCount==this.plot.getPointCount()?void this.mapDoubleClickHandler(e):void(this.plot&&this.plot.freehand&&this.mapDoubleClickHandler(e))},r.prototype.mapDoubleClickHandler=function(e){this.disconnectEventHandlers(),this.plot.finishDrawing(),e.preventDefault(),this.drawEnd(e)},r.prototype.disconnectEventHandlers=function(){this.map.un("click",this.mapFirstClickHandler,this),this.map.un("click",this.mapNextClickHandler,this),goog.events.unlisten(this.mapViewport,i,this.mapMouseMoveHandler,!1,this),this.map.un("dblclick",this.mapDoubleClickHandler,this)},r.prototype.drawEnd=function(e){this.featureSource.removeFeature(this.feature),this.activateMapTools(),this.disconnectEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.plotType=null,this.plotParams=null,this.dispatchEvent(new o(o.Type.DRAW_END,this.feature)),this.feature=null},r.prototype.deactivateMapTools=function(){for(var e=this.map.getInteractions(),t=e.getLength(),o=0;o<t;o++){var n=e.item(o);if(n instanceof ol.interaction.DoubleClickZoom){this.dblClickZoomInteraction=n,e.remove(n);break}}},r.prototype.activateMapTools=function(){null!=this.dblClickZoomInteraction&&(this.map.getInteractions().push(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)},r}),define("draw/MilitaryPlot/Utils",[],function(){var e={_stampId:0};return e.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},e.stamp=function(e){var t="_p_id_";return e[t]=e[t]||this._stampId++,e[t]},e}),define("draw/MilitaryPlot/DomUtils",["./Utils"],function(e){var t={};return t.create=function(e,t,o,n){var i=document.createElement(e);return i.className=t||"",n&&(i.id=n),o&&o.appendChild(i),i},t.createHidden=function(e,t,o){var n=document.createElement(e);return n.style.display="none",o&&(n.id=o),t&&t.appendChild(n),n},t.remove=function(e,t){t&&e&&t.removeChild(e)},t.get=function(e){return document.getElementById(e)},t.getStyle=function(e,t){var o=e.style[t];return"auto"===o?null:o},t.hasClass=function(e,t){return e.className.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},t.addClass=function(e,t){this.hasClass(e,t)||(e.className&&(e.className+=" "),e.className+=t)},t.removeClass=function(t,o){t.className=e.trim((" "+t.className+" ").replace(" "+o+" "," "))},t.getDomEventKey=function(t,o,n){return"_p_dom_event_"+t+"_"+e.stamp(o)+(n?"_"+e.stamp(n):"")},t.addListener=function(e,o,n,i){var r=this,s=t.getDomEventKey(o,n,i),a=e[s];return a?r:(a=function(t){return n.call(i||e,t)},"addEventListener"in e?e.addEventListener(o,a,!1):"attachEvent"in e&&e.attachEvent("on"+o,a),e[s]=a,r)},t.removeListener=function(e,o,n,i){var r=this,s=t.getDomEventKey(o,n,i),a=e[s];return a?("removeEventListener"in e?e.removeEventListener(o,a,!1):"detachEvent"in e&&e.detachEvent("on"+o,a),e[s]=null,r):r},t}),define("draw/MilitaryPlot/PlotEdit",["./DomUtils","./DrawEvent"],function(e,t){var o=function(e){ol.Object.call(this),e&&(this.activePlot=null,this.startPoint=null,this.ghostControlPoints=null,this.controlPoints=null,this.map=e,this.mapViewport=this.map.getViewport(),this.mouseOver=!1,this.elementTable={},this.activeControlPointId=null,this.mapDragPan=null)};return goog.inherits(o,ol.Object),o.prototype.Constants={HELPER_HIDDEN_DIV:"p-helper-hidden-div",HELPER_CONTROL_POINT_DIV:"p-helper-control-point-div"},o.prototype.initHelperDom=function(){if(this.map&&this.activePlot){var t=this.getMapParentElement();if(t)for(var o=e.createHidden("div",t,this.Constants.HELPER_HIDDEN_DIV),n=this.getControlPoints(),i=0;i<n.length;i++){var r=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+i;e.create("div",this.Constants.HELPER_CONTROL_POINT_DIV,o,r),this.elementTable[r]=i}}},o.prototype.getMapParentElement=function(){var e=this.map.getTargetElement();if(e)return e.parentNode},o.prototype.destroyHelperDom=function(){if(this.controlPoints){for(var t=0;t<this.controlPoints.length;t++){this.map.removeOverlay(this.controlPoints[t]);var o=e.get(this.Constants.HELPER_CONTROL_POINT_DIV+"-"+t);o&&(e.removeListener(o,"mousedown",this.controlPointMouseDownHandler,this),e.removeListener(o,"mousemove",this.controlPointMouseMoveHandler2,this))}this.controlPoints=null}var n=this.getMapParentElement(),i=e.get(this.Constants.HELPER_HIDDEN_DIV);i&&n&&e.remove(i,n)},o.prototype.initControlPoints=function(){if(this.map){this.controlPoints=[];for(var t=this.getControlPoints(),o=0;o<t.length;o++){var n=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+o,i=e.get(n),r=new ol.Overlay({id:n,position:t[o],positioning:"center-center",element:i});this.controlPoints.push(r),this.map.addOverlay(r),e.addListener(i,"mousedown",this.controlPointMouseDownHandler,this),e.addListener(i,"mousemove",this.controlPointMouseMoveHandler2,this)}}},o.prototype.controlPointMouseMoveHandler2=function(e){e.stopImmediatePropagation()},o.prototype.controlPointMouseDownHandler=function(e){var o=e.target.id;this.activeControlPointId=o,goog.events.listen(this.mapViewport,t.Type.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.listen(this.mapViewport,t.Type.MOUSEUP,this.controlPointMouseUpHandler,!1,this)},o.prototype.controlPointMouseMoveHandler=function(e){var t=this.map.getCoordinateFromPixel([e.offsetX,e.offsetY]);if(this.activeControlPointId){var o=this.activePlot.getGeometry(),n=this.elementTable[this.activeControlPointId];
o.updatePoint(t,n);var i=this.map.getOverlayById(this.activeControlPointId);i.setPosition(t)}},o.prototype.controlPointMouseUpHandler=function(e){goog.events.unlisten(this.mapViewport,t.Type.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.unlisten(this.mapViewport,t.Type.MOUSEUP,this.controlPointMouseUpHandler,!1,this)},o.prototype.activate=function(e){if(e&&e instanceof ol.Feature&&e!=this.activePlot){var t=e.getGeometry();t.isPlot()&&(this.deactivate(),this.activePlot=e,this.map.on("pointermove",this.plotMouseOverOutHandler,this),this.initHelperDom(),this.initControlPoints())}},o.prototype.getControlPoints=function(){if(!this.activePlot)return[];var e=this.activePlot.getGeometry();return e.getPoints()},o.prototype.plotMouseOverOutHandler=function(e){var t=this.map.forEachFeatureAtPixel(e.pixel,function(e,t){return e});t&&t==this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getViewport().style.cursor="move",this.map.on("pointerdown",this.plotMouseDownHandler,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getViewport().style.cursor="default",this.map.un("pointerdown",this.plotMouseDownHandler,this))},o.prototype.plotMouseDownHandler=function(e){this.ghostControlPoints=this.getControlPoints(),this.startPoint=e.coordinate,this.disableMapDragPan(),this.map.on("pointerup",this.plotMouseUpHandler,this),this.map.on("pointerdrag",this.plotMouseMoveHandler,this)},o.prototype.plotMouseMoveHandler=function(e){for(var t=e.coordinate,o=t[0]-this.startPoint[0],n=t[1]-this.startPoint[1],i=[],r=0;r<this.ghostControlPoints.length;r++){var s=this.ghostControlPoints[r],a=[s[0]+o,s[1]+n];i.push(a);var l=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+r,c=this.map.getOverlayById(l);c.setPosition(a),c.setPositioning("center-center")}var u=this.activePlot.getGeometry();u.setPoints(i)},o.prototype.plotMouseUpHandler=function(e){this.enableMapDragPan(),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)},o.prototype.disconnectEventHandlers=function(){this.map.un("pointermove",this.plotMouseOverOutHandler,this),goog.events.unlisten(this.mapViewport,t.Type.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.unlisten(this.mapViewport,t.Type.MOUSEUP,this.controlPointMouseUpHandler,!1,this),this.map.un("pointerdown",this.plotMouseDownHandler,this),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)},o.prototype.deactivate=function(){this.activePlot=null,this.mouseOver=!1,this.destroyHelperDom(),this.disconnectEventHandlers(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null},o.prototype.disableMapDragPan=function(){for(var e=this.map.getInteractions(),t=e.getLength(),o=0;o<t;o++){var n=e.item(o);if(n instanceof ol.interaction.DragPan){this.mapDragPan=n,n.setActive(!1);break}}},o.prototype.enableMapDragPan=function(){null!=this.mapDragPan&&(this.mapDragPan.setActive(!0),this.mapDragPan=null)},o}),define("draw/MilitaryPlot/MilitaryPlot",["./PlotDraw","./PlotEdit","./DrawEvent","./Plot/Plot"],function(e,t,o,n){var i=function(e){this.contMap=e,this.map2d=e.scene.map2d,this.plotDraw,this.plotEdit,this.drawOverlay,this.drawStyle,this.stroke,this.fill,this.imgae,this.init()};return i.prototype.init=function(){this.plotDraw=new e(this.map2d),this.plotEdit=new t(this.map2d),this.plotDraw.on(o.Type.DRAW_END,this.onDrawEnd,this),this.stroke=new ol.style.Stroke({color:"#FF0000",width:2}),this.fill=new ol.style.Fill({color:"rgba(0,255,0,0.4)"}),this.image=new ol.style.Circle({fill:this.fill,stroke:this.stroke,radius:8}),this.drawStyle=new ol.style.Style({image:this.image,fill:this.fill,stroke:this.stroke}),this.drawOverlay=new ol.layer.Vector({source:new ol.source.Vector}),this.drawOverlay.setStyle(this.drawStyle),this.drawOverlay.setMap(this.map2d),this.map2d.on("click",function(e){if(!this.plotDraw.isDrawing()){var t=this.map2d.forEachFeatureAtPixel(e.pixel,function(e,t){return e},this,function(e){return e===this.drawOverlay},this);t?this.plotEdit.activate(t):this.plotEdit.deactivate()}},this)},i.prototype.onDrawEnd=function(e){var t=e.feature;this.drawOverlay.getSource().addFeature(t),this.plotEdit.activate(t)},i.prototype.activate=function(e){this.plotEdit.deactivate(),this.plotDraw.activate(e)},i.prototype.clear=function(){this.drawOverlay.getSource().clear()},i}),define("thirdParty/text!widgets/ToolBoxPanel/Draw/MilitaryDraw//MilitaryDraw.html",[],function(){return'<div>\r\n    <div class="rightPanel militaryDraw" data-bind="visible:visible" >\r\n        <div class="panelTitle">\r\n            <span>军标标绘</span>\r\n            <input type="button" class="closeButton" title="关闭" value="X"\r\n                   onfocus=" this.blur(); "\r\n                   data-bind="click:close"/>\r\n        </div>\r\n        <div class="militaryDraw-tool block" data-bind="click:militaryArror" >\r\n            <span class="arror img"></span>\r\n            <span>箭头</span>\r\n        </div>\r\n<!--        <div class="split block" style="margin-bottom: 17px;"></div>\r\n        <div class="militaryDraw-tool block" >\r\n            <span class="point img"></span>\r\n            <span>点</span>\r\n        </div>-->\r\n        <div class="split block" style="margin-bottom: 17px;"></div>\r\n        <div class="militaryDraw-tool block" data-bind="click:militaryPolyline">\r\n            <span class="polyline img"></span>\r\n            <span>线</span>\r\n        </div>\r\n        <div class="split block" style="margin-bottom: 17px;"></div>\r\n        <div class="militaryDraw-tool block" data-bind="click:militaryPolygon">\r\n            <span class="polygon img"></span>\r\n            <span>面</span>\r\n        </div>\r\n        <div class="split block" style="margin-bottom: 17px;"></div>\r\n        <div class="militaryDraw-tool block" data-bind="click:militaryClear">\r\n            <span class="empty img"></span>\r\n            <span>删除</span>\r\n        </div>\r\n    </div>\r\n    <div class="militaryDraw-table" data-bind="visible:visible,css:{height:panelHeight()}">\r\n        <strong style="color: #EAEAEA;">军标标绘</strong> > <span style="color: #EAEAEA;" data-bind="text:drawType"></span><br>\r\n        <div data-bind="foreach:militaryDrawPara">\r\n            <span style="color: #EAEAEA;"  height="40" width="40" data-bind="text:text ,click:function(){$parent.militaryDraw(name)}"></span>\r\n        </div>\r\n    </div>\r\n</div>'}),define("widgets/ToolBoxPanel/Draw/MilitaryDraw/MilitaryDraw",["../../../../core/defined","../../../../core/defineProperties","../../../../core/DeveloperError","../../../../core/getElement","../../../../core/baseUtil","../../../../thirdParty/knockout","../../../../draw/MilitaryPlot/MilitaryPlot","../../../../thirdParty/text!.//MilitaryDraw.html"],function(e,t,o,n,i,r,s,a){var l=function(t,i){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._contMap=i,this._projection=i._getProjection(),this._layerManger=this._contMap.layerManager,this._wgs84Sphere=new ol.Sphere(6378137),this._militaryPlot=new s(this._contMap),this._militaryArror=[{name:"doublearrow",text:"钳击"},{name:"straightarrow",text:"直箭头"},{name:"finearrow",text:"细直箭头"},{name:"assaultdirection",text:"突击方向"},{name:"attackarrow",text:"进攻方向"},{name:"tailedattackarrow",text:"进攻方向（尾）"},{name:"squadcombat",text:"分队战斗行动"},{name:"tailedsquadcombat",text:"分队战斗行动（尾）"}],this._militaryPolyline=[{name:"arc",text:"弧线"},{name:"curve",text:"曲线"},{name:"polyline",text:"折线"},{name:"freehandline",text:"自由线"}],this._militaryPolygon=[{name:"circle",text:"圆"},{name:"ellipse",text:"椭圆"},{name:"lune",text:"弓形"},{name:"sector",text:"扇形"},{name:"closedcurve",text:"曲线面"},{name:"polygon",text:"多边形"},{name:"rectangle",text:"矩形"},{name:"freehandpolygon",text:"自由面"},{name:"gatheringplace",text:"聚集地"}]};return l.prototype.init=function(){var e=this,t={visible:r.observable(!1),drawType:r.observable(),militaryDrawPara:r.observable([]),panelHeight:r.observable(250),close:function(){t.visible(!1)},militaryDraw:function(t){e._militaryPlot.activate(t)},militaryArror:function(){t.drawType("箭头"),t.militaryDrawPara(e._militaryArror)},militaryPolyline:function(){t.drawType("线"),t.militaryDrawPara(e._militaryPolyline)},militaryPolygon:function(){t.drawType("面"),t.militaryDrawPara(e._militaryPolygon)},militaryClear:function(){e._militaryPlot.clear()}};this._viewModel=t;var o=document.createElement("div");o.innerHTML=a,this._element=o.children[0],e._container.appendChild(this._element),r.applyBindings(this._viewModel,this._element)},l.prototype.show=function(e){this._viewModel.visible(e)},l.prototype.mathHeight=function(e){return 40*Math.ceil(e/7)+50},l}),define("core/PieChart",[],function(){function e(){this.width=600,this.height=400,this.series=[],this.unit="kg",this.chartCanvas=null,this.selectable=!0,this.legend={enable:!0},this.edge={width:50,height:50},this.animation={enable:!0,animCanvas:null,hh:1,pctx:null},this.tooltips={enable:!0,tooltipCanvas:null,ttContext:null,index:-1},this.circle={cx:0,cy:0,radius:0},this.text={enable:!1,content:[]}}return e.prototype.initSettings=function(e){this.chartCanvas=e.canvas,this.chartCanvas.width=e.width,this.chartCanvas.height=e.height,this.width=e.width,this.height=e.height,this.series=e.series,this.unit=e.unit,void 0!=e.tooltips&&(this.tooltips.enable=e.tooltips.enable),void 0!=e.animation&&(this.animation.enable=e.animation.enable),void 0!=e.legend&&(this.legend.enable=e.legend.enable),void 0!=e.text&&(this.text.enable=e.text.enable)},e.prototype.render=function(){this.circle.cx=this.width/2,this.circle.cy=this.height/2,this.circle.radius=Math.min(this.width/2,this.height/2)-Math.max(this.edge.width,this.edge.height);var e=null;if(this.animation.enable?(this.animation.animCanvas=document.createElement("canvas"),this.animation.animCanvas.width=this.width,this.animation.animCanvas.height=this.height,e=this.animation.animCanvas.getContext("2d")):(e=this.chartCanvas.getContext("2d"),this.renderBorder(e)),this.circle.radius<=0)return void e.strokeText("Can not render the chart ,Circle is too small");for(var t=0,o=this.series.length,n=0;n<o;n++)t+=this.series[n][1];for(var i=0,n=0;n<o;n++){var r=this.series[n][1]/t;this.renderPie(e,n,r,i),i+=2*Math.PI*r}if(e.restore(),e.save(),e.shadowColor="black",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=10,e.beginPath(),e.arc(this.circle.cx,this.circle.cy,this.circle.radius,0,2*Math.PI,!1),e.closePath(),e.lineWidth=1,e.strokeStyle="RGBA(127,127,127,1)",e.stroke(),e.restore(),this.animation.enable){var s=this;this.animation.pctx=this.chartCanvas.getContext("2d"),this.renderBorder(this.animation.pctx),setTimeout(function(){s.playAnimation(s)},50)}},e.prototype.showTooltips=function(e,t){if(this.tooltips.enable){var o=e.x-this.width/2,n=e.y-this.height/2,i=Math.floor(Math.sqrt(o*o+n*n));if(i<=this.circle.radius){var r=Math.atan2(n,o);r<=0&&(r+=2*Math.PI);for(var s=0,a=this.series.length,l=0;l<a;l++)s+=this.series[l][1];for(var c=0,u=0,g=0;g<a;g++){var h=this.series[g][1]/s;if(c+=2*Math.PI*h,r<=c){u=g;break}}null==this.tooltips.tooltipCanvas&&(this.tooltips.tooltipCanvas=document.createElement("canvas"),this.tooltips.ttContext=this.tooltips.tooltipCanvas.getContext("2d"),this.tooltips.tooltipCanvas.width=150,this.tooltips.tooltipCanvas.height=100),this.clearTooltips(t),this.tooltips.index=u;var d=this.tooltips.ttContext;d.save(),d.clearRect(0,0,this.tooltips.tooltipCanvas.width,this.tooltips.tooltipCanvas.height),d.lineWidth=2,d.strokeStyle=this.series[u][2],d.fillStyle="RGBA(255,255,255,0.7)",d.fillRect(2,2,this.tooltips.tooltipCanvas.width-4,this.tooltips.tooltipCanvas.height-4),d.roundRect(2,2,this.tooltips.tooltipCanvas.width-4,this.tooltips.tooltipCanvas.height-4,5,!0,!0),d.font="14px Arial",d.fillStyle="RGBA(0,0,0,1)",d.fillText(this.series[u][0],5,20),d.fillText(this.series[u][1]+this.unit,5,40),d.restore(),e.x+this.tooltips.tooltipCanvas.width>this.width&&(e.x=e.x-this.tooltips.tooltipCanvas.width),e.y-this.tooltips.tooltipCanvas.height<=0&&(e.y=e.y+this.tooltips.tooltipCanvas.height),t.drawImage(this.tooltips.tooltipCanvas,0,0,this.tooltips.tooltipCanvas.width,this.tooltips.tooltipCanvas.height,e.x,e.y-this.tooltips.tooltipCanvas.height,this.tooltips.tooltipCanvas.width,this.tooltips.tooltipCanvas.height)}else this.tooltips.index=-1,this.clearTooltips(t)}},e.prototype.clearTooltips=function(e){e.clearRect(0,0,this.width,this.height),this.renderBorder(e),e.drawImage(this.animation.animCanvas,0,0,this.width,this.height,0,0,this.width,this.height)},e.prototype.renderBorder=function(e){e.save(),e.fillStyle="white",e.strokeStyle="black",e.fillRect(0,0,this.width,this.height),e.strokeRect(0,0,this.width,this.height),e.restore()},e.prototype.renderPie=function(e,t,o,n){var i=n+2*Math.PI*o;if(e.beginPath(),e.arc(this.circle.cx,this.circle.cy,this.circle.radius,n,i,!1),e.moveTo(this.circle.cx,this.circle.cy),e.lineTo(this.circle.cx+this.circle.radius*Math.cos(n),this.circle.cy+this.circle.radius*Math.sin(n)),e.lineTo(this.circle.cx+this.circle.radius*Math.cos(i),this.circle.cy+this.circle.radius*Math.sin(i)),e.lineTo(this.circle.cx,this.circle.cy),e.closePath(),e.fillStyle=this.series[t][2],e.fill(),this.text.enable){var r=n+Math.PI*o,s=this.circle.cx+this.circle.radius*Math.cos(r),a=this.circle.cy+this.circle.radius*Math.sin(r);e.beginPath(),e.moveTo(s,a);var l=s<this.circle.cx?s-this.edge.width:s+this.edge.width;e.lineTo(l,a),e.closePath(),e.strokeStyle="black",e.stroke();var c=s<this.circle.cx?s-2*this.edge.width:s+this.edge.width;o=Math.round(100*o)/100;var u=this.text.content.length,g=u>t?this.text.content[t]:this.series[t][0]+": "+(100*o).toFixed(0)+"%";e.font="10pt Calibri",e.fillStyle="black",e.fillText(g,c,a)}},e.prototype.renderLegend=function(e,t){if(this.legend.enable){var o=this.series.length;e.font="10pt Calibri";for(var n=this.width/2>this.circle.radius+50?50:this.circle.cx-this.circle.radius,i=0;i<o;i++){var r=this.series[i][1]/t;r=Math.round(100*r)/100;var s=(100*r).toFixed(0)+"%";this.series[i].push(s),e.fillStyle=this.series[i][2],e.fillRect(n-40,20*i+10,10,10),e.fillStyle="black",e.fillText(s,n-25,20*i+20)}}},e.prototype.playAnimation=function(e){e.animation.hh<e.height?(e.animation.pctx.save(),e.animation.pctx.globalAlpha=.5,e.animation.pctx.clearRect(0,0,e.width,e.height),e.renderBorder(e.animation.pctx),e.animation.pctx.drawImage(e.animation.animCanvas,0,0,e.width,this.animation.hh,0,0,e.width,this.animation.hh),e.animation.hh=e.animation.hh+10,e.animation.pctx.restore(),setTimeout(function(){e.playAnimation(e)},50)):(e.animation.pctx.clearRect(0,0,e.width,e.height),e.renderBorder(e.animation.pctx),e.animation.pctx.drawImage(e.animation.animCanvas,0,0,e.width,e.height,0,0,e.width,e.height),e.animation.enable&&e.legend.enable&&e.chartCanvas.addEventListener("mousemove",function(t){var o=t.pageX,n=t.pageY,i=t.target,r=i.getBoundingClientRect(),s={x:o-r.left*(i.width/r.width),y:n-r.top*(i.height/r.height)};e.showTooltips(s,e.animation.enable?e.animation.pctx:ctx)},!1))},CanvasRenderingContext2D.prototype.roundRect=function(e,t,o,n,i,r,s){"undefined"==typeof s&&(s=!0),"undefined"==typeof i&&(i=5),this.beginPath(),this.moveTo(e+i,t),this.lineTo(e+o-i,t),this.quadraticCurveTo(e+o,t,e+o,t+i),this.lineTo(e+o,t+n-i),this.quadraticCurveTo(e+o,t+n,e+o-i,t+n),this.lineTo(e+i,t+n),this.quadraticCurveTo(e,t+n,e,t+n-i),this.lineTo(e,t+i),this.quadraticCurveTo(e,t,e+i,t),this.closePath(),s&&this.stroke(),r&&this.fill()},e}),define("thirdParty/text!widgets/ToolBoxPanel//Statistics.html",[],function(){return'<div class="statisticsPanel rightPanel" data-bind="visible:visible">\r\n    <div class="panelTitle">\r\n        <span>小班因子统计（绘制即可进行统计）</span>\r\n        <canvas id="statisticsCanvas" width="20" height="20" style="width: 20px; height: 20px; position: relative; top: 4px;"></canvas>\r\n        <input type="button" id="popup_close" class="closeButton" title="关闭" value="X"\r\n               onfocus="this.blur();" data-bind="click:close" />\r\n    </div>\r\n    <div class="statisticsPanel_range">\r\n        <div class="drawStatisticsRange" data-bind="click:function(){startDraw()}">绘制范围</div>\r\n        <div data-toggle="modal" data-target="#create" class="statisticsButton" data-bind="click:function(){isModalVisible(!isModalVisible())}">分项统计</div>\r\n        <div class="statisticsButton" data-bind="click:function(){viewStatis()}">统计结果</div>\r\n        <div class="clearStatisticsRange" data-bind="click:function(){clearDraw()}">清空</div>\r\n    </div>\r\n</div>\r\n<div style="position: absolute; top: 0; width: 100%; " class="statisticsPanel_statistics " data-bind="visible:isFireLossStatisticShow()">\r\n    <div class="modal-dialog modal-lg">\r\n        <div class="modal-content">\r\n            <div class="modal-header" style="padding: 5px;">\r\n                <button type="button" data-bind="click:function(){closeDraw()}" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: 3px;margin-right: 5px;">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n                <a data-bind="attr:{href:fireLossStatisticImportUrl()+\'/XiaoBan/XiaoBanStatisticImportToExcel?polygonWkt=\'+drawPlygon()}" style="float: right; margin-right: 20px; margin-top: -5px;">导出报表</a>\r\n                <h4 class="modal-title">统计报表</h4>\r\n            </div>\r\n            <div class="modal-body" style="padding: 5px;">\r\n                <div class="fireground_from_div">\r\n\r\n                    <table border="1" class="fireground_table" data-bind="if:fireLossStatistic()">\r\n                        <tr>\r\n                            <td data-bind="attr:{colspan:XiangCuns()}" style="text-align: left;">\r\n                                地点:<span data-bind="text:fireLossStatistic().Xians[0]"></span>\r\n                                <span style="float: right;">单位：公顷，立方米</span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr data-bind="foreach:fireLossStatistic().XiangCuns">\r\n                            <td colspan="2" rowspan="2" data-bind="visible:$index() == 0"></td>\r\n                            <td colspan="2" data-bind="visible:$index() == 0">总计</td>\r\n\r\n                            <td colspan="2">(<span data-bind="text:$data.Xiang"></span>)<span data-bind="text:$data.Cun"></span></td>\r\n                        </tr>\r\n                        <tr data-bind="foreach: XiangCunsArr()">\r\n                            <td data-bind="visible:$index() == 0">面积</td>\r\n                            <td data-bind="visible:$index() == 0">蓄积</td>\r\n                            <td >\r\n                                <span data-bind="if:$index()%2 == 0">面积</span>\r\n                                <span data-bind="if:$index()%2 != 0">蓄积</span>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="2">绘制面积</td>\r\n                            <td data-bind="text:fireLossStatistic().FireArea.TotalAreaAndAccumulate.Area.toFixed(2)"></td>\r\n                            <td data-bind="text:fireLossStatistic().FireArea.TotalAreaAndAccumulate.Accumulate.toFixed(2)"></td>\r\n                            <!--ko foreach:FireAreaArr-->\r\n                            <td >\r\n                                <span data-bind="if:$index()%2 == 0"><span data-bind="text:$parent.fireLossStatistic().FireArea.TotalAreaAndAccumulateOfXiangCuns[Math.floor($data/2)].Area.toFixed(2)">面积</span></span>\r\n                                <span data-bind="if:$index()%2 != 0"><span data-bind="text:$parent.fireLossStatistic().FireArea.TotalAreaAndAccumulateOfXiangCuns[Math.floor($data/2)].Accumulate.toFixed(2)">蓄积</span></span>\r\n                            </td>\r\n                            <!--/ko-->\r\n                        </tr>\r\n\r\n\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="statistics" data-bind="visible:isModalVisible()">\r\n    <div class="" id="create" tabindex="-1" role="dialog" style="position:absolute;top:0;background-color: rgba(255, 255, 255, 0);color: black;">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <button type="button" class="close" data-bind="click:modalClose" aria-hidden="true">\r\n                    &times;\r\n                </button>\r\n                <div class="statistics_filter">\r\n                    <div style="display: inline-block">\r\n                        <span>请选择统计的属性：</span>\r\n                        <select class="statistics_condition" data-bind="options:conditionOption(),value:condition,optionsValue:\'value\',optionsText:\'text\'">\r\n                        </select>\r\n                        <span>请选择统计的类别：</span>\r\n                        <select class="statistics_count" data-bind="options:countOption(),value:count,optionsValue:\'value\',optionsText:\'text\'">\r\n                        </select>\r\n                    </div>\r\n                    <div class="statistics_filter_button" data-bind="click:function(){statistics();}">统计</div>\r\n                </div>\r\n                <!--待验证-->\r\n                <div class="statistics_result" data-bind="visible:isStatisticsResultShow()">\r\n                    <h4>\r\n                        该范围内<span class="statistics_bold" data-bind="text:conditionChs()"></span>\r\n                        的总<span class="statistics_bold" data-bind="text:countChs()"></span>\r\n                        为<span class="statistics_bold" data-bind="text:totalCount()"></span>\r\n                        <span data-bind="text:countChs()==\'蓄积\'?\'立方米\':\'\'"></span><span data-bind="text:countChs()==\'面积\'?\'公顷\':\'\'"></span>\r\n                    </h4>\r\n                    <div>\r\n                        <div>\r\n                            <ul>\r\n                                <li data-bind="foreach:statisticsResult()">\r\n                                    <div data-bind="if:$parent.conditionChs()==\'林种\'||$parent.conditionChs()==\'优势树种\'||$parent.conditionChs()==\'地类\'||$parent.conditionChs()==\'龄组\'">\r\n                                        <span class="statistics_result_item_img"/>\r\n                                        <span class="statistics_bold" data-bind="text:$data.AttributeForCondition==\'\'?\'非林地\':$data.AttributeForCondition"></span>\r\n                                        的<span class="statistics_bold" data-bind="text:$parent.countChs()"></span>\r\n                                        <span class="statistics_bold" data-bind="$data.Total"></span>\r\n                                        <span data-bind="text:$parent.countChs()==\'蓄积\'?\'立方米\':\'\'"></span><span data-bind="text:$parent.countChs()==\'面积\'?\'公顷\':\'\'"></span>\r\n                                        ，占<span class="statistics_bold" data-bind="text:$data.Proportion"></span>%\r\n                                    </div>\r\n                                    <div data-bind="if:$parent.conditionChs()==\'事权等级\'||$parent.conditionChs()==\'村\'">\r\n                                        <div data-bind="if:$data.AttributeForCondition!==\'\'">\r\n                                            <span class="statistics_result_item_img" />\r\n                                            <span class="statistics_bold" data-bind="text:$data.AttributeForCondition"></span>\r\n                                            的<span class="statistics_bold" data-bind="text:$parent.countChs()"></span>\r\n                                            <span class="statistics_bold" data-bind="$data.Total"></span>\r\n                                            <span data-bind="text:$parent.countChs()==\'蓄积\'?\'立方米\':\'\'"></span><span data-bind="text:$parent.countChs()==\'面积\'?\'公顷\':\'\'"></span>\r\n                                            ，占<span class="statistics_bold" data-bind="text:$data.Proportion"></span>%\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <div style="width: 600px;height: 500px">\r\n                          <canvas id="pie_canvas"></canvas>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("widgets/ToolBoxPanel/Statistics",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../core/loadJsonp","../../core/PieChart","../../thirdParty/knockout","../../thirdParty/text!.//Statistics.html"],function(e,t,o,n,r,s,a,l){function c(e,t){this.canvas=e,t?(this.radius=t.radius||12,this.circleLineWidth=t.circleLineWidth||4,this.circleColor=t.circleColor||"lightgray",this.moveArcColor=t.moveArcColor||"gray"):(this.radius=12,this.circelLineWidth=4,this.circleColor="lightgray",this.moveArcColor="gray")}var u=function(t,i,r){if(!e(t))throw new o("container属性为必填项");t=n(t),this._container=t,this._options=i,this._contMap=r,this._projection=r._getProjection(),this._layerManger=this._contMap.layerManager,this._drawVectorSource="",this._statisticsLayer="",this._xbInRangeLayer="",this._draw="",this._format=new ol.format.WKT,this._xbInExtentInfoCard=[],this._loadingObjForStatisticsCanvas={}};return u.prototype.init=function(){var e=this;e._drawVectorSource=new ol.source.Vector,e._statisticsLayer=new ol.layer.Vector({source:e._drawVectorSource,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#3356ff",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#3356ff"})})})}),e._xbInRangeLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]})}),e._draw=new ol.interaction.Draw({source:this._drawVectorSource,type:"Polygon"}),e._layerManger.addLayer(e._statisticsLayer,!0),e._layerManger.addLayer(e._xbInRangeLayer,!0);var t;e._draw.on("drawstart",function(o){var n=o.feature,i=new ol.Sphere(6378137);n.getGeometry().on("change",function(o){var n=o.target;if(n instanceof ol.geom.Polygon){n=n.clone().transform(e._projection,"EPSG:4326");var r=n.getLinearRing(0).getCoordinates();t=Math.abs(i.geodesicArea(r))}})}),e._draw.on("drawend",function(o){t<5e7?(e._loadingObjForStatisticsCanvas.show(),e.ensureDraw(o.feature),e.reportStatistics(e._viewModel.drawPlygon())):(alert("统计范围过大"),setTimeout(function(){var t=e._drawVectorSource.getFeatures();e._drawVectorSource.removeFeature(t[t.length-1])},100))});var o={conditionOption:a.observable([{text:"村",value:"cun"},{text:"地类",value:"di_lei"},{text:"林种",value:"lin_zhong"},{text:"优势树种",value:"you_shi_sz"},{text:"龄组",value:"ling_zu"},{text:"事权等级",value:"shi_quan_dj"}]),countOption:a.observable([{text:"面积",value:"MIAN_JI"},{text:"蓄积",value:"XIAO_BAN_XJ"}]),fireLossStatisticImportUrl:a.observable(e._options.statistic.frsspResourceRootUrl),fireLossStatistic:a.observable(void 0),drawPlygon:a.observable(""),isStatisticsPanelShow:a.observable(!1),isStatisticsResultShow:a.observable(!1),isFireLossStatisticShow:a.observable(!1),isModalVisible:a.observable(!1),visible:a.observable(!1),condition:a.observable(""),count:a.observable(""),conditionChs:a.observable(""),countChs:a.observable(""),totalCount:a.observable(0),statisticsResult:a.observable([]),XiangCuns:a.observable(),Forestlands:a.observable(),TreeSpecies:a.observable(),ShiQuanDjs:a.observable(),BaoHuDjs:a.observable(),XiangCunsArr:a.observable([]),FireAreaArr:a.observable([]),ForestlandsArr:a.observable([]),NonForestryLandArr:a.observable([]),TreeSpeciesArr:a.observable([]),ShiQuanDjsArr:a.observable([]),BaoHuDjsArr:a.observable([]),ForestlandsArrChild:a.observable([]),ShiQuanDjsArrChild:a.observable([]),BaoHuDjsArrChild:a.observable([]),Array:a.computed(function(e){for(var t=new Array(e),o=0;o<e;o++)t[o]=o;return t},this),array:function(e){for(var t=new Array(e),o=0;o<e;o++)t[o]=o;return t},mathArr:function(e){var t=[];for(i in e){for(var o=new Array,n=0;n<2*e[parseInt(i)].StatisticResult.TotalAreaAndAccumulateOfXiangCuns.length;n++)o[n]=n;t.push(o)}return t},close:function(){o.visible(!1)},modalClose:function(){o.isModalVisible(!1)},viewStatis:function(){void 0!=o.fireLossStatistic()?o.isFireLossStatisticShow(!0):alert("请绘制统计范围！")},startDraw:function(){o.clearDraw(),e._contMap.scene.map2d.removeInteraction(e._draw),o.visible()&&e._contMap.scene.map2d.addInteraction(e._draw)},clearDraw:function(){e._drawVectorSource.clear(),e._xbInRangeLayer.getSource().clear(),o.drawPlygon(""),e._xbInExtentInfoCard=[],o.condition(""),o.count(""),o.totalCount(void 0),o.isStatisticsResultShow(!1),o.fireLossStatistic(void 0),o.statisticsResult(void 0),e._loadingObjForStatisticsCanvas.hide(),e._contMap.scene.map2d.removeInteraction(e._draw)},closeDraw:function(){o.isFireLossStatisticShow(!1)},statistics:function(){o.conditionChs(e.transformForCondition(o.condition())),o.countChs(e.transformForCount(o.count())),r({url:e._options.statistic.StatisticsXbDataByAttribute+"?polygonWkt="+o.drawPlygon()+"&attributeForCondition="+o.condition()+"&attributeForCount="+o.count()}).then(function(e){o.isStatisticsResultShow(!0),o.statisticsResult(e.Data),o.totalCount(0);for(var t=0;t<o.statisticsResult().length;t++)o.totalCount(o.totalCount()+o.statisticsResult()[t].Total);for(var n=[],i=0;i<e.Data.length;i++)n.push([e.Data[i].AttributeForCondition,e.Data[i].Proportion]);for(var r=0;r<n.length;r++){var a,l,c;a=255-r*Math.floor(255/n.length),l=0+r*Math.floor(255/n.length),c=0,str="RGBA("+a+","+l+","+c+",1)",n[r].push(str)}var u=document.getElementById("pie_canvas"),g={width:400,height:250,series:n,canvas:u,unit:"%",tooltips:{enable:!0},animation:{enable:!0},legend:{enable:!0},text:{enable:!0}},h=new s;h.initSettings(g),h.render()}).otherwise(function(e){o.isStatisticsResultShow(!1),console.log("统计失败!"+e)})}};this._viewModel=o;var u=document.createElement("div");u.innerHTML=l,this._element=u.children[0],this._elementResult=u.children[1],this._elementModal=u.children[2],e._container.appendChild(u),a.applyBindings(this._viewModel,u),e._loadingObjForStatisticsCanvas=new c(n("statisticsCanvas"),{radius:6,circleLineWidth:2})},u.prototype.ensureDraw=function(e){var t=this._format.writeFeature(e,{dataProjection:"EPSG:4326",featureProjection:this._projection});""===this._viewModel.drawPlygon()&&this._viewModel.drawPlygon(t),this._contMap.scene.map2d.removeInteraction(this._draw)},u.prototype.reportStatistics=function(e){var t=this;t._xbInRangeLayer.getSource().clear(),r({url:t._options.statistic.FireLossStatisticByPolygon+"?polygonWkt="+e}).then(function(e){console.dir(e),t._viewModel.fireLossStatistic(e.Data),t._viewModel.XiangCuns(2*e.Data.XiangCuns.length+4),t._viewModel.Forestlands(e.Data.Forestlands.length),t._viewModel.TreeSpecies(e.Data.TreeSpecies.length),t._viewModel.ShiQuanDjs(e.Data.ShiQuanDjs.length),t._viewModel.BaoHuDjs(e.Data.BaoHuDjs.length),t._viewModel.XiangCunsArr(t._viewModel.array(2*e.Data.XiangCuns.length)),t._viewModel.FireAreaArr(t._viewModel.array(2*e.Data.FireArea.TotalAreaAndAccumulateOfXiangCuns.length)),t._viewModel.ForestlandsArr(t._viewModel.array(2*e.Data.Forestlands[0].StatisticResult.TotalAreaAndAccumulateOfXiangCuns.length)),t._viewModel.NonForestryLandArr(t._viewModel.array(2*e.Data.NonForestryLand.TotalAreaAndAccumulateOfXiangCuns.length)),t._viewModel.TreeSpeciesArr(t._viewModel.array(2*e.Data.TreeSpecies[0].StatisticResult.TotalAreaAndAccumulateOfXiangCuns.length)),t._viewModel.ShiQuanDjsArr(t._viewModel.array(2*e.Data.ShiQuanDjs[0].StatisticResult.TotalAreaAndAccumulateOfXiangCuns.length)),t._viewModel.BaoHuDjsArr(t._viewModel.array(2*e.Data.BaoHuDjs[0].StatisticResult.TotalAreaAndAccumulateOfXiangCuns.length)),t._viewModel.ForestlandsArrChild(t._viewModel.mathArr(e.Data.Forestlands)),
t._viewModel.ShiQuanDjsArrChild(t._viewModel.mathArr(e.Data.ShiQuanDjs)),t._viewModel.BaoHuDjsArrChild(t._viewModel.mathArr(e.Data.BaoHuDjs)),void 0!=t._viewModel.fireLossStatistic()&&t._viewModel.isFireLossStatisticShow(!0),t._loadingObjForStatisticsCanvas.hide()}).otherwise(function(e){console.log("获取范围内的小斑统计失败！"+e)})},u.prototype.transformForCount=function(e){switch(e){case"MIAN_JI":return"面积";case"XIAO_BAN_XJ":return"蓄积"}},u.prototype.transformForCondition=function(e){switch(e){case"cun":return"村";case"di_lei":return"地类";case"lin_zhong":return"林种";case"you_shi_sz":return"优势树种";case"shi_quan_dj":return"事权等级";case"ling_zu":return"龄组"}},u.prototype.show=function(e){this._viewModel.visible(e)},c.prototype={show:function(){var e=this.canvas;if(e.getContext&&!e.__loading){e.__loading=this;var t=e.getContext("2d"),o=this.radius,n=this,i=1.5*Math.PI,r=Math.PI/6;e.loadingInterval=setInterval(function(){t.clearRect(0,0,e.width,e.height);var s=n.circleLineWidth,a={x:e.width/2,y:e.height/2};t.beginPath(),t.lineWidth=s,t.strokeStyle=n.circleColor,t.arc(a.x,a.y,o,0,2*Math.PI),t.closePath(),t.stroke(),t.beginPath(),t.strokeStyle=n.moveArcColor,t.arc(a.x,a.y,o,i,i+.45*Math.PI),t.stroke(),i+=r},50)}},hide:function(){var e=this.canvas;e.__loading=!1,e.loadingInterval&&window.clearInterval(e.loadingInterval);var t=e.getContext("2d");t&&t.clearRect(0,0,e.width,e.height)}},u}),define("thirdParty/text!widgets/ToolBoxPanel//ToolBoxPanel.html",[],function(){return'<div class="ToolBoxPanel-widget">\r\n    <ul class="list-inline pull-left">\r\n        <li class="location">\r\n                <span class="dropDown"\r\n                      style="display: inline-flex;"\r\n                      data-bind="css:{\'open\':isDistrictZoomToWidgetShow},click:function(){isShow(\'District\');}">\r\n                    <span style="display: inline-block; min-width: 42px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;"\r\n                          data-bind="text:currentLocationName">中国</span>\r\n                    <em></em>\r\n                </span>\r\n        </li>\r\n        <li class="themeMap" data-bind="click:function(){isShow(\'ThemeMap\');}">\r\n            <div class="split"></div>\r\n            <span class="dropDown" data-bind=" css:{\'open\':isThemeMapPanelShow}">\r\n                    专题图\r\n                    <em></em>\r\n                </span>\r\n        </li>\r\n        <li class="layerManager" data-bind="click:function(){isShow(\'LayerManage\');}">\r\n            <div class="split"></div>\r\n            <span class="dropDown" data-bind="css:{\'open\':isLayerManagePanelShow}">\r\n                    图层管理\r\n                    <em></em>\r\n                </span>\r\n        </li>\r\n        <!--TODO tools上的mouseover mouseout事件-->\r\n        <li class="tools">\r\n            <div class="split"></div>\r\n            <span class="icon"></span>\r\n            <span class="dropDown">\r\n                    工具\r\n                    <em></em>\r\n            </span>\r\n            <div class="toolItems" id="toolItems">\r\n                <ul>\r\n                    <li data-bind="click:function(){isShow(\'Statistics\')}" id="statistics" style="margin: 0px">\r\n                        <span class="title">小班因子统计</span>\r\n                    </li>\r\n                    <li data-bind="click:function(){isShow(\'Measure\')}" id="measure">\r\n                        <span class="icon tools_measure"></span><span class="title">测量</span>\r\n                    </li>\r\n                    <li data-bind="click:function(){isShow(\'Draw\')}" id="draw">\r\n                        <span class="icon tools_draw"></span><span class="title">标绘</span>\r\n                    </li>\r\n                    <li data-bind="click:function(){isShow(\'firesDraw\')}" id="firesDraw">\r\n                        <span class="icon tools_draw"></span><span class="title">防火</span>\r\n                    </li>\r\n                    <li data-bind="click:function(){isShow(\'militaryDraw\')}" id="militaryDraw">\r\n                        <span class="icon tools_draw"></span><span class="title">军标</span>\r\n                    </li>\r\n                    <!--@*<li data-bind="click:function()(tools.exportMap(!tools.exportMap()))"><span class="icon exportMap"></span><span class="title">导出</span></li>*@-->\r\n                </ul>\r\n            </div>\r\n        </li>\r\n        <script type="text/html" id="wrappingTemplate">\r\n        </script>\r\n        <!-- ko template: { name: \'wrappingTemplate\', afterRender: afterRenderCallback } -->\r\n        <!-- /ko-->\r\n    </ul>\r\n    <div class="pull-left fullScreen"\r\n         data-bind="click:function(){isFullScreen()?exitFullScreen():fullScreen();}">\r\n        <i class="" data-bind="css:{full:!isFullScreen(),remove:isFullScreen()}"></i>\r\n    </div>\r\n    <div class="pull-left">\r\n        <div class="userInfoImg"></div>\r\n    </div>\r\n</div>\r\n<div></div>\r\n<div></div>\r\n<div></div>\r\n<div></div>\r\n<div></div>\r\n<div></div>\r\n<div></div>\r\n'}),define("widgets/ToolBoxPanel/ToolBoxPanel",["../../core/defined","../../core/defineProperties","../../core/DeveloperError","../../core/getElement","../../thirdParty/knockout","./ToolBoxPanelViewModel","./DistrictZoomTo","./ThemeMapChoose","./LayerManage","./Measure","./Draw/Common/Draw","./Draw/FiresDraw/FiresDraw","./Draw/MilitaryDraw/MilitaryDraw","./Statistics","../../thirdParty/text!.//ToolBoxPanel.html"],function(e,t,o,n,i,r,s,a,l,c,u,g,h,d,p){var f=function(t,i){if(!e(t))throw new o("container属性为必填值");t=n(t),this._evnts=[],this._projection="",this._container=t,this._options=i,this._wrapper=document.createElement("div"),this._wrapper.innerHTML=p,this._options.hasOwnProperty("position")&&this._options.position!==!1||(this._wrapper.querySelector(".location").style.display="none"),this._options.hasOwnProperty("themeMaps")&&this._options.themeMap!==!1||(this._wrapper.querySelector(".themeMap").style.display="none"),this._options.hasOwnProperty("layerManage")&&this._options.layerManage!==!1||(this._wrapper.querySelector(".layerManager").style.display="none"),this._options.hasOwnProperty("tool")&&this._options.tool!==!1||(this._wrapper.querySelector(".tools").style.display="none"),this._options.tool.hasOwnProperty("statistic")&&this._options.tool.statistic!==!1||(this._wrapper.querySelector("#statistics").style.display="none"),this._options.tool.hasOwnProperty("measure")&&this._options.tool.measure!==!1||(this._wrapper.querySelector("#measure").style.display="none"),this._options.tool.hasOwnProperty("draw")&&this._options.tool.draw!==!1||(this._wrapper.querySelector("#draw").style.display="none"),this._options.tool.hasOwnProperty("firesDraw")&&this._options.tool.firesDraw!==!1||(this._wrapper.querySelector("#firesDraw").style.display="none"),this._options.tool.hasOwnProperty("militaryDraw")&&this._options.tool.militaryDraw!==!1||(this._wrapper.querySelector("#militaryDraw").style.display="none"),"none"===this._wrapper.querySelector(".location").style.display&&(this._wrapper.querySelector(".split").style.display="none")};return t(f.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),f.prototype.init=function(){this._projection=this._contMap._getProjection(),this._element=this._wrapper.children[0],this._container.appendChild(this._element);var e={Key:"370000",Value:"山东省"},t={GetDistrictList:"http://192.168.2.166:8086/RegionData/GetDistrictList",GetRegionWithParentRegions:"http://192.168.2.166:8086/RegionData/GetRegionWithParentRegions",GetRegionListByName:"http://192.168.2.166:8086/RegionData/GetRegionListByName",GetRegionByCode:"http://192.168.2.166:8086/RegionData/GetRegionByCode"};this._viewModel=new r(this._contMap,{showCurrentLocation:this._options.position!==!1,ToolBoxSearchUrl:this._options.position!==!1?this._options.position.ToolBoxSearchUrl:void 0,getDistrictListUrl:this._options.position!==!1?this._options.position.getDistrictListUrl:t}),this._viewModel.choosedRegion(this._options.position!==!1?this._options.position.rootDistrict:e),this._viewModel.init();var o=this;this._viewModel.afterRenderCallback=function(){for(var e=0;e<o._evnts.length;e++)"afterRender"===o._evnts[e].eventType&&(o._evnts[e].context?o._evnts[e].callback.call(o._evnts[e].context):o._evnts[e].callback())},i.applyBindings(this._viewModel,this._element),this._districtZoomToElement=this._wrapper.children[1],this._ThemeMapPanelElement=this._wrapper.children[2],this._LayerManagePanel=this._wrapper.children[3],this._measure=this._wrapper.children[4],this._draw=this._wrapper.children[5],this._firesDraw=this._wrapper.children[6],this._statistic=this._wrapper.children[7],this._districtZoomToWidgetBinding(),this._ThemeMapChooseWidgetBinding(),this._LayerManageWidgetBinding(),this._MeasureWidgetBinding(),this._DrawWidgetBinding(),this._FiresDrawWidgetBinding(),this._StatisticWidgetBinding(),this._MilitaryDrawWidgetBinding()},f.prototype._districtZoomToWidgetBinding=function(){if(this._options.hasOwnProperty("position")&&this._options.position!==!1){this._districtZoomToWidget=new s(this._container,{getDistrictListUrl:this._options.position.getDistrictListUrl},this._contMap),this._districtZoomToWidget.init(this._options.position.rootDistrict);var e=this;this._viewModel.isDistrictZoomToWidgetShow.subscribe(function(t){e._districtZoomToWidget.show(t)}),this._districtZoomToWidget._viewModel.visible.subscribe(function(t){e._viewModel.isDistrictZoomToWidgetShow(t)}),this._districtZoomToWidget._viewModel.currentRegion.subscribe(function(t){e._viewModel.choosedRegion(t[t.length-1])}),this._districtZoomToWidget._viewModel.currentLocationName.subscribe(function(t){e._viewModel.currentLocationName(t)}),this._viewModel.currentLocationName.subscribe(function(t){e._districtZoomToWidget._viewModel.currentLocationName(t)}),this._viewModel.currentLocationCode.subscribe(function(t){e._districtZoomToWidget._viewModel.currentLocationCode(t)})}},f.prototype._ThemeMapChooseWidgetBinding=function(){if(this._options.hasOwnProperty("themeMaps")&&this._options.themeMaps!==!1){this._ThemeMapChooseWidget=new a(this._container,{themeMaps:this._options.themeMaps},this._contMap),this._ThemeMapChooseWidget.init();var e=this;this._viewModel.isThemeMapPanelShow.subscribe(function(t){e._ThemeMapChooseWidget.show(t)})}},f.prototype._LayerManageWidgetBinding=function(){if(this._options.hasOwnProperty("layerManage")&&this._options.layerManage!==!1){this._LayerManageWidget=new l(this._container,{layerManage:this._options.layerManage},this._contMap),this._LayerManageWidget.init();var e=this;this._viewModel.isLayerManagePanelShow.subscribe(function(t){e._LayerManageWidget.show(t)})}},f.prototype._MeasureWidgetBinding=function(){if(this._options.hasOwnProperty("tool")&&void 0!=this._options.tool.measure&&this._options.tool.measure!==!1){this._MeasureWidget=new c(this._container,this._contMap),this._MeasureWidget.init();var e=this;this._viewModel.isMeasureShow.subscribe(function(t){e._MeasureWidget.show(t)})}},f.prototype._DrawWidgetBinding=function(){if(this._options.hasOwnProperty("tool")&&void 0!=this._options.tool.draw&&this._options.tool.draw!==!1){this._DrawWidget=new u(this._container,this._contMap),this._DrawWidget.init();var e=this;this._viewModel.isDrawShow.subscribe(function(t){e._DrawWidget.show(t)})}},f.prototype._FiresDrawWidgetBinding=function(){if(this._options.hasOwnProperty("tool")&&void 0!=this._options.tool.firesDraw&&this._options.tool.firesDraw!==!1){this._FiresDrawWidget=new g(this._container,this._contMap),this._FiresDrawWidget.init();var e=this;this._viewModel.isFiresDrawShow.subscribe(function(t){e._FiresDrawWidget.show(t)})}},f.prototype._MilitaryDrawWidgetBinding=function(){if(this._options.hasOwnProperty("tool")&&void 0!=this._options.tool.militaryDraw&&this._options.tool.militaryDraw!==!1){this._MilitaryDrawWidget=new h(this._container,this._contMap),this._MilitaryDrawWidget.init();var e=this;this._viewModel.isMilitaryDrawShow.subscribe(function(t){e._MilitaryDrawWidget.show(t)})}},f.prototype._StatisticWidgetBinding=function(){if(this._options.hasOwnProperty("tool")&&void 0!=this._options.tool.statistic&&this._options.tool.statistic!==!1){this._StatisticWidget=new d(this._container,{statistic:this._options.tool.statistic},this._contMap),this._StatisticWidget.init();var e=this;this._viewModel.isStatisticsPanelShow.subscribe(function(t){e._StatisticWidget.show(t)})}},f.prototype.setContMap=function(e){this._contMap=e},f.prototype.setCustomBtn=function(e,t){var o=document.createElement("li"),n=document.createElement("div"),i=document.createElement("span");return o.setAttribute("class","tools"),n.setAttribute("class","split"),i.setAttribute("class","dropDown"),i.setAttribute("style","text-align:center;display:block"),i.innerHTML=String(e),o.appendChild(n),o.appendChild(i),this._element.children[0].insertBefore(o,this._element.children[0].children[t]),o},f.prototype.setCustomDropBtn=function(e,t){var o=document.createElement("li"),n=document.createElement("span");n.setAttribute("class","title"),n.innerHTML=String(e),n.setAttribute("style","text-align:center;display:block"),o.appendChild(n);var i=this._element.querySelector(".toolItems");return i.children[0].insertBefore(o,i.children[0].children[t]),o},f.prototype.destroy=function(){},f.prototype.on=function(e,t,o){this._evnts.push({eventType:e,callback:t,context:o})},f.prototype.un=function(e,t){for(var o=-1,n=0;n<this._evnts.length;n++)if(this._evnts[n].eventType===e&&this._evnts[n].callback===t){o=n;break}o!==-1&&this._evnts.splice(o,1)},f}),define("LayerManager",["./core/defineProperties","./core/DeveloperError","./core/baseUtil","./core/dataSourceFactory","./core/EventObject"],function(e,t,o,n,i){var r=function(e){this._contMap=e,this._evnts=[]};return r.prototype=new i,e(r.prototype,{tempLayers:{get:function(){return this._contMap.scene.tmpLayer.getLayers()}},userLayers:{get:function(){return this._contMap.scene.userLayer.getLayers()}},base2DLayers:{get:function(){return this._contMap.scene.base2DLayer.getLayers()}},base3DLayers:{get:function(){return this._contMap.scene.base3DLayer.getLayers()}}}),r.prototype.addLayer=function(e,t){if(e instanceof ol.layer.Base);else{var o=n.getSource(e),i=new ol.layer.Tile({source:o});i.name=e.name,e=i}return e.isTmpLayer=t,t?(this._contMap.scene.tmpLayer.getLayers().push(e),this._contMap.scene.tmpLayer.changed()):(this._contMap.scene.userLayer.getLayers().push(e),this._contMap.scene.userLayer.changed()),this._raiseEvent("addLayer",{layer:e,isTmpLayer:t}),e},r.prototype.removeLayer=function(e){e.isTmpLayer?this._contMap.scene.tmpLayer.getLayers().remove(e):this._contMap.scene.userLayer.getLayers().remove(e),this._raiseEvent("removeLayer",{layer:e,isTmpLayer:e.isTmpLayer})},r.prototype.setOpacity=function(e,t){e.setOpacity(t)},r.prototype.setVisible=function(e,t){e.setVisible(t)},r.prototype.move=function(e,t){var o=this._contMap.scene.userLayer.getLayers().removeAt(e);this._contMap.scene.userLayer.getLayers().insertAt(t,o)},r.prototype._raiseEvent=function(e,t){for(var o=0;o<this._evnts.length;o++)this._evnts[o].eventType===e&&(this._evnts[o].context?this._evnts[o].callback.call(this._evnts[o].context,t):this._evnts[o].callback(t))},r}),define("layer/BaseLabelLayer",["../core/defineProperties","../core/loadJsonp","../core/EventObject"],function(e,t,o){var n=function(e,t){this._contMap=e,this._config=t,this._config.display.icon.active||(this._config.display.icon.active=this._config.display.icon.normal),this.Name=t.display.name,this.selectedFeature=null;var o=this;this._contMap.scene.on("pointermove",function(e){var t=e.feature;t?(o._contMap.scene.map2d.getViewport().style.cursor="pointer",o.highLightFeature(t)):(o._contMap.scene.map2d.getViewport().style.cursor="",o.highLightFeature(null))}),this._contMap.scene.on("pointerclick",function(e){var t=e.feature;if(t&&e.olLayer==o)for(var n=0;n<o._evnts.length;n++)"layerclick"===o._evnts[n].eventType&&o._evnts[n].callback.call(o,t)}),ol.layer.Vector.call(this,{minResolution:this._config.display.minResolution,maxResolution:this._config.display.maxResolution,source:this._getVectorSource(),style:function(e,t){var n=new ol.style.Style({image:o._config.display.icon?new ol.style.Icon({anchor:o._config.display.icon.normal.anchor,src:o._config.display.icon.normal.url,offset:o._config.display.icon.normal.offset,size:o._config.display.icon.normal.size,opacity:o._config.display.icon.normal.opacity,scale:o._config.display.icon.normal.scale}):undefinded,text:o._config.display.label?new ol.style.Text({textAlign:"left",font:o._config.display.label.font?o._config.display.label.font:"10px sans-serif",text:e.get(o._config.display.label.textFiled),fill:new ol.style.Fill({color:o._config.display.label.fillColor}),stroke:new ol.style.Stroke(o._config.display.label.stroke),offsetY:o._config.display.label.offsetY,offsetX:o._config.display.label.offsetX}):void 0}),i=new ol.style.Style({image:o._config.display.icon?new ol.style.Icon({anchor:o._config.display.icon.active.anchor,src:o._config.display.icon.active.url,offset:o._config.display.icon.active.offset,size:o._config.display.icon.active.size,scale:o._config.display.icon.active.scale,opacity:o._config.display.icon.active.opacity}):undefinded,text:o._config.display.label?new ol.style.Text({textAlign:"left",font:o._config.display.label.font?o._config.display.label.font:"10px sans-serif",text:e.get(o._config.display.label.textFiled),fill:new ol.style.Fill({color:o._config.display.label.fillColor}),stroke:new ol.style.Stroke(o._config.display.label.stroke),offsetY:o._config.display.label.offsetY,offsetX:o._config.display.label.offsetX}):void 0});return e.unselectedStyle=n,e.selectedStyle=i,[n]}}),this.setProperties({altitudeMode:"clampToGround"},!0)};ol.inherits(n,ol.layer.Vector),e(n.prototype,{options:{get:function(){return this._config}}});var i=new o;return n.prototype.on=i.on,n.prototype.un=i.un,n.prototype._evnts=i._evnts,n.prototype.highLightFeature=function(e){var t;t=e instanceof ol.Feature?e:this.getSource().getFeatures()[e],null!=this.selectedFeature&&(this.selectedFeature.setStyle(null),this.selectedFeature=null),null!=t&&(t.setStyle(t.selectedStyle),this.selectedFeature=t)},n.prototype._getVectorSource,n}),define("layer/EsriLabelLayer",["../core/defineProperties","../core/loadJsonp","../core/baseUtil","./BaseLabelLayer"],function(e,t,o,n){var i=function(e,t){this._config=t;var i=o.assign({},t);n.call(this,e,i)};return ol.inherits(i,n),i.prototype._getVectorSource=function(){var e=this,o=new ol.format.EsriJSON;return new ol.source.Vector({loader:function(n,i,r){var s=e._config.display.url+"/query/?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+n[0]+',"ymin":'+n[1]+',"xmax":'+n[2]+',"ymax":'+n[3]+',"spatialReference":{"wkid":3857}}')+"&geometryType=esriGeometryEnvelope&inSR=3857&outFields=*&outSR=3857";t({url:s}).then(function(t){if(t.error)console.log(t.error.message+"\n"+t.error.details.join("\n"));else{var n=o.readFeatures(t,{featureProjection:r});n.length>0&&e.getSource().addFeatures(n)}}).otherwise(function(e){console.error("获取标注图层数据失败！"+e.toString())})},strategy:ol.loadingstrategy.tile(ol.tilegrid.createXYZ({tileSize:512}))})},i}),define("ContMap",["./core/defineProperties","./core/baseUtil","./Scene","./widgets/ViewModeSwitcher/ViewModeSwitcher","./widgets/MouseLocation/MouseLocation","./widgets/SubcompartmentFilter/SubcompartmentFilter","./widgets/ToolBoxPanel/ToolBoxPanel","./core/classes","./core/getElement","./core/resources","./LayerManager","./ViewControl","./layer/EsriLabelLayer"],function(e,t,o,n,i,r,s,a,l,c,u,g,h){"use strict";function d(e){var o,n=function(e){if("EPSG:3857"===e){var t=[{name:"天地图矢量地图",url:"\thttp://t0.tianditu.com/vec_w/wmts",layer:"vec",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"},{name:"天地图全球地形中文注记服务",url:"\thttp://t0.tianditu.com/cta_w/wmts",layer:"cta",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"}];return t}if("EPSG:4326"===e){var t=[{name:"天地图矢量地图",url:"\thttp://t0.tianditu.com/vec_c/wmts",layer:"vec",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"},{name:"天地图全球地形中文注记服务",url:"\thttp://t0.tianditu.com/cta_c/wmts",layer:"cta",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"}];return t}},i=function(e){if("EPSG:3857"===e){var t=[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_w/wmts",layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"},{name:"天地图卫星影像注记图",url:"http://t0.tianditu.com/cia_w/wmts",layer:"cia",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"}];return t}if("EPSG:4326"===e){var t=[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_c/wmts",layer:"img",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"},{name:"天地图卫星影像注记图",url:"http://t0.tianditu.com/cia_c/wmts",layer:"cia",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"}];return t}},r=function(e){if("EPSG:3857"===e){var t=[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_w/wmts",layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"},{name:"天地图卫星影像注记图",url:"http://t0.tianditu.com/cia_w/wmts",layer:"cia",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"}];return t}if("EPSG:4326"===e){var t=[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_c/wmts",layer:"img",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"},{name:"天地图卫星影像注记图",url:"http://t0.tianditu.com/cia_c/wmts",layer:"cia",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"}];return t}},s=function(e){if("EPSG:3857"===e){var t=[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_w/wmts",thumbImg:c.tianditu,layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:3857"},{name:"openStreetMap",url:"",thumbImg:c.osm,layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"OSM"},{name:"geoq地图",url:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer",thumbImg:c.geoq,layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"TileArcGISRest"}];return t}if("EPSG:4326"===e){var t=[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_c/wmts",thumbImg:c.tianditu,layer:"img",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS",project:"EPSG:4326"},{name:"openStreetMap",url:"",thumbImg:c.osm,layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"OSM"},{name:"geoq地图",url:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer",thumbImg:c.geoq,layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"TileArcGISRest"}];return t}};o=e.initView&&e.initView.project?e.initView.project:"EPSG:3857";var h=n(o),d=i(o),p=r(o),f=s(o);this._options=t.assign({baseMapUrls:{map2D:{normal:h,satellite:d},map3D:p},initView:{center:[107,34],zoom:4,project:"EPSG:3857"},widgets:{viewModeSwitcher:!0,mouseLocation:!0,scaleLine:!0,toolBoxPanel:{position:!1,themeMaps:f,layerManage:{},tool:{measure:!0,draw:!0,firesDraw:!0,militaryDraw:!0}}},isContTmsTerrain:!1},e),this._layerManager=new u(this),this._viewControl=new g(this),this._widgets={},a.addClass(l(e.mapContainer),"contMap"),this._functionExtent()}return e(d.prototype,{scene:{get:function(){return this._scene}},layerManager:{get:function(){return this._layerManager}},viewControl:{get:function(){return this._viewControl}},widgets:{get:function(){return this._widgets}},currentOperation:{set:function(e){this._currentOperation&&(this._currentOperation.destroy(),this._currentOperation=null),this._currentOperation=e,e.init(this)},get:function(){return this._currentOperation}}}),d.prototype.init=function(){this._scene=new o({initView:this._options.initView,baseMap2DUrls:this._options.baseMapUrls.map2D.normal,baseMap3DUrls:this._options.baseMapUrls.map3D,mapContainer:this._options.mapContainer,terrainProviderUrl:this._options.terrainProviderUrl,isContTmsTerrain:this._options.isContTmsTerrain}),this._scene.init(),this._widgetsElement=document.createElement("div");var e=l(this._scene._mapContainer).appendChild(this._widgetsElement);if(this._options.widgets&&this._options.widgets.viewModeSwitcher){var t=new n(e,{satellite:this._options.baseMapUrls.map2D.satellite,normal:this._options.baseMapUrls.map2D.normal});t.setContMap(this),this._widgets.viewModeSwitcher=t}if(this._options.widgets&&this._options.widgets.mouseLocation){var a=new i(e,{});a.setContMap(this),a.start(),this._widgets.mouseLocation=a}if(this._options.widgets&&this._options.widgets.scaleLine){var c=new ol.control.ScaleLine;c.updateElement_=function(){var e=this.viewState_;if(this.minWidth_=64,!e)return void(this.renderedVisible_&&(this.element_.style.display=!1,this.renderedVisible_=!1));var t=e.center,o=e.projection,n=o.getMetersPerUnit(),i=o.getPointResolution(e.resolution,t)*n,r=this.minWidth_*i,s="",a=this.getUnits();if("degrees"==a){var l=ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES];i/=l,r<l/60?(s="″",i*=3600):r<l?(s="′",i*=60):s="°"}else"imperial"==a?r<.9144?(s="in",i/=.0254):r<1609.344?(s="ft",i/=.3048):(s="mi",i/=1609.344):"nautical"==a?(i/=1852,s="nm"):"metric"==a?r<1?(s="毫米",i*=1e3):r<1e3?s="米":(s="公里",i/=1e3):"us"==a&&(r<.9144?(s="in",i*=39.37):r<1609.344?(s="ft",i/=.30480061):(s="mi",i/=1609.3472));for(var c,u,g=3*Math.floor(Math.log(this.minWidth_*i)/Math.log(10));;){var h=[1,2,5];if(c=h[(g%3+3)%3]*Math.pow(10,Math.floor(g/3)),u=Math.round(c/i),isNaN(u))return this.element.style.display=!1,void(this.renderedVisible_=!1);if(u>=this.minWidth_)break;++g}var d=c+" "+s;this.innerElement_=this.element.children[0],this.renderedHTML_!=d&&(this.innerElement_.innerHTML=d,this.renderedHTML_=d),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display=!0,this.renderedVisible_=!0)},c.render=function(e){var t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()},this._scene.map2d.addControl(c)}var u;if(this._options.widgets&&this._options.widgets.subcompartmentFilter){var g=new r(e,this._options.widgets.subcompartmentFilter);g.setContMap(this),g.init(),u=g._searchResultItems,this._widgets.subcompartmentFilter=g}if(this._options.widgets&&this._options.widgets.toolBoxPanel){var d=new s(e,this._options.widgets.toolBoxPanel);d.setContMap(this),d.init(),this._widgets.toolBoxPanel=d}if(this._options.poiLayers)for(var p=0;p<this._options.poiLayers.length;p++){var f=this._options.poiLayers[p],m=new h(this,f);m.on("layerclick",function(e){if(this.options.action){if(!this.options.action.customWidget&&e){var t=e.get(this.options.action.idField),o=this.options.action.detailUrl+t,n=e.get(this.options.display.label.textFiled);u._viewModel.displayModel("自定义"),u._viewModel.showDetail({Name:n,Url:o})}if(this.options.action.events&&this.options.action.events.click){var i=this.options.action.events.click;i.call(m,e)}}}),this._scene.tmpLayer.getLayers().push(m),this._scene.tmpLayer.changed()}},d.prototype._functionExtent=function(){var e=ol.Feature.prototype.setStyle;ol.Feature.prototype.setStyle=function(t){var o=this.get("versionProp");o||(o={},this.set("versionProp",o,!0)),o.oldValue=this.getStyle(),o.changeType="setStyle",e.call(this,t)}},d.prototype._getProjection=function(){var e=this._scene._map2d.getView().getProjection().getCode();return e},d.prototype.fullScreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},d.prototype.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msEitFullscreen&&document.msEitFullscreen()},d}),define("layer/FiresPreventionPlot/resouces",[],function(){var e={styles:{6:{"简单箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})},"直角箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})},"自定义燕尾箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})},"合围箭头":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3}),fill:new ol.style.Fill({color:[255,0,0,.5]})})}},1:{"火点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_firepoint_highlight.png":"symbol_firepoint2.png"),scale:.5})})},"烟点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_smokepoint_highlight.png":"symbol_smokepoint2.png"),scale:.5,offset:[0,0]})})},"已灭火点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_fireoutpoint_highlight.png":"symbol_fireoutpoint2.png"),scale:.5,offset:[0,0]})})},"指挥中心":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_commandoffice_highlight.png":"symbol_commandoffice2.png"),scale:.5,offset:[0,0]})})},"分指中心":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_subcommandoffic_highlight.png":"symbol_subcommandoffice2.png"),scale:.5,offset:[0,0]})})},"打火队伍":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_firehitteam_highlight.png":"symbol_firehitteam2.png"),scale:.5,offset:[0,0]})})},"武警标志":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_armedpolice_highlight.png":"symbol_armedpolice2.png"),scale:.5,offset:[0,0]})})},"森警标志":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_forestpolice_highlight.png":"symbol_forestpolice2.png"),scale:.5,offset:[0,0]})})},"森林警察":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_forestpoliceman_highlight.png":"symbol_forestpoliceman2.png"),scale:.5,offset:[0,0]})})},"飞机":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_plane_highlight.png":"symbol_plane2.png"),scale:.5,offset:[0,0]})})},"指挥车":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_commandcar_highlight.png":"symbol_commandcar2.png"),scale:.5,offset:[0,0]})})},"停机坪":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_helicopterstoppoint_highlight.png":"symbol_helicopterstoppoint2.png"),scale:.5,offset:[0,0]})})},"取水点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_getwaterpoint_highlight.png":"symbol_getwaterpoint2.png"),scale:.5,offset:[0,0]})})},"洒水点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_throwwaterpoint_highlight.png":"symbol_throwwaterpoint.png"),scale:.5,offset:[0,0]})})},"强火线":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_strong_highlight.png":"symbol_strong2.png"),scale:.5,offset:[0,0]})})},"中火线":function(e,t){
return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_middle_highlight.png":"symbol_middle2.png"),scale:.5,offset:[0,0]})})},"弱火线":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_weak_highlight.png":"symbol_weak2.png"),scale:.5,offset:[0,0]})})},"军队":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_army_highlight.png":"symbol_army2.png"),scale:.5,offset:[0,0]})})},"雷击点":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_thunderpoint_highlight.png":"symbol_thunderpoint.png"),scale:.5,offset:[0,0]})})},"瞭望塔":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_tower_highlight.png":"symbol_tower2.png"),scale:.5,offset:[0,0]})})},"风向标":function(e,t){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e+"/img/marker/"+(t?"symbol_winddirection_highlight.png":"symbol_winddirection2.png"),scale:.5,offset:[0,0]})})},"自定义":{}},2:{"火线":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"red",width:3})})},"已灭火线":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"black",width:3})})},"受控火线":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"blue",width:3})})},"隔离带":function(e,t){return new ol.style.Style({stroke:new ol.style.Stroke({color:t?[255,255,0,1]:"green",width:3})})},"自定义":{}},4:{"火头":function(e,t){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"火头",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})},"火尾":function(e,t){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"火尾",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})},"扑火队伍":function(e,t){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"扑火队伍",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})},"自定义文本":function(e,t,o){return new ol.style.Style({text:new ol.style.Text({font:"32px 微软雅黑",textAlign:"center",text:"自定义文本",offset:[0,0],fill:new ol.style.Fill({color:t?[255,255,0,1]:"red"})})})}}}};return e}),define("layer/FiresPreventionPlot/FiresPreventionPlotLayer",["../../core/defineProperties","../../core/DeveloperError","../../core/baseUtil","./resouces"],function(e,t,o,n){var i=function(e,n){if(this._contMap=e,this._options=n,this._resourceRootUrl=o.getBaseUrl()+"layer/FiresPreventionPlot2",this._customStyles=n.customStyles,!n.firesPreventionPlotsSource)throw new t("firesPreventionPlotsSource参数为必填项。");this._firesPreventionPlotsSource=n.firesPreventionPlotsSource,this._selectedFeature=null,this.draw3DBorder=!0,this._evnts=[];var i=this;ol.layer.Vector.call(this,{source:this._firesPreventionPlotsSource,style:function(e){return[i._styleFunction(e)]}}),this._contMap.scene.on("pointermove",function(e){var t=e.feature;t&&e.olLayer==i?(i._contMap.scene.map2d.getViewport().style.cursor="pointer",i.highLightFeature(t)):(i._contMap.scene.map2d.getViewport().style.cursor="",i.highLightFeature(null))}),this._contMap.scene.on("pointerclick",function(e){var t=e.feature;if(t&&e.olLayer==i)for(var o=0;o<i._evnts.length;o++)"layerclick"===i._evnts[o].eventType&&i._evnts[o].callback.call(i,t)})};return ol.inherits(i,ol.layer.Vector),e(i.prototype,{options:{get:function(){return this._options}},customStyles:{get:function(){return this._customStyles}},firesPreventionPlotsSource:{get:function(){return this._firesPreventionPlotsSource}},selectedFeature:{get:function(){return this._selectedFeature}}}),i.prototype._styleFunction=function(e,t){if(e.unSelectedStyle)return e.unSelectedStyle;var o,i,r=e.get("plotInfo").geoType,s=e.get("plotInfo").style,a=s.split("|"),l=a[0];return"自定义"==l?(i=this._getUnSelectedCustomStyle(r,a[1],e,t),o=this._getSelectedCustomStyle(r,a[1],e,t)):(i=n.styles[r][l](this._resourceRootUrl,!1,a[1]),o=n.styles[r][l](this._resourceRootUrl,!0,a[1])),e.unSelectedStyle=i,e.selectedStyle=o,e.unSelectedStyle},i.prototype._getUnSelectedCustomStyle=function(e,t,o,n){switch(e){case 1:return this._getUnSelectedPointCustomStyle(t,o,n);case 2:return this._getUnSelectedPolylineCustomStyle(t,o,n);case 3:return this._getUnSelectedPolygonCustomStyle(t,o,n)}},i.prototype._getUnSelectedPointCustomStyle=function(e,t,o){var n=this._customStyles.point[e];return new ol.style.Style({image:n.icon?new ol.style.Icon({anchor:n.icon.normal.anchor,src:n.icon.normal.url,offset:n.icon.normal.offset,size:n.icon.normal.size,opacity:n.icon.normal.opacity,scale:n.icon.normal.scale}):undefinded,text:n.label?new ol.style.Text({textAlign:"left",font:n.label.font?n.label.font:"10px sans-serif",text:t.get("plotInfo")[n.label.textFiled],fill:new ol.style.Fill({color:n.label.fillColor}),stroke:new ol.style.Stroke(n.label.stroke),offsetY:n.label.offsetY,offsetX:n.label.offsetX}):void 0})},i.prototype._getUnSelectedPolylineCustomStyle=function(e,t,o){var n=this._customStyles.polyline[e].normal;return new ol.style.Style({stroke:new ol.style.Stroke(n)})},i.prototype._getUnSelectedPolygonCustomStyle=function(e,t,o){var n=this._customStyles.polygon[e].normal;return new ol.style.Style({stroke:new ol.style.Stroke(n.border),fill:new ol.style.Fill(n.fill)})},i.prototype._getSelectedCustomStyle=function(e,t,o,n){switch(e){case 1:return this._getSelectedPointCustomStyle(t,o,n);case 2:return this._getSelectedPolylineCustomStyle(t,o,n);case 3:return this._getSelectedPolygonCustomStyle(t,o,n)}},i.prototype._getSelectedPointCustomStyle=function(e,t,o){var n=this._customStyles.point[e];return new ol.style.Style({image:n.icon?new ol.style.Icon({anchor:n.icon.active.anchor,src:n.icon.active.url,offset:n.icon.active.offset,size:n.icon.active.size,scale:n.icon.active.scale,opacity:n.icon.active.opacity}):undefinded,text:n.label?new ol.style.Text({textAlign:"left",font:n.label.font?n.label.font:"10px sans-serif",text:t.get("plotInfo")[n.label.textFiled],fill:new ol.style.Fill({color:n.label.fillColor}),stroke:new ol.style.Stroke(n.label.stroke),offsetY:n.label.offsetY,offsetX:n.label.offsetX}):void 0})},i.prototype._getSelectedPolylineCustomStyle=function(e,t,o){var n=this._customStyles.polyline[e].active;return new ol.style.Style({stroke:new ol.style.Stroke(n)})},i.prototype._getSelectedPolygonCustomStyle=function(e,t,o){var n=this._customStyles.polygon[e].active;return new ol.style.Style({stroke:new ol.style.Stroke(n.border),fill:new ol.style.Fill(n.fill)})},i.prototype.highLightFeature=function(e){null!=this._selectedFeature&&(this._selectedFeature.setStyle(null),this._selectedFeature=null),null!=e&&(e.setStyle(e.selectedStyle),this._selectedFeature=e)},i.prototype.on=function(e,t){this._evnts.push({eventType:e,callback:t})},i.prototype.un=function(e,t){for(var o=-1,n=0;n<this._evnts.length;n++)if(this._evnts[n].eventType===e&&this._evnts[n].callback===t){o=n;break}o!==-1&&this._evnts.splice(o,1)},i}),define("layer/FiresPreventionPlot/FiresPreventionPlotSource",["../../core/defineProperties"],function(e){var t=function(){this._plotsDataSet=[],ol.source.Vector.call(this,{})};return ol.inherits(t,ol.source.Vector),e(t.prototype,{plotsDataSet:{get:function(){return this._plotsDataSet}}}),t.prototype.addPlots=function(e){this._plotsDataSet.push(e);for(var t in e.plotInfos){var o=e.plotInfos[t];this.addPlotInfo(o)}},t.prototype.addPlotInfo=function(e){var t=new ol.format.EsriJSON,o=t.readGeometry(e.geometry,{featureProjection:"EPSG:3857"}),n=new ol.Feature(o);n.setProperties({plotInfo:e},!0),n.setId(e.id),n.setProperties({altitudeMode:"clampToGround"},!0),this.addFeature(n)},t.prototype.removePlots=function(e){for(var t=-1,o=0;o<this._plotsDataSet.length;o++){var n=this._plotsDataSet[o];if(n==e){t=o;break}}t!=-1&&this._plotsDataSet.splice(t,1);for(var o=0;o<e.plotInfos.length;o++){var i=e.plotInfos[o],r=this.getFeatureById(i.id);null!=r&&this.removeFeature(r)}},t.prototype.clearPlots=function(){this._plotsDataSet.splice(0,this._plotsDataSet.length),this.clear(!1)},t}),define("layer/CustomLabelLayer",["../core/defineProperties","../core/loadJsonp","../core/baseUtil","./BaseLabelLayer"],function(e,t,o,n){var i=function(e,t){this._config=t;var i=o.assign({},t);n.call(this,e,i)};return ol.inherits(i,n),i.prototype._getVectorSource=function(){new ol.Collection;return new ol.source.Vector({features:this.features})},i.prototype.addData=function(e,t,o){var n=[e,t];n=ol.proj.transform(n,"EPSG:4326",this._contMap.viewControl.proj);var i=new ol.geom.Point(n,"XY"),r=new ol.Feature({geometry:i});r.setProperties(o,!0),this.getSource().addFeature(r)},i.prototype.clearData=function(){this.getSource().clear()},i}),define("layer/SearchResult/resouces",["../../core/resources"],function(e){var t={styles:{1:function(t,o){return new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:e.mapIcon,offset:t?[18*o,166]:[18*o,139],size:[18,27]})})},2:function(e){return new ol.style.Style({stroke:new ol.style.Stroke({color:e?[255,255,0,1]:"red",width:2})})},3:function(e){return new ol.style.Style({stroke:new ol.style.Stroke({color:e?[255,255,0,1]:"red",width:2}),fill:new ol.style.Fill({color:[255,0,0,.1]})})}}};return t}),define("layer/SearchResult/SearchResultLayer",["../../core/defineProperties","../../core/DeveloperError","./resouces","../../core/EventObject"],function(e,t,o,n){var i=function(e,o){if(this._contMap=e,this._options=o,!o.searchResultSource)throw new t("searchResultSource参数为必填项。");this._searchResultSource=o.searchResultSource,this._selectedFeature=null,this.draw3DBorder=!0;var n=this;ol.layer.Vector.call(this,{source:this._searchResultSource,style:function(e,t){return[n._styleFunction(e,t)]}}),this._contMap.scene.on("pointermove",function(e){var t=e.feature;t&&e.olLayer==n?(n._contMap.scene.map2d.getViewport().style.cursor="pointer",n.highLightFeature(t)):(n._contMap.scene.map2d.getViewport().style.cursor="",n.highLightFeature(null));for(var o=0;o<n._evnts.length;o++)"pointermove"===n._evnts[o].eventType&&n._evnts[o].callback.call(n,t)}),this._contMap.scene.on("pointerclick",function(e){var t=e.feature;if(t&&e.olLayer==n)for(var o=0;o<n._evnts.length;o++)"layerclick"===n._evnts[o].eventType&&n._evnts[o].callback.call(n,t)})};ol.inherits(i,ol.layer.Vector),e(i.prototype,{options:{get:function(){return this._options}},searchResultSource:{get:function(){return this._searchResultSource}},selectedFeature:{get:function(){return this._selectedFeature}}});var r=new n;return i.prototype.on=r.on,i.prototype.un=r.un,i.prototype._evnts=r._evnts,i.prototype._styleFunction=function(e,t){var n=e.get("plotInfo").geoType,i=e.get("resultItemIndex");return unSelectedStyle=o.styles[n](!1,i),selectedStyle=o.styles[n](!0,i),e.unSelectedStyle=unSelectedStyle,e.selectedStyle=selectedStyle,t<this._options.maxResolutionOfAnyoneButPoint?e.unSelectedStyle:1==n?e.unSelectedStyle:new ol.style.Style},i.prototype.highLightFeature=function(e){null!=this._selectedFeature&&(this._selectedFeature.setStyle(null),this._selectedFeature=null),null!=e&&(e.setStyle(e.selectedStyle),this._selectedFeature=e)},i.prototype.highLightResultItem=function(e){this._searchResultSource.forEachFeature(function(t){t.get("resultItemIndex")==e&&1==t.get("plotInfo").geoType&&this.highLightFeature(t)},this)},i}),define("layer/SearchResult/SearchResultSource",["../../core/defineProperties"],function(e){var t=function(){this._resultItems=[],ol.source.Vector.call(this,{})};return ol.inherits(t,ol.source.Vector),e(t.prototype,{resultItems:{get:function(){return this._resultItems}}}),t.prototype.addResultItem=function(e){this._resultItems.push(e);for(var t=0;t<e.elements.length;t++){var o=e.elements[t],n=new ol.format.EsriJSON,i=n.readGeometry(o.geometry,{featureProjection:"EPSG:3857"}),r=new ol.Feature(i);r.setProperties({plotInfo:o,resultItemIndex:e.index},!0),r.setProperties(e.attrs,!0),r.setProperties({altitudeMode:"clampToGround"},!0),this.addFeature(r)}},t.prototype.clearResultItems=function(){this._resultItems.splice(0,this._resultItems.length),this.clear(!1)},t}),define("layer/GoogleOfflineLayer",[],function(){var e=function(e){this._url=e.url,this._maxZoom=e.maxZoom||9,this._minZoom=e.minZoom||0,this._mapExtent=[-20037508.342787,-20037508.342787,20037508.342787,20037508.342787],this._tilePixelRatio=1,this._fromProject="EPSG:102100",this._toProject="EPSG:3857",this._urlFunction=function(t){var o=t[0],n=t[1],i=-t[2]-1,r=Math.pow(2,o)-i-1;return e.url.replace("{z}",o.toString()).replace("{y}",r.toString()).replace("{x}",n,toString())};var t=new ol.layer.Tile({extent:ol.proj.transformExtent(this._mapExtent,this._fromProject,this._toProject),source:new ol.source.XYZ({tileUrlFunction:this._urlFunction,tilePixelRatio:this._tilePixelRatio,minZoom:this._minZoom,maxZoom:this._maxZoom})});return t};return e.prototype.on=function(){},e}),define("layer/MultiPointLayer",["../core/baseUtil"],function(e){var t=function(e){this._options=e};return t.prototype.init=function(){var t=this._options,o=t.iconUrl||e.getAbsoluteUrl("./assets/common/deviceIcon.png");if(t.cluster===!1)var n=function(e,t){var n=1;t<=1e3&&(n=1.25),2500<=t&&t<5e3&&(n=.75),5e3<=t&&t<1e4&&(n=.5),1e4<=t&&(n=.25);var i=new ol.style.Style({image:new ol.style.Icon({src:o,scale:n})});return i};else var n=t.style||function(e){var t;t=e?e.get("features").length||1:1;var n;return t>2&&t<=10?n||(n=new ol.style.Style({image:new ol.style.Circle({radius:t>21?21:t,stroke:new ol.style.Stroke({color:"#FFFFFF"}),fill:new ol.style.Fill({color:"#3399CC"})}),text:new ol.style.Text({text:t.toString()})})):t>10&&t<=20?n||(n=new ol.style.Style({image:new ol.style.Circle({radius:t>21?21:t-5,stroke:new ol.style.Stroke({color:"#FFFFFF"}),fill:new ol.style.Fill({color:"#3399CC"})}),text:new ol.style.Text({text:t.toString()})})):t>20&&t<=100?n||(n=new ol.style.Style({image:new ol.style.Circle({radius:15,stroke:new ol.style.Stroke({color:"#FFFFFF"}),fill:new ol.style.Fill({color:"#32CD32"})}),text:new ol.style.Text({text:t.toString()})})):t>100&&t<=200?n||(n=new ol.style.Style({image:new ol.style.Circle({radius:15,stroke:new ol.style.Stroke({color:"#FFFFFF"}),fill:new ol.style.Fill({color:"#FF7F24"})}),text:new ol.style.Text({text:t.toString()})})):t>200?n||(n=new ol.style.Style({image:new ol.style.Circle({radius:10,stroke:new ol.style.Stroke({color:"#FFFFFF"}),fill:new ol.style.Fill({color:"#FF0000"})}),text:new ol.style.Text({text:t.toString()})})):n||(n=new ol.style.Style({image:new ol.style.Icon({src:o})})),n};var i,r=t.distance||30;if(t.vectorSource)i=t.vectorSource;else{for(var s=t.pointsData,a=new Array(s.length),l=0;l<s.length;l++)a[l]=new ol.Feature(new ol.geom.Point(s[l]));i=new ol.source.Vector({features:a})}var c=new ol.source.Cluster({distance:r,source:i,projection:t.projection}),u=new ol.layer.Vector({source:c,style:n});return u.skipSynchronize=!0,u},t.prototype.clusterToCesium=function(e,t,o){function n(){Cesium.defined(v)?(v(),v=void 0):v=l.clustering.clusterEvent.addEventListener(function(e,t){t.label.show=!1,t.billboard.show=!0,t.billboard.verticalOrigin=Cesium.VerticalOrigin.BOTTOM,t.point.show=!0,e.length>=200?(t.point=y(e.length),t.label.text=e.length.toString(),t.label.scale=.5):e.length>=100?(t.point=y(e.length),t.label.text=e.length.toString(),t.label.scale=.5):e.length>=20?(t.point=y(e.length),t.label.text=e.length.toString(),t.label.scale=.5):e.length>=10?(t.point=y(e.length),t.label.text=e.length.toString(),t.label.scale=.5):e.length>=2&&(t.point=y(e.length),t.label.text=e.length.toString(),t.label.scale=.5)});var e=l.clustering.pixelRange;l.clustering.pixelRange=0,l.clustering.pixelRange=e}var i,r=e.getStyleFunction(),s=r().getImage().getSrc();if(e instanceof ol.layer.Vector){var a=e.getSource();a instanceof ol.source.Cluster&&(a=a.getSource(),i=a.getFeatures())}if(i){for(var l=new Cesium.CustomDataSource,c=0;c<i.length;c++){var u,g=i[c],h=g.getGeometry(),d=h.getCoordinates();u=o&&"EPSG:4326"===o.getCode()?Cesium.Cartesian3.fromDegrees(d[0],d[1]):Cesium.Cartesian3.fromDegrees(ol.proj.toLonLat(d)[0],ol.proj.toLonLat(d)[1]),l.entities.add({position:u,billboard:{image:s}})}var p=15,f=2,m=!0;l.clustering.enabled=m,l.clustering.pixelRange=p,l.clustering.minimumClusterSize=f;var v,y=function(e){var t,o;e>=200?(t=Cesium.Color.RED,o=20):e>=100?(t=Cesium.Color.ORANGE,o=20):e>=20?(t=Cesium.Color.YELLOW,o=20):e>=10?(t=Cesium.Color.GREEN,o=e):e>=2&&(t=Cesium.Color.GREEN,o=e);var n=new Cesium.PointGraphics({color:t,pixelSize:o});return n};n(),t.dataSource=l}},t}),define("layer/tianditu/tianditu",[],function(){function e(){}return e.prototype.setSourceParam=function(e){this._sourceParam=e},e.prototype.createSourceParam=function(e){return this._sourceParam[e]},e.prototype.createWMTS=function(e){for(var t=this._projection.getExtent(),o=ol.extent.getWidth(t)/256,n=new Array(14),i=new Array(14),r=0;r<=e.maxLevel;++r)n[r]=o/Math.pow(2,r),i[r]=r;var s=new ol.source.WMTS({url:e.url,layer:e.layer,matrixSet:e.matrixSet,format:e.format,projection:this._projection,tileGrid:new ol.tilegrid.WMTS({origin:ol.extent.getTopLeft(t),resolutions:n,matrixIds:i}),style:e.style,wrapX:!0});return s},e.prototype.createTile=function(e){var t=new ol.layer.Tile;return t.setSource(e),t},e.prototype.setContMap=function(){for(var e=this.createSourceParam(this._proj),t=[],o=0;o<e.length;o++){var n=this.createWMTS(e[o]),i=this.createTile(n);t.push(i)}this._layerGroup.setLayers(new ol.Collection(t))},e}),define("layer/tianditu/tiandituImage",["./tianditu"],function(e){function t(e,t){this._proj=e,this._projection=e,this._projection=ol.proj.get(e),this._layerGroup=new ol.layer.Group,this._layerGroup.name=t,this._sourceParam;var o={"EPSG:3857":[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_w/wmts",layer:"img",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS"},{name:"天地图卫星影像注记图",url:"http://t0.tianditu.com/cia_w/wmts",layer:"cia",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS"}],"EPSG:4326":[{name:"天地图卫星影像图",url:"http://t0.tianditu.com/img_c/wmts",layer:"img",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS"},{name:"天地图卫星影像注记图",url:"http://t0.tianditu.com/cia_c/wmts",layer:"cia",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS"}]};return this.setSourceParam(o),this.setContMap(),this._layerGroup}return t.prototype=new e,t}),define("layer/tianditu/tiandituVector",["./tianditu"],function(e){function t(e,t){this._proj=e,this._projection=e,this._projection=ol.proj.get(e),this._layerGroup=new ol.layer.Group,this._layerGroup.name=t,this._sourceParam;var o={"EPSG:3857":[{name:"天地图矢量地图",url:"http://t0.tianditu.com/vec_w/wmts",layer:"vec",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS"},{name:"天地图全球地形中文注记服务",url:"http://t0.tianditu.com/cta_w/wmts",layer:"cta",matrixSet:"w",format:"tiles",style:"default",maxLevel:18,type:"WMTS"}],"EPSG:4326":[{name:"天地图矢量地图",url:"http://t0.tianditu.com/vec_c/wmts",layer:"vec",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS"},{name:"天地图全球地形中文注记服务",url:"http://t0.tianditu.com/cta_c/wmts",layer:"cta",matrixSet:"c",format:"tiles",style:"default",maxLevel:18,type:"WMTS"}]};return this.setSourceParam(o),this.setContMap(),this._layerGroup}return t.prototype=new e,t}),define("layer/tianditu/tiandituWMTS",[],function(){var e=function(e){for(var t=ol.proj.get(e.proj),o=t.getExtent(),n=ol.extent.getWidth(o)/256,i=new Array(e.maxLevel),r=new Array(e.maxLevel),s=0,a=e.maxLevel;s<=a;++s)i[s]=n/Math.pow(2,s),r[s]=s;var l=new ol.source.WMTS({url:e.url,layer:e.layer,matrixSet:e.matrixSet,format:e.format,projection:t,tileGrid:new ol.tilegrid.WMTS({origin:ol.extent.getTopLeft(o),resolutions:i,matrixIds:r}),style:e.style,wrapX:!0}),c=new ol.layer.Tile({source:l});return c};return e}),define("layer/OverLay",[],function(){var e=function(e,t){var o=document.createElement("div"),n=document.createElement("a"),i=document.createElement("div"),r=document.getElementById("map");r.appendChild(o),o.appendChild(n),o.appendChild(i),o.setAttribute("class","ol-popup"),o.setAttribute("id","popup"),n.setAttribute("id","popup-closer"),n.setAttribute("class","ol-popup-closer"),i.setAttribute("id","popup-content"),n.onclick=function(){return s.setPosition(void 0),n.blur(),!1};var s=new ol.Overlay({element:o,autoPan:!0,autoPanAnimation:{duration:250}});return i.innerHTML=e+"<br>"+t,s.setPosition(e),s};return e}),define("layer/VectorLayer",[],function(){var e=function(e){if("point"===e.type)var t=new ol.source.Vector({features:[new ol.Feature(new ol.geom.Point(e.coordinates))]});else if("polyline"===e.type)var t=new ol.source.Vector({features:[new ol.Feature(new ol.geom.LineString(e.coordinates))]});else if("polygon"===e.type)var t=new ol.source.Vector({features:[new ol.Feature(new ol.geom.Polygon([e.coordinates]))]});var o=new ol.layer.Vector({source:t});return o};return e}),define("layer/WMSLayer",[],function(){var e=function(e){this.options=e;var t=new ol.source.TileWMS({url:e.url,params:{LAYERS:e.LAYERS},serverType:e.serverType}),o=new ol.layer.Tile({source:t});return o};return e}),define("measure/MeasureHelpers",["./measureOl","../draw/drawCesium","../draw/core","../draw/PolygonPrimitive","../draw/PolylinePrimitive"],function(e,t,o,n,i){function r(o){this._contMap=o,this._measureOl=new e(this._contMap);var n=new ol.Collection,i=new ol.source.Vector({features:n}),r=new ol.layer.Vector({source:i,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 0, 0.4)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})});this._measureOl.source=i,this._measureOl.vectorLayer=r,this._vectorLayer=this._measureOl.getLayer(),this._drawCesium=new t(this._contMap),this._scene,this._flag=0,this._is3d=!1,this._dataSourceTab}var o=new o;return r.prototype.init=function(){return this._is3dMap()?(this._is3d=!0,void(1==this._flag&&1==this._flag&&(this._drawCesium.drawSource=this._vectorLayer,this._drawCesium.scene=this._contMap.scene.map3d.getCesiumScene(),this._scene=this._contMap.scene.map3d.getCesiumScene(),this._drawCesium.init()))):void(this._is3d=!1)},r.prototype.measureLength=function(e){e(""),this.init(),this._is3d?(this._drawCesium.drawPolyline(),this._create2dPolylineTip(e)):this._measureOl.addInteraction("LineString",e)},r.prototype._create2dPolylineTip=function(e){var t=this;t._drawCesium.addListener("polylineCreated",function(n){var i=n.positions;if(i){var r=o.coord3dTo2d(i,t._scene),s=new ol.geom.LineString(r),a=new ol.Feature(s);t._vectorLayer.getSource().getFeaturesCollection().push(a),t._dataSourceTab="",t._dataSourceTab=t._dataSourceTab+"<i>距离:</i>"+t._measureOl.formatLength(s),t._dataSourceTab=t._dataSourceTab+"<br><i>高差:</i>"+o.coord3dHeight(i,t._scene)+"m",e(t._dataSourceTab)}})},r.prototype.measureArea=function(e){this.init(),e(""),this._is3d?(this._drawCesium.drawPolygon(),this._create2dPolygonTip(e)):this._measureOl.addInteraction("Polygon",e)},r.prototype._create2dPolygonTip=function(e){var t=this;t._drawCesium.addListener("polygonCreated",function(n){var i=n.positions;if(i){var r=o.coord3dTo2d(i,t._scene),s=new ol.geom.Polygon([r]),a=new ol.Feature(s);t._vectorLayer.getSource().getFeaturesCollection().push(a),t._dataSourceTab="",t._dataSourceTab=t._dataSourceTab+"<i>面积:</i>"+t._measureOl.formatArea(s),e(t._dataSourceTab)}})},r.prototype._is3dMap=function(){return this._contMap._widgets.viewModeSwitcher._is3dMap&&(this._flag=this._flag+1),this._contMap._widgets.viewModeSwitcher._is3dMap},r.prototype.clear=function(e){if(e(""),this._vectorLayer){this._vectorLayer.getSource().clear();for(var t=document.getElementsByClassName("tooltip tooltip-static"),o=t.length,n=0;n<o;n++)t[0].parentElement.parentNode.removeChild(t[0].parentElement)}},r}),require(["ContMap","core/config","layer/FiresPreventionPlot/FiresPreventionPlotLayer","layer/FiresPreventionPlot/FiresPreventionPlotSource","layer/FiresPreventionPlot2/FiresPreventionPlotLayer2","layer/FiresPreventionPlot2/FiresPreventionPlotSource2","layer/EsriLabelLayer","layer/CustomLabelLayer","layer/SearchResult/SearchResultLayer","layer/SearchResult/SearchResultSource","layer/GoogleOfflineLayer","layer/MultiPointLayer","layer/tianditu/tiandituImage","layer/tianditu/tiandituVector","layer/tianditu/tiandituWMTS","layer/OverLay","layer/EsriOffline/EsriOfflineDataSource","layer/VectorLayer","layer/WMSLayer","widgets/ToolBoxPanel/Measure","draw/DrawHelpers","draw/MilitaryPlot/MilitaryPlot","measure/MeasureHelpers","measure/measureOl","terrain/ContTmsTerrainProvider"],function(e,t,o,n,i,r,s,a,l,c,u,g,h,d,p,f,m,v,y,_,b,w,S,C,E){"use strict";var T="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};T.Cont={},T.Cont.ContMap=e,T.Cont.config=t,T.Cont.FiresPreventionPlotLayer=o,T.Cont.FiresPreventionPlotSource=n,T.Cont.FiresPreventionPlotLayer2=i,T.Cont.FiresPreventionPlotSource2=r,T.Cont.EsriLabelLayer=s,T.Cont.CustomLabelLayer=a,T.Cont.SearchResultLayer=l,T.Cont.SearchResultSource=c,T.Cont.GoogleOfflineLayer=u,T.Cont.MultiPointLayer=g,T.Cont.TiandituImage=h,T.Cont.TiandituVector=d,T.Cont.TiandituWMTS=p,T.Cont.OverLay=f,T.Cont.EsriOfflineDataSource=m,T.Cont.VectorLayer=v,T.Cont.WMSLayer=y,T.Cont.Measure=_,T.Cont.DrawHelpers=b,T.Cont.MilitaryPlot=w,T.Cont.MeasureHelpers=S,T.Cont.MeasureOl=C,T.Cont.ContTmsTerrainProvider=E,T.ContWebGIS3={},T.ContWebGIS3.ContMap=e,T.ContWebGIS3.config=t,T.ContWebGIS3.FiresPreventionPlotLayer=o,T.ContWebGIS3.FiresPreventionPlotSource=n,T.ContWebGIS3.FiresPreventionPlotLayer2=i,T.ContWebGIS3.FiresPreventionPlotSource2=r,T.ContWebGIS3.EsriLabelLayer=s,T.ContWebGIS3.CustomLabelLayer=a,T.ContWebGIS3.SearchResultLayer=l,T.ContWebGIS3.SearchResultSource=c,T.ContWebGIS3.GoogleOfflineLayer=u,T.ContWebGIS3.MultiPointLayer=g,T.ContWebGIS3.TiandituImage=h,T.ContWebGIS3.TiandituVector=d,T.ContWebGIS3.TiandituWMTS=p,T.ContWebGIS3.OverLay=f,T.ContWebGIS3.EsriOfflineDataSource=m,T.ContWebGIS3.VectorLayer=v,T.ContWebGIS3.WMSLayer=y,T.ContWebGIS3.Measure=_,T.ContWebGIS3.DrawHelpers=b,T.ContWebGIS3.MilitaryPlot=w,T.ContWebGIS3.MeasureHelpers=S,T.ContWebGIS3.MeasureOl=C,T.ContWebGIS3.ContTmsTerrainProvider=E},void 0,!0),requirejs.config({baseUrl:"../src"})});